function organizeOldSettings(t){if(null!=t.settings)return t;let e={};return e.dark_mode=t["dark-mode"],e.settings={},e.settings.system_theme=t["system-theme"],e.settings.accent_theme=t["dynamic-theme"],e.settings.active_color={},e.settings.active_color.hex=t["active-color-hex"],t["active-color"].startsWith("custom")&&(t["active-color"]=t["active-color"].replace("custom","")),e.settings.active_color.name=t["active-color"],e.settings.custom_colors=t["custom-colors"],e}function updateSettings(t,e){for(const[n,l]of Object.entries(t))null!=e[n]&&("object"==typeof e[n]?t[n]=updateSettings(t[n],e[n]):t[n]=e[n]);return t}function initialize(t,e){null!=t&&null!=t&&t!=[]||(t=defaults);for(const[n,l]of Object.entries(t))null!=e&&null!=e[n]&&("object"==typeof e[n]?t[n]=updateSettings(t[n],e[n]):t[n]=e[n]),chrome.storage.sync.set({[n]:t[n]})}chrome.runtime.onInstalled.addListener((function(t){"install"==t.reason?initialize(defaults):"update"==t.reason&&chrome.storage.sync.get(null).then((t=>{null!=(t=organizeOldSettings(t))?(chrome.storage.sync.clear(),initialize(defaults,t)):(chrome.storage.sync.clear(),initialize(defaults))}))}));const defaults={dark_mode:!0,settings:{system_theme:!1,accent_theme:!1,active_color:{name:"classic",hex:"#303030"},custom_colors:["nil","nil","nil","nil","nil"],addons:{darken_weekends:!1}}};