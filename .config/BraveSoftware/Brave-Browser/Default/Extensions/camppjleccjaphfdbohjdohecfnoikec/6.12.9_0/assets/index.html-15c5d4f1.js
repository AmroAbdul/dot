import"./index-175b7472.js";import{c as v,j as e,r as n}from"./client-64cc3330.js";import{g as N}from"./index-1a12ff06.js";import{S as u}from"./merlin-logo-6bb5639f.js";import{D as o,$ as k,a0 as P}from"./index-6400eb41.js";/* empty css             */import"./i18n-1581a855.js";import{L as S}from"./hook-90290a85.js";import{u as I}from"./useMedia-691d1918.js";import{u as E}from"./useTranslation-b0b08d2e.js";const T=["https://.*.hdblog.it/.*"];function B(){const{t:s}=E(),[i,r]=n.useState(!1),[a,b]=n.useState(null),[p=null]=S({instance:new N({area:"local"}),key:"userThemePreference"}),f=I(["(prefers-color-scheme: dark)"],[!0],!1),c=p==="system"?f?"dark":"light":p,[g,w]=n.useState(!1),y=async()=>{a?await o.tabs.reload(a.id):await o.tabs.query({active:!0,currentWindow:!0}).then(t=>{o.tabs.reload(t[0].id)}),o.action.setPopup({popup:"",tabId:a.id}).then(()=>{r(!1),window.close()})};n.useEffect(()=>{c&&i&&(document.documentElement.className+=" "+c)},[c,i]),n.useEffect(()=>{(async()=>{try{const t=(await o.tabs.query({active:!0,currentWindow:!0}))[0];if(b(t),await k()){o.action.setPopup({popup:o.runtime.getURL("/popup.html"),tabId:t.id}).then(()=>{r(!0),w(!0)});return}if(t.url=="https://getmerlin.in/chat"){o.action.setPopup({popup:"",tabId:t.id}).then(()=>{r(!1),window.close()});return}if(t.url.includes("chrome://")||t.url.includes("edge://")||t.url.includes("extension://"))t.url.includes("shortcut")||o.tabs.create({url:"https://getmerlin.in/chat"}),o.action.setPopup({popup:"",tabId:t.id}).then(()=>{r(!1),window.close()});else{let x=0,l=!1;const j=4;for(;x<j&&!l;)await new Promise(d=>setTimeout(d,50)),x++,l=await o.tabs.sendMessage(t.id,{data:{from:"extPopupButton"}}).then(()=>!0).catch(d=>!1);if(l){o.action.setPopup({popup:"",tabId:t.id}).then(()=>{r(!1),window.close()});return}o.tabs.sendMessage(t.id,{data:{from:"extPopupButton"}}).then(()=>{o.action.setPopup({popup:"",tabId:t.id}).then(()=>{r(!1),window.close()})}).catch(d=>{r(!0)})}}catch{r(!0)}})()},[]);function _(){return i?g?e.jsxs("div",{className:"bg-background flex h-64 w-96 flex-col justify-center gap-2 px-3 py-2 text-zinc-100",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(u,{className:"h-8 w-8"}),e.jsx("div",{className:"text-lg font-medium",children:s("popup_index.shortcut_conflict")})]}),e.jsxs("div",{className:"text-zinc-400",children:[e.jsxs("div",{children:[s("popup_index.message")," ",e.jsx("kbd",{className:"rounded-lg border border-gray-500 bg-gray-600 px-1 py-0.5 text-xs font-semibold text-gray-100",children:s("popup_index.ctrl_m")})," ",s("popup_index.here_what_to_do")]}),e.jsxs("ul",{className:"my-2 list-inside list-disc",children:[e.jsx("li",{children:s("popup_index.goto_shortcut")}),e.jsx("li",{children:s("popup_index.switch_custom")})]}),s("popup_index.this_ensures")," ",e.jsx("kbd",{className:"rounded-lg border border-gray-500 bg-gray-600 px-1 py-0.5 text-xs font-semibold text-gray-100",children:s("popup_index.ctrl_m")})," ",s("popup_index.wont_summon")]}),e.jsx("button",{type:"button",onClick:()=>{const t=P(),m=t==="firefox"?"about:addons":t==="edge"?"edge://extensions/shortcuts":"chrome://extensions/shortcuts";o.tabs.create({active:!0,url:m})},className:"border-cornblue-500 bg-cornblue-600 hover:bg-cornblue-500 cursor-pointer gap-2 rounded-md border px-4 py-1.5 text-base text-zinc-50 transition-all duration-500 [border-style:solid] dark:text-zinc-900",children:s("popup_index.open_shortcut")})]}):T.some(t=>new RegExp(t).test(a.url))?e.jsxs("div",{className:"bg-background text-primary flex h-40 w-80 flex-col justify-center gap-2 px-3 py-2",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(u,{className:"h-8 w-8"}),e.jsx("div",{className:"text-lg font-medium",children:s("popup_index.not_supported")})]}),e.jsx("div",{className:"text-muted-foreground",children:s("popup_index.go_to_magic")}),e.jsx("button",{type:"button",onClick:()=>{o.tabs.create({url:"https://getmerlin.in/chat"})},className:"border-cornblue-500 bg-cornblue-600 hover:bg-cornblue-500 text-primary cursor-pointer gap-2 rounded-md border px-4 py-1.5 text-base transition-all duration-500 [border-style:solid]",children:s("popup_index.open_magic")})]}):e.jsxs("div",{className:"bg-background text-primary flex h-40 w-80 flex-col justify-center gap-2 px-3 py-2",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(u,{className:"h-8 w-8"}),e.jsx("div",{className:"text-lg font-medium",children:s("popup_index.merlin_refresh")})]}),e.jsx("div",{className:"text-muted-foreground",children:s("popup_index.plz_refresh")}),e.jsx("button",{type:"button",onClick:y,className:"border-cornblue-500 bg-cornblue-600 hover:bg-cornblue-500 text-primary cursor-pointer gap-2 rounded-md border px-4 py-1.5 text-base transition-all duration-500 [border-style:solid]",children:s("popup_index.refresh")})]}):null}return e.jsx("div",{className:"bg-background h-full w-full",children:_()})}const h=document.getElementById("root");h&&v(h).render(e.jsx(B,{}));
