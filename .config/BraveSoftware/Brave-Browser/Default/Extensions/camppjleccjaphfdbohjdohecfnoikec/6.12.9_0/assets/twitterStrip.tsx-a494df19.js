import{c as w,j as c,r as E}from"./client-64cc3330.js";import{g,P as S,S as x,U as v}from"./index-1a12ff06.js";import{L as C}from"./hook-90290a85.js";import{g as q}from"./index-6400eb41.js";import{C as P}from"./index-8e3fd625.js";import{F as A}from"./index-2469c0ce.js";import{A as R}from"./index-5fbb8478.js";import{T as O}from"./themeContext-73b6440c.js";import{q as j,a as W}from"./backend-8962bc7f.js";import{c as F}from"./index-75aa899c.js";import{d as h}from"./debounce-c70d88e0.js";import{v as M}from"./v4-4a60fe23.js";import{P as I}from"./PersistQueryClientProvider-dcb1f9d7.js";import"./index-a295f481.js";import"./purify.es-8e338605.js";import"./index-876a044c.js";import"./button-5c866ab2.js";import"./utils-01642ffa.js";import"./useTranslation-b0b08d2e.js";import"./index-82863451.js";import"./motion-064cf623.js";import"./createLucideIcon-cc1e4b70.js";import"./index-eb167f60.js";import"./analytics-4a9d4e40.js";import"./useAsyncWithPromise-a02bc426.js";import"./useSSE-a5deda20.js";import"./languageLogoMap-4245085e.js";import"./createReactComponent-3abc0bad.js";import"./index-5f29b16d.js";import"./foyerLogo-c0f0d78f.js";import"./index-958f621a.js";import"./useSharedUserSettings-15caf5a1.js";import"./useOnClickOutside-6cd227e1.js";import"./useUserSettings-eb91a32a.js";import"./fuzzysort-6a5075ee.js";import"./IconX-f6f2534f.js";import"./IconCheck-c9ab9461.js";import"./IconSend-7465868f.js";import"./IconReload-76a665f0.js";import"./IconExclamationCircle-954ba15b.js";import"./IconChevronRight-3a7ad62a.js";import"./IconLanguage-d550ce4a.js";import"./IconSettings-b145c3ad.js";import"./IconBulb-01a33b5a.js";import"./IconHeadset-4d4a643f.js";import"./useMedia-691d1918.js";const L=async()=>{var s,m;const i=await q();if(i&&!i.fabStrip.twitter.visible)return;const e=(m=(s=i.fabStrip)==null?void 0:s.twitter)==null?void 0:m.containerClassname,o=await N(e);o&&!o.querySelector("merlin-component")&&T(t=>o.insertBefore(t,o.firstChild.nextSibling));const n=new MutationObserver(h(()=>{try{const r=document.querySelector("[id^='typeaheadDropdownWrapped-']"),a=document.querySelector(".merlin.fabStrip");r?a&&(a.style.zIndex="0"):a.style.zIndex="1000"}catch{}const t=document.querySelectorAll(e||".css-175oi2r.r-1iusvr4.r-16y2uox.r-1777fci.r-1h8ys4a.r-1bylmt5.r-13tjlyg.r-7qyjyx.r-1ftll1t");if(t.length>0)for(let r=0;r<t.length;r++)t[r].querySelector("merlin-component")||T(a=>t[r].insertBefore(a,t[r].firstChild.nextSibling))},300)),l={childList:!0,subtree:!0};n.observe(document.body,l)},N=i=>new Promise(e=>{const o=new MutationObserver(h(()=>{const n=document.querySelector(i||".css-175oi2r.r-1iusvr4.r-16y2uox.r-1777fci.r-1h8ys4a.r-1bylmt5.r-13tjlyg.r-7qyjyx.r-1ftll1t");n&&(e(n),o.disconnect())},300));o.observe(document.body,{childList:!0,subtree:!0})}),T=async i=>{var b;const e=document.createElement("merlin-component");e.id="merlin-fabStrip",e.className="merlin fabStrip";const o=e.attachShadow({mode:"open"}),n=document.createElement("style");n.textContent=`${F}
    :host(.merlin.fabStrip) {
      all: initial; /* 1st rule so subsequent properties are reset. */
      position: relative;
      display: block;
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      z-index: 1000;
    }
    .fabStrip {
      all: initial; /* 1st rule so subsequent properties are reset. */
      position: relative;
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    .fabStrip ::-webkit-scrollbar {
      display: none;
      -ms-overflow-style: none;
      scrollbar-width: none;
    }
    `;const l=document.createElement("div");l.id="reactAppRoot",l.className="reactAppRoot fabStrip "+M(),o.appendChild(n),o.appendChild(l),i(e);const s={};let m=null,t=null,r=null,a=null,d=null,y="";try{if(t=e.closest('[data-testid="cellInnerDiv"], [aria-labelledby="modal-header"]'),t&&(d=t.querySelector("article"),d&&(m=d.querySelector('[data-testid="tweetText"]')),r=t.querySelector('[data-testid="attachments"]'),a=t.querySelector('article a div[dir="ltr"]')),m){const p=m.textContent;s.tweetText=p}a&&(y=a.textContent.trim(),s.postBy=y);try{if(r){const p=(b=r.textContent)==null?void 0:b.trim();p&&(s.quoteTweetText=p)}}catch{}}catch{}let u,f;d||r?(u=S.TWEET_REPLY,f=x.TWITTER.TWEET_REPLY):(u=S.TWEET,f=x.TWITTER.TWEET),w(l).render(c.jsx(B,{editor:e,contextData:s,promptsFor:u,mountOn:f}))};function B(i){const{contextData:e,editor:o,mountOn:n,promptsFor:l}=i,[s,m]=E.useState(""),[t=v]=C({instance:new g({area:"local"}),key:"UserSettings"});return t.merlinOnSocialMedia.visible&&t.merlinOnSocialMedia.twitter.visible?c.jsx(P,{children:c.jsx(R,{children:c.jsx(I,{client:j,persistOptions:{persister:W},children:c.jsx(O,{websiteOverride:!0,children:c.jsx(A,{editor:o,host:"twitter",contextData:e,promptsFor:l,dotMenuPosition:"top",mountOn:n,textareaValue:s,setTextareaValue:m})})})})}):null}L();
