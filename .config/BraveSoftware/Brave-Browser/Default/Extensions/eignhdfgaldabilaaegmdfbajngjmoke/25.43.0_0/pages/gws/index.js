"use strict";function _slicedToArray(e,a){return _arrayWithHoles(e)||_iterableToArrayLimit(e,a)||_unsupportedIterableToArray(e,a)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,a){var n;if(e)return"string"==typeof e?_arrayLikeToArray(e,a):"Map"===(n="Object"===(n={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,a):void 0}function _arrayLikeToArray(e,a){(null==a||a>e.length)&&(a=e.length);for(var n=0,c=Array(a);n<a;n++)c[n]=e[n];return c}function _iterableToArrayLimit(e,a){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var c,i,t,s,o=[],r=!0,l=!1;try{if(t=(n=n.call(e)).next,0===a){if(Object(n)!==n)return;r=!1}else for(;!(r=(c=t.call(n)).done)&&(o.push(c.value),o.length!==a);r=!0);}catch(e){l=!0,i=e}finally{try{if(!r&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(l)throw i}}return o}}function _arrayWithHoles(e){if(Array.isArray(e))return e}(()=>{var Te=document;cjce.registerTemplate("bm-p-gws",function(n,s){var L,l,o,c,d,O,_,q,F,P,i,t,r,H,m,W=!0,Y=!0,D=null,K="home",u=s.instanceParameters.productId||"search",h=cjBasics.uniqueId.generate(),G=cjBasics.uniqueId.generate(),g="0"===s.account.authuser?null:s.account.authuser,V=g?"?authuser="+g:"",b="https://www.google.com",z="https://news.google.com",Q="https://maps.google.com",J="https://consent.google.com",Z=cjBasics.navigator.contentScriptsOnSearchBlockable||cjBasics.navigator.isSafari,j=Z?Q:b,p=!cjBasics.webRequest.getWrifSupported()||cjBasics.navigator.isSafari,v=cjBasics.lang.i18n("cj_i18n_00291","Home"),$=v,f="",B="all",w=null,S=null,I="",N=null,y=[],C=!1,k=!1,T=!1,X=!cjBasics.navigator.isFirefox,A=[],ee=!1,R=cjBasics.lang.i18n("cj_i18n_00434","Search"),e="googleg",ae=("search"===u?(ee=!0,A=["all","udm_web","isch","vid","nws","shop","bks","udm_forums"]):"shopping"===u?(R=cjBasics.lang.i18n("cj_i18n_00435","Shopping"),e="shopping",B="shop"):"images"===u?(R=cjBasics.lang.i18n("cj_i18n_00488","Images"),e="images",B="isch"):"calculator"===u?(C=!0,R=cjBasics.lang.i18n("cj_i18n_00589","Calculator"),e="calculator",N="Google Calculator",T=!0):"spinner"===u?(C=!0,R=cjBasics.lang.i18n("cj_i18n_06230","Spinner"),e="calculator",N="Google Spinner",T=!0):"converter"===u?(C=!0,R=cjBasics.lang.i18n("cj_i18n_00845","Unit converter"),e="calculator",N="Unit converter",T=!0):"weather"===u?(R=cjBasics.lang.i18n("cj_i18n_00743","Weather"),e="weather",I="weather near ",T=!(N="")):"sports"===u?(C=!0,R=cjBasics.lang.i18n("cj_i18n_06342","Sports"),e="sports",N="Sports",w="spo"):"finance"===u?(C=!0,R=cjBasics.lang.i18n("cj_i18n_00412","Finance"),e="finance",N="Finance",S="MARKET_SUMMARY",T=!0):"covid19"===u?(C=!0,R=cjBasics.lang.i18n("cj_i18n_06386","Coronavirus (COVID-19)"),e="public_alerts",y=[N="coronavirus","coronavirus prevention","coronavirus stats","coronavirus treatment","coronavirus symptoms","coronavirus people also search for","coronavirus news"],a=s.darkMode?"#7F9AFF":"#1c3aa9",Y=W=a,K="covidhome"):"events"===u?(C=k=!0,R=cjBasics.lang.i18n("cj_i18n_00484","Events"),e="events",N="Events",w="htl;events"):"jobs"===u?(C=k=!0,R=cjBasics.lang.i18n("cj_i18n_06354","Jobs"),e="employ",N="Jobs",w="htl;jobs"):"splinter"===u&&(k=!0,R=cjBasics.lang.i18n("cj_i18n_06353","Education"),e="education",N="Education",w="htl;splinter"),y.push(N),"bm_cache_v33__"+u+"__query"),ne={bks:"bo",isch:"i",nws:"n",shop:"sh",vid:"yt"},ce={bks:"36",isch:"2",nws:"12",shop:"28",udm_attractions:"15",udm_forums:"18",udm_learn:"6",udm_perspectives:"4",udm_web:"14",vid:"7"},ie={2:"isch",4:"udm_perspectives",6:"udm_learn",7:"vid",12:"nws",14:"udm_web",15:"udm_attractions",18:"udm_forums",28:"shop",36:"bks"},te={all:cjBasics.lang.i18n("cj_i18n_00083","All"),bks:cjBasics.lang.i18n("cj_i18n_00019","Books"),isch:cjBasics.lang.i18n("cj_i18n_00017","Images"),nws:cjBasics.lang.i18n("cj_i18n_00018","News"),shop:cjBasics.lang.i18n("cj_i18n_00015","Shopping"),udm_attractions:cjBasics.lang.i18n("cj_i18n_TODO","Attractions"),udm_forums:cjBasics.lang.i18n("cj_i18n_00182","Forums"),udm_learn:cjBasics.lang.i18n("cj_i18n_06439","Learn"),udm_perspectives:cjBasics.lang.i18n("cj_i18n_TODO","Perspectives"),udm_web:cjBasics.lang.i18n("cj_i18n_07622","Web"),vid:cjBasics.lang.i18n("cj_i18n_00014","Videos")},se={all:"__mdi:search",bks:"__mdi:book",isch:"__mdi:image",nws:"__mdi:news",shop:"__mdi:local_offer",udm_attractions:"",udm_forums:"__mdi:forum",udm_learn:"__mdi:school",udm_perspectives:"",udm_web:"__mdi:language",vid:"__mdi:slideshow"};function oe(){browserStorage.local.setItem(ae,{q:f,tbm:B,time:Date.now()})}function re(e){B=(e=e).tbm||ie[e.udm]||"all",ee&&i&&i.cjceSetEngine(B)}function le(){var e,a,n,c,i,t,s,o,r;f?("finance"!==u&&l.cjceSetLoading(!0),d.src="covidmobility"===B?cjBasics.urlParams.attach(b+"/covid19/mobility/",{bm_cid:"covid19mobility",bm_wiz:"1",hl:cjBasics.lang.getCurrent()}):(e="gws-search",a="finance"===u&&(!f||-1!==y.indexOf(f)),n="covid19"===u&&("covidhome"===B||!B),c=a?b+"/finance/":j+"/m",i=cjBasics.navigator.mobileUserAgent,p&&"isch"===B?(e="gws-search-images-desktop",i="Opera/12.02 (Android 4.1; Linux; Opera Mobi/ADR-1111101157; U; en-US) Presto/2.9.201 Version/12.02"):"finance"===u&&"currency converter"===f.toLowerCase()?e="gws-onebox-currency":"jobs"===u||"finance"===u||"sports"===u||"covid19"===u?e="gws-"+u:"weather"!==u&&"calculator"!==u&&"spinner"!==u&&"converter"!==u||(e="gws-onebox-"+u),t=null,s=cjBasics.lang.getCurrent(),o=null,r=f,a?(r=null,o=S):k&&(t="US"),"converter"===u&&(s="en"),n&&(r="coronavirus"),a=!B||"all"===B||B.startsWith("udm_")?null:B,n=ce[B],c=cjBasics.urlParams.attach(c,{bm_cid:e,bm_pid:u,bm_iid:h,bm_wiz:"1",ie:"utf-8",oe:"utf-8",authuser:g,q:r,num:T?"1":null,udm:n,tbm:a,ibp:w,kptab:o,kgmid:null,fg:"1",gws_rd:"cr",nord:"1",adtest:p?"on":null,"adtest-useragent":p?i:null,igu:p?"1":null,gl:t,hl:s}),"events"===u&&(c+="#fpstate=tlexp&htiq=Events"),c)):d.src="about:blank",_.focus(),oe()}function de(){return f&&("patents"===u||"search"===u&&"isch"!==B&&"shop"!==B)}function _e(){return"isch"===B&&("images"!==u||Boolean(f))}function me(){return"search"===u&&"all"===B}function ue(e){return!r&&("search"===u||"covid19"===u&&!(e||B&&"covidhome"!==B))}function x(){F.hidden=!_e(),q.hidden=!me(),P.hidden=!de();var e=f&&-1===y.indexOf(f);C&&(c.hidden=!e),i&&(i.hidden=!ue(e)),"shopping"===u&&(e=_.value,l.cjceSetNavigatorCollapseState(f!==e&&e),l.cjceSetNavigatorFullWidthState(!e))}function U(e){e=e||_.value||N;I&&!e.startsWith(I)&&(e=I+e),f=e,d.hidden=!f,O.hidden=f,C||l.cjceSetNavigatorCollapseState(_.value),le(),x()}function he(e){B=e,(f?le:U)(),x()}function ge(){var e=cjce.createElement("cjmd-appbar",{secondary:!0}),a="search"===u&&cjBasics.lang.checkLanguageHasShortVocabulary(cjBasics.lang.getCurrent(),!0)?5:4,n=(1e3<Te.body.offsetWidth&&(a=10),{}),c=(A.forEach(function(e){n[e]={iconName:se[e],label:te[e]}}),cjce.createElement("ccbm-tabs",{color:L,items:n,itemLimit:a,onMetaClick:function(e){B=e,E()},onChange:he,onActiveClick:he,selectedId:B}));return e.appendChild(c),e.cjceSetEngine=function(e){c&&(c.cjceSelectedId=e||"all")},e}var a,be={LOCAL_MARKETS:cjBasics.lang.i18n("cj_i18n_01113","Local markets"),WORLD_MARKETS:cjBasics.lang.i18n("cj_i18n_01114","World markets"),YOUR_STOCKS:cjBasics.lang.i18n("cj_i18n_06879","Your watchlists")};function je(e){var a={MARKET_SUMMARY:{iconName:"__mdi:trending_up",label:v,newTabUrl:!0},YOUR_STOCKS:{iconName:"__mdi:list",label:be.YOUR_STOCKS,newTabUrl:!0,divider:!0},currencyConverter:{iconName:"__mdi:swap_horiz",label:cjBasics.lang.i18n("cj_i18n_00829","Currency converter"),newTabUrl:!0}};m=cjce.createElement("bm-navlist",{selectedId:"MARKET_SUMMARY",isSelector:!0,items:a,onChange:function(e){"currencyConverter"===e?(m.cjceSelectedId=S,M(f="Currency converter"),U(f)):fe(e)},onNewTab:function(e,a){var n;"YOUR_STOCKS"===e?(n=cjBasics.urlParams.attach(b+"/finance/portfolio",{authuser:g,kptab:"YOUR_STOCKS"}),s.openTab(n)):"currencyConverter"===e?Be(e,a):(n=e,n=cjBasics.urlParams.attach(b+"/finance/",{kptab:e||null,authuser:g}),s.openTab(n))}}),e.appendChild(m)}function pe(e){var a,n,c;"finance"===u?je(e):"covid19"===u?(c=e,a={covidhome:{iconName:"__mdi:home",label:v,newTabUrl:b+"/search?q=COVID-19"},covidresources:{iconName:"__mdi:description",label:cjBasics.lang.i18n("cj_i18n_06648","Resources"),shortcutId:"1041",external:!0},nws:{iconName:"__mdi:news",label:cjBasics.lang.i18n("cj_i18n_01345","Headlines"),newTabUrl:z+"/topics/CAAqIggKIhxDQkFTRHdvSkwyMHZNREZqY0hsNUVnSmxiaWdBUAE"+V},vid:{iconName:"__mdi:slideshow",label:cjBasics.lang.i18n("cj_i18n_00014","Videos"),newTabUrl:b+"/videohp"+V+"#q=Coronavirus&tbm=vid"},covidself:{iconName:"__mdi:how_to_reg",label:cjBasics.lang.i18n("cj_i18n_06598","Self-assessment"),shortcutId:"1054",external:!0},covidmobility:{iconName:"__mdi:commute",label:cjBasics.lang.i18n("cj_i18n_06499","Community mobility reports"),newTabUrl:b+"/covid19/mobility/"},covidtrends:{iconName:"__mdi:trending_up",label:cjBasics.lang.i18n("cj_i18n_06500","Data & insights"),newTabUrl:"https://trends.google.com/trends/story/US_cu_4Rjdh3ABAABMHM_en"+V,external:!0}},a=cjce.createElement("bm-navlist",{selectedId:"covidhome",isSelector:!0,items:a,onChange:function(e,a){"covidhome"===e?l.cjceSetPageLabel(v):l.cjceSetPageLabel(a.label),M(f=N),U(f)},onNewTab:Be}),c.appendChild(a)):("images"===u?n={home:{iconName:"__mdi:home",label:v,shortcutId:"96"},lens:{iconName:"__mdi:google_lens",label:cjBasics.lang.i18n("cj_i18n_06348","Search by image"),shortcutId:"1003",external:!0},advancedimages:{iconName:"__mdi:tune",label:cjBasics.lang.i18n("cj_i18n_00406","Advanced search"),shortcutId:"535",external:!0},life:{iconName:"__mdi:history",label:cjBasics.lang.i18n("cj_i18n_00489","LIFE photo archive"),shortcutId:"99",external:!0},save:{iconName:"__mdi:bookmarks",label:cjBasics.lang.i18n("cj_i18n_07396","Saved"),shortcutId:"359",divider:!0},settings:{iconName:"__mdi:settings",label:cjBasics.lang.i18n("cj_i18n_00298","Settings"),shortcutId:"127",external:!0},yourdata:{iconName:"__mdi:cjg_account",label:cjBasics.lang.i18n("cj_i18n_01738","Your data in Search"),shortcutId:"866",external:!0}}:"shopping"===u?(n={home:{iconName:"__mdi:home",label:v},departments:{iconName:"__mdi:border_all",label:cjBasics.lang.i18n("cj_i18n_01756","Departments"),external:!0},stores:{iconName:"__mdi:store",label:cjBasics.lang.i18n("cj_i18n_01755","Stores"),external:!0},lists:{iconName:"__mdi:bookmarks",label:cjBasics.lang.i18n("cj_i18n_01831","Your saved items"),external:!0},orders:{iconName:"__mdi:history",label:cjBasics.lang.i18n("cj_i18n_01759","Orders"),external:!0},reorderessentials:{label:cjBasics.lang.i18n("cj_i18n_01758","Quick reorder"),iconName:"__mdi:shopping_basket",external:!0},cart:{iconName:"__mdi:shopping_cart",label:cjBasics.lang.i18n("cj_i18n_01760","Cart"),external:!0},reviews:{iconName:"__mdi:rate_review",label:cjBasics.lang.i18n("cj_i18n_00634","My contributions"),external:!0},settings:{iconName:"__mdi:settings",label:cjBasics.lang.i18n("cj_i18n_00298","Settings"),external:!0},relatedHeader:{header:!0,color:!0,label:cjBasics.lang.i18n("cj_i18n_01539","Related apps")},save:{iconName:"__mdi:bookmark_border",label:cjBasics.lang.i18n("cj_i18n_07396","Saved"),shortcutId:"359"},shoppinglist:{iconName:"__mdi:list_alt",label:cjBasics.lang.i18n("cj_i18n_01028","Shopping List"),shortcutId:"756"},search:{iconName:"__mdi:search",label:cjBasics.lang.i18n("cj_i18n_01365","Google Search"),shortcutId:"157"}},cjBasics.webRequest.getWrifSupported()||(delete n.save,delete n.shoppinglist)):"converter"===u?n={home:{iconName:"__mdi:home",label:v,shortcutId:"572"},relatedHeader:{header:!0,color:!0,label:cjBasics.lang.i18n("cj_i18n_01539","Related apps")},calculator:{iconName:"__mdi:calculate",label:cjBasics.lang.i18n("cj_i18n_00589","Calculator"),shortcutId:"272"},finance:{iconName:"__mdi:finance",label:cjBasics.lang.i18n("cj_i18n_07113","Google Finance"),shortcutId:"54"}}:"calculator"===u?n={home:{iconName:"__mdi:home",label:v,shortcutId:"272"},relatedHeader:{header:!0,color:!0,label:cjBasics.lang.i18n("cj_i18n_01539","Related apps")},converter:{iconName:"__mdi:swap_horiz",label:cjBasics.lang.i18n("cj_i18n_00845","Unit converter"),shortcutId:"572"},finance:{iconName:"__mdi:finance",label:cjBasics.lang.i18n("cj_i18n_07113","Google Finance"),shortcutId:"54"}}:"weather"===u?n={home:{iconName:"__mdi:home",label:v,shortcutId:"464"},relatedHeader:{header:!0,color:!0,label:cjBasics.lang.i18n("cj_i18n_01539","Related apps")},news:{iconName:"__mdi:play_newsstand",label:cjBasics.lang.i18n("cj_i18n_00425","News"),shortcutId:"109"},search:{iconName:"__mdi:search",label:cjBasics.lang.i18n("cj_i18n_01365","Google Search"),shortcutId:"157"}}:"patents"===u?n={home:{iconName:"__mdi:home",label:v,shortcutId:"115"},relatedHeader:{header:!0,color:!0,label:cjBasics.lang.i18n("cj_i18n_01539","Related apps")},scholar:{iconName:"__mdi:school",label:cjBasics.lang.i18n("cj_i18n_00433","Scholar"),shortcutId:"125"},search:{iconName:"__mdi:search",label:cjBasics.lang.i18n("cj_i18n_01365","Google Search"),shortcutId:"157"}}:"search"===u?n={home:{iconName:"__mdi:home",label:v,shortcutId:"157"},save:{iconName:"__mdi:bookmarks",label:cjBasics.lang.i18n("cj_i18n_07396","Saved"),shortcutId:"359",external:!cjBasics.webRequest.getWrifSupported(),divider:!0},advancedweb:{iconName:"__mdi:search",label:cjBasics.lang.i18n("cj_i18n_00406","Advanced search"),shortcutId:"5",external:!0},advancedimages:{iconName:"__mdi:image_search",label:cjBasics.lang.i18n("cj_i18n_01453","Advanced image search"),shortcutId:"535",external:!0,divider:!0},settings:{iconName:"__mdi:settings",label:cjBasics.lang.i18n("cj_i18n_00298","Settings"),shortcutId:"127",external:!0},yourdata:{iconName:"__mdi:cjg_account",label:cjBasics.lang.i18n("cj_i18n_01738","Your data in Search"),shortcutId:"866",external:!0},howsearchworks:{iconName:"__mdi:cjg_howsearchworks",label:cjBasics.lang.i18n("cj_i18n_01802","How Search works"),shortcutId:"916",external:!0}}:(n={home:{iconName:"__mdi:home",label:v},relatedHeader:{header:!0,color:!0,label:cjBasics.lang.i18n("cj_i18n_01539","Related apps")},search:{iconName:"__mdi:search",label:cjBasics.lang.i18n("cj_i18n_01365","Google Search"),shortcutId:"157"},save:{iconName:"__mdi:bookmark_border",label:cjBasics.lang.i18n("cj_i18n_07396","Saved"),shortcutId:"359"}},cjBasics.webRequest.getWrifSupported()||delete n.save),c=cjce.createElement("bm-navlist",{selectedId:K,items:n,onClick:function(e){e!==K&&("save"===e?Ie():s.pageManager.navigate(e))},onNewTab:Be}),e.appendChild(c))}function ve(e){e=e||"MARKET_SUMMARY";l.cjceSetPageLabel(be[e]||v),l.cjceSetBackState("MARKET_SUMMARY"!==e),m.cjceSelectedId=e}function fe(e){ve(S=e),U()}function Be(e,a){a=a;var n="currencyConverter"===(e=e)?cjBasics.urlParams.attach(b+"/search",{q:"Currency converter",authuser:g}):"reviews"===e?"https://customerreviews.google.com"+s.wizPath+"/":"shopping"===u&&"save"!==e&&"search"!==e&&"shoppinglist"!==e?(n="https://shopping.google.com/u/"+s.account.authuser+"/","home"===e?n:n+e):a.newTabUrl||cjgFrontend.urls.getShortcutUrl(a.shortcutId,s.account);s.openTab(n)}function we(e){var a=Boolean(e);o.hidden=!a,r=e,i.hidden=!ue()}function Se(){var e=cjce.createElement("cjmd-container",{shadow:"thin"}),a=cjce.createElement("cjmd-emptystate",{iconName:"__mdi:search",subLabel:cjBasics.lang.i18n("cj_i18n_00046","Please enter a search query")});return e.appendChild(a),"images"===u?(a={lens:{iconName:"__mdi:google_lens",label:cjBasics.lang.i18n("cj_i18n_06348","Search by image"),shortcutId:"1003"},advancedimages:{iconName:"__mdi:tune",label:cjBasics.lang.i18n("cj_i18n_00406","Advanced search"),shortcutId:"535"},save:{iconName:"__mdi:bookmarks",label:cjBasics.lang.i18n("cj_i18n_07396","Saved"),shortcutId:"359"}},a=cjce.createElement("ccbm-biglinks",{bottom:!0,items:a,onClick:function(e,a){"save"===e?Ie():"lens"===e?s.pageManager.navigate("lens"):(e=cjgFrontend.urls.getShortcutUrl(a.shortcutId,s.account),s.openTab(e))},onMetaClick:function(e,a){a=cjgFrontend.urls.getShortcutUrl(a.shortcutId,s.account);s.openTab(a)}}),e.appendChild(a)):"search"===u&&(a={weather:{iconName:"__mdi:wb_sunny",label:cjBasics.lang.i18n("cj_i18n_00743","Weather"),shortcutId:"464"},sports:{iconName:"__mdi:emoji_events",label:cjBasics.lang.i18n("cj_i18n_06342","Sports"),shortcutId:"1006"},calculator:{iconName:"__mdi:calculate",label:cjBasics.lang.i18n("cj_i18n_00589","Calculator"),shortcutId:"157"}},a=cjce.createElement("ccbm-biglinks",{bottom:!0,items:a,onClick:function(e,a){s.pageManager.navigate(e,{withReturn:!0})},onMetaClick:function(e,a){a=cjgFrontend.urls.getShortcutUrl(a.shortcutId,s.account);s.openTab(a)}}),e.appendChild(a)),e}function Ie(){var e;cjBasics.webRequest.getWrifSupported()?s.pageManager.navigate("save",{listId:"isch"===B?"dt_fav_images":null}):(e=cjgFrontend.urls.getShortcutUrl("359",s.account),s.openTab(e))}function M(e,a){a&&_.value||((a=e)&&-1===y.indexOf(e)||(a=""),I&&a.startsWith(I)&&(a=a.replace(I,"")),C?c.cjceSetPageLabel(a):(_.value=a,l.cjceSetNavigatorCollapseState(a)))}function Ne(e){f=e,E()}function E(){if("finance"===u)e=cjBasics.urlParams.attach(b+"/finance/",{authuser:g}),s.openTab(e);else{if("covid19"===u){var e=B;if("covidmobility"===(e=B||"covidhome"))return void s.openTab(b+"/covid19/mobility/");if("covidhome"===e)return void s.openTab(b+"/covid19/")}w?(e=cjBasics.urlParams.attach(b+"/search",{ibp:w,q:N,authuser:g,gl:k?"US":null}),s.openTab(e)):(e=f?"/search":"/",e=cjBasics.urlParams.attach(b+e,{authuser:g,q:f||null,udm:ce[B]}),s.openTab(e))}}function ye(){var n;"covid19"===u&&!B||"about:blank"===d.src?E():(n=!1,d.cjceSendFrameRequest({method:"gwsGetUrl"},j).then(function(e){var a;n||(n=!0,(a=(e=new URL(e)).searchParams).delete("hl"),a.delete("bm_cid"),a.delete("bm_pid"),a.delete("bm_iid"),a.delete("bm_wiz"),a.delete("gws_rd"),a.delete("fg"),a.delete("ie"),a.delete("oe"),a.delete("adtest"),a.delete("adtest-useragent"),a.delete("nord"),a.delete("igu"),a.get("udm")&&a.delete("tbm"),"finance"===u&&-1!==(a.get("q")||"").indexOf(": ")&&a.set("tbm","fin"),"/m"!==e.pathname&&"/mobile"!==e.pathname&&"/images"!==e.pathname||(e.pathname="/search"),s.openTab(e.href))}),setTimeout(function(){n||(n=!0,E())},500))}function Ce(){d.cjceSendFrameCommand({method:"gwsGoBack"},j)}function ke(){var e=cjce.createElement("bm-ogb",{displayBack:!0,floating:!0,color:D,aboveTopDrawer:!0,bmApis:s,onNewTab:function(){s.openTab(r.url)},serviceLabel:R,pageLabel:cjBasics.lang.i18n("cj_i18n_06387","AMP page"),onBack:Ce}),a=(e.hidden=!0,cjce.createElement("ccbm-iconbutton",{iconName:"__mdi:link",label:cjBasics.lang.i18n("cj_i18n_01901","Copy link"),onClick:function(){cjBasics.clipboard.copy(r.url),t||(t=cjce.createElement("ccbm-snackbar",{label:cjBasics.lang.i18n("cj_i18n_07124","Copied to clipboard")}),n.appendChild(t)),t.cjceShow()}}));return e.cjceAppendChild(a),e}l=cjce.createElement("bm-ogb",{loading:Y,drawer:{color:W},color:D,serviceLabel:R,pageLabel:$,serviceIcon:e,searchbox:{submitInNewTab:"external"===C,suggestHandler:I?null:function(e){return cjgFrontend.suggestquery.get({gAccount:s.account,hl:cjBasics.lang.getCurrent(),q:e,ds:ne[B]})},onInput:x,onClear:"external"!==C&&U,onSubmit:"external"===C?Ne:U,onMetaSubmit:Ne},bmApis:s,onNewTab:ye,onBack:function(){"finance"===u?fe("MARKET_SUMMARY"):H?s.pageManager.navigate("search"):Ce()}}),"finance"!==u&&"covid19"!==u&&l.cjceSetLoading(!1),n.appendChild(l),(F=cjce.createElement("ccbm-iconbutton",{iconName:"__mdi:bookmarks",label:cjBasics.lang.i18n("cj_i18n_01454","View saved"),onClick:Ie})).hidden=!_e(),l.cjceAppendChild(F),(q=cjce.createElement("ccbm-iconbutton",{iconName:"__mdi:google_lens",label:cjBasics.lang.i18n("cj_i18n_06348","Search by image"),onClick:function(){s.pageManager.navigate("lens")}})).hidden=!me(),l.cjceAppendChild(q),(P=cjce.createElement("ccbm-iconbutton",{label:cjBasics.lang.i18n("cj_i18n_00110","Filter"),iconName:"__mdi:tune",onClick:function(){d.cjceSendFrameCommand({method:"gwsToggleFilterMenu"},j)}})).hidden=!de(),l.cjceAppendChild(P),C&&((c=cjce.createElement("bm-ogb",{displayBack:!0,floating:!0,color:D,serviceLabel:R,pageLabel:cjBasics.lang.i18n("cj_i18n_00325","Loading…"),bmApis:s,onNewTab:ye,onBack:Ce})).hidden=!0,n.appendChild(c)),X&&(o=ke(),n.appendChild(o)),pe(l.cjceDrawerEl),(_=l.cjceSearchboxEl).hidden=!0===C,A&&1<A.length&&(i=ge(),l.appendChild(i)),O=Se(),n.appendChild(O),a=[j+"/*bm_iid="+h+"*",J+"/*bm_iid="+h+"*",J+"/*bm_iid%3D"+h+"*"],Z&&a.push(b+"/*bm_iid="+h+"*"),cjBasics.webRequest.handleIframeHeaders(a,{handleFirefoxInject:!0,handleSecVariables:!0,handleSwCache:!0,useMobileUserAgent:!0}),cjBasics.webRequest.handleIframeHeaders(["https://www.google.com/fbx?fbx=coronavirus_fbx*"]),"covid19"===u&&cjBasics.webRequest.handleIframeHeaders([b+"/covid19-map/*bm_iid="+G+"*",z+"/covid19/map*bm_iid="+G+"*"],{disableOgs:b,handleFirefoxInject:!0,handleSwCache:!0,useMobileUserAgent:!0}),cjBasics.webRequest.catchAndStop(["https://accounts.google.com/ServiceLogin*bm_iid*"+h+"*"],function(){cjgApis.account.signin(s.account),d.src="about:blank"}),(d=cjce.createElement("bm-iframe",{solid:"#fff",shadow:"thinOnScroll",onBmMessage:function(e,a){var n,c,i,t;"bmCstOpenUrl"===e?a&&(i=(c=_slicedToArray(a,3))[0],n=c[1],c=c[2],i=cjBasics.cleanBmUrl(i),-1!==(i=Z&&i.startsWith(Q)?i.replace(Q,b):i).indexOf("tbm=")&&-1!==i.indexOf("udm=")&&((t=new URL(i)).searchParams.delete("tbm"),i=t.href),s.openTab(i,n,c)):"gwsOpenAmp"===e?(t=a,X?(o.cjceSetPageLabel(t.label,{capitalise:!1}),we(t)):s.openTab(t.url)):"gwsCloseAmp"===e?we(null):"gwsSetFinanceTab"===e&&"finance"===u?fe(a):"gwsReflectFinanceTab"===e&&"finance"===u?ve(a):"gwsUpdateQuery"===e&&(re(a),M(f=a.q),oe(),x())},onLoad:function(){"about:blank"!==d.src&&l.cjceSetLoading(!1)}})).hidden=!0,n.appendChild(d),s.setOnPageDisplayHandler(function(e){H=e.withReturn,e.withReturn&&l.cjceSetBackState(!0),_.select()}),N?U():browserStorage.local.getItem(ae).then(function(e){e&&e.q&&Date.now()-e.time<36e5?(re(e),M(f=e.q,!0),U(),_.select()):(e&&browserStorage.local.remove(ae),I&&(M(f=I),U()))})})})();