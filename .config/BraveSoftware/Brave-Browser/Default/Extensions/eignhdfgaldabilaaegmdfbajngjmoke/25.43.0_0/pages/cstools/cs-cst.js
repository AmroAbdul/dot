"use strict";(()=>{var s,o,e,t,n,a,i=window,c=i.location,r=document,u=("undefined"!=typeof chrome&&chrome||{}).runtime.getURL("PATH/").replace("/PATH/",""),l=u.startsWith("safari-web-extension://"),m=!l&&u.startsWith("moz-extension://");function f(e,t,n){i.parent.postMessage({bm_method:e,bm_request:n,bm_value:t},u)}function d(e,t){t=new InputEvent(t,{bubbles:!0,cancelable:!0});e.dispatchEvent(t)}function b(e,t){t=new KeyboardEvent(t,{bubbles:!0,cancelable:!0,keyCode:13});e.dispatchEvent(t)}function h(e,t){t=new MouseEvent(t,{bubbles:!0,cancelable:!0,view:window});e.dispatchEvent(t)}function p(e){h(e,"mousedown"),h(e,"mouseup"),h(e,"click")}function v(e){var t,n=r.querySelector(e.selector);n.value=e.newValue,e.submit?(t=n,e=0,setTimeout(function(){p(t)},e+=50),setTimeout(function(){b(t,"keydown")},e+=50),setTimeout(function(){b(t,"keyup")},e+=50),setTimeout(function(){d(t,"input")},200)):d(n,"input")}function g(e){var t="A";if("closest"in Element.prototype)return e.closest(t);for(var n=e;n;){if(n.tagName===t)return n;n=n.parentNode}return null}function w(o){r.addEventListener("click",o,!0),r.addEventListener("auxclick",function(e){1===e.button&&o(e)},!0),r.addEventListener("keyup",function(e){var t,n;((n=(t=e).key)?"Enter"===n:13===(t.which||t.keyCode))&&o(e)},!0)}function y(e){var t;/^https:\/\/[a-z]+\.app\.goo\.gl$/.test(e.origin)&&(e.href=(e=e.search,"undefined"==typeof URLSearchParams?(t=e.match(/[&?](?:link|afl)=(.+?)(?:&|$)/),decodeURIComponent(t)):(t=new URLSearchParams(e)).get("link")||t.get("afl")))}function E(e,t){var n,o,a,i=g(e.target),r=i&&i.href;r&&(a=i.origin===c.origin,n=e.shiftKey,(o=1===e.button||e[s||(o=/^Mac|^iP/.test(navigator.platform),s=o?"metaKey":"ctrlKey")])||n||"_blank"===i.target||!a?(f("bmCstOpenUrl",[r,n,o]),e.stopPropagation(),e.preventDefault()):(y(i),t&&-1===(a=i.search).indexOf("bm_cst=")&&(i.search=t+a.replace("?","&"))))}e=function(e){return o=c.search.match(/bm_cst=([12])/),e.endsWith(".google.com")&&o},t=function(){var t,n;o[1]%2==0&&(t=c.search,w(function(e){E(e,t)})),n=function(e,t,n){"bmCstGetFrameUrl"===e?f(e,c.href,n):"bmCstUpdateState"===e?(n=t,i.history.pushState({},"",n),n=new PopStateEvent("popstate",{state:{url:n}}),i.dispatchEvent(n)):"bmCstNavigateBack"===e?i.history.back():"bmCstClickDomElement"===e?(n=t,(n=r.querySelector(n))&&p(n)):"bmCstFillText"===e&&v(t)},i.addEventListener("message",function(e){var t;if(l){if(!e.origin.toLowerCase().startsWith("safari-web-extension://"))return}else if(!(e.origin===u))return;(e.isTrusted||m)&&e.source===i.parent&&(t=(e=e.data||{}).bm_method)&&n(t,e.bm_value,e.bm_request)})},(e=>{var t,n;return!(i.top===i.self||r.documentElement instanceof SVGSVGElement)&&("object"!=typeof(t=c.ancestorOrigins)?1:(n=l?u.toLowerCase():u,1===t.length?t[0]===n:e&&2===t.length&&t[1]===n&&!t[0].endsWith(".google.com")))})(n)&&(a=(a=(n=c.search).match(/[&?]bm_cid=([\da-z-]{2,25})(?:&|$)/))&&a[1],e(origin,a,n))&&(a&&(r.documentElement.dataset.bmCid=a),t())})();