"use strict";(()=>{var s,l=window,c=l.location,m=document,e="undefined"!=typeof chrome&&chrome||{},d=e.runtime.getURL("PATH/").replace("/PATH/",""),u=d.startsWith("safari-web-extension://"),f=!u&&d.startsWith("moz-extension://");function p(e,t,a){l.parent.postMessage({bm_method:e,bm_request:a,bm_value:t},d)}function h(e){var t="A";if("closest"in Element.prototype)return e.closest(t);for(var a=e;a;){if(a.tagName===t)return a;a=a.parentNode}return null}function t(n){m.addEventListener("click",n,!0),m.addEventListener("auxclick",function(e){1===e.button&&n(e)},!0),m.addEventListener("keyup",function(e){var t,a;((a=(t=e).key)?"Enter"===a:13===(t.which||t.keyCode))&&n(e)},!0)}function v(e){var t;/^https:\/\/[a-z]+\.app\.goo\.gl$/.test(e.origin)&&(e.href=(e=e.search,"undefined"==typeof URLSearchParams?(t=e.match(/[&?](?:link|afl)=(.+?)(?:&|$)/),decodeURIComponent(t)):(t=new URLSearchParams(e)).get("link")||t.get("afl")))}function r(e,t){var a,n,i,r=h(e.target),o=r&&r.href;o&&(i=r.origin===c.origin,a=e.shiftKey,(n=1===e.button||e[s||(n=/^Mac|^iP/.test(navigator.platform),s=n?"metaKey":"ctrlKey")])||a||"_blank"===r.target||!i?(p("bmCstOpenUrl",[o,a,n]),e.stopPropagation(),e.preventDefault()):(v(r),t&&-1===(i=r.search).indexOf("bm_cst=")&&(r.search=t+i.replace("?","&"))))}var a,n,i,o=/^Mac|^iP/.test(navigator.platform)?"metaKey":"ctrlKey",g='[role="listitem"][id^="th_"]',b='[role="listitem"][id^="th_"] > div[role="button"]',y=!1;function _(e){e=(e.split("mail/mu/mp/")[1]||"").split("/")[0];e&&p("mailSessionId",e)}function S(e,t){e=m.querySelectorAll(e);e[t=-1===t?e.length-1:t].click()}function E(e){for(var t=e+"/lb_data",a="sp/chrome/"+t,n=Object.keys(l.localStorage),i=0;i<n.length;i++){var r=n[i];if(r.endsWith(t)){a=r;break}}var o,e=l.localStorage[a];e&&(e=JSON.parse(e),o=(e=>{for(var t={colorKey:"bgColor",idKey:"Y",mainKey:"wa",nameKey:"name",unreadKey:"T"},a={},n=0;n<e.length;n++){for(var i=e[n],r=Object.keys(i),o=void 0,s=void 0,l=0;l<r.length;l++){var c=r[l],m=i[c],d=m&&"object"==typeof m&&Object.keys(m);if(d&&4<d.length){t.mainKey=c;for(var u=m.name,f=0;f<d.length;f++){var p=d[f];"name"!==p&&"string"==typeof p&&m[p]===u&&(t.idKey=p)}}else"number"==typeof m&&(!o||m<=s)&&(o=c,s=m)}a[o]?a[o]+=1:a[o]=1}for(var h=Object.keys(a),v="T",g=0;g<h.length;g++){var b=h[g];0<a[b]&&(v=b)}return t.unreadKey=v,t})(e),p("mailCachedLabels",e.map(function(e){var t={},e=(t.unreadCount=e[o.unreadKey],e[o.mainKey]),e=(t.name=e[o.nameKey],t.id=e[o.idKey],e[o.colorKey]);return e&&(t.color={backgroundColor:e}),t})))}function O(){var e=(m.head.textContent.split('USER_EMAIL = "')[1]||"").split('"')[0]||(m.cookie.split("GAUSR=")[1]||"").split(";")||(Object.keys(l.localStorage).join("").split("pref/")[1]||"").split("/")[0];if(e){var t,a=e;if(l.openDatabase){try{t=l.openDatabase(a,"","",0)}catch(e){return void E(a)}t.transaction(function(e){e.executeSql("SELECT labelId,unreadCount,metadata FROM cached_labels",[],function(e,t){for(var a=[],n=0;n<t.rows.length;n++){var i=t.rows[n],r={id:i.labelId,unreadCount:i.unreadCount},i=i.metadata.startsWith("[")&&JSON.parse(i.metadata),o=i[2],i=i[4];"string"==typeof o&&(r.name=o),"string"==typeof i&&(r.color={backgroundColor:i}),a.push(r)}p("mailCachedLabels",a)},function(){E(a)})})}else E(a)}}function C(){var i=c.search;t(function(e){var t,a,n=(n=(n=e).target).matches(g)?n:n.matches(b)?n.parentNode:null;if(!n)return r(e,i);e=e,(n=(n=n).id.replace("th_",""))&&(t=e.shiftKey,(a=e[o]||1===e.button)||t)&&(p("mailOpenThreadInNew",[n,t,a]),e.stopPropagation(),e.preventDefault())})}function L(){var e=c.href;_(e),p("mailPageUrl",e),O(),setTimeout(O,1e3),setTimeout(O,5e3),C()}!function e(){var t;c.hash.startsWith("#tl")&&(t=(t=m.querySelector('div[style*="translate3d"] > div:first-child'))&&"none"!==t.style.display,y!==t)&&p("mailSelectionState",y=t),setTimeout(e,100)}(),e=function(e,t,a){return"https://mail.google.com"===e&&-1!==c.pathname.indexOf("/mu/")&&-1!==a.indexOf("mui=bm_mail")},a=function(){e=document,o=Date.now(),i=l.location,e=e.cookie,t=(i.search.split("mui=")[1]||"").split("&")[0],a=!1,-1===(n=e).indexOf("GMAIL_AT=")&&(n+="; GMAIL_AT="+t,a=!0),-1===e.indexOf("WML=")&&(t=(t+"__").split("__")[1].split("_")[0]||"0",i=(i.pathname.split("/mp/")[1]||"").split("/")[0],n+="; WML="+o+"#"+l.USER_EMAIL+":"+i+":"+t,a=!0),e.startsWith("SID=")||-1!==e.indexOf(" SID=")||(n+="; SID=1",a=!0),a&&(m.cookie=n),(e=>{var t=m.createElement("script");if(u){var a=btoa(e);if(m.querySelector('script[data-bm-cs="'+a+'"]'))return;t.dataset.bmCs=a}t.textContent=e,(a=m.documentElement).insertBefore(t,a.firstChild)})('"use strict";(()=>{var t,n=window,o="WML=",r="SID=",e="cookie",s=document,a=Date.now(),c=n.location,l=s[e],p=(c.search.split("mui=")[1]||"").split("&")[0];n.top!==n.self&&("object"!=typeof(t=location.ancestorOrigins)||1===t.length&&-1!==t[0].indexOf("extension://"))&&Object.defineProperty(s,e,{get:function(){var t,e,i=l;return-1===l.indexOf("GMAIL_AT=")&&(i+="; GMAIL_AT="+s.documentElement.dataset.mailAt),-1===l.indexOf(o)&&(t=(p+"__").split("__")[2].split("_")[0]||"0",e=(c.pathname.split("/mp/")[1]||"").split("/")[0],i+="; "+o+a+"#"+n.USER_EMAIL+":"+e+":"+t),l.startsWith(r)||-1!==l.indexOf(" "+r)||(i+="; SID=1"),i}}),(e=document.currentScript)&&e.remove()})();'),m.documentElement.dataset.bmCid="mail";var e,t,a,n,i,r,o=m.documentElement.getAttribute("manifest");o&&_(o),-1!==c.search.indexOf("__theme_dark__")&&(m.documentElement.dataset.bmUdm="1"),-1!==c.search.indexOf("bm_mail_bigtop")&&(m.documentElement.dataset.bmCsMailHideStars="1"),i=L,"complete"===m.readyState||"loaded"===m.readyState||"interactive"===m.readyState?i():m.addEventListener("DOMContentLoaded",i),r=function(e,t){var a,n,i;"mailClickEl"===e?(a=t[0],i=t[1]||0,(n=t[2])?(S(a,n),setTimeout(function(){S(a,i)})):S(a,i)):"mailAtToken"===e&&(m.documentElement.dataset.mailAt=t)},l.addEventListener("message",function(e){var t;if(u){if(!e.origin.toLowerCase().startsWith("safari-web-extension://"))return}else if(!(e.origin===d))return;(e.isTrusted||f)&&e.source===l.parent&&(t=(e=e.data||{}).bm_method)&&r(t,e.bm_value,e.bm_request)}),l.addEventListener("hashchange",function(){p("mailHashChange",c.hash.replace("#",""))})},(e=>{var t,a;return!(l.top===l.self||m.documentElement instanceof SVGSVGElement)&&("object"!=typeof(t=c.ancestorOrigins)?1:(a=u?d.toLowerCase():d,1===t.length?t[0]===a:e&&2===t.length&&t[1]===a&&!t[0].endsWith(".google.com")))})(n)&&(i=(i=(n=c.search).match(/[&?]bm_cid=([\da-z-]{2,25})(?:&|$)/))&&i[1],e(origin,i,n))&&(i&&(m.documentElement.dataset.bmCid=i),a())})();