"use strict";(()=>{var r=window,d=r.location,i=document,n=("undefined"!=typeof chrome&&chrome||{}).runtime.getURL("PATH/").replace("/PATH/",""),s=n.startsWith("safari-web-extension://"),o=!s&&n.startsWith("moz-extension://");function u(e,t,a){r.parent.postMessage({bm_method:e,bm_request:a,bm_value:t},n)}function g(e){var t="A";if("closest"in Element.prototype)return e.closest(t);for(var a=e;a;){if(a.tagName===t)return a;a=a.parentNode}return null}function l(e){var t;/^https:\/\/[a-z]+\.app\.goo\.gl$/.test(e.origin)&&(e.href=(e=e.search,"undefined"==typeof URLSearchParams?(t=e.match(/[&?](?:link|afl)=(.+?)(?:&|$)/),decodeURIComponent(t)):(t=new URLSearchParams(e)).get("link")||t.get("afl")))}var f,c,m,h,e,t,a,p,b="https://www.google.com",v="https://maps.google.com",w=d.origin,y=/^Mac|^iP/.test(navigator.platform)?"metaKey":"ctrlKey",L="gws",_="undefined"!=typeof URLSearchParams,S=!1,U=["/search","/mobile","/images"],P=["/","/m","/imgres","/finance"],E=["bm_cid","bm_pid","bm_iid","bm_wiz","ie","oe","authuser","fg","gws_rd","nord","adtest","adtest-useragent","igu","hl"];function T(){var e=d.pathname.indexOf("/amp/");return-1!==e&&e<10}function R(){var e,t,a,n;_&&(t=(e=new URLSearchParams(d.search)).get("q"),a=e.get("tbm"),n=e.get("udm"),"finance"===L&&u("gwsReflectFinanceTab",e.get("kptab")),!0!==S||T()||(S=!1,u("gwsCloseAmp")),c===t&&m===a&&h===n||u("gwsUpdateQuery",{q:c=t,tbm:m=a,udm:h=n}))}function k(e,t,a){u("bmCstOpenUrl",[e,t,a])}function x(e){var t,a,n,r,i,s,o,c,m=g(e.target);m&&(l(m),t=e.shiftKey,a=e[y]||1===e.button||2===e.which,n=m.origin,m.dataset.amp||m.dataset.ampTitle?(o=t,i=a,s=(r=m).dataset.ampCur||r.href,i?k(s,o,i):(u("gwsOpenAmp",{label:r.dataset.ampTitle,url:s,vid:r.dataset.ampVgi}),setTimeout(function(){T()&&(S=!0)},200))):n&&(n===b&&w===v&&(n=m.origin=v),o=m.pathname,m.origin===w&&-1!==U.indexOf(o)&&(o=m.pathname="/m"),n===w&&o.startsWith("/shopping/product/")||(m.classList.contains("sh-cb__back")&&(e.preventDefault(),d.reload()),a||n!==w||-1===P.indexOf(o)?(k(m.href,t,a),e.stopPropagation(),e.preventDefault()):(_&&(c=new URLSearchParams(m.search),E.forEach(function(e){var t=f.get(e);t&&c.set(e,t)}),"finance"===L?c.delete("tbm"):"search"===L&&f.get("adtest-useragent")&&"isch"===c.get("tbm")&&(c.set("adtest-useragent","Opera/12.02 (Android 4.1; Linux; Opera Mobi/ADR-1111101157; U; en-US) Presto/2.9.201 Version/12.02"),c.set("bm_cid","gws-images")),m.search=c),setTimeout(R)))))}e=function(e,t){return t&&t.startsWith("gws")&&(e===b||e===v)},t=function(){var e,a;_&&(f=new URLSearchParams(d.search),L=f.get("bm_pid")),e=function(){var e;(e=i.querySelector("base"))&&w===v&&(e.href=v+"/"),i.body.addEventListener("contextmenu",function(e){e.stopPropagation()})},"complete"===i.readyState||"loaded"===i.readyState||"interactive"===i.readyState?e():i.addEventListener("DOMContentLoaded",e),i.addEventListener("click",x,!0),i.addEventListener("auxclick",function(e){1===e.button&&x(e)},!0),a=function(e,t,a){var n;"gwsToggleFilterMenu"===e?(n=i.getElementById("hdtb-tls")||i.querySelector('[aria-controls="hdtbMenus"]'))&&n.click():"gwsGoBack"===e?(r.history.back(),setTimeout(R),setTimeout(R,500)):"gwsGetUrl"===e&&u(e,d.href,a)},r.addEventListener("message",function(e){var t;if(s){if(!e.origin.toLowerCase().startsWith("safari-web-extension://"))return}else if(!(e.origin===n))return;(e.isTrusted||o)&&e.source===r.parent&&(t=(e=e.data||{}).bm_method)&&a(t,e.bm_value,e.bm_request)}),R()},(e=>{var t,a;return!(r.top===r.self||i.documentElement instanceof SVGSVGElement)&&("object"!=typeof(t=d.ancestorOrigins)?1:(a=s?n.toLowerCase():n,1===t.length?t[0]===a:e&&2===t.length&&t[1]===a&&!t[0].endsWith(".google.com")))})(a)&&(p=(p=(a=d.search).match(/[&?]bm_cid=([\da-z-]{2,25})(?:&|$)/))&&p[1],e(origin,p,a))&&(p&&(i.documentElement.dataset.bmCid=p),t())})();