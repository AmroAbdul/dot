"use strict";(()=>{var i,t,e,n,a,o,r=window,s=r.location,d=document,c=("undefined"!=typeof chrome&&chrome||{}).runtime.getURL("PATH/").replace("/PATH/",""),u=c.startsWith("safari-web-extension://"),m=!u&&c.startsWith("moz-extension://");function p(e,t,n){r.parent.postMessage({bm_method:e,bm_request:n,bm_value:t},c)}function l(e,t){t=new MouseEvent(t,{bubbles:!0,cancelable:!0,view:window});e.dispatchEvent(t)}function h(){var e=s.hash.replace("#","")||"home";t!==e&&(p("keepwithwebappUpdateView",e),t=e),setTimeout(h,100)}function b(){var e,t,n=d.getElementById("preloaded-theme");if(n)return(e=-1!==s.search.indexOf("bm_udm=1"))&&(d.documentElement.dataset.bmUdm="1"),(t=d.head.textContent.match(/https:\/\/www\.gstatic\.com\/_\/apps-notes\/_\/ss\/.+?"/g))?(t=t[e?1:0].replace(/\\u003d/g,"=").split('"')[0],void(n.href!==t&&(n.href=t))):void 0;setTimeout(b,.1)}function v(){var e=[],t=d.querySelectorAll('body .notes-container div > div:first-child > div > div:first-child > div[role="button"] + div:not([role="button"]) > div[role="button"]'),n=t.length-1;i=t[n];for(var a=0;a<n;a++){var o=t[a],o=o.getAttribute("aria-label")||o.textContent.trim();e.push(o)}p("keepwithwebappLabels",e)}e=function(e,t){return"keepwithwebapp"===t&&"https://keep.google.com"===e},n=function(){var e,n;b(),h(),e=v,"complete"===d.readyState||"loaded"===d.readyState||"interactive"===d.readyState?e():d.addEventListener("DOMContentLoaded",e),n=function(e,t){var n;"keepwithwebappEditLabels"===e?i&&(l(n=i,"mousedown"),l(n,"mouseup"),l(n,"click"),setInterval(v,1e3)):"keepwithwebappSetHash"===e?s.hash=t||"":"bmCstUpdateState"===e&&(n=t,r.history.pushState({},"",n),n=new PopStateEvent("popstate",{state:{url:n}}),r.dispatchEvent(n))},r.addEventListener("message",function(e){var t;if(u){if(!e.origin.toLowerCase().startsWith("safari-web-extension://"))return}else if(!(e.origin===c))return;(e.isTrusted||m)&&e.source===r.parent&&(t=(e=e.data||{}).bm_method)&&n(t,e.bm_value,e.bm_request)})},(e=>{var t,n;return!(r.top===r.self||d.documentElement instanceof SVGSVGElement)&&("object"!=typeof(t=s.ancestorOrigins)?1:(n=u?c.toLowerCase():c,1===t.length?t[0]===n:e&&2===t.length&&t[1]===n&&!t[0].endsWith(".google.com")))})(a)&&(o=(o=(a=s.search).match(/[&?]bm_cid=([\da-z-]{2,25})(?:&|$)/))&&o[1],e(origin,o,a))&&(o&&(d.documentElement.dataset.bmCid=o),n())})();