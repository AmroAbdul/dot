"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[6157],{89845:(e,t,n)=>{n.d(t,{Z:()=>f});n(67294);var o=n(83355),i=n(13991),r=n(8848),s=n(7057),l=n(53877),c=n(42875),a=n(36700),d=n(63143),u=n(9291),h=n(26388),p=n(85893);class m extends o.Z{constructor(){super(...arguments),this.reminderTimer=void 0}UNSAFE_willMountOrUpdate(){this.createReminderTimer()}willUnmount(){this.clearReminderTimer()}createReminderTimer(){const e=this.props.value;if(!e)return;const t=l.KR(e,(0,c.r)());if(!t)return;const n=t.valueOf(),o=n-Date.now();o<0||o>d.A0||this.reminderTimer&&this.reminderTimer.timestamp===n||(this.reminderTimer&&clearTimeout(this.reminderTimer.timer),this.reminderTimer={timestamp:n,timer:setTimeout(this.enqueueForceUpdate,o)})}clearReminderTimer(){this.reminderTimer&&(clearTimeout(this.reminderTimer.timer),this.reminderTimer=void 0)}renderComponent(){const{value:e,withComma:t}=this.props;if(!e)return;const n=l.NK(e,(0,c.r)(),i.SP);let o;if(e.reminder){const t=l.Nm(e,(0,c.r)());o=t?{color:this.theme.errorText}:{color:r.ZP.blue}}const d=(0,p.jsxs)(p.Fragment,{children:[(0,s.ZV)({value:e,date_format:this.props.dateFormat,time_format:this.props.timeFormat,userTimeZone:(0,c.r)(),allowRelativeDates:!0,intl:this.props.intl,shortenDateAndRange:this.props.shortenDateAndRange,displayInUserTimezone:this.props.displayInUserTimezone}),e.reminder&&(0,a.m)({display:"inline-block",width:"1em",marginLeft:6,marginRight:2,paddingBottom:4,verticalAlign:"middle"}),t?", ":null]});return this.props.disableTooltip?(0,p.jsx)("div",{style:{...this.props.style,...o},children:d}):(0,p.jsx)(h.ZP,{renderTooltip:()=>(0,p.jsxs)(p.Fragment,{children:[this.props.tooltipHeader,(0,p.jsxs)("div",{style:v(this.theme,this.props.tooltipHeader),children:[g(n.start),n.end?` â†’ ${g(n.end)}`:""]})]}),render:e=>(0,p.jsx)("div",{style:{...this.props.style,...o},...e,children:d}),placement:this.props.tooltipPlacement})}}m.displayName="DateBox";const f=(0,u.injectIntl)(m);function g(e){return(0,s.ZW)(e,"medium_with_time")}function v(e,t){return t?{color:e.mediumInvertedTextColor}:{}}},97820:(e,t,n)=>{n.d(t,{Z:()=>p,o:()=>f});n(67294);var o=n(480),i=n(86628),r=n(24405),s=n(99036),l=n(39068),c=n(82990),a=n(19124),d=n(76836),u=n(85893);const h={display:"flex",alignItems:"center",lineHeight:"120%",minWidth:0};const p=function(e){let{propertySchema:t,showIcon:n,hideName:i,badge:r,style:s,iconStyle:l,iconSize:a}=e;window.__c={n:"Property"};const d=(0,o.O7)(),{device:p}=d,f=p.isMobile?16:14;return(0,u.jsxs)("div",{style:{...h,fontSize:f,...s},children:[n&&(0,u.jsx)("div",{style:m(Boolean(i),l),children:(0,u.jsx)(g,{propertySchema:t,iconSize:a,iconStyle:l})}),!i&&(0,u.jsx)("div",{style:{...c.Z.textOverflowStyle},children:t.name}),r]})};function m(e,t){return{marginRight:e?void 0:6,...t}}function f(e){let{propertySchema:t}=e;window.__c={n:"AIPropertyBadgeMaybe"};const n=(0,o.O7)();return(0,i.VK)((()=>(0,a.Zt)(n)&&s.qQ(t)&&s.q3(t)&&("text"===t.type||(0,a.KZ)())),[n,t])?(0,u.jsx)(d.Z,{}):null}function g(e){let{propertySchema:t,iconSize:n,iconStyle:i}=e;window.__c={n:"IconComponent"};const s=(0,r.Fg)(),c=(0,o.O7)(),{device:a}=c,d=a.isMobile?18:16;return(0,u.jsx)(l.ZP,{type:t.type,icon:t.icon,size:n||d,theme:s,style:i})}},25845:(e,t,n)=>{n.d(t,{Z:()=>oe});var o=n(67294),i=n(86628),r=n(21202),s=n(12534),l=n(68373),c=n(16354),a=n(1302),d=n(98104),u=n(29376),h=n(64921),p=n(76798),m=n(85893);function f(e){window.__c={n:"EditableRelationTokenTitle"};const{blockStore:t,titleStyle:n,shouldWrap:i,recordTitleRef:r}=e,s=(0,o.useRef)({getNode:()=>r.current}),l=(0,o.useCallback)((e=>{a.default.afterNextFlush((()=>{const e=t.getBlockTitleStore();if(!e)return;const n=e.getValue(),o=n?n[0][0].length:0,i={start:{index:o,store:e},end:{index:o,store:e}};d.NA({multiSelection:i})}))}),[t]);return(0,m.jsx)(h.Z,{style:{height:u.Mu+2,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:5,padding:"6px 8px 7px 8px",overflow:"hidden"},onClick:l,children:(0,m.jsx)(p.Z,{store:t,underline:!0,shouldWrap:i,style:n,ref:s})})}var g=n(72126),v=n(9291),x=n(33929),y=n(65187);const S=(0,v.defineMessages)({typeTitle:{defaultMessage:"Type a title...",id:"relationToken.title.placeholder"}});function C(e){window.__c={n:"EditingRelationTokenTitle"};const{blockStore:t,clickTitleBehavior:n,onTitleEnter:o}=e,r="edit"===n,s=(0,i.VK)((()=>t.getBlockTitleStore()),[t]);return(0,m.jsx)(y.Z,{store:s,disabled:!r,disableSlashCommands:!0,disableEmojiCommands:!0,disableStyleAnnotations:!0,disableInsertedDeletedAnnotations:!0,disableEmbedMenu:!0,onEnter:o,onTab:g.yR,placeholder:x.default.formatMessage(S.typeTitle),style:{padding:"6px 8px 7px 8px",textOverflow:"none",overflow:"visible",whiteSpace:"pre"},disableSelectAllBlocks:!0,pasteBehavior:"inline"})}var k=n(480),T=n(64002),b=n(30874),R=n(73935),w=n(83355),I=n(41432),j=n(8848),M=n(70203),Z=n(44805),E=n(993),z=n(95477),_=n(60682),A=n(24990);class L extends w.Z{constructor(){super(...arguments),this.node=void 0,this.handleMouseOver=e=>{const t=this.getInteractiveToken(),n=this.props.store.getTitleStore();n&&t&&E.Nh({environment:this.environment,event:e,interactiveToken:t,store:n,canEdit:this.props.canEdit})},this.handleMouseOut=e=>{const t=this.getInteractiveToken(),n=this.props.store.getTitleStore();n&&t&&E.Zl({environment:this.environment,event:e,interactiveToken:t,store:n,canEdit:this.props.canEdit})}}didMount(){super.didMount(),this.node=R.findDOMNode(this)}get theme(){const{ThemeModeStore:e}=this.environment;return(0,j.gh)({theme:e.state})}getInteractiveToken(){if(!this.node)return;const e=this.props.store,t=(0,M.x36)(e.id),n=(0,M.YCD)(t);return{textValue:[n],tokenIndex:0,textToken:n,node:this.node}}renderComponent(){const e=this.props.store,t=this.props.shouldWrap,n=this.props.style,o=this.props.disableLinks,i=this.props.disableHover,r=x.default.getIntl(),l=this.props.store.getRecordModel,c=e.id,a=(0,_.e_)(this.environment),d=z.default.domainBaseUrl,u=this.environment.currentUser.id,h=this.props.isAndroid,p=this.props.externalIntegrations;if(!c)return;if("external_object_instance_page"!==e.getType())return;const f=e.getModel();return null!=f&&f.isType(I.Ti.externalObjectInstancePage)?(0,m.jsx)("span",{onMouseOver:this.handleMouseOver,onMouseOut:this.handleMouseOut,onClick:s.Wi,children:(0,Z.dD)({blockModel:f,shouldWrap:t,index:0,style:n,disableHover:i,disableLinks:o,isAndroid:h,theme:this.theme,getRecordModel:l,currentUserId:u,baseUrl:d,emojiType:a,externalIntegrations:p,intl:r,emojiData:A.Z.state,stopLinkPropagation:!0})}):void 0}}L.displayName="ExternalObjectInstancePageMentionToken";const B=L;function P(e){window.__c={n:"ExternalObjectInstancePageMentionRelationToken"};const{blockStore:t,shouldWrap:n,style:o}=e,r=(0,i.VK)((()=>(0,T.yn)(t.getSyncedUri())),[t]),s=(0,i.VK)((()=>b.Z.integrations.state),[]),l=(0,k.O7)();return(0,m.jsx)(B,{shouldWrap:n,store:t,style:o,disableHover:!r,disableLinks:!r,isAndroid:l.device.isAndroid,externalIntegrations:s,canEdit:!0})}var U=n(24405),W=n(9953),V=n(82530),K=n(31278),O=n(84619),D=n(82990);const H={[O.lo.ExtraSmall]:{height:16,fontSize:12,margin:"0 4px 0 0",recordIconMarginRight:3,pageIconSize:16,closeIconSize:8},[O.lo.Small]:{height:18,fontSize:12,margin:"0 6px 6px 0",recordIconMarginRight:3,pageIconSize:16,closeIconSize:8},[O.lo.Medium]:{height:20,fontSize:14,margin:"0 12px 6px 0",recordIconMarginRight:4,pageIconSize:20,closeIconSize:8},[O.lo.Inline]:{height:20,fontSize:14,margin:"0 12px 0 0",recordIconMarginRight:4,pageIconSize:20,closeIconSize:8},[O.lo.Large]:{height:24,fontSize:16,margin:"0 8px 8px 0",recordIconMarginRight:4,pageIconSize:24,closeIconSize:10}};function N(e){let{height:t}=e;return{display:"flex",alignItems:"center",lineHeight:1.2,height:t}}function F(e){window.__c={n:"RelationTokenPageIcon"};const{clickTitleBehavior:t,blockStore:n,format:r,shouldWrap:s}=e,l="edit"===t,c=(0,k.O7)(),a=(0,i.VK)((()=>n.getIcon()),[n]),d=(0,i.VK)((()=>n.isEmptyPage()),[n]),{style:u}=(0,U.yK)((()=>({style:{flexShrink:0,marginRight:l?0:H[r].recordIconMarginRight,justifyContent:"flex-start",...s&&{display:"inline-block",verticalAlign:"text-top",marginBottom:-1}}})),[l,r,s]),h=(0,o.useCallback)((e=>{const t=n.getIconStore();t&&V.createAndCommit({userAction:"RelationToken.handleRecordIconChange",environment:c,perform:n=>{W.sO({store:t,value:e,transaction:n})}})}),[n,c]),p={icon:a,size:H[r].pageIconSize,isEmptyPage:d,style:u};return l?(0,m.jsx)(K.Z,{...p,disabled:!1,onChange:h,bucket:"public"}):(0,m.jsx)(K.Z,{...p,disabled:!0})}var Q=n(19525);function q(e){const{format:t,showRemoveButton:n,onClickRemove:o}=e,{height:i,closeIconSize:r}=H[t];return n?(0,m.jsx)(h.Z,{onClick:o,style:{display:"flex",alignItems:"center",justifyContent:"center",width:i,height:i,marginLeft:2,marginRight:2,flexGrow:0,flexShrink:0,borderRadius:4},children:(0,Q.b)({width:r,height:r,opacity:.5})}):null}function Y(e){window.__c={n:"RelationTokenTitle"};const{blockStore:t,shouldWrap:n,titleStyle:i,recordTitleRef:r,noUnderline:s}=e,l=(0,o.useRef)({getNode:()=>r.current});return(0,m.jsx)(p.Z,{store:t,underline:!s,shouldWrap:n,style:i,ref:l})}var $=n(15145),G=n(10906),X=n(66890),J=n(84210),ee=n(80444);var te=n(68056),ne=n(24666);const oe=(0,o.forwardRef)(((e,t)=>{const{parentStore:n,blockId:a,shouldWrap:d,format:h,showRemoveButton:p,clickTitleBehavior:f,onClickRemove:g,titleStyle:v,onTitleEnter:x,index:y,noUnderline:S}=e,C=l.G.createChildStore(n,{table:r.iU,id:a}),{style:k}=function(e){let{format:t,shouldShrink:n,shouldWrap:o,isSingle:i,style:r,clickTitleBehavior:s}=e;const l="edit"===s;return(0,U.yK)((()=>{const{fontSize:e,margin:s}=H[t],c=l?u.Mu:H[t].height;return{style:{...o?{display:"inline",lineHeight:1.5,borderRadius:4}:N({height:c}),fontSize:e,fontWeight:D.Z.fontWeight.medium,minWidth:n?0:"auto",margin:i?0:s,...t===O.lo.Inline&&{overflow:"hidden"},...r}}}),[t,n,o,i,l,r])}(e),{blockUrlPage:T,blockUrlPeek:b}=function(e){const t=(0,X.DK)(),n=(0,i.VK)((()=>(0,J.ZP)({store:e,fullyQualified:!1,pageVisitSource:$.tY.LinkInPage})),[e]);return{blockUrlPeek:(0,i.VK)((()=>{const{mainEditorCurrentBlockStore:n}=ee.default.state;return G.mb({store:e,mainEditorCurrentBlockStore:n,collectionContextStore:t,fullyQualified:!1})}),[e,t]),blockUrlPage:n}}(C),R=(0,o.useRef)(null),w=(0,o.useRef)(null),I="peek"===f,j={display:k.display,height:k.height,alignItems:k.alignItems};(0,o.useImperativeHandle)(t,(()=>C),[C]);if((0,i.VK)((()=>"external_object_instance_page"===C.getType()),[C]))return(0,m.jsx)(P,{shouldWrap:d,blockStore:C,style:k});const M=(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(F,{format:h,blockStore:C,clickTitleBehavior:f,shouldWrap:d}),(0,m.jsx)(ie,{blockStore:C,recordTitleRef:R,clickTitleBehavior:f,shouldWrap:d,titleStyle:v,noUnderline:S,onTitleEnter:x,index:y})]});return(0,m.jsxs)("div",{style:k,ref:w,children:[I?(0,m.jsx)(c.Z,{href:T,metaHref:b,onClick:s.Wi,style:j,children:M}):M,(0,m.jsx)(q,{showRemoveButton:p,onClickRemove:g,format:h})]})}));function ie(e){window.__c={n:"RelationTokenTitleContainer"};const{blockStore:t,clickTitleBehavior:n,onTitleEnter:o,index:r,recordTitleRef:s,titleStyle:l,shouldWrap:c,noUnderline:a}=e,d="edit"===n,u=function(e){return(0,i.VK)((()=>{var t;const n=ne.default.state;return"editing"===n.mode&&(null===(t=(0,te.QY)(n.multiSelection))||void 0===t?void 0:t.store)===e.getBlockTitleStore()}),[e])}(t);return d?u&&o&&r?(0,m.jsx)(C,{blockStore:t,clickTitleBehavior:n,onTitleEnter:o}):(0,m.jsx)(f,{blockStore:t,recordTitleRef:s,titleStyle:l,shouldWrap:c}):(0,m.jsx)(Y,{blockStore:t,recordTitleRef:s,titleStyle:l,shouldWrap:c,noUnderline:a})}},66890:(e,t,n)=>{n.d(t,{DK:()=>u,L1:()=>a,Y$:()=>d,xm:()=>c});n(21703);var o=n(67294),i=n(67381);const r="collectionContextStore",s=(0,i.Q)({displayName:r,legacyContextKey:r,modernContextDefaultValue:void 0}),l=s.context,c=s.legacyPropTypes,a=s.Provider;function d(){const e=o.useContext(l);if(void 0===e)throw new Error(`No context provided: ${r}`);return e}function u(){return o.useContext(l)}},35948:(e,t,n)=>{n.d(t,{C:()=>i});var o=n(67294);function i(){const e=(0,o.useRef)(null),[t,n]=(0,o.useState)(!1),i=(0,o.useCallback)((()=>{const t=e.current;t&&n(t.matches(":hover"))}),[]),r=(0,o.useCallback)((t=>{e.current=t,i()}),[i]);return(0,o.useEffect)((()=>{const t=e.current;if(t)return t.addEventListener("mouseenter",i),t.addEventListener("mouseleave",i),()=>{t.removeEventListener("mouseenter",i),t.removeEventListener("mouseleave",i)}}),[i]),[r,t]}},25130:(e,t,n)=>{n.d(t,{ZP:()=>d,nq:()=>a,o$:()=>c});var o=n(67294),i=n(55010);const r=(0,o.createContext)({menuItemRefs:{current:new Set},activeRef:void 0,setActiveRef:()=>{},onKeyDown:()=>{}});function s(e){const t=new Map(Array.from(e).filter((e=>e.current)).map((e=>[e.current,e])));return{sortedElements:Array.from(t.keys()).sort(i.Z),nodeToRef:t}}function l(){return(0,o.useContext)(r)}function c(){const{menuItemRefs:e,activeRef:t,setActiveRef:n}=l(),i=(0,o.useRef)(null),r=(0,o.useCallback)((o=>{var r,s;function l(){t||n(i),null==o||o.removeEventListener("focus",l)}(i.current&&(null==o||o.removeEventListener("focus",l)),o)&&(0===(null===(s=e.current)||void 0===s?void 0:s.size)&&o.addEventListener("focus",l));i.current=o,null===(r=e.current)||void 0===r||r.add(i)}),[e,i,t,n]);return(0,o.useEffect)((()=>{const t=e.current;return()=>{null==t||t.delete(i)}}),[e]),(0,o.useEffect)((()=>{const o=e.current;return()=>{if(null===(null==t?void 0:t.current)&&t===i&&o){const{sortedElements:e,nodeToRef:t}=s(o),i=e[0];i&&t.has(i)&&n(t.get(i))}}}),[t,n,e]),[r,i]}function a(e){const{activeRef:t}=l();return t===e||void 0===t}const d=function(){let{direction:e="vertical"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=(0,o.useRef)(new Set),[n,i]=(0,o.useState)(void 0),l=(0,o.useCallback)((o=>{let{code:r}=o;if("vertical"===e&&!["ArrowUp","ArrowDown"].includes(r)||"horizontal"===e&&!["ArrowLeft","ArrowRight"].includes(r))return;const{nodeToRef:l,sortedElements:c}=s(t.current),a=c.findIndex((e=>e===(null==n?void 0:n.current)));let d;if("vertical"===e&&"ArrowDown"===r||"horizontal"===e&&"ArrowRight"===r?d=a+1>=t.current.size?0:a+1:("vertical"===e&&"ArrowUp"===r||"horizontal"===e&&"ArrowLeft"===r)&&(d=a-1<0?t.current.size-1:a-1),void 0!==d){const e=c[d];e&&(i(l.get(e)),e.focus())}}),[n,e]);return{MenuArrowKeysProvider:r.Provider,context:{menuItemRefs:t,activeRef:n,setActiveRef:i,onKeyDown:l}}}},13148:(e,t,n)=>{n.d(t,{U:()=>r});n(67294);var o=n(45238),i=n(85893);const r=(0,o.I)("close",{viewBox:"0 0 16 16",svg:(0,i.jsx)("path",{d:"M2.89795 13.3428C3.18799 13.6262 3.6626 13.6262 3.93945 13.3494L7.99341 9.29541L12.0474 13.3494C12.3308 13.6262 12.8054 13.6328 13.0889 13.3428C13.3723 13.0593 13.3723 12.5847 13.0955 12.3079L9.0415 8.24731L13.0955 4.19336C13.3723 3.9165 13.3789 3.4353 13.0889 3.15845C12.7988 2.875 12.3308 2.875 12.0474 3.15186L7.99341 7.20581L3.93945 3.15186C3.6626 2.875 3.1814 2.86841 2.89795 3.15186C2.6145 3.44189 2.62109 3.9231 2.89795 4.19336L6.9519 8.24731L2.89795 12.3079C2.62109 12.5781 2.6145 13.0659 2.89795 13.3428Z"})})},16184:(e,t,n)=>{n.d(t,{Q:()=>r});n(67294);var o=n(45238),i=n(85893);const r=(0,o.I)("lockedFilled",{viewBox:"0 0 16 16",svg:(0,i.jsx)("path",{d:"M4.69141 14.6338H11.3018C12.2178 14.6338 12.6689 14.1826 12.6689 13.1914V8.08496C12.6689 7.18945 12.293 6.72461 11.541 6.64941V4.96094C11.541 2.36328 9.81152 1.1123 7.99316 1.1123C6.18164 1.1123 4.45215 2.36328 4.45215 4.96094V6.67676C3.74805 6.78613 3.32422 7.2373 3.32422 8.08496V13.1914C3.32422 14.1826 3.77539 14.6338 4.69141 14.6338ZM5.75098 4.83105C5.75098 3.22461 6.76953 2.35645 7.99316 2.35645C9.2168 2.35645 10.2422 3.22461 10.2422 4.83105V6.64258L5.75098 6.64941V4.83105Z"})})},22686:(e,t,n)=>{n.d(t,{f:()=>r});n(67294);var o=n(45238),i=n(85893);const r=(0,o.I)("person",{viewBox:"0 0 16 16",svg:(0,i.jsx)("path",{d:"M7.7832 8.00195C9.27344 8.00195 10.5381 6.67578 10.5381 4.95996C10.5381 3.28516 9.2666 2 7.7832 2C6.29297 2 5.01465 3.30566 5.02148 4.97363C5.02148 6.67578 6.28613 8.00195 7.7832 8.00195ZM3.51758 14.3594H12.0352C13.1631 14.3594 13.5527 14.0176 13.5527 13.3887C13.5527 11.6318 11.3242 9.21191 7.77637 9.21191C4.23535 9.21191 2 11.6318 2 13.3887C2 14.0176 2.38965 14.3594 3.51758 14.3594Z"})})},14734:(e,t,n)=>{n.d(t,{X:()=>r});n(67294);var o=n(45238),i=n(85893);const r=(0,o.I)("personCrossedOut",{viewBox:"0 0 44 44",svg:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("path",{d:"M5.4857 44H0L44 8.56549V13.0061L5.4857 44Z"}),(0,i.jsx)("path",{d:"M39.8048 44H8.66491L25.6448 30.4378C26.9394 30.6489 28.1581 30.9719 29.3009 31.4067C31.5362 32.2374 33.4346 33.326 34.9964 34.6723C36.5725 36.0044 37.7761 37.4367 38.6071 38.9692C39.4525 40.5018 39.8752 41.9555 39.8752 43.3305C39.8752 43.5675 39.8517 43.7906 39.8048 44Z"}),(0,i.jsx)("path",{d:"M30.3971 16.7973C30.3971 16.8668 30.3965 16.9359 30.3952 17.0048L19.3828 25.9192C18.7467 25.7134 18.1339 25.4228 17.5446 25.0473C16.2408 24.2023 15.1876 23.0708 14.3853 21.6528C13.5972 20.2205 13.2032 18.6163 13.2032 16.8403C13.2032 15.0929 13.5972 13.5174 14.3853 12.1137C15.1876 10.7101 16.2408 9.60007 17.5446 8.78366C18.8485 7.96725 20.267 7.55905 21.8001 7.55905C23.3332 7.55905 24.7517 7.96009 26.0556 8.76218C27.3595 9.56426 28.4054 10.6671 29.1935 12.0708C29.9959 13.4601 30.3971 15.0356 30.3971 16.7973Z"})]})})}}]);