"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[7284],{24697:(e,t,a)=>{a.d(t,{$f:()=>f,Iw:()=>r,KC:()=>i,Lb:()=>l,Z:()=>c,e2:()=>m,gE:()=>o,jM:()=>g,ky:()=>d,m0:()=>n,nK:()=>p,uS:()=>u,ye:()=>h});var s=a(97978);function n(e,t){s.j(e,"overview_analytics_filter_change",t)}function i(e,t){s.j(e,"user_analytics_engagement_timerange_filter_change",t)}function r(e,t){s.j(e,"user_analytics_table_filter_change",t)}function o(e,t){s.j(e,"user_analytics_table_sort_change",t)}function l(e,t){s.j(e,"user_analytics_export_requested",t)}function d(e,t){s.j(e,"content_analytics_engagement_timerange_filter_change",t)}function c(e,t){s.j(e,"content_analytics_export_requested",t)}function u(e,t){s.j(e,"content_analytics_table_filter_change",t)}function m(e,t){s.j(e,"content_analytics_table_timerange_filter_change",t)}function g(e,t){s.j(e,"content_analytics_table_sort_change",t)}function p(e,t){s.j(e,"workspace_analytics_tab_click",t)}function h(e,t){s.j(e,"search_analytics_table_timerange_filter_change",t)}function f(e,t){s.j(e,"search_analytics_table_sort_change",t)}},83726:(e,t,a)=>{a.d(t,{D2:()=>l,Pr:()=>p,Uk:()=>f,qA:()=>h});var s=a(59730),n=a(19889),i=a(33954),r=a(68373),o=a(54642);const l="last_90_days",d={field:"last_active",direction:"desc"};async function c(e){const{environment:t,filter:a,spaceId:s,currentSpaceId:n,usersTabData:i}=e,r=null==i?void 0:i.dailyUsersData;return r&&a===(null==i?void 0:i.graphFilter)&&n===s?r:u({environment:t,spaceId:s,filter:a})}async function u(e){const{environment:t,spaceId:a,filter:s}=e,n=await o.getDailyUsersAnalytics(t,{spaceId:a,activeWindow:"all_time"===s?"last_90_days":s});return"failed"===n.type?n.body:n.data}async function m(e){const{environment:t,filter:a,sort:s,spaceStore:n,currentSpaceId:i,usersTabData:r}=e,o=null==r?void 0:r.tableFilter,l=null==r?void 0:r.userTableSort;return null!=r&&r.usersAndStats&&o===a&&l&&l.direction===s.direction&&l.field===s.field&&i===n.id?r.usersAndStats:g({environment:t,filter:a,sort:s,spaceStore:n})}async function g(e){const{environment:t,filter:a,sort:s,spaceStore:i}=e,l=await o.loadWorkspaceAnalyticsUsers(t,{spaceId:i.id,filters:{timeRange:a},sort:s});return"failed"===l.type?l.body:l.data.users.map((e=>({stats:e,userStore:r.U6.createChildStore(i,{table:n.KJ,id:e.userId})})))}async function p(e){const{environment:t,spaceStore:a,currentTab:n,currentSpaceId:i,usersTabData:r,setState:o,graphFilter:u,tableFilter:g}=e,p=await async function(e){const{environment:t,spaceStore:a,currentSpaceId:n,usersTabData:i,graphFilter:r,tableFilter:o}=e,u=r||(null==i?void 0:i.graphFilter)||l,g=o||(null==i?void 0:i.tableFilter)||l,p=(null==i?void 0:i.userTableSort)||d,[h,f]=await Promise.all([c({environment:t,filter:u,spaceId:a.id,currentSpaceId:n,usersTabData:i}),m({environment:t,filter:g,sort:p,spaceStore:a,currentSpaceId:n,usersTabData:i})]),v=(0,s.Rp)(h)||!h?[]:h,y=(0,s.Rp)(f)||!f?[]:f;return{graphFilter:u,tableFilter:g,userTableSort:p,dailyUsersError:(0,s.Rp)(h)?h:void 0,dailyUsersData:v,usersAndStatsError:(0,s.Rp)(f)?f:void 0,usersAndStats:y}}({environment:t,spaceStore:a,currentSpaceId:i,usersTabData:r,graphFilter:u,tableFilter:g});o({currentSpaceId:a.id,currentTab:n,usersTabData:p})}async function h(e){const{environment:t,spaceStore:a}=e,n=e.nextGraphFilter||l,i=e.nextTableFilter||l,r=e.nextSort||d,[o,c]=await Promise.all([u({environment:t,filter:n,spaceId:a.id}),g({environment:t,filter:i,sort:r,spaceStore:a})]),m=(0,s.Rp)(o)||!o?[]:o,p=(0,s.Rp)(c)||!c?[]:c;return{graphFilter:n,tableFilter:i,userTableSort:r,dailyUsersError:(0,s.Rp)(o)?o:void 0,dailyUsersData:m,usersAndStatsError:(0,s.Rp)(c)?c:void 0,usersAndStats:p}}function f(e,t){if((0,s.qC)(e)){const a=(0,i.nX)(t,e);if(a)return a}return t.formatMessage({defaultMessage:"Failed to retrieve analytics. Try refreshing and reopening the settings.",id:"workspaceAnalytics.usersTab.refershUserAnalytics.defaultFailed"})}},23399:(e,t,a)=>{a.d(t,{Z:()=>C});a(67294);var s=a(480),n=a(86628),i=a(9291),r=a(47307),o=a(61652),l=a(42922),d=a(52275),c=a(78140),u=a(32163),m=a(53437),g=a(72495),p=a(26388),h=a(33929),f=a(87279),v=a(80444),y=a(49085);class x extends y.default{getInitialState(){return{open:!1}}}const _=new x;var b=a(85893);const w=(0,i.defineMessages)({30:{id:"auditLogCSV.menu.30days",defaultMessage:"Last 30 days"},60:{id:"auditLogCSV.menu.60days",defaultMessage:"Last 60 days"},90:{id:"auditLogCSV.menu.90days",defaultMessage:"Last 90 days"},365:{id:"auditLogCSV.menu.365days",defaultMessage:"Last 1 year"},Export:{id:"auditLogCSV.menu.export",defaultMessage:"Export"}});const M=(e,t)=>{const{currentSpaceStore:a}=v.default.state;a&&o.PN(e,{spaceId:a.id,exportOptions:{duration:t}})},C=(0,i.injectIntl)((function(){window.__c={n:"AuditLogCSV"};const e=(0,i.useIntl)(),t=(0,n.VK)((()=>_.state),[]);return(0,b.jsx)(m.ZP,{popupType:m.ZP.PopupType.Popup,open:t.open,placementToOrigin:m.ZP.Placement.Bottom,alignmentToOrigin:m.ZP.Alignment.End,originGap:4,disableMouseCapture:!0,disableContentScroll:!0,keepFocus:!1,render:()=>(0,b.jsx)(F,{}),onDismiss:S,enableOutsideClickDismiss:!0,origin:(0,b.jsx)(p.ZP,{renderTooltip:()=>(0,b.jsx)(i.FormattedMessage,{id:"auditLogCSV.popup.tooltip",defaultMessage:"Click for options to export the Audit Log in CSV form"}),render:a=>(0,b.jsx)(l.Z,{isLarge:!0,onClick:()=>{return e=!t.open,void _.setState({open:e});var e},...a,children:e.formatMessage(w.Export)})})})}));function S(){_.setState({open:!1})}function j(e,t){return{key:e,render:()=>(0,b.jsx)(d.Z,{focused:!1,title:h.default.formatMessage(w[e]),onClick:()=>{S(),M(t,e)}}),action:()=>{}}}function T(e,t){return{key:e,render:()=>(0,b.jsx)(d.Z,{focused:!1,title:h.default.formatMessage(w[e]),onClick:()=>{r.showDialog({message:(0,b.jsx)(i.FormattedMessage,{id:"auditLogCSV.menu.365days.prompt",defaultMessage:"Are you sure you want to export a one year CSV? You can't repeat this action while this is processing in the background."}),showCancel:!0,keepFocus:!0,items:[{label:(0,b.jsx)(i.FormattedMessage,{id:"AuditLogCSV.exportConfirmationDialog.label",defaultMessage:"Export"}),color:"blue",onAccept:()=>{S(),M(t,e)}}]})}}),action:()=>{}}}function F(){window.__c={n:"CSVMenuComponent"};const e=(0,s.O7)(),t=[j(30,e),j(60,e),j(90,e),T(365,e)];return(0,b.jsx)(c.Z,{menuType:f.og.Popup,children:(0,b.jsx)(u.Z,{type:u.i.Vertical,sections:[{key:"results",render:e=>(0,b.jsx)(g.Z,{...e}),items:t}],initialFocus:0})})}},19044:(e,t,a)=>{a.d(t,{t:()=>u});a(67294);var s=a(13991),n=a(24405),i=a(7057),r=a(9291),o=a(26388),l=a(64369),d=a(4023),c=a(85893);function u(e){window.__c={n:"AuditLogColumnDateTime"};const{auditLogEntry:t,id:a}=e,u=(0,n.yK)((()=>({container:{display:"block",width:"100%"}})),[]);return(0,c.jsx)(o.ZP,{renderTooltip:()=>(0,c.jsx)("div",{style:{display:"flex",flexDirection:"column",fontVariantNumeric:"tabular-nums"},children:(0,c.jsx)("div",{children:(0,c.jsx)(r.FormattedMessage,{id:"auditLogSettings.timeTooltip.utcTime",defaultMessage:"UTC: {time}",values:{time:(0,i.$I)(t.serverTimestamp)}})})}),render:e=>(0,c.jsx)("div",{id:a,style:u.container,children:(0,c.jsx)(l.Z,{isSecondaryColor:!0,...e,children:(0,i.Yx)(t.serverTimestamp,"medium_with_time",s.SP)})}),placement:d.u.Bottom})}},33581:(e,t,a)=>{a.d(t,{p:()=>ie});var s=a(67294),n=a(9291),i=a(44317),r=a(68626),o=a(72126),l=a(87479),d=a(80085),c=a(21202),u=a(19639),m=a(15047),g=a(29369),p=a(97880),h=a(73123),f=a(61275),v=a(85893);function y(e){return"workspace"!==e}const x=(0,n.defineMessages)({password_cleared:{id:"auditlog.actionNames.eventColumn.password_cleared",defaultMessage:"Cleared login password"},password_set:{id:"auditlog.actionNames.eventColumn.password_set",defaultMessage:"Created a login password"},password_changed:{id:"auditlog.actionNames.eventColumn.password_changed",defaultMessage:"Changed login password"},logout:{id:"auditlog.actionNames.eventColumn.logout",defaultMessage:"Logged out"},user_deleted:{id:"auditlog.actionNames.eventColumn.user_deleted",defaultMessage:"User was deleted"},member_joined:{id:"auditlog.actionNames.eventColumn.member_joined",defaultMessage:"Joined the workspace"},file_uploaded:{id:"auditlog.actionNames.eventColumn.file_uploaded",defaultMessage:"Uploaded a file"},invite_link_reset:{id:"auditlog.actionNames.eventColumn.invite_link_reset",defaultMessage:"Reset invite link"},workspace_exported:{id:"auditlog.actionNames.eventColumn.workspace_exported",defaultMessage:"Exported all workspace content"},audit_log_exported:{id:"auditlogEventFilter.eventColumn.audit_log_exported",defaultMessage:"Exported audit log for last {duration} days"},user_analytics_exported:{id:"auditlogEventFilter.eventColumn.user_analytics_exported",defaultMessage:"Exported user analytics for {daysFilterString}"},content_analytics_exported:{id:"auditlogEventFilter.eventColumn.content_analytics_exported",defaultMessage:"Exported content analytics for {daysFilterString}"},workspace_icon_changed:{id:"auditlog.actionNames.eventColumn.workspace_icon_changed",defaultMessage:"Changed workspace icon"},public_page_cleared:{id:"auditlogEventFilter.actionNames.public_page_cleared",defaultMessage:"Public home page link cleared"},scim_token_generated:{id:"auditlog.actionNames.scim_token_generated",defaultMessage:"Generated API SCIM token"},scim_token_revoked:{id:"auditlog.actionNames.scim_token_revoked",defaultMessage:"Revoked API SCIM token"},"workspace.members_exported":{id:"auditlog.actionName.eventColumn.workspace.members_exported",defaultMessage:"Exported workspace members CSV"},page_access_requests_toggled:{id:"auditlog.actionNames.eventColumn.page_access_requests_toggled",defaultMessage:"page access requests from non-members"},public_page_sharing_toggled:{id:"auditlog.actionNames.eventColumn.public_page_sharing_toggled",defaultMessage:"members sharing pages publicly"},workspace_sidebar_editing_toggled:{id:"auditlog.actionNames.eventColumn.workspace_sidebar_editing_toggled",defaultMessage:"members changing the Workspace section"},disable_team_guests_toggled:{id:"auditlog.actionNames.eventColumn.disable_team_guests_toggled",defaultMessage:"teamspace guests"},disable_guests_toggled:{id:"auditlog.actionNames.eventColumn.disable_guests_toggled",defaultMessage:"guests"},pages_to_other_workspaces_toggled:{id:"auditlog.actionNames.eventColumn.pages_to_other_workspaces_toggled",defaultMessage:"moving or duplicating pages to other workspaces"},export_toggled:{id:"auditlog.actionNames.eventColumn.export_toggled",defaultMessage:"export"},idp_metadata_xml_updated:{id:"auditlog.actionNames.eventColumn.idp_metadata_xml_updated",defaultMessage:"Updated IDP metadata XML"},idp_metadata_xml_removed:{id:"auditlog.actionNames.eventColumn.idp_metadata_xml_removed",defaultMessage:"Removed IDP metadata XML"},saml_enabled:{id:"auditlog.actionNames.saml_enabled",defaultMessage:"Enabled SAML"},saml_disabled:{id:"auditlog.actionNames.saml_disabled",defaultMessage:"Disabled SAML"},saml_enforced:{id:"auditlog.actionNames.saml_enforced",defaultMessage:"Enabled enforcing SAML"},saml_unenforced:{id:"auditlog.actionNames.saml_unenforced",defaultMessage:"Disabled enforcing SAML"},automatic_account_creation_enabled:{id:"auditlog.actionNames.automatic_account_creation_enabled",defaultMessage:"Enabled automatically creating accounts on sign-in"},automatic_account_creation_disabled:{id:"auditlog.actionNames.automatic_account_creation_disabled",defaultMessage:"Disabled automatically creating accounts on sign-in"},workspace_analytics_enabled:{id:"auditlog.actionNames.workspace_analytics_enabled",defaultMessage:"Enabled page view tracking for workspace analytics"},workspace_analytics_disabled:{id:"auditlog.actionNames.workspace_analytics_disabled",defaultMessage:"Disabled page view tracking for workspace analytics"},enabled:{defaultMessage:"Enabled",id:"auditlog.actionNames.eventColumnPrefix.enabled"},disabled:{defaultMessage:"Disabled",id:"auditlog.actionNames.eventColumn.guest_membership_requests_toggled.disabled"},a_private_page:{defaultMessage:"a private page",id:"auditlog.actionNames.eventColumn.private_page"},an_untitled_page:{defaultMessage:"an untitled page",id:"auditlog.actionNames.eventColumn.untitled_page"},thisWorkspace:{defaultMessage:"this workspace",id:"auditlog.actionNames.eventColumn.thisWorkspace"},otherWorkspace:{defaultMessage:"another workspace",id:"auditlog.actionNames.eventColumn.otherWorkspace"},workspaceLevel:{defaultMessage:"the workspace level",id:"auditlog.actionNames.eventColumn.workspaceLevel"},private:{defaultMessage:"private",id:"auditlog.actionNames.eventColumn.private"},a_file:{defaultMessage:"a file",id:"auditlog.actionNames.eventColumn.a_file"},a_file_with_extension:{defaultMessage:"a {extension} file",id:"auditlog.actionNames.eventColumn.a_file_with_extension"},team:{defaultMessage:"teamspace",id:"auditlog.actionNames.eventColumn.team"},for_a_private_team:{defaultMessage:"for a private teamspace",id:"auditlog.actionNames.eventColumn.for_private_team"},a_private_team:{defaultMessage:"a private teamspace",id:"auditlog.actionNames.eventColumn.private_team"},a_team_and_page:{defaultMessage:"a teamspace and page",id:"auditlog.actionNames.eventColumn.team_and_page"},team_member:{defaultMessage:"teamspace member",id:"auditlog.actionNames.eventColumn.team_member"},team_owner:{defaultMessage:"teamspace owner",id:"auditlog.actionNames.eventColumn.team_owner"},team_level_guest:{defaultMessage:"teamspace guest",id:"auditlog.actionNames.eventColumn.team_level_guest"},group:{defaultMessage:"group",id:"auditlog.actionNames.eventColumn.group"},user:{defaultMessage:"user",id:"auditLogEntry.user.noName"},bot:{defaultMessage:"integration",id:"auditLogEntry.bot.noName"},externalIntegration:{defaultMessage:"connection",id:"auditLogEntry.externalIntegration.noName"},guestIntegration:{defaultMessage:"integration",id:"auditLogEntry.guestIntegration.noName"},adminContentSearchQuery:{defaultMessage:"query=“{query}“",id:"auditLogEntry.adminContentSearch.query"},adminContentSearchAudience:{defaultMessage:"audience=“{audience}“",id:"auditLogEntry.adminContentSearch.audience"},adminContentSearchCreatedBy:{defaultMessage:"created by=“{createdBy}“",id:"auditLogEntry.adminContentSearch.createdBy"},adminContentSearchSharedWith:{defaultMessage:"shared with=“{sharedWith}“",id:"auditLogEntry.adminContentSearch.sharedWith"},adminContentSearchTeamspaces:{defaultMessage:"{teamspaceCount, plural, one {teamspace=“{teamspaces}“} other {teamspaces=“{teamspaces}“}}",id:"auditLogEntry.adminContentSearch.teamspace"},adminContentSearchCreatedTime:{defaultMessage:"created time=“{createdTime}“",id:"auditLogEntry.adminContentSearch.createdTime"},adminContentSearchLastEditedTime:{defaultMessage:"last edited time=“{lastEditedTime}“",id:"auditLogEntry.adminContentSearch.lastEditedTime"},adminContentSearchPredicateSplit:{defaultMessage:", ",id:"auditLogEntry.adminContentSearch.predicateSplit"},from:{defaultMessage:"from",id:"auditLogEntry.spaceContentDuplication.from"},into:{defaultMessage:"into",id:"auditLogEntry.spaceContentDuplication.into"}});function _(e,t){if(t.target)return"user"in t.target&&t.target.user?b(e,t.target.user):"bot"in t.target&&t.target.bot?w(e,t.target.bot):"group"in t.target&&t.target.group?t.target.group.name?`“${t.target.group.name}“`:"group":void 0}function b(e,t){return t?t.name&&t.email?`“${t.name}“ (${t.email})`:t.name?`“${t.name}“`:t.email?`“${t.email}“`:e.formatMessage(x.user):e.formatMessage(x.user)}function w(e,t){return t.name?`“${t.name}“`:e.formatMessage(x.bot)}const M=(0,n.defineMessages)({started:{id:"space.spaceContentDuplicationStatus.started",defaultMessage:"Started"},completed:{id:"space.spaceContentDuplicationStatus.completed",defaultMessage:"Completed"},failed:{id:"space.spaceContentDuplicationStatus.failed",defaultMessage:"Failed"}}),C=(0,n.defineMessages)({equallyRestrictive:{defaultMessage:". This is the same as the current workspace setting",id:"auditlog.actionNames.eventColumn.team_guests_toggled.team_space_equal"},moreRestrictive:{defaultMessage:". This is more restrictive than the current workspace setting",id:"auditlog.actionNames.eventColumn.team_guests_toggled.team_space_more_restrictive"},lessRestrictive:{defaultMessage:". This is less restrictive than the current workspace setting",id:"auditlog.actionNames.eventColumn.team_guests_toggled.team_space_less_restrictive"}});function S(e,t){if(void 0!==e&&void 0!==t)return e===t?(0,v.jsx)(n.FormattedMessage,{...C.equallyRestrictive}):!e&&t?(0,v.jsx)(n.FormattedMessage,{...C.moreRestrictive}):e&&!t?(0,v.jsx)(n.FormattedMessage,{...C.lessRestrictive}):void 0}function j(e){return e.name?`“${e.name}“ group`:(0,v.jsx)(n.FormattedMessage,{...x.group})}function T(e){return e.changes.name.oldValue&&e.changes.name.newValue?(0,v.jsx)(n.FormattedMessage,{defaultMessage:"from “{oldTeamName}“ to “{newTeamName}“",id:"auditlog.actionNames.eventColumn.from_old_team_name_to_new_team_name",values:{oldTeamName:e.changes.name.oldValue,newTeamName:e.changes.name.newValue}}):!e.changes.name.oldValue&&e.changes.name.newValue?(0,v.jsx)(n.FormattedMessage,{defaultMessage:"from some teamspace name to “{newTeamName}“",id:"auditlog.actionNames.eventColumn.from_unknown_team_name_to_new_team_name",values:{newTeamName:e.changes.name.newValue}}):(0,v.jsx)(n.FormattedMessage,{defaultMessage:"for {teamName}",id:"auditlog.actionNames.eventColumn.for_team_name",values:{teamName:F(e)}})}function F(e){return"team"in e.target?k(e.target.team):(0,v.jsx)(n.FormattedMessage,{...x.team})}function k(e){return e.name?`“${e.name}“ teamspace`:(0,v.jsx)(n.FormattedMessage,{...x.team})}function N(e){if(e)switch(e){case"owner":return(0,v.jsx)(n.FormattedMessage,{...x.team_owner});case"member":return(0,v.jsx)(n.FormattedMessage,{...x.team_member});case"team_level_guest":return(0,v.jsx)(n.FormattedMessage,{...x.team_level_guest})}return(0,v.jsx)(n.FormattedMessage,{...x.team_member})}function A(e){return(0,v.jsx)(n.FormattedMessage,{...E(e)})}function E(e){if(!e)return l.mq.noAccessLabel;switch(e){case"editor":return l.mq.fullAccessLabel;case"membership_admin":case"read_and_write":return l.mq.canEditLabel;case"content_only_editor":return l.mq.canEditContentLabel;case"reader":return l.mq.canReadLabel;case"comment_only":return l.mq.canCommentLabel;case"none":return l.mq.noAccessLabel;default:(0,p.t1)(e)}}function I(e){var t,a;return{oldRole:(0,v.jsx)(n.FormattedMessage,{...P(null===(t=e.changes)||void 0===t||null===(t=t.permission)||void 0===t?void 0:t.oldValue)}),newRole:(0,v.jsx)(n.FormattedMessage,{...P(null===(a=e.changes)||void 0===a||null===(a=a.permission)||void 0===a?void 0:a.newValue)})}}const P=e=>{if(!e)return l.mq.noAccessLabel;switch(e){case"editor":return l.mq.workspaceOwnerLabel;case"membership_admin":return l.mq.membershipAdminLabel;case"read_and_write":return l.mq.memberLabel;default:return l.mq.noAccessLabel}};function R(e){return D(e.target.page)}function D(e){return e.title?`“${e.title}“`:(0,v.jsx)(n.FormattedMessage,{...x.an_untitled_page})}function V(e){var t,a;return null!==(t=e.target)&&void 0!==t&&null!==(t=t.page)&&void 0!==t&&null!==(t=t.meta)&&void 0!==t&&t.parent&&"title"in(null===(a=e.target)||void 0===a||null===(a=a.page)||void 0===a||null===(a=a.meta)||void 0===a?void 0:a.parent)?`“${e.target.page.meta.parent.title}“`:(0,v.jsx)(n.FormattedMessage,{...x.an_untitled_page})}function Z(e){var t;return null!==(t=e.actor.meta)&&void 0!==t&&t.platform?(0,v.jsx)(n.FormattedMessage,{defaultMessage:"on {platform}",id:"auditlog.actionNames.eventColumn.logged_in_platform",values:{platform:e.actor.meta.platform}}):""}function B(e){switch(e){case"google":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Google",id:"auditlog.actionNames.eventColumn.logged_in_auth_type.google"});case"email":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"temporary passcode",id:"auditlog.actionNames.eventColumn.logged_in_auth_type.email"});case"admin":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"admin mode",id:"auditlog.actionNames.eventColumn.logged_in_auth_type.admin"});case"saml":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"SAML SSO",id:"auditlog.actionNames.eventColumn.logged_in_auth_type.saml"});case"apple":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Apple ID",id:"auditlog.actionNames.eventColumn.logged_in_auth_type.apple"});case"password":case"password-no-mfa":case"password-sms":case"password-totp":case"password-backup-code":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"password",id:"auditlog.actionNames.eventColumn.logged_in_auth_type.password"});default:(0,p.t1)(e)}}function L(e){return e.changes.name.oldValue?(0,v.jsx)(n.FormattedMessage,{defaultMessage:"from “{oldDomain}“",id:"auditlog.actionNames.eventColumn.old_domain",values:{oldDomain:e.changes.name.oldValue}}):""}function O(e,t){return"block"===e.table?(0,v.jsx)(n.FormattedMessage,{defaultMessage:"{teamName} page {parentPage}",id:"auditlog.actionNames.eventColumn.team_parent_page",values:{teamName:k(t),parentPage:W(e)}}):"team"===e.table?k(t):void 0}function W(e){return"title"in e?`“${e.title}“`:(0,v.jsx)(n.FormattedMessage,{...x.an_untitled_page})}function q(e,t){if(!t)return(0,v.jsx)(n.FormattedMessage,{...x.an_untitled_page});const a=t.table;return"space"===a?t.id!==e?(0,v.jsx)(n.FormattedMessage,{...x.otherWorkspace}):y(t.permissionLevel)?(0,v.jsx)(n.FormattedMessage,{...x.private}):(0,v.jsx)(n.FormattedMessage,{...x.thisWorkspace}):"team"===a?k(t):"block"===a?t.title?`“${t.title}“`:(0,v.jsx)(n.FormattedMessage,{...x.an_untitled_page}):void 0}const U=(0,n.defineMessages)({open:{defaultMessage:"Open",id:"auditlog.actionNames.eventColumn.team_privacy_types.open"},closed:{defaultMessage:"Closed",id:"auditlog.actionNames.eventColumn.team_privacy_types.closed"},private:{defaultMessage:"Private",id:"auditlog.actionNames.eventColumn.team_privacy_types.private"},default:{defaultMessage:"Default",id:"auditlog.actionNames.eventColumn.team_privacy_types.default"},unknown:{defaultMessage:"an unknown privacy state",id:"auditlog.actionNames.eventColumn.team_privacy_types.unknown"}});function z(e){return e?(0,v.jsx)(n.FormattedMessage,{...U[e]}):(0,v.jsx)(n.FormattedMessage,{...U.unknown})}function K(e){return e.changes.enabled.newValue?(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Disabled",id:"auditlog.actionNames.eventColumn.membership_requests_toggled.disabled"}):(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Enabled",id:"auditlog.actionNames.eventColumn.membership_requests_toggled.enabled"})}function G(e){return e.changes.enabled.newValue?(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Disabled",id:"auditlog.actionNames.eventColumn.external_membership_requests_toggled.disabled"}):(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Enabled",id:"auditlog.actionNames.eventColumn.external_membership_requests_toggled.enabled"})}function H(e){return"approved"===e.changes.requestStatus.newValue?(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Approved",id:"auditlog.actionNames.eventColumn.membership_request_resolved.approved"}):(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Declined",id:"auditlog.actionNames.eventColumn.membership_request_resolved.declined"})}function $(e){return e.changes.enabled.newValue?(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Disabled",id:"auditlog.actionNames.eventColumn.guest_membership_requests_toggled.disabled"}):(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Enabled",id:"auditlog.actionNames.eventColumn.guest_membership_requests_toggled.enabled"})}function Q(e){return e.changes.enabled.newValue?(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Enabled",id:"auditlog.actionNames.eventColumn.ai_admin_legal_acceptance_toggled.disabled"}):(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Disabled",id:"auditlog.actionNames.eventColumn.ai_admin_legal_acceptance_toggled.enabled"})}function Y(e,t){return t?e.formatMessage(x.enabled):e.formatMessage(x.disabled)}const J=(0,n.defineMessages)({team_members:{defaultMessage:"any teamspace member",id:"auditlog.actionNames.eventColumn.team_access_level_types.team_members"},team_owners:{defaultMessage:"only teamspace owners",id:"auditlog.actionNames.eventColumn.team_access_level_types.team_owners"},unknown:{defaultMessage:"unknown",id:"auditlog.actionNames.eventColumn.team_access_level_types.unknown"}});function X(e){return"recurrence"===e?(0,v.jsx)(n.FormattedMessage,{id:"auditlog.actionNames.eventColumn.automation_type.recurrence",defaultMessage:"a repeating automation"}):(0,v.jsx)(n.FormattedMessage,{id:"auditlog.actionNames.eventColumn.automation_type.automation",defaultMessage:"an automation"})}function ee(e){return!!e.meta&&("inSudoMode"in e.meta&&e.meta.inSudoMode)}function te(e,t,a){var s,l,C,E,P,W,U,te,se,ne,ie,re,oe,le,de,ce,ue,me,ge,pe,he,fe,ve,ye,xe,_e;switch(e.actionName){case"page.properties_edited":{const t=e.meta.propertiesUpdated,a=e.meta.propertiesUpdated.map((e=>`“${e.propertyName}“`)).join(", ");return 1===t.length?(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Edited property {properties} on {pageName}",id:"auditlog.actionNames.eventColumn.page_properties_edited.single_property",values:{properties:a,pageName:R(e)}}):(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Edited properties {properties} on {pageName}",id:"auditlog.actionNames.eventColumn.page_properties_edited.multiple_properties",values:{properties:a,pageName:R(e)}})}case"page.discussion.comment.created":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Commented on {pageName}",id:"auditlog.actionNames.eventColumn.page.discussion.comment.created",values:{pageName:R(e)}});case"page.discussion.comment.deleted":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Deleted comment on {pageName}",id:"auditlog.actionNames.eventColumn.page.discussion.comment.deleted",values:{pageName:R(e)}});case"page.discussion.comment.updated":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Edited comment on {pageName}",id:"auditlog.actionNames.eventColumn.page.discussion.comment.updated",values:{pageName:R(e)}});case"page_edited":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Edited {pageName}",id:"auditlog.actionNames.eventColumn.page_edited",values:{pageName:R(e)}});case"page_viewed":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Viewed {pageName}",id:"auditlog.actionNames.eventColumn.page_viewed_under",values:{pageName:R(e)}});case"page_deleted":return e.target.page.meta.permanentDeletion?(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Permanently deleted {pageName}",id:"auditlog.actionNames.eventColumn.page_permanently_deleted",values:{pageName:R(e)}}):(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Deleted {pageName}",id:"auditlog.actionNames.eventColumn.page_deleted",values:{pageName:R(e)}});case"page.permanently_deleted":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Permanently deleted {pageName}",id:"auditlog.actionNames.eventColumn.page.permanently_deleted",values:{pageName:R(e)}});case"page_restored":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Restored {pageName}",id:"auditlog.actionNames.eventColumn.page_restored",values:{pageName:R(e)}});case"page_exported":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Exported {pageName}",id:"auditlog.actionNames.eventColumn.page_exported",values:{pageName:R(e)}});case"page_moved":{var be,we,Me;const t=null===(be=e.changes)||void 0===be?void 0:be.team,s=e.changes.parent.oldValue,i=e.changes.parent.newValue;let r=q(e.spaceId,e.changes.parent.oldValue),o=q(e.spaceId,e.changes.parent.newValue);null!=t&&t.oldValue&&null!=t&&t.newValue&&s&&i&&("block"===s.table||"block"===i.table)?(r=O(s,null==t?void 0:t.oldValue),o=O(i,null==t?void 0:t.newValue)):"space"===(null===(we=e.changes.parent.oldValue)||void 0===we?void 0:we.table)&&"space"===(null===(Me=e.changes.parent.newValue)||void 0===Me?void 0:Me.table)&&e.changes.parent.oldValue.id===e.changes.parent.newValue.id&&(y(e.changes.parent.oldValue.permissionLevel)||y(e.changes.parent.newValue.permissionLevel))&&(r=y(e.changes.parent.oldValue.permissionLevel)?(0,v.jsx)(n.FormattedMessage,{...x.private}):(0,v.jsx)(n.FormattedMessage,{...x.workspaceLevel}),o=y(e.changes.parent.newValue.permissionLevel)?(0,v.jsx)(n.FormattedMessage,{...x.private}):(0,v.jsx)(n.FormattedMessage,{...x.workspaceLevel}));const l=r?a.formatMessage({id:"auditLogEntry.changes.page_moved.old_parent",defaultMessage:" from {oldParentName}"},{oldParentName:r}):"",d=o?a.formatMessage({id:"auditLogEntry.changes.page_moved.new_parent",defaultMessage:" to {newParentName}"},{newParentName:o}):"";return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Moved {pageName}{oldParentMessage}{newParentMessage}{inSudoMode, select, true { using administrator privileges} other {}}",id:"auditlog.actionNames.eventColumn.page_moved",values:{pageName:R(e),oldParentMessage:l,newParentMessage:d,inSudoMode:ee(e)}})}case"page_permission_updated":return function(e,t){var a,s,i;const r="bot"in t.target,o="space"in t.target,l="team"in t.target,d="group"in t.target,c="user"in t.target&&"guest"===(null===(a=t.target.user.meta)||void 0===a?void 0:a.spaceRole);var u,m;if(r)return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Updated permissions of {pageName} for bot {botName} from {oldRole} to {newRole}{inSudoMode, select, true { using administrator privileges} other {}}",id:"auditlog.actionNames.eventColumn.page_permissions_updated_workspace_bot",values:{botName:_(e,t),oldRole:A(null===(u=t.changes)||void 0===u||null===(u=u.permission)||void 0===u?void 0:u.oldValue),newRole:A(null===(m=t.changes)||void 0===m||null===(m=m.permission)||void 0===m?void 0:m.newValue),pageName:R(t),inSudoMode:ee(t)}});var g,p,h,f,y,x;if(o)return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Updated permissions of {pageName} for everyone in the workspace from {oldRole} to {newRole}{inSudoMode, select, true { using administrator privileges} other {}}",id:"auditlog.actionNames.eventColumn.page_permissions_updated_workspace_space",values:{oldRole:A(null===(g=t.changes)||void 0===g||null===(g=g.permission)||void 0===g?void 0:g.oldValue),newRole:A(null===(p=t.changes)||void 0===p||null===(p=p.permission)||void 0===p?void 0:p.newValue),pageName:R(t),inSudoMode:ee(t)}});if(l)return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Updated permissions of {pageName} for {teamName} from {oldRole} to {newRole}{inSudoMode, select, true { using administrator privileges} other {}}",id:"auditlog.actionNames.eventColumn.page_permissions_updated_team",values:{oldRole:A(null===(h=t.changes)||void 0===h||null===(h=h.permission)||void 0===h?void 0:h.oldValue),newRole:A(null===(f=t.changes)||void 0===f||null===(f=f.permission)||void 0===f?void 0:f.newValue),pageName:R(t),teamName:F(t),inSudoMode:ee(t)}});if(c)return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Updated permissions of {pageName} for guest {guestNameAndEmail} from {oldRole} to {newRole}{inSudoMode, select, true { using administrator privileges} other {}}",id:"auditlog.actionNames.eventColumn.page_permissions_updated_workspace_guest",values:{guestNameAndEmail:_(e,t),oldRole:A(null===(y=t.changes)||void 0===y||null===(y=y.permission)||void 0===y?void 0:y.oldValue),newRole:A(null===(x=t.changes)||void 0===x||null===(x=x.permission)||void 0===x?void 0:x.newValue),pageName:R(t),inSudoMode:ee(t)}});if(d){var b,w;return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Updated permissions of {pageName} for group {groupName} from {oldRole} to {newRole}{inSudoMode, select, true { using administrator privileges} other {}}",id:"auditlog.actionNames.eventColumn.page_permissions_updated_workspace_group",values:{groupName:_(e,t),oldRole:A(null===(b=t.changes)||void 0===b||null===(b=b.permission)||void 0===b?void 0:b.oldValue),newRole:A(null===(w=t.changes)||void 0===w||null===(w=w.permission)||void 0===w?void 0:w.newValue),pageName:R(t),inSudoMode:ee(t)}})}return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Updated permissions of {pageName} for {memberNameAndEmail} from {oldRole} to {newRole}{inSudoMode, select, true { using administrator privileges} other {}}",id:"auditlog.actionNames.eventColumn.page_permissions_updated_workspace_default",values:{memberNameAndEmail:_(e,t),oldRole:A(null===(s=t.changes)||void 0===s||null===(s=s.permission)||void 0===s?void 0:s.oldValue),newRole:A(null===(i=t.changes)||void 0===i||null===(i=i.permission)||void 0===i?void 0:i.newValue),pageName:R(t),inSudoMode:ee(t)}})}(a,e);case"page_created":const Fe=(0,d.zV)(e);if(null!=Fe&&null!==(s=Fe.meta)&&void 0!==s&&s.parent){var Ce,Se,je,Te;if(Fe.meta.parent.table===m.bx)return"private"===(null===(je=Fe.meta)||void 0===je?void 0:je.permissionLevel)||"private"===(null===(Te=Fe.meta)||void 0===Te?void 0:Te.pageAudience)?(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Created a private page",id:"auditlog.actionNames.eventColumn.page_created_private"}):(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Created a page in the workspace",id:"auditlog.actionNames.eventColumn.page_created_workspace"});if((null===(Ce=Fe.meta)||void 0===Ce?void 0:Ce.parent.table)===g.e0)return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Created a page under {teamName}",id:"auditlog.actionNames.eventColumn.page_created_team",values:{teamName:k(Fe.meta.parent)}});if((null===(Se=Fe.meta)||void 0===Se?void 0:Se.parent.table)===c.iU)return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Created a page under {parentPageName}",id:"auditlog.actionNames.eventColumn.page_created_under",values:{parentPageName:V(e)}})}return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Created a page",id:"auditlog.actionNames.eventColumn.page_created_general"});case"page_shared_to_web":return function(e){var t;if(void 0===e.changes.permission.newValue||"none"===e.changes.permission.newValue)return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Disabled sharing {pageName} to web{inSudoMode, select, true { using administrator privileges} other {}}",id:"auditlog.actionNames.eventColumn.page_shared_to_web.disabled",values:{pageName:R(e),inSudoMode:ee(e)}});return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Enabled sharing {pageName} to web{inSudoMode, select, true { using administrator privileges} other {}} with permissions {newRole}",id:"auditlog.actionNames.eventColumn.page_shared_to_web.enabled",values:{pageName:R(e),inSudoMode:ee(e),newRole:A(null===(t=e.changes)||void 0===t||null===(t=t.permission)||void 0===t?void 0:t.newValue)}})}(e);case"login":return function(e,t){var a,s,i;const r=null===(a=e.meta)||void 0===a?void 0:a.authType;return null!==(s=e.actor.meta)&&void 0!==s&&s.countryCode&&r?(0,v.jsx)(n.FormattedMessage,{id:"auditLog.actionNames.eventColumn.loginWithCityStateAndCountry.withAuthType",defaultMessage:"Logged in {platform} via {loginMethod} in {geolocation}",values:{platform:Z(e),geolocation:(0,f.xk)(e,t),loginMethod:B(r)}}):null!==(i=e.actor.meta)&&void 0!==i&&i.countryCode&&!r?(0,v.jsx)(n.FormattedMessage,{id:"auditLog.actionNames.eventColumn.loginWithCityStateAndCountry",defaultMessage:"Logged in {platform} in {geolocation}",values:{platform:Z(e),geolocation:(0,f.xk)(e,t)}}):r?(0,v.jsx)(n.FormattedMessage,{id:"auditLog.actionNames.eventColumn.loginWithPlatform.withAuthType",defaultMessage:"Logged in {platform} via {loginMethod}",values:{platform:Z(e),loginMethod:B(r)}}):(0,v.jsx)(n.FormattedMessage,{id:"auditLog.actionNames.eventColumn.loginWithPlatform",defaultMessage:"Logged in {platform}",values:{platform:Z(e)}})}(e,a);case"allowed_support_access":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Granted support access for {name} until {date}",id:"auditlog.actionNames.allowed_support_access",values:{date:a.formatDate(e.changes.expiresAt),name:e.target.user.name}});case"revoked_support_access":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Revoked support access for {name}",id:"auditlog.actionNames.revoked_support_access",values:{name:e.target.user.name}});case"preferred_name_changed":return function(e,t){var a;const s=!!e.target&&e.actor.actorId!==(null===(a=e.target)||void 0===a?void 0:a.user.id),i=e.changes.name.oldValue,r=e.changes.name.newValue;if(s){if(i&&r)return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Changed {memberNameAndEmail} name from “{oldValue}“ to “{newValue}“",id:"auditlog.actionNames.eventColumn.external_preferred_name_changed",values:{memberNameAndEmail:_(t,e),oldValue:i,newValue:r}});if(!i&&r)return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Set {memberNameAndEmail} name to “{newValue}“",id:"auditlog.actionNames.eventColumn.external_preferred_name_changed_to_value",values:{memberNameAndEmail:_(t,e),newValue:r}});if(i&&!r)return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Removed {memberNameAndEmail} name “{oldValue}“",id:"auditlog.actionNames.eventColumn.external_preferred_name_changed_from_value",values:{memberNameAndEmail:_(t,e),oldValue:i}})}if(i&&r)return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Changed name from “{oldValue}“ to “{newValue}“",id:"auditlog.actionNames.eventColumn.preferred_name_changed",values:{oldValue:i,newValue:r}});if(!i&&r)return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Set name to “{newValue}“",id:"auditlog.actionNames.eventColumn.preferred_name_changed_to_value",values:{newValue:r}});if(i&&!r)return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Removed name “{oldValue}“",id:"auditlog.actionNames.eventColumn.preferred_name_changed_from_value",values:{oldValue:i}});return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Name was changed",id:"auditlog.actionNames.eventColumn.preferred_name_changed_generic"})}(e,a);case"email_changed":return function(e,t){var a;return e.target&&e.actor.actorId!==(null===(a=e.target)||void 0===a?void 0:a.user.id)?(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Changed {memberNameAndEmail} email from {oldEmail} to {newEmail}",id:"auditlog.actionNames.eventColumn.external_email_changed",values:{memberNameAndEmail:_(t,e),oldEmail:e.changes.email.oldValue,newEmail:e.changes.email.newValue}}):(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Changed email from {oldEmail} to {newEmail}",id:"auditlog.actionNames.eventColumn.email_changed",values:{oldEmail:e.changes.email.oldValue,newEmail:e.changes.email.newValue}})}(e,a);case"picture_changed":return function(e,t){var a;return e.target&&e.actor.actorId!==(null===(a=e.target)||void 0===a?void 0:a.user.id)?(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Changed {memberNameAndEmail} profile picture",id:"auditlog.actionNames.eventColumn.external_picture_changed",values:{memberNameAndEmail:_(t,e)}}):(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Changed profile picture",id:"auditlog.actionNames.eventColumn.picture_changed"})}(e,a);case"member_invited":{const t=I(e);return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Invited {memberNameAndEmail} to the workspace as {newRole}",id:"auditlog.actionNames.eventColumn.member_invited",values:{memberNameAndEmail:_(a,e),newRole:t.newRole}})}case"member_role_updated":{const t=I(e);return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Updated {memberNameAndEmail} from {oldRole} to {newRole}",id:"auditlog.actionNames.eventColumn.member_role_updated",values:{memberNameAndEmail:_(a,e),oldRole:t.oldRole,newRole:t.newRole}})}case"member_removed":return e.actor.actorId===e.target.user.id?(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Left the workspace",id:"auditlog.actionNames.eventColumn.member_left"}):(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Removed {memberNameAndEmail} from the workspace",id:"auditlog.actionNames.eventColumn.member_removed",values:{memberNameAndEmail:_(a,e)}});case"guest_removed":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Removed guest {guestNameAndEmail} from the workspace",id:"auditlog.actionNames.eventColumn.guest_removed",values:{guestNameAndEmail:_(a,e)}});case"file_uploaded":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Uploaded a file to {pageName}",id:"auditlog.actionNames.eventColumn.file_uploaded_public",values:{pageName:R(e)}});case"file_downloaded":return function(e){return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Downloaded {fileName} from {pageName}",id:"auditlog.actionNames.eventColumn.file_downloaded",values:{fileName:ae(e),pageName:R(e)}})}(e);case"invite_link_toggled":return e.changes.enabled.newValue?(0,v.jsx)(n.FormattedMessage,{id:"auditlog.actionNames.eventColumn.inviteLink.enabled",defaultMessage:"Enabled invite link"}):(0,v.jsx)(n.FormattedMessage,{id:"auditlog.actionNames.eventColumn.inviteLink.disabled",defaultMessage:"Disabled invite link"});case"public_page_sharing_toggled":case"workspace_sidebar_editing_toggled":case"disable_team_guests_toggled":case"disable_guests_toggled":case"pages_to_other_workspaces_toggled":case"export_toggled":case"page_access_requests_toggled":return e.changes.enabled.newValue?(0,v.jsx)(n.FormattedMessage,{id:"auditlog.actionNames.eventColumn.toggleEvent.disabled",defaultMessage:"Disabled {workspaceSetting}",values:{workspaceSetting:a.formatMessage(x[e.actionName])}}):(0,v.jsx)(n.FormattedMessage,{id:"auditlog.actionNames.eventColumn.toggleEvent.enabled",defaultMessage:"Enabled {workspaceSetting}",values:{workspaceSetting:a.formatMessage(x[e.actionName])}});case"workspace_name_changed":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Changed workspace name from “{oldValue}“ to “{newValue}“",id:"auditlog.actionNames.eventColumn.workspace_name_changed",values:{oldValue:e.changes.name.oldValue,newValue:e.changes.name.newValue}});case"workspace_domain_changed":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Changed workspace domain {oldValue} to “{newValue}“",id:"auditlog.actionNames.eventColumn.workspace_domain_changed",values:{oldValue:L(e),newValue:e.changes.name.newValue}});case"workspace_integration_restriction_changed":return function(e){const t=void 0,{oldValue:a,newValue:s}=e.changes.integration_restrictions;if(s===t)return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Enabled members installing integrations",id:"auditlog.actionNames.eventColumn.workspace_integration_restriction_changed.no_restrictions"});if(a===t&&"approved_only"===s)return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Disabled members installing integrations",id:"auditlog.actionNames.eventColumn.workspace_integration_restriction_changed.approved_only"});if("approved_or_built_by_notion"===a&&"approved_only"===s)return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Disabled auto approval for built-by-Notion integrations",id:"auditlog.actionNames.eventColumn.workspace_integration_restriction_changed.disabled_built_by_notion.from_approved_or_built_by_notion"});if("approved_only"===a&&"approved_or_built_by_notion"===s)return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Enabled auto approval for built-by-Notion integrations",id:"auditlog.actionNames.eventColumn.workspace_integration_restriction_changed.enabled_built_by_notion"});return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Changed workspace integration restriction",id:"auditlog.actionNames.eventColumn.workspace_integration_restriction_changed.fallback_message"})}(e);case"allowed_email_domain_added":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Added “{addedValue}“ into allowable email domains",id:"auditlog.actionNames.eventColumn.allowed_email_domain_added",values:{addedValue:e.changes.domain}});case"allowed_email_domain_removed":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Removed “{removedValue}“ from allowable email domains",id:"auditlog.actionNames.eventColumn.allowed_email_domain_removed",values:{removedValue:e.changes.domain}});case"public_page_set":return e.changes.name.oldValue?(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Changed public home page from “{oldPage}“ to “{newPage}“",id:"auditlog.actionNames.eventColumn.public_page_changed",values:{oldPage:e.changes.name.oldValue,newPage:e.changes.name.newValue}}):(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Set “{newPage}“ as public home page",id:"auditlog.actionNames.eventColumn.public_page_set",values:{newPage:e.changes.name.newValue}});case"idp_metadata_url_updated":return e.changes.url.oldValue?(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Changed IDP metadata URL from “{oldValue}“ to “{newValue}“",id:"auditlog.actionNames.eventColumn.idp_metadata_url_updated",values:{oldValue:e.changes.url.oldValue,newValue:e.changes.url.newValue}}):(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Set IDP metadata URL to “{newValue}“",id:"auditlog.actionNames.eventColumn.idp_metadata_url_set",values:{newValue:e.changes.url.newValue}});case"saml_toggled":return e.changes.enabled.newValue?(0,v.jsx)(n.FormattedMessage,{...x.saml_enabled}):(0,v.jsx)(n.FormattedMessage,{...x.saml_disabled});case"saml_enforce_toggled":return e.changes.enabled.newValue?(0,v.jsx)(n.FormattedMessage,{...x.saml_enforced}):(0,v.jsx)(n.FormattedMessage,{...x.saml_unenforced});case"automatic_account_creation_toggled":return e.changes.enabled.newValue?(0,v.jsx)(n.FormattedMessage,{...x.automatic_account_creation_enabled}):(0,v.jsx)(n.FormattedMessage,{...x.automatic_account_creation_disabled});case"workspace_analytics_toggled":return e.changes.enabled.newValue?(0,v.jsx)(n.FormattedMessage,{...x.workspace_analytics_enabled}):(0,v.jsx)(n.FormattedMessage,{...x.workspace_analytics_disabled});case"workspace_creation_set_for_email_domain":return function(e,t){const{oldValue:a,newValue:s}=e.changes.workspace_creation;if(!a&&!s)return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Changed workspace creation setting",id:"auditlog.actionNames.eventColumn.workspace_creation_set_for_email_domain.fallback_message"});const i=e.changes.workspace_creation.oldValue?t.formatMessage({id:"auditLogEntry.changes.workspaceCreation.beforeSetting",defaultMessage:" from {prevWorkspaceCreationSetting}"},{prevWorkspaceCreationSetting:(0,u.nJ)(e.changes.workspace_creation.oldValue,t)}):"",r=e.changes.workspace_creation.newValue?t.formatMessage({id:"auditLogEntry.changes.workspaceCreation.afterSetting",defaultMessage:" to {afterWorkspaceCreationSetting}"},{afterWorkspaceCreationSetting:(0,u.nJ)(e.changes.workspace_creation.newValue,t)}):"";return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Changed workspace creation setting{before}{after}.",id:"auditlog.actionNames.eventColumn.workspace_creation_set_for_email_domain",values:{before:i,after:r}})}(e,a);case"member_added_to_group":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Added {memberNameAndEmail} to {groupName}",id:"auditlog.actionNames.eventColumn.member_added_to_group",values:{memberNameAndEmail:_(a,e),groupName:j(e.target.group)}});case"member_removed_from_group":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Removed {memberNameAndEmail} from {groupName}",id:"auditlog.actionNames.eventColumn.member_removed_from_group",values:{memberNameAndEmail:_(a,e),groupName:j(e.target.group)}});case"space_transfer_status_changed":return function(e,t){const{oldValue:a,newValue:s}=e.changes.spaceTransferStatus,i=e.target.space.name?t.formatMessage({id:"auditLogEntry.changes.space_transfer_status_changed.space_name",defaultMessage:" for {spaceName}"},{spaceName:e.target.space.name}):"";if(!a&&!s)return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Workspace transfer status changed{spaceNameMessage}",id:"auditlog.actionNames.eventColumn.space_transfer_status_changed.fallback_message",values:{spaceNameMessage:i}});if(!s)return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Workspace transfer request cleared{spaceNameMessage} from prior status of {oldStatus}",id:"auditlog.actionNames.eventColumn.space_transfer_status_cleared",values:{spaceNameMessage:i,oldStatus:a}});return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"{newStatus, select, requested {Workspace transfer request initiated{spaceNameMessage}.} started {Workspace transfer started{spaceNameMessage}} completed {Workspace transfer completed{spaceNameMessage}} other {Workspace transfer status change to {newStatus}{spaceNameMessage}}}",id:"auditlog.actionNames.eventColumn.space_transfer_status_changed.newStatus",values:{spaceNameMessage:i,newStatus:s}})}(e,a);case"space_claim_and_upgrade_status_changed":return function(e){const{oldValue:t,newValue:a}=e.changes.claimAndUpgradeStatus,s=(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Status changed for workspace claim of {workspaceName}",id:"auditlog.actionNames.eventColumn.space_claim_upgrade_status_changed.fallback_message",values:{workspaceName:e.target.space.name}});if(!t&&!a)return s;if(!a&&"completed"!==t)return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Pending workspace claim for {workspaceName} has been cleared from {oldStatus}",id:"auditlog.actionNames.eventColumn.space_claim_upgrade_status_cleared",values:{workspaceName:e.target.space.name,oldStatus:t}});if("completed"===a)return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"{workspaceName} has been claimed and upgraded to the Enterprise plan",id:"auditlog.actionNames.eventColumn.space_claim_upgrade_status_completed",values:{workspaceName:e.target.space.name}});if("requested"===a)return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Request to claim and upgrade {workspaceName} has been sent.",id:"auditlog.actionNames.eventColumn.space_claim_upgrade_requested",values:{workspaceName:e.target.space.name}});return s}(e);case"space_claim_deletion_status_changed":return function(e){const{oldValue:t,newValue:a}=e.changes.claimDeletionStatus,s=(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Claimable workspace deletion status change for {spaceName}",id:"auditlog.actionNames.eventColumn.space_claim_deletion_status_changed.fallback_message",values:{spaceName:e.target.space.name}});if(!t&&!a)return s;if(!a||"canceled"===a)return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Recovered workspace {spaceName} using Domain Management",id:"auditlog.actionNames.eventColumn.space_claim_deletion.status_cleared",values:{spaceName:e.target.space.name}});return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Deleted workspace {spaceName} using Domain Management",id:"auditlog.actionNames.eventColumn.space_claim_deletion.deleted",values:{spaceName:e.target.space.name}})}(e);case"membership_requests_toggled":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"{enabled} allowing members to request adding new members",id:"auditlog.actionNames.eventColumn.membership_requests_toggled",values:{enabled:K(e)}});case"external_membership_requests_toggled":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"{enabled} allowing external users to request to be added to the workspace as members",id:"auditlog.actionNames.eventColumn.external_membership_requests_toggled",values:{enabled:G(e)}});case"membership_request_resolved":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"{status} request to add {email} to the workspace as a member",id:"auditlog.actionNames.eventColumn.membership_request_resolved",values:{status:H(e),email:_(a,e)}});case"guest_membership_requests_toggled":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"{enabled} allowing page guests to request to be added to the workspace as members",id:"auditlog.actionNames.eventColumn.guest_membership_requests_toggled",values:{enabled:$(e)}});case"team_created":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Created {teamName}",id:"auditlog.actionNames.eventColumn.team_created",values:{teamName:F(e)}});case"team_archived":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Archived {teamName}",id:"auditlog.actionNames.eventColumn.team_archived",values:{teamName:F(e)}});case"team_restored":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Restored {teamName}",id:"auditlog.actionNames.eventColumn.team_restored",values:{teamName:F(e)}});case"team_default_toggled":return e.changes.enabled.newValue?(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Added {teamName} to the default teamspace list. Workspace members will automatically be added to the teamspace",id:"auditlog.actionNames.eventColumn.team_default_enabled",values:{teamName:F(e)}}):(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Removed {teamName} from the default teamspace list. Workspace members will no longer be automatically added to the teamspace",id:"auditlog.actionNames.eventColumn.team_default_disabled",values:{teamName:F(e)}});case"team_public_page_sharing_toggled":return e.changes.enabled.newValue?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Disabled members sharing pages under {teamName} publicly",id:"auditlog.actionNames.eventColumn.team_public_page_sharing_disabled",values:{teamName:F(e)}}),S((null===(l=e.meta)||void 0===l?void 0:l.spacePublicPageSharingDisabled)??(null==e?void 0:e.spacePublicPageSharingDisabled),e.changes.enabled.newValue)]}):(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Enabled members sharing pages under {teamName} publicly",id:"auditlog.actionNames.eventColumn.team_public_page_sharing_enabled",values:{teamName:F(e)}}),S((null===(C=e.meta)||void 0===C?void 0:C.spacePublicPageSharingDisabled)??(null==e?void 0:e.spacePublicPageSharingDisabled),e.changes.enabled.newValue)]});case"team_export_toggled":return e.changes.enabled.newValue?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Disabled export for {teamName}",id:"auditlog.actionNames.eventColumn.team_export_disabled",values:{teamName:F(e)}}),S((null===(E=e.meta)||void 0===E?void 0:E.spaceExportDisabled)??(null==e?void 0:e.spaceExportDisabled),e.changes.enabled.newValue)]}):(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Enabled export for {teamName}",id:"auditlog.actionNames.eventColumn.team_export_enabled",values:{teamName:F(e)}}),S((null===(P=e.meta)||void 0===P?void 0:P.spaceExportDisabled)??(null==e?void 0:e.spaceExportDisabled),e.changes.enabled.newValue)]});case"team_sidebar_editing_toggled":return e.changes.enabled.newValue?(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Disabled members changing the sidebar section for {teamName}",id:"auditlog.actionNames.eventColumn.team_sidebar_editing_disabled",values:{teamName:F(e)}}):(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Enabled members changing the sidebar section for {teamName}",id:"auditlog.actionNames.eventColumn.team_sidebar_editing_enabled",values:{teamName:F(e)}});case"team_creation_admins_setting_toggled":return e.changes.enabled.newValue?(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Disabled members creating teamspaces",id:"auditlog.actionNames.eventColumn.team_creation_admins_setting_disabled",values:{teamName:F(e)}}):(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Enabled members creating teamspaces",id:"auditlog.actionNames.eventColumn.team_creation_admins_setting_enabled",values:{teamName:F(e)}});case"team_guests_toggled":return e.changes.enabled.newValue?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Disabled guests for {teamName}",id:"auditlog.actionNames.eventColumn.team_guests_toggled_disabled",values:{teamName:F(e)}}),S((null===(W=e.meta)||void 0===W?void 0:W.spaceDisableGuests)??e.spaceDisableGuests,e.changes.enabled.newValue)]}):(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Enabled guests for {teamName}",id:"auditlog.actionNames.eventColumn.team_guests_toggled_enabled",values:{teamName:F(e)}}),S((null===(U=e.meta)||void 0===U?void 0:U.spaceDisableGuests)??e.spaceDisableGuests,e.changes.enabled.newValue)]});case"team_name_changed":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Changed teamspace name {oldTeamNameToNewTeamName}",id:"auditlog.actionNames.eventColumn.team_name_changed",values:{oldTeamNameToNewTeamName:T(e)}});case"team_description_changed":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Changed description of {teamName}",id:"auditlog.actionNames.eventColumn.team_description_changed",values:{teamName:F(e)}});case"team_icon_changed":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Changed icon of {teamName}",id:"auditlog.actionNames.eventColumn.team_icon_changed",values:{teamName:F(e)}});case"member_added_to_team":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Invited {memberNameAndEmail} to {teamName} as {teamRole}",id:"auditlog.actionNames.eventColumn.member_added_to_team",values:{memberNameAndEmail:_(a,e),teamName:F(e),teamRole:N(e.changes.teamRole.newValue)}});case"group_added_to_team":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Invited {groupName} to {teamName} as teamspace member",id:"auditlog.actionNames.eventColumn.group_added_to_team",values:{groupName:j(e.target.group),teamName:F(e)}});case"member_removed_from_team":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Removed {memberNameAndEmail} from {teamName}",id:"auditlog.actionNames.eventColumn.member_removed_from_team",values:{memberNameAndEmail:_(a,e),teamName:F(e)}});case"group_removed_from_team":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Removed {groupName} from {teamName}",id:"auditlog.actionNames.eventColumn.group_removed_from_team",values:{groupName:j(e.target.group),teamName:F(e)}});case"member_joined_team":const ke=F(e),Ne=N(e.changes.teamRole.newValue);return ee(e)?(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Joined {teamName} as {teamRole} using administrator privileges",id:"auditlog.actionNames.eventColumn.member_joined_team_privileged",values:{teamName:ke,teamRole:Ne}}):(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Joined {teamName} as {teamRole}",id:"auditlog.actionNames.eventColumn.member_joined_team",values:{teamName:ke,teamRole:Ne}});case"member_left_team":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Left {teamName}",id:"auditlog.actionNames.eventColumn.member_left_team",values:{teamName:F(e)}});case"member_team_role_updated":const Ae=_(a,e),Ee=N(e.changes.teamRole.oldValue),Ie=N(e.changes.teamRole.newValue),Pe=F(e);return ee(e)?(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Updated {memberNameAndEmail} from {oldTeamRole} to {newTeamRole} in {teamName} using administrator privileges",id:"auditlog.actionNames.eventColumn.member_team_role_updated_privileged",values:{memberNameAndEmail:Ae,oldTeamRole:Ee,newTeamRole:Ie,teamName:Pe}}):(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Updated {memberNameAndEmail} from {oldTeamRole} to {newTeamRole} in {teamName}",id:"auditlog.actionNames.eventColumn.member_team_role_updated",values:{memberNameAndEmail:Ae,oldTeamRole:Ee,newTeamRole:Ie,teamName:Pe}});case"team_user_permission_updated":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Updated {userNameOrEmail}’s custom permissions in {teamName} from {oldPermission} to {newPermission}.",id:"auditlog.actionNames.eventColumn.team_user_permission_updated",values:{userNameOrEmail:_(a,e),oldPermission:A(e.changes.permission.oldValue),newPermission:A(e.changes.permission.newValue),teamName:F(e)}});case"team_group_permission_updated":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Updated {groupName}’s custom permissions in {teamName} from {oldPermission} to {newPermission}.",id:"auditlog.actionNames.eventColumn.team_group_permission_updated",values:{groupName:j(e.target.group),oldPermission:A(e.changes.permission.oldValue),newPermission:A(e.changes.permission.newValue),teamName:F(e)}});case"team_member_default_permission_updated":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Updated default page permissions for teamspace members in {teamName} from {oldRole} to {newRole}",id:"auditlog.actionNames.eventColumn.team_member_default_permission_updated",values:{teamName:F(e),oldRole:A(null===(te=e.changes)||void 0===te||null===(te=te.permission)||void 0===te?void 0:te.oldValue),newRole:A(null===(se=e.changes)||void 0===se||null===(se=se.permission)||void 0===se?void 0:se.newValue)}});case"team_guest_default_permission_updated":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Updated default page permissions for teamspace guests in {teamName} from {oldRole} to {newRole}",id:"auditlog.actionNames.eventColumn.team_guest_default_permission_updated",values:{teamName:F(e),oldRole:A(null===(ne=e.changes)||void 0===ne||null===(ne=ne.permission)||void 0===ne?void 0:ne.oldValue),newRole:A(null===(ie=e.changes)||void 0===ie||null===(ie=ie.permission)||void 0===ie?void 0:ie.newValue)}});case"team_workspace_default_permission_updated":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Updated default page permissions for everyone else in the workspace for {teamName} from {oldRole} to {newRole}",id:"auditlog.actionNames.eventColumn.team_workspace_default_permission_updated",values:{teamName:F(e),oldRole:A(null===(re=e.changes)||void 0===re||null===(re=re.permission)||void 0===re?void 0:re.oldValue),newRole:A(null===(oe=e.changes)||void 0===oe||null===(oe=oe.permission)||void 0===oe?void 0:oe.newValue)}});case"team_privacy_type_changed":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Changed the teamspace privacy type for {teamName} from {oldType} to {newType}",id:"auditlog.actionNames.eventColumn.team_privacy_type_changed",values:{teamName:F(e),oldType:z(null===(le=e.changes)||void 0===le?void 0:le.teamAccessLevel.oldValue),newType:z(null===(de=e.changes)||void 0===de?void 0:de.teamAccessLevel.newValue)}});case"team_invite_access_changed":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Changed who can invite teamspace members to {newType} for {teamName}",id:"auditlog.actionNames.eventColumn.team_invite_access_changed",values:{teamName:F(e),newType:(_e=null===(ce=e.changes)||void 0===ce||null===(ce=ce.teamInviteAccess)||void 0===ce?void 0:ce.newValue,_e?(0,v.jsx)(n.FormattedMessage,{...J[_e]}):(0,v.jsx)(n.FormattedMessage,{...J.unknown}))}});case"teams_enabled_for_space":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Enabled teamspaces for {workspaceName}",id:"auditlog.actionNames.eventColumn.teams_enabled_for_space",values:{workspaceName:e.target.space.name}});case"private_content_transferred":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Transferred private content from {fromUserName} to {toUserName}",id:"auditLog.actionNames.eventColumn.private_content_transferred",values:{fromUserName:b(a,e.changes.userPermission.oldValue),toUserName:b(a,e.changes.userPermission.newValue)}});case"audit_log_exported":return(0,v.jsx)(n.FormattedMessage,{id:"auditlogEventFilter.eventColumn.audit_log_exported",defaultMessage:"Exported audit log for last {duration} days",values:{duration:e.meta.duration}});case"user_analytics_exported":return(0,v.jsx)(n.FormattedMessage,{id:"auditlogEventFilter.eventColumn.user_analytics_exported",defaultMessage:"Exported user analytics for {daysFilterString}",values:{daysFilterString:a.formatMessage(h.Rh[(null===(ue=e.meta)||void 0===ue?void 0:ue.daysFilter)||"last_90_days"]).toLowerCase()}});case"content_analytics_exported":return(0,v.jsx)(n.FormattedMessage,{id:"auditlogEventFilter.eventColumn.content_analytics_exported",defaultMessage:"Exported content analytics for {daysFilterString}",values:{daysFilterString:a.formatMessage(h.Rh[(null===(me=e.meta)||void 0===me?void 0:me.daysFilter)||"last_90_days"]).toLowerCase()}});case"admin_content_search_queried":case"admin_content_search_exported":function Re(e){return e.join(a.formatMessage(x.adminContentSearchPredicateSplit))}function De(e){return"starting"in e&&"ending"in e?`${e.starting} - ${e.ending}`:"starting"in e?`${e.starting} - `:"ending"in e?` - ${e.ending}`:void 0}const Ve=e.searchParameters.query&&a.formatMessage(x.adminContentSearchQuery,{query:e.searchParameters.query}),Ze=e.searchParameters.teamspaces&&e.searchParameters.teamspaces.length>0&&a.formatMessage(x.adminContentSearchTeamspaces,{teamspaceCount:e.searchParameters.teamspaces.length,teamspaces:Re(e.searchParameters.teamspaces)}),Be=e.searchParameters.createdBy&&e.searchParameters.createdBy.length>0&&a.formatMessage(x.adminContentSearchCreatedBy,{createdBy:Re(e.searchParameters.createdBy)}),Le=e.searchParameters.sharedWith&&e.searchParameters.sharedWith.length>0&&a.formatMessage(x.adminContentSearchSharedWith,{sharedWith:Re(e.searchParameters.sharedWith)}),Oe=e.searchParameters.audience&&e.searchParameters.audience.length>0&&a.formatMessage(x.adminContentSearchAudience,{audience:Re(e.searchParameters.audience)}),We=e.searchParameters.createdTime&&a.formatMessage(x.adminContentSearchCreatedTime,{createdTime:De(e.searchParameters.createdTime)}),qe=e.searchParameters.lastEditedTime&&a.formatMessage(x.adminContentSearchLastEditedTime,{lastEditedTime:De(e.searchParameters.lastEditedTime)}),Ue=o.oA([Ve,Ze,Be,Le,Oe,We,qe]);if("admin_content_search_queried"===e.actionName){if(0===Ue.length)return(0,v.jsx)(n.FormattedMessage,{id:"auditlogEventFilter.eventColumn.admin_content_search_queried.no_filters",defaultMessage:"Ran a content search with no filters"});{const e=Re(Ue);return(0,v.jsx)(n.FormattedMessage,{id:"auditlogEventFilter.eventColumn.admin_content_search_queried",defaultMessage:"Ran a content search with the following criteria: {searchCriteria}",values:{searchCriteria:e}})}}if(0===Ue.length)return(0,v.jsx)(n.FormattedMessage,{id:"auditlogEventFilter.eventColumn.admin_content_search_exported.no_filters",defaultMessage:"Exported a content search result with no filters"});{const e=Re(Ue);return(0,v.jsx)(n.FormattedMessage,{id:"auditlogEventFilter.eventColumn.admin_content_search_exported",defaultMessage:"Exported a content search result with the following criteria: {searchCriteria}",values:{searchCriteria:e}})}case"admin_managed_users_log_out_all":{const t=a.formatList(e.meta.emailDomains,{type:"conjunction"});return(0,v.jsx)(n.FormattedMessage,{id:"auditlogEventFilter.eventColumn.admin_managed_users_log_out_all",defaultMessage:"Logged out all managed users with the email domains {emailDomains}",values:{emailDomains:t}})}case"admin_managed_users_log_out_one":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Logged out {guestNameAndEmail} from all of their active sessions",id:"auditlog.actionNames.eventColumn.admin_managed_users_log_out_one",values:{guestNameAndEmail:_(a,e)}});case"admin_managed_users_password_cleared_one":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Reset the password and MFA settings for {guestNameAndEmail} and logged them out of their active sessions",id:"auditlog.actionNames.eventColumn.admin_managed_users_password_cleared_one",values:{guestNameAndEmail:_(a,e)}});case"admin_managed_users_password_cleared":{const t=a.formatList(e.meta.emailDomains,{type:"conjunction"});return(0,v.jsx)(n.FormattedMessage,{id:"auditlogEventFilter.eventColumn.admin_managed_users_password_cleared",defaultMessage:"Cleared passwords for all users with the email domains {emailDomains}",values:{emailDomains:t}})}case"automation_created":return(0,v.jsx)(n.FormattedMessage,{id:"auditlog.actionNames.eventColumn.automation_created",defaultMessage:"Created {automationType} on {pageTitle}",values:{automationType:X(e.meta.automationType),pageTitle:R(e)}});case"automation_edited":return(0,v.jsx)(n.FormattedMessage,{id:"auditlog.actionNames.eventColumn.automation_edited",defaultMessage:"Edited {automationType} on {pageTitle}",values:{automationType:X(e.meta.automationType),pageTitle:R(e)}});case"ai_admin_legal_acceptance_toggled":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"{enabled} Notion AI for the workspace.",id:"auditlog.actionNames.eventColumn.ai_admin_legal_acceptance_toggled",values:{enabled:Q(e)}});case"space_consolidation_started":case"space_consolidation_completed":case"space_consolidation_failed":const ze=e.spaceId===e.meta.spaceConsolidationMetadata.source_space_id,Ke=e.meta.spaceConsolidationMetadata.source_space_name??e.meta.spaceConsolidationMetadata.source_space_id,Ge=e.meta.spaceConsolidationMetadata.target_space_name??e.meta.spaceConsolidationMetadata.target_space_id,He=e.changes.spaceContentDuplicationStatus.newValue;return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"{status} workspace consolidation {direction} {spaceName}.",id:"auditlog.actionNames.eventColumn.space_consolidation_status_changed",values:{status:He?(0,v.jsx)(n.FormattedMessage,{...M[He]}):"",spaceName:ze?Ge:Ke,direction:(0,v.jsx)(n.FormattedMessage,{...ze?x.into:x.from})}});case"mfa_sms_toggled":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"{enabled} SMS MFA on “{value}“",id:"auditlog.actionNames.eventColumn.mfa_sms_toggled",values:{value:null!==(ge=e.changes)&&void 0!==ge&&ge.maskedPhoneNumber.oldValue?null===(pe=e.changes)||void 0===pe?void 0:pe.maskedPhoneNumber.oldValue:null===(he=e.changes)||void 0===he?void 0:he.maskedPhoneNumber.newValue,enabled:null!==(fe=e.changes)&&void 0!==fe&&fe.enabled.newValue?"Enabled":"Disabled"}});case"mfa_totp_toggled":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"{enabled} TOTP MFA",id:"auditlog.actionNames.eventColumn.mfa_totp_toggled",values:{enabled:null!==(ve=e.changes)&&void 0!==ve&&ve.enabled.newValue?"Enabled":"Disabled"}});case"mfa_backup_code_toggled":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"{enabled} backup codes for MFA",id:"auditlog.actionNames.eventColumn.mfa_backup_code_toggled",values:{enabled:null!==(ye=e.changes)&&void 0!==ye&&ye.enabled.newValue?"Enabled":"Disabled"}});case"user_suspended":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Suspended {userNameAndEmail}",id:"auditLogEntry.user_suspended",values:{userNameAndEmail:_(a,e)}});case"user_unsuspended":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Reactivated {userNameAndEmail}",id:"auditLogEntry.user_unsuspended",values:{userNameAndEmail:_(a,e)}});case"user_deleted":return e.target?(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Deleted {userNameAndEmail}",id:"auditLogEntry.user_deleted",values:{userNameAndEmail:b(a,e.target.user)}}):(0,v.jsx)(n.FormattedMessage,{...x.user_deleted});case"workspace.settings.prevent_granting_support_access_updated":return e.changes.enabled.newValue?(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Disabled managed user members' ability to grant support access for their account.",id:"auditLogEntry.workspace_domain_settings_prevent_granting_support_access_updated.enabled"}):(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Enabled managed user members' ability to grant support access for their account.",id:"auditLogEntry.workspace_domain_settings_prevent_granting_support_access_updated.disabled"});case"workspace.settings.prevent_profile_edits_updated":return e.changes.enabled.newValue?(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Disabled managed user members' ability to edit their profile information.",id:"auditLogEntry.workspace_domain_settings_prevent_profile_edits_updated.enabled"}):(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Enabled managed user members' ability to edit their profile information.",id:"auditLogEntry.workspace_domain_settings_prevent_profile_edits_updated.disabled"});case"workspace.settings.external_workspace_access_updated":return e.changes.enabled.newValue?(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Disabled managed user members' ability to join external workspaces.",id:"auditLogEntry.workspace_domain_settings_external_workspace_access_updated.enabled"}):(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Enabled managed user members' ability to join external workspaces.",id:"auditLogEntry.workspace_domain_settings_external_workspace_access_updated.disabled"});case"workspace.settings.custom_session_duration_updated":return void 0!==e.changes.valueMs.oldValue&&void 0!==e.changes.valueMs.newValue?(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Changed the session duration for all managed users from {oldDuration} to {newDuration}.",id:"auditLogEntry.workspace_domain_settings_session_duration_updated",values:{oldDuration:(0,i.Ct)(e.changes.valueMs.oldValue,a),newDuration:(0,i.Ct)(e.changes.valueMs.newValue,a)}}):(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Changed the session duration for all managed users.",id:"auditLogEntry.workspace_domain_settings_session_duration_updated.disabled"});case"integration.created":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Added {botName} to the workspace",id:"auditLogEntry.integration.created",values:{botName:w(a,e.meta.bot)}});case"integration.deleted":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Removed {botName} from workspace",id:"auditLogEntry.integration.deleted",values:{botName:w(a,e.meta.bot)}});case"page.automation_deleted":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Deleted automation {automationType} from {pageTitle}",id:"auditLogEntry.page.automation_deleted",values:{automationType:X(e.meta.automationType),pageTitle:R(e)}});case"page.file_deleted":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Deleted file {fileName} from {pageTitle}",id:"auditLogEntry.page.file_deleted",values:{fileName:ae(e),pageTitle:R(e)}});case"integration.secret_reset":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Reset authentication secret of {botName}",id:"auditLogEntry.integration.secret_reset",values:{botName:w(a,e.meta.bot)}});case"workspace.external_account_connected":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Connected external/public integration {integrationName}",id:"auditLogEntry.workspace.external_account_connected",values:{integrationName:w(a,e.meta.bot)}});case"workspace.external_account_disconnected":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Disconnected external/public integration {integrationName}",id:"auditLogEntry.workspace.external_account_disconnected",values:{integrationName:w(a,e.meta.bot)}});case"workspace.integration_added":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Added {integrationName} to the workspace",id:"auditLogEntry.workspace.workspace.integration_added",values:{integrationName:w(a,e.meta.bot)}});case"workspace.integration_removed":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Removed {integrationName} from workspace",id:"auditLogEntry.workspace.workspace.integration_removed",values:{integrationName:w(a,e.meta.bot)}});case"user.settings.analytics_tracking_setting_updated":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"{enabledOrDisabled} page view tracking on their user account",id:"auditLogEntry.user.settings.analytics_tracking_setting_updated",values:{enabledOrDisabled:Y(a,Boolean(null===(xe=e.changes)||void 0===xe||null===(xe=xe.enabled)||void 0===xe?void 0:xe.newValue))}});case"workspace.settings.guest_invite_request_setting_updated":return function(e,t){var a;return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"{enabledOrDisabled} allowing members to request inviting guests",id:"auditLogEntry.workspace.settings.guest_invite_request_setting_updated",values:{enabledOrDisabled:Y(t,Boolean(null===(a=e.changes)||void 0===a||null===(a=a.enabled)||void 0===a?void 0:a.newValue))}})}(e,a);case"workspace.guest_invite_request_resolved":return function(e,t){const a=e.changes.requestStatus.newValue;return"approved"===a?(0,v.jsx)(n.FormattedMessage,{id:"auditLog.actionNames.eventColumn.workspace.guest_invite_request_resolved.approved",defaultMessage:"Approved {requestorNameAndEmail}'s request to add guest {guestNameAndEmail} to {pageTitle}",values:{requestorNameAndEmail:b(t,e.target.user),guestNameAndEmail:b(t,e.meta.targetGuest),pageTitle:D(e.meta.pagesAndRoles[0].page)}}):"rejected"===a?(0,v.jsx)(n.FormattedMessage,{id:"auditLog.actionNames.eventColumn.workspace.guest_invite_request_resolved.rejected",defaultMessage:"Declined request to add guest {guestNameAndEmail} to {pageTitle}",values:{guestNameAndEmail:b(t,e.meta.targetGuest),pageTitle:D(e.meta.pagesAndRoles[0].page)}}):(0,v.jsx)(v.Fragment,{})}(e,a);case"workspace_exported":case"workspace_icon_changed":case"public_page_cleared":case"logout":case"password_changed":case"password_cleared":case"password_set":case"revoked_support_access":case"user_suspended":case"user_unsuspended":case"member_joined":case"invite_link_toggled":case"scim_token_generated":case"scim_token_revoked":case"invite_link_reset":case"idp_metadata_xml_removed":case"idp_metadata_xml_updated":case"workspace.members_exported":return(0,v.jsx)(n.FormattedMessage,{...x[e.actionName]});case"organization.created":return(0,v.jsx)(v.Fragment,{});default:if("local"!==t)return r.log({level:"error",from:"auditLogEvent",type:"AuditLogEvent",data:{miscDataToConvertToString:{data:e}}}),(0,v.jsx)(v.Fragment,{});(0,p.t1)(e)}}function ae(e){const{name:t,extension:a}=e.target.file;return t?`“${t}“`:a?(0,v.jsx)(n.FormattedMessage,{...x.a_file_with_extension,values:{extension:a}}):(0,v.jsx)(n.FormattedMessage,{...x.a_file})}var se=a(82990),ne=a(26388);a(95477);function ie(e){window.__c={n:"AuditLogColumnEvent"};const{auditLogEntry:t,id:a}=e,[i,r]=(0,s.useState)(""),o=(0,n.useIntl)();return(0,s.useEffect)((()=>{const e=document.getElementById(a);r((null==e?void 0:e.textContent)||"")}),[a]),(0,v.jsx)(ne.ZP,{style:{whiteSpace:"normal"},delayThreshold:80,renderTooltip:()=>(0,v.jsx)(oe,{text:i,auditLogEntry:t}),placement:ne.ug.Bottom,render:e=>(0,v.jsx)("div",{...e,style:{fontSize:14,...se.Z.textOverflowStyle},id:a,children:(0,v.jsx)(re,{auditLogEntry:t,env:"production",intl:o})})})}function re(e){const{auditLogEntry:t,env:a,intl:s}=e;return te(t,a,s)}function oe(e){var t,a;window.__c={n:"AuditLogEventTooltip"};const{auditLogEntry:s,text:i}=e,r=(0,n.useIntl)(),o=(0,f.q6)({auditLogEntry:s,intl:r});return(0,v.jsxs)("div",{children:[i,(null===(t=s.actor.meta)||void 0===t?void 0:t.ipAddress)&&(0,v.jsx)("div",{children:(0,v.jsx)(n.FormattedMessage,{defaultMessage:"IP address: {ip}",values:{ip:null===(a=s.actor.meta)||void 0===a?void 0:a.ipAddress},id:"auditLogSettings.metadata.ipAddress"})}),(0,v.jsx)("div",{children:(0,f.xk)(s,r)}),o&&(0,v.jsx)(n.FormattedMessage,{id:"auditLogColumnEvent.tooltip.audienceMessage",defaultMessage:"Page audience: {audience}",values:{audience:o}})]})}},86100:(e,t,a)=>{a.d(t,{Z:()=>B});a(57658),a(67294);var s=a(83355),n=a(24405),i=a(11378),r=a(8848),o=a(61275),l=a(58573),d=a(67220),c=a(72126),u=a(97880),m=a(9291),g=a(45257),p=a(42922),h=a(52275),f=a(60458),v=a(74194),y=a(78140),x=a(32163),_=a(89728),b=a(53437),w=a(72495),M=a(64369),C=a(91642),S=a(4708),j=a(87279),T=a(95697),F=a(77080),k=a(29798),N=a(49085),A=a(80085);let E=function(e){return e.All="All",e.Partial="Partial",e.None="None",e}({});class I extends N.default{getInitialState(){return{categorySelections:{page:E.All,space:E.All,team:E.All,account:E.All},categoryToggleOpen:{page:!0,space:!0,team:!0,account:!0},searchQuery:void 0,actionSelections:(0,u.Xc)(A.yv,(()=>!0)),isMenuOpen:!1,renderOrder:[{category:"page",orderedActions:A.dq.page},{category:"space",orderedActions:A.dq.space},{category:"account",orderedActions:A.dq.account},{category:"team",orderedActions:A.dq.team}]}}getAllActionNames(){return(0,u.Yd)(this.state.actionSelections)}getSelectedActionNames(){return this.getAllActionNames().filter((e=>this.state.actionSelections[e]))}hasActionNameSelected(){const e=this.getAllActionNames(),t=this.getSelectedActionNames();return t.length>0&&t.length!==e.length}updateSearchQuery(e){this.setState({...this.state,searchQuery:e})}toggleCategorySelection(e){const t=e.category;this.setState({...this.state,categoryToggleOpen:{...this.state.categoryToggleOpen,[t]:!this.state.categoryToggleOpen[t]}})}selectCategorySelection(e){const t=e.category,a=this.state.categorySelections[t],s=a===E.None||a===E.Partial?E.All:E.None,n=s===E.All,i={...this.state.actionSelections},r=this.state.renderOrder.find((e=>e.category===t));r&&(r.orderedActions.forEach((e=>{i[e]=n})),this.setState({...this.state,actionSelections:i,categorySelections:{...this.state.categorySelections,[r.category]:s}}))}selectActionName(e,t){const a=this.state.actionSelections[e],s={...this.state.actionSelections,[e]:!a},n=t.orderedActions.filter((e=>s[e])).length,i=0===n?E.None:n===t.orderedActions.length?E.All:E.Partial;this.setState({...this.state,actionSelections:s,categorySelections:{...this.state.categorySelections,[t.category]:i}})}clearAllSelections(){const e=this.getBulkUpdateNextActionSelectionState((0,u.Yd)(this.state.actionSelections),!1),t=this.getBulkUpdateNextCategorySelectionState((0,u.Yd)(this.state.categorySelections),E.None);this.setState({...this.state,actionSelections:e,categorySelections:t})}getBulkUpdateNextCategorySelectionState(e,t){const a={...this.state.categorySelections};return e.forEach((e=>{a[e]=t})),a}getBulkUpdateNextActionSelectionState(e,t){const a={...this.state.actionSelections};return e.forEach((e=>{a[e]=t})),a}}var P=a(5210),R=a(85893);const D={page:(0,R.jsx)(m.FormattedMessage,{id:"auditlogEventFilter.categoryName.page",defaultMessage:"Page"}),space:(0,R.jsx)(m.FormattedMessage,{id:"auditlogEventFilter.categoryName.workspace",defaultMessage:"Workspace"}),team:(0,R.jsx)(m.FormattedMessage,{id:"auditlogEventFilter.categoryName.team",defaultMessage:"Teamspace"}),account:(0,R.jsx)(m.FormattedMessage,{id:"auditlogEventFilter.categoryName.account",defaultMessage:"Account"})};function V(e){let{totalNumEventsForCategory:t,numSelectedForCategory:a,category:s,categoryOpen:i,shouldShowCount:r,onCategoryClick:o,onCategoryToggleClick:l,...d}=e;window.__c={n:"AuditLogCategoryMenuItem"};const c=(0,n.yK)((e=>({textWrapperStyle:{margin:0},title:{margin:0,display:"flex",alignItems:"center"},categoryText:{marginLeft:8,fontWeight:600},categorySubHeader:{marginLeft:6},toggleButton:{marginLeft:2,marginRight:2}})),[]);let u,g;return u=r?t===a?(0,R.jsx)(m.FormattedMessage,{id:"auditlogEventFilter.allEventsSelected",defaultMessage:"({totalNum} events)",values:{totalNum:t}}):(0,R.jsx)(m.FormattedMessage,{id:"auditlogEventFilter.numEventsSelected",defaultMessage:"({numSelected} of {totalNum} events selected)",values:{numSelected:a,totalNum:t}}):null,g=t===a||0!==a&&"partial",(0,R.jsx)(h.Z,{...d,className:"notranslate",textWrapperStyle:c.textWrapperStyle,focused:!1,title:(0,R.jsxs)("div",{style:c.title,children:[(0,R.jsx)(P.Z,{style:c.toggleButton,open:i,onClick:l,isSidebar:!1,fill:!1,icon:"chevron"}),(0,R.jsx)(f.Z,{checked:g,size:14,checkSize:8,onClick:o}),(0,R.jsx)(M.Z,{style:c.categoryText,children:D[s]}),(0,R.jsx)(M.Z,{isSecondaryColor:!0,style:c.categorySubHeader,children:u})]})})}class Z extends s.Z{constructor(){super(...arguments),this.storeTypes={componentStore:I,lastSelectionStore:I,menuListStore:k.Z},this.renderMenu=()=>{const{componentStore:e,menuListStore:t}=this.stores,a=W(this.theme),s=[];let n=0,i=0;const r=e.state.searchQuery;for(const d of e.state.renderOrder){const t=d.category;if("team"===t&&!(0,T.bq)())continue;const a=[];let o=0;for(const s of d.orderedActions)this.eventsToFilterOut.includes(s)||(a.push(this.renderActionNameMenu(s,d)),e.state.actionSelections[s]&&o++);if(n+=o,i+=a.length,s.push(this.renderCategoryMenu({renderGroup:d,shouldShowCount:!Boolean(r),totalNumEventsForCategory:a.length,numSelectedForCategory:o})),e.state.categoryToggleOpen[t])if(r){const e=(0,l.ZP)(r,a,L);s.push(...e)}else s.push(...a)}const o={key:"results",items:s,render:e=>(0,R.jsx)(w.Z,{...e,title:null,loading:!1})};return(0,R.jsxs)("div",{style:a.container,children:[(0,R.jsx)(v.Z,{style:a.searchInput,placeholder:this.props.intl.formatMessage({id:"auditlogEventFilter.searchPlaceholder",defaultMessage:"Search for an event"}),onChange:this.handleUpdateSearchQuery,value:e.state.searchQuery,showClearButton:!0}),r&&(0,R.jsx)(O,{totalNumSelected:n,totalNumEvents:i}),(0,R.jsx)(y.Z,{menuType:j.og.Popup,header:null,maxHeight:356,children:(0,R.jsx)(x.Z,{type:x.i.Vertical,store:t,initialFocus:0,sections:[o]})}),(0,R.jsxs)(w.Z,{topBorder:!0,style:{padding:"8px 8px 2px 8px",justifyContent:"space-between",display:"flex"},children:[(0,R.jsx)(_.Z,{onClick:()=>{this.handleClear()},children:(0,R.jsx)(m.FormattedMessage,{id:"auditlogEventFilter.clearButton",defaultMessage:"Clear"})}),(0,R.jsx)(p.Z,{onClick:()=>{this.handleApply()},children:(0,R.jsx)(m.FormattedMessage,{id:"auditlogEventFilter.applyButton",defaultMessage:"Apply"})})]})]})},this.renderPillButtonOrigin=e=>{const{componentStore:t}=this.stores,a=t.hasActionNameSelected();return(0,R.jsx)(g.Z,{on:a,icon:(0,d.S)({width:16,marginRight:6,fill:"currentColor"}),title:(0,R.jsx)("span",{children:e}),onClick:()=>{this.setMenuOpen(!0)}})},this.featureGatedEventsToFilterOut=(0,u.qP)(i.lo).reduce(((e,t)=>{let[a,s]=t;return F.default.checkGate(a)?e:[...e,...s]}),[]),this.teamspaceGuestEventsToFilterOut=(0,S.F$)()?[]:["team_guest_default_permission_updated"],this.guestMembershipEventsToFilterOut=(0,S.Ye)()?[]:["guest_membership_requests_toggled"],this.eventsToFilterOut=[...this.featureGatedEventsToFilterOut,...this.teamspaceGuestEventsToFilterOut,...this.guestMembershipEventsToFilterOut],this.setMenuOpen=e=>{const{componentStore:t}=this.stores;t.setState({...t.state,isMenuOpen:e})},this.handleUpdateSearchQuery=e=>{this.stores.componentStore.updateSearchQuery(e.target.value)}}renderComponent(){const{componentStore:e}=this.stores,t=W(this.theme),a=(0,R.jsx)(m.FormattedMessage,{id:"auditlogEventFilter.title",defaultMessage:"Event"}),s=this.renderPillButtonOrigin(a);return(0,R.jsx)(C.Z,{marginAfter:!1,children:(0,R.jsx)(b.ZP,{popupType:b.ZP.PopupType.Popup,placementToOrigin:b.ZP.Placement.Bottom,alignmentToOrigin:b.ZP.Alignment.Start,open:e.state.isMenuOpen,render:this.renderMenu,onDismiss:()=>{this.handleMenuCloseFromOutside()},keepFocus:!0,origin:s,preventScaleTransition:!0,style:t.popup})})}renderCategoryMenu(e){const{renderGroup:t,shouldShowCount:a,totalNumEventsForCategory:s,numSelectedForCategory:n}=e,{componentStore:i}=this.stores,r=t.category,o=()=>{i.toggleCategorySelection(t)},l=()=>{i.selectCategorySelection(t)};return{key:r,action:o,render:e=>(0,R.jsx)(V,{totalNumEventsForCategory:s,numSelectedForCategory:n,category:r,categoryOpen:i.state.categoryToggleOpen[r],shouldShowCount:a,onCategoryToggleClick:o,onCategoryClick:l,...e}),localizedActionName:null,actionName:null}}renderActionNameMenu(e,t){const{intl:a}=this.props,{componentStore:s}=this.stores,n=()=>{s.selectActionName(e,t)},i=a.formatMessage(o.TE[e]);return{key:e,action:n,render:t=>(0,R.jsx)(h.Z,{...t,icon:(0,R.jsx)(f.Z,{checked:s.state.actionSelections[e],size:14,checkSize:8,onClick:n}),focused:!1,title:i,className:"notranslate",style:{paddingLeft:32},textWrapperStyle:{marginLeft:4}}),actionName:e,localizedActionName:i}}handleMenuCloseFromOutside(){const{componentStore:e,lastSelectionStore:t}=this.stores;e.setState({...e.state,actionSelections:{...t.state.actionSelections}}),this.setMenuOpen(!1)}handleClear(){const{componentStore:e}=this.stores;e.clearAllSelections()}handleApply(){const{onChange:e}=this.props,{componentStore:t,lastSelectionStore:a}=this.stores,s=t.getAllActionNames(),n=t.getSelectedActionNames();e(s.length===n.length?[]:n),0===n.length&&t.reset(),a.setState({...a.state,actionSelections:{...t.state.actionSelections}}),this.setMenuOpen(!1)}}Z.displayName="AuditLogEventFilter";const B=(0,m.injectIntl)(Z);function L(e){var t;return c.oA([e.key,null===(t=e.localizedActionName)||void 0===t?void 0:t.toLowerCase()]).join(" ")}function O(e){let{totalNumSelected:t,totalNumEvents:a}=e;window.__c={n:"SelectedEventsPill"};const s=(0,n.yK)((e=>({container:{background:r.ZP.diffBackground,color:r.ZP.diffTextColor,paddingInline:6,margin:8,marginBottom:0,borderRadius:4,fontWeight:510,width:"fit-content"},textWrapperStyle:{marginLeft:8}})),[]);return(0,R.jsx)(M.Z,{style:s.container,children:(0,R.jsx)(m.FormattedMessage,{id:"auditLogEventFilter.selectedPill",defaultMessage:"{totalNumSelected} of {totalNumEvents} selected",values:{totalNumSelected:t,totalNumEvents:a}})})}function W(e){return{container:{minWidth:460},searchInput:{padding:8,borderBottomLeftRadius:0,borderBottomRightRadius:0,boxShadow:"none",borderBottomWidth:1,borderBottomStyle:"solid",borderBottomColor:e.lightDividerColor},popup:{paddingBottom:8}}}},81549:(e,t,a)=>{a.d(t,{Z:()=>i});a(67294);var s=a(43568),n=a(85893);const i=function(){return(0,n.jsx)("div",{style:{},children:(0,n.jsx)(s.Z,{paragraphs:[{lineHeight:45,lineMargin:20,sectionWidths:[100],repeat:1,sectionMargin:15},{lineHeight:40,lineMargin:5,sectionWidths:[100],repeat:8,sectionMargin:10}]})})}},58015:(e,t,a)=>{a.d(t,{v:()=>i});a(67294);var s=a(89728),n=a(85893);function i(e){const{children:t,disabled:a,onClick:i}=e;return(0,n.jsx)(s.Z,{onClick:i,disabled:a,style:{justifyContent:"center",marginLeft:6},isBlue:!a,isLightGray:a,children:t})}},22326:(e,t,a)=>{a.d(t,{Z:()=>l,r:()=>d});var s=a(49085),n=a(53877),i=a(80085),r=a(27617);class o extends s.default{getInitialState(){return{pageNum:1,pageSize:10,timeRange:{},actors:[],actions:[],sortOrder:i.NQ.CreatedNewest}}}const l=new o,d=e=>{const{timeRange:t,actors:a,actions:s,sortOrder:o}=e,l=new URLSearchParams;return t.starting&&l.append("starting",`${n.OQ.toUnixMs(t.starting)}`),t.ending&&l.append("ending",`${n.OQ.toUnixMs(t.ending)}`),(null==a?void 0:a.length)>0&&l.append("actors",a.map(r.eW).join(",")),(null==s?void 0:s.length)>0&&l.append("actions",s.join(",")),l.append("sort",`${o||i.NQ.CreatedNewest}`),l.toString()}},23096:(e,t,a)=>{a.d(t,{Z:()=>ae});a(67294);var s=a(83355),n=a(69651),i=a(97880),r=a(9291),o=a(27617),l=a(45257),d=a(97638),c=a(76150),u=a(13854),m=a(41558),g=a(42922),p=a(52275),h=a(3386),f=a(89728),v=a(53437),y=a(72495),x=a(480),_=a(86628),b=a(24405),w=a(53877),M=a(42875),C=a(33929),S=a(87279),j=a(67950),T=a(78140),F=a(40721),k=a(86825),N=a(46945),A=a(84795),E=a(72126),I=a(49085);const P="Invalid date",R="Invalid range";class D extends I.default{getInitialState(){return{dateEdited:!1,timeEdited:!1,temporaryValue:{date:void 0,time:void 0},error:void 0}}}const V=D;var Z=a(74194),B=a(26388),L=a(85893);class O extends s.Z{constructor(){super(...arguments),this.storeTypes={store:V},this.renderInput=()=>{const{device:e}=this.environment,{store:t,hideClearButton:a,focus:s,showTime:n,placeholder:i,...r}=this.props,o=e.isMobile?"date":"text",l=e.isMobile?"time":"text",d=Z.B.Transparent,c=e.isMobile?void 0:s,u={display:"flex",alignItems:"center",lineHeight:2,background:this.theme.inputBackground,paddingLeft:8,flexBasis:"50%",...this.getInputStyles().inputOuterStyle};return(0,L.jsxs)("div",{style:u,children:[(0,L.jsx)(Z.Z,{...r,type:o,format:d,placeholder:i,focus:"date"===c,onFocus:this.handleDateFocus,onChange:this.handleDateChange,onSubmit:e=>this.handleSubmit(e,"date"),onBlur:this.handleBlur,value:this.getDateInputValue(),size:1,style:{fontSize:e.isMobile?16:14},showClearButton:!n&&q(this.environment,this.props.hideClearButton),onClearButtonClick:this.handleClear}),n&&(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)("div",{style:{height:14,width:1,background:this.theme.regularDividerColor,marginLeft:6,marginRight:12,flexShrink:0}}),(0,L.jsx)(Z.Z,{...r,placeholder:C.default.formatMessage(U.timePlaceholder),type:l,format:d,focus:"time"===c,onFocus:this.handleTimeFocus,onChange:this.handleTimeChange,onSubmit:e=>this.handleSubmit(e,"time"),onBlur:this.handleBlur,value:this.getTimeInputValue(),size:1,style:{fontSize:e.isMobile?16:14},showClearButton:q(this.environment,this.props.hideClearButton),onClearButtonClick:this.handleClear})]})]})},this.handleDateFocus=e=>{const{onDateFocus:t}=this.props,{store:a}=this.stores;a.setState({...a.state,dateEdited:!1}),t&&t(e)},this.handleTimeFocus=e=>{const{onTimeFocus:t}=this.props,{store:a}=this.stores;a.setState({...a.state,timeEdited:!1}),t&&t(e)},this.handleClear=()=>{const{onClear:e,onUpdate:t}=this.props,{store:a}=this.stores;a.setState({...a.state,dateEdited:!0,timeEdited:!0,temporaryValue:{date:void 0,time:void 0},error:void 0});const s=this.validateCurrent();s&&t(s),a.setState({...a.state,dateEdited:!1,timeEdited:!1}),e&&e()},this.handleDateChange=e=>{const{device:t}=this.environment,{store:a}=this.stores;a.setState({...a.state,dateEdited:!0,temporaryValue:{...a.state.temporaryValue,date:e.target.value||""}}),t.isAndroid&&this.handleBlur()},this.handleTimeChange=e=>{const{device:t}=this.environment,{store:a}=this.stores;a.setState({...a.state,timeEdited:!0,temporaryValue:{...a.state.temporaryValue,time:e.target.value||""}}),t.isAndroid&&this.handleBlur()},this.handleSubmit=(e,t)=>{var a,s;const{onUpdate:n,onSubmit:i,showTime:r}=this.props,{store:o}=this.stores;let l;(!r||"date"===t&&null!==(a=this.props.value)&&void 0!==a&&a.start_time||"time"===t&&null!==(s=this.props.value)&&void 0!==s&&s.start_date)&&(l=this.validateCurrent(),l&&(n(l),l.error?o.setState({...o.state,dateEdited:!1,error:l.error}):o.reset())),i&&i(e,l)},this.handleBlur=e=>{const{onUpdate:t,onBlur:a}=this.props,{store:s}=this.stores,n=this.validateCurrent();n?(t(n),n.error?s.setState({...s.state,dateEdited:!1,timeEdited:!1,error:n.error}):s.reset()):s.setState({...s.state,dateEdited:!1,timeEdited:!1}),e&&a&&a(e)}}didUpdate(e){const{store:t}=this.stores;E.Xy(e.value,this.props.value)||t.reset()}renderComponent(){const e=this.getError();return e?(0,L.jsx)(B.ZP,{renderTooltip:()=>e,forceVisibleState:!0,placement:B.ug.Left,render:this.renderInput,originGap:-8}):this.renderInput()}getDateInputValue(){const{device:e}=this.environment,{value:t,intl:a}=this.props,{store:s}=this.stores;return e.isMobile?t?o.dd(t,a):"":s.state.temporaryValue.date?s.state.temporaryValue.date:s.state.dateEdited?s.state.temporaryValue.date||"":t?o.dd(t,a):""}getTimeInputValue(){const{device:e}=this.environment,{value:t,intl:a}=this.props,{store:s}=this.stores;return e.isMobile?t?o.KN(t,a):"":s.state.temporaryValue.time?s.state.temporaryValue.time:s.state.timeEdited?s.state.temporaryValue.time||"":t?o.KN(t,a):""}getError(){const{store:e}=this.stores,{intl:t}=this.props;if(e.state.error)switch(e.state.error){case P:return t.formatMessage({id:"dateInputError.invalidDateError.tooltip",defaultMessage:"Invalid date"});case R:return t.formatMessage({id:"dateInputError.invalidDateRangeError.tooltip",defaultMessage:"Invalid range"});default:(0,i.t1)(e.state.error)}}validateCurrent(){const{validate:e}=this.props,t=this.parseCurrentDateTimeValue();if(t)return e?e(t):t}parseCurrentDateTimeValue(){const{store:e}=this.stores,{value:t,showTime:a,isEndingDate:s}=this.props;if(!e.state.dateEdited&&!e.state.timeEdited)return;if(!e.state.temporaryValue.date&&!e.state.temporaryValue.time)return{value:void 0};const n=(0,A.parseDateValue)(e.state.temporaryValue.date||"",this.props.intl);if(n){let e="";return e=a?(null==t?void 0:t.start_time)||"00:00":s?"23:59":"00:00",{value:{type:"datetime",start_date:n,time_zone:(null==t?void 0:t.time_zone)||(0,M.r)(),start_time:e}}}const i=(0,A.parseTimeValue)(e.state.temporaryValue.time||"",this.props.intl);return(null!=t&&t.start_date||n)&&i?{value:{type:"datetime",start_date:(null==t?void 0:t.start_date)||n,start_time:i,time_zone:(null==t?void 0:t.time_zone)||(0,M.r)()}}:{error:P}}getInputStyles(){const{device:e}=this.environment,{inputStyle:t,inputOuterStyle:a,style:s}=this.props,n=(i=this.environment,r=this.props.hideClearButton,{menuItem:{marginBottom:i.device.isMobile?1:12},inputWrapper:{borderRadius:4,height:28,paddingRight:q(i,r)?6:0,position:"relative"},inputEditRegion:{width:q(i,r)?"calc(100% - 14px)":"100%"},inputEditRegionMobile:{padding:"2px 6px",position:"relative"}});var i,r;return{style:{...n.menuItem,...s},inputOuterStyle:{...n.inputWrapper,...a,...this.getInputBorders()},inputStyle:{...n.inputEditRegion,...e.isMobile&&n.inputEditRegionMobile,...t}}}getInputBorders(){const{disabled:e,focus:t}=this.props,a={inputDefault:{background:(s=this.theme).inputBackground,boxShadow:s.inputBoxShadow},inputFocused:{boxShadow:s.outlineBlueInputBoxShadow},inputError:{boxShadow:s.outlineRedInputBoxShadow},placeholder:{color:s.lightTextColor}};var s;const n=this.getError();if(!e)return n?a.inputError:t?a.inputFocused:a.inputDefault}}O.displayName="DateTimeInputMenuItem";const W=(0,r.injectIntl)(O);function q(e,t){const{device:a}=e;return!!a.isMobile||!t}const U=(0,r.defineMessages)({startingDateMessage:{defaultMessage:"Starting",id:"auditLog.dateTimeRangeMenu.startingDatePlaceholder"},endingDateMessage:{defaultMessage:"Ending",id:"auditLog.dateTimeRangeMenu.endingDatePlaceholder"},timePlaceholder:{defaultMessage:"12:00 AM",id:"auditLog.dateTimeRangeMenu.timePlaceholderInNumber"}});class z extends s.Z{constructor(){super(...arguments),this.storeTypes={store:u.ZP,dayRangeStore:m.Z},this.renderInputs=()=>{const{device:e,WindowSizeStore:t}=this.environment,{value:a,disabled:s}=this.props,{store:n}=this.stores,i=n.getFocus();let r="date";i!==c.Hv.StartTime&&i!==c.Hv.EndTime||(r="time");const l=function(e,t){const a=e.starting&&o.o0(e.starting,t),s=e.ending&&o.o0(e.ending,t);return{earliestValidEnding:a,latestValidStarting:s}}(this.props.value,this.props.intl);return(0,L.jsxs)("div",{style:{paddingTop:e.isMobile?16:12,paddingBottom:e.isMobile?16:8,paddingLeft:e.isMobile?t.getSafePaddingLeftCSS(16):14,paddingRight:e.isMobile?t.getSafePaddingRightCSS(16):14,display:n.state.showTime?"block":"flex",...e.isMobile&&{boxShadow:`\n\t\t\t\t\t\t\t0 1px 0 ${this.theme.regularDividerColor}\n\t\t\t\t\t\t`,position:"relative",zIndex:2},background:e.isMobile?this.theme.popoverBackground:void 0},children:[(0,L.jsx)(W,{disabled:s,placeholder:C.default.formatMessage(U.startingDateMessage),focus:i===c.Hv.StartDate||i===c.Hv.StartTime?r:void 0,value:a.starting,validate:e=>function(e,t){const a=G("starting",e,t);return a.error?a:{value:a.value.starting}}(e,this.props.value),onUpdate:e=>function(e,t,a){e.error||t({value:{...a,starting:e.value}})}(e,this.props.onUpdate,this.props.value),onDateFocus:()=>this.handleDateFocus(c.Hv.StartDate),onTimeFocus:()=>this.handleTimeFocus(c.Hv.StartTime),onSubmit:(e,t)=>this.handleStartSubmit(e,t,i),inputElementAttributes:{max:l.latestValidStarting},showTime:n.state.showTime}),(0,L.jsx)("div",{style:{width:12,height:8}}),(0,L.jsx)(W,{disabled:s,placeholder:C.default.formatMessage(U.endingDateMessage),focus:i===c.Hv.EndDate||i===c.Hv.EndTime?r:void 0,value:a.ending,validate:e=>function(e,t){const a=G("ending",e,t);return a.error?a:{value:a.value.ending}}(e,this.props.value),onUpdate:e=>function(e,t,a){e.error||t({value:{...a,ending:e.value}})}(e,this.props.onUpdate,this.props.value),onDateFocus:()=>this.handleDateFocus(c.Hv.EndDate),onTimeFocus:()=>this.handleTimeFocus(c.Hv.EndTime),onSubmit:(e,t)=>this.handleEndSubmit(e,t,i),inputElementAttributes:{min:l.earliestValidEnding},showTime:n.state.showTime})]})},this.handleDateFocus=e=>{const{store:t,dayRangeStore:a}=this.stores;t.setState({...t.state,focus:e});const s=u.QJ[e];a.setState({...a.state,focus:s})},this.handleTimeFocus=e=>{const{store:t}=this.stores;t.setState({...t.state,focus:e})},this.handleStartSubmit=(e,t,a)=>{const{store:s,dayRangeStore:n}=this.stores;t&&t.error||(a===c.Hv.StartDate&&s.state.showTime?s.setState({...s.state,focus:c.Hv.StartTime}):(s.setState({...s.state,focus:c.Hv.EndDate}),n.setState({...n.state,focus:"ending"})))},this.handleEndSubmit=(e,t,a)=>{const{store:s}=this.stores;t&&t.error||a===c.Hv.EndDate&&s.state.showTime&&s.setState({...s.state,focus:c.Hv.EndTime})},this.getMenuProps=()=>{const{device:e}=this.environment,{onDismiss:t,title:a}=this.props;if(e.isMobile){return{menuType:S.og.Modal,title:a,right:(0,L.jsx)(F.DoneMenuText,{}),onClickRight:t,header:this.renderInputs()}}return{menuType:S.og.Popup,onClickOutside:t,footer:this.props.footer}}}didMount(){const{store:e}=this.stores;void 0!==this.props.showTime&&e.setState({...e.state,showTime:this.props.showTime})}renderComponent(){const{device:e}=this.environment;return(0,L.jsx)(T.Z,{...this.getMenuProps(),children:(0,L.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[(0,L.jsxs)("div",{children:[this.props.header,!e.isMobile&&this.renderInputs(),(0,L.jsx)(Q,{value:this.props.value,onUpdate:this.props.onUpdate,store:this.stores.store,dayRangeStore:this.stores.dayRangeStore})]}),this.renderSidebar()]})})}renderSidebar(){const{store:e}=this.stores,{onUpdate:t,value:a,hideTime:s}=this.props;return(0,L.jsxs)("aside",{style:$(this.environment,this.theme).sidebar,children:[s?null:(0,L.jsx)(k.Z,{title:(0,L.jsx)(r.FormattedMessage,{id:"auditlogDateFilter.timeToggle",defaultMessage:"Use time"}),on:e.state.showTime,onClick:()=>{if(e.toggleShowTime(),e.state.showTime){const e=a;e.starting&&(e.starting.start_time="00:00"),e.ending&&(e.ending.start_time="23:59"),t({value:e})}},focused:!1}),(0,L.jsx)(p.Z,{focused:!1,title:(0,L.jsx)(r.FormattedMessage,{id:"auditlogDateFilter.quickFilters.today",defaultMessage:"Today"}),onClick:()=>{const e=Date.now(),t=w.CQ(e,(0,M.r)());this.setStoresTemporaryValue({starting:{...t,start_time:"00:00"},ending:t})},style:$(this.environment,this.theme).menuItem}),(0,L.jsx)(p.Z,{focused:!1,title:(0,L.jsx)(r.FormattedMessage,{id:"auditlogDateFilter.quickFilters.yesterday",defaultMessage:"Yesterday"}),onClick:()=>{const e=w.Cv((0,M.r)());this.setStoresTemporaryValue({starting:{type:"datetime",start_date:e.start_date,start_time:"00:00",time_zone:(0,M.r)()},ending:{type:"datetime",start_date:e.start_date,start_time:"23:59",time_zone:(0,M.r)()}})},style:$(this.environment,this.theme).menuItem}),(0,L.jsx)(p.Z,{focused:!1,title:(0,L.jsx)(r.FormattedMessage,{id:"auditlogDateFilter.quickFilters.lastWeek",defaultMessage:"Last 7 days"}),onClick:()=>{const e=w.Oo((0,M.r)()),t=w.CQ(Date.now(),(0,M.r)());this.setStoresTemporaryValue({starting:{type:"datetime",start_date:e.start_date,start_time:"00:00",time_zone:(0,M.r)()},ending:t})},style:$(this.environment,this.theme).menuItem}),(0,L.jsx)(p.Z,{focused:!1,title:(0,L.jsx)(r.FormattedMessage,{id:"auditlogDateFilter.quickFilters.lastMonth",defaultMessage:"Last 30 days"}),onClick:()=>{const e=w.dj((0,M.r)()),t=w.CQ(Date.now(),(0,M.r)());this.setStoresTemporaryValue({starting:{type:"datetime",start_date:e.start_date,start_time:"00:00",time_zone:(0,M.r)()},ending:t})},style:$(this.environment,this.theme).menuItem})]})}setStoresTemporaryValue(e){const{store:t,dayRangeStore:a}=this.stores;e.ending&&this.handleDateFocus(c.Hv.EndDate),t.setState({...t.state,temporaryDateRange:e}),a.setState({...a.state,displayMonth:e.starting||e.ending?w.Sy(e.starting||e.ending):void 0,temporaryDateRange:{starting:o.Qb(e.starting),ending:o.Qb(e.ending)}})}}z.displayName="DateTimeRangeMenu";const K=(0,r.injectIntl)(z);function G(e,t,a){return t.error?t:function(e){if(e.starting&&e.ending){const t=w.OQ.notionDateTimeToLuxon(e.starting);return w.OQ.notionDateTimeToLuxon(e.ending)>=t?{value:e}:{error:j.B.INVALID_RANGE}}return{value:e}}({...a,[e]:t.value})}function H(e,t,a){if(t.error)return t;return function(e){if(e.starting&&e.ending){const t=w.OQ.notionDateToLuxon(e.starting);return w.OQ.notionDateToLuxon(e.ending)>=t?{value:e}:{error:j.B.INVALID_RANGE}}return{value:e}}({...o.Zy(a),[e]:t.value})}function $(e,t){return{pickerSection:{paddingLeft:16,paddingRight:16},pickerSectionMobile:{paddingTop:16,paddingBottom:8},sidebar:{paddingTop:12,paddingBottom:24,overflowY:"auto",overflowX:"hidden",flex:"0 0 220px",backgroundColor:t.sidebarSecondaryBackground,borderLeft:`1px solid ${t.regularDividerColor}`,maxWidth:"fit-content"},menuItem:{minHeight:void 0,paddingTop:e.device.isMobile?12:4,paddingBottom:e.device.isMobile?12:4,color:t.mediumTextColor}}}function Q(e){let{value:t,onUpdate:a,store:s,dayRangeStore:n}=e;window.__c={n:"CalendarComponent"};const i=(0,b.Fg)(),r=(0,x.O7)(),l=(0,_.qz)(n,m.Z),d=(0,_.qz)(s,u.ZP),{device:c}=r,g=$(r,i),p=function(e){return{pickerSectionMobile:{background:e.popoverBackground,boxShadow:`0 1px 0 ${e.regularDividerColor}`,marginBottom:1}}}(i),h={...g.pickerSection,...c.isMobile&&g.pickerSectionMobile,...c.isMobile&&p.pickerSectionMobile};return(0,L.jsx)(y.Z,{children:(0,L.jsx)("div",{style:h,children:(0,L.jsx)(N.Z,{value:o.Zy(t),dateTimeStore:d,store:l,onUpdate:e=>{if(e.error)return null;const s=o.PM(t,e.value);return a({error:e.error,value:s})},validate:(e,a)=>H(e,a,t)})})})}var Y=a(255),J=a(8319),X=a(75689),ee=a(91642);class te extends s.Z{constructor(){super(...arguments),this.storeTypes={store:u.ZP,dayRangeStore:m.Z},this.renderActiveButtonOrigin=()=>{const{value:e,disabled:t,focused:a,intl:s}=this.props,i=oe(this.environment),r=ne(this.theme),o={...i.menuItem,...r.activeMenuItem},l=d._Q(e,s),c=(0,L.jsx)(Y.Z,{onClick:()=>re(this.props.onChange),disabled:t});return(0,L.jsx)(p.Z,{focused:a,disabled:t,icon:(0,n.C)(i.iconActiveDesktop),title:l,right:c,isTokenTitle:!0,alignIconTop:!0,onClick:this.handleOriginActivate,desktopTitleStyle:i.menuItemTitleDesktop,desktopIconStyle:i.iconActiveDesktopWrapper,style:o})},this.renderInactiveButtonOrigin=()=>{const{title:e,icon:t,disabled:a,focused:s,mode:n}=this.props,i=oe(this.environment),r=ne(this.theme),o={...i.menuItem,...r.buttonMenuItem,...n===J.z.Pill?{width:"fit-content",border:"solid 1px",paddingLeft:0,paddingRight:0,borderRadius:20,fontSize:12}:{}};return(0,L.jsx)(p.Z,{focused:s,disabled:a,icon:t(i.icon),title:e,onClick:this.handleOriginActivate,style:o})},this.renderPillButtonOrigin=()=>{const{value:e,pillTitle:t}=this.props,a=(0,L.jsx)(r.FormattedMessage,{id:"searchDateFilter.shortTitle",defaultMessage:"Date"});return(0,L.jsx)(l.Z,{on:Boolean(e.starting||e.ending),icon:(0,n.C)({width:16,marginRight:6,fill:"currentColor"}),title:(0,L.jsx)("span",{children:t||a}),onClick:this.handleOriginActivate})},this.renderPopupContents=()=>{const{title:e,header:t,showButtons:a,sidebar:s,hideTime:n}=this.props,{store:i,dayRangeStore:o}=this.stores;return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(K,{title:e,value:this.getCurrentValue(),onUpdate:this.updateTemporary,store:i,dayRangeStore:o,onDismiss:this.handleMenuClose,footer:"footer"===a&&this.renderFooter(),sidebar:s,hideTime:n,header:t}),"side"===a&&(0,L.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",width:"100%",padding:"0px 10px"},children:[(0,L.jsx)(f.Z,{isGray:!0,style:{marginLeft:"auto",marginRight:8},onClick:this.handleMenuClose,children:(0,L.jsx)(r.FormattedMessage,{defaultMessage:"Cancel",id:"searchDateFilter.cancelButton.label"})}),(0,L.jsx)(g.Z,{onClick:()=>this.props.onChange(this.stores.store.state.temporaryDateRange),children:(0,L.jsx)(r.FormattedMessage,{defaultMessage:"Accept",id:"searchDateFilter.acceptButton.label"})})]})]})},this.renderFooter=()=>{const{store:e,dayRangeStore:t}=this.stores;return(0,L.jsxs)(y.Z,{topBorder:!0,style:{padding:"8px 8px 2px 8px",justifyContent:"space-between",display:"flex"},children:[(0,L.jsx)(f.Z,{onClick:()=>{e.clearTemporaryDateRange(),t.clearTemporaryDateRange(),this.props.onChange({starting:void 0,ending:void 0})},children:(0,L.jsx)(r.FormattedMessage,{id:"searchDateFilter.clearButton",defaultMessage:"Clear"})}),(0,L.jsx)(g.Z,{onClick:e=>{this.props.onChange(this.stores.store.state.temporaryDateRange),this.handleMenuClose(e)},children:(0,L.jsx)(r.FormattedMessage,{id:"searchDateFilter.applyButton",defaultMessage:"Apply"})})]})},this.handleOriginActivate=()=>{const{disabled:e}=this.props,{store:t,dayRangeStore:a}=this.stores;e||(t.setState({...t.state,isOpen:!0,focus:c.Hv.StartDate}),a.setState({...a.state,isOpen:!0,focus:"starting"}))},this.handleMenuClose=e=>{const{onChange:t,onMenuDismiss:a,showButtons:s}=this.props,{store:n,dayRangeStore:i}=this.stores,{temporaryDateRange:r}=n.state;d.zD(e)||(s||t(r),n.setState({...n.state,isOpen:!1,temporaryDateRange:{starting:void 0,ending:void 0}}),i.setState({...i.state,isOpen:!1,temporaryDateRange:{starting:void 0,ending:void 0}}),a&&a())},this.updateTemporary=e=>{const{store:t,dayRangeStore:a}=this.stores;if(e.error)return;const s={starting:(0,o.Qb)(e.value.starting),ending:(0,o.Qb)(e.value.ending)};return a.setState({...a.state,temporaryDateRange:{...a.state.temporaryDateRange,...s}}),t.setState({...t.state,temporaryDateRange:{...t.state.temporaryDateRange,...e.value}})}}didMount(){this.updateTemporary({value:this.props.value})}renderComponent(){const{device:e}=this.environment,{mode:t}=this.props;return e.isMobile?this.renderMobile(t):this.renderDesktop(t)}renderDesktop(e){const{title:t,sidebar:a}=this.props,{store:s}=this.stores,n=oe(this.environment),r=e===J.z.Section,o=r?t:void 0,l=(()=>e===J.z.Section?this.renderActiveButtonOrigin():e===J.z.Button?this.renderInactiveButtonOrigin():e===J.z.Pill?this.renderPillButtonOrigin():void(0,i.t1)(e))();return(0,L.jsx)(ee.Z,{title:o,marginAfter:r,children:(0,L.jsx)(h.Z,{capture:s.state.isOpen,onUp:ie,onDown:ie,onEnter:ie,children:(0,L.jsx)(v.ZP,{popupType:se(this.environment),open:s.state.isOpen,origin:l,render:this.renderPopupContents,onDismiss:this.handleMenuClose,placementToOrigin:v.ZP.Placement.Bottom,alignmentToOrigin:v.ZP.Alignment.Start,style:a?n.popupWithSidebar:n.popup})})})}renderMobile(e){const{store:t}=this.stores,a=e===J.z.Section?this.renderMobileFilterSummary():this.renderMobileButtonOrigin();return(0,L.jsx)(v.ZP,{popupType:v.ZP.PopupType.SlideUp,open:t.state.isOpen,origin:a,render:this.renderPopupContents,onDismiss:this.handleMenuClose,preventScaleTransition:!0})}renderMobileButtonOrigin(){const{icon:e,title:t,disabled:a}=this.props,s=oe(this.environment);return(0,L.jsx)(p.Z,{disabled:a,focused:!1,icon:e(s.icon),title:t,onClick:this.handleOriginActivate})}renderMobileFilterSummary(){const{title:e,value:t,disabled:a,intl:s}=this.props,i=oe(this.environment),r=(0,L.jsxs)("div",{style:i.summary,children:[(0,n.C)(i.iconActiveMobile),d._Q(t,s)]});return(0,L.jsx)(X.Z,{disabled:a,onClick:this.handleOriginActivate,onClickClear:()=>re(this.props.onChange),label:e,title:r})}getCurrentValue(){const{value:e}=this.props,{store:t}=this.stores,{temporaryDateRange:a}=t.state;return{...e,...a}}}te.displayName="DateTimeFilter";const ae=(0,r.injectIntl)(te);function se(e){const{device:t}=e;return t.isMobile?v.ZP.PopupType.SlideUp:v.ZP.PopupType.Popup}function ne(e){return{buttonMenuItem:{color:e.mediumTextColor},activeMenuItem:{color:e.regularTextColor}}}function ie(e){e.preventDefault&&e.preventDefault()}function re(e){e({starting:void 0,ending:void 0})}function oe(e){return{menuItem:{minHeight:void 0,paddingTop:e.device.isMobile?12:4,paddingBottom:e.device.isMobile?12:4},icon:{height:16,width:16,marginRight:6},iconActiveDesktop:{height:14,width:14,fill:"currentColor",alignSelf:"flex-start",marginTop:2,marginRight:2},iconActiveDesktopWrapper:{marginTop:0},iconActiveMobile:{height:14,width:14,fill:"currentColor",marginTop:1,marginRight:6},popup:{paddingTop:0,paddingBottom:8},popupWithSidebar:{display:"flex"},menuItemTitleDesktop:{width:"100%"},summary:{display:"inline-flex"}}}},66661:(e,t,a)=>{a.d(t,{e:()=>o});a(67294);var s=a(24211),n=a(9291),i=a(26388),r=a(85893);function o(e){let{num:t,abbreviateNumber:a}=e;window.__c={n:"NumberDisplay"};const o=(0,n.useIntl)(),l=(0,s.E2)(o),d=t.toLocaleString(l),c=Intl.NumberFormat(l,{notation:"compact",maximumFractionDigits:1}).format(t);return a?(0,r.jsx)(i.ZP,{placement:i.ug.Bottom,render:e=>(0,r.jsx)("span",{...e,children:c}),renderTooltip:()=>d}):(0,r.jsx)("span",{children:d})}},46978:(e,t,a)=>{a.d(t,{Z:()=>o});var s=a(67294),n=a(24405),i=a(85893);function r(e,t){let{isSelected:a}=e;window.__c={n:"RadioButtonIcon"};const{radioButtonStyle:s,dotStyle:r}=(0,n.yK)((e=>({radioButtonStyle:{display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:16,height:16,borderRadius:16,marginRight:8,background:a?e.blueColor:e.whiteButtonBackground,border:a?"none":`1px solid ${e.radioButtonBorder}`,transition:"background 100ms ease-out"},dotStyle:{width:6,height:6,borderRadius:6,background:e.regularInvertedTextColor,transition:"opacity 100ms ease-out",opacity:a?1:0}})),[a]);return(0,i.jsx)("div",{ref:t,style:s,children:(0,i.jsx)("div",{style:r})})}const o=s.forwardRef(r)},719:(e,t,a)=>{a.d(t,{Z:()=>d});a(67294);var s=a(480),n=a(24405),i=a(98742),r=a(74194),o=a(85893);const l={flexGrow:1,flexShrink:1,flexBasis:60,minWidth:60,width:"auto",lineHeight:"20px"};const d=function(e){let{readOnly:t,onClick:a,style:i,tokens:r,value:l,onRemoveLastToken:d,onChange:g,onSubmit:p,onBlur:h,focus:f,type:v,placeholder:y}=e;window.__c={n:"TokenInput"};const x=(0,n.Fg)(),_=(0,s.O7)(),{device:b}=_;return(0,o.jsxs)("div",{className:t?void 0:"notion-focusable-within",onClick:a,style:b.isMobile?u(x,i):c(x,i),children:[r,(0,o.jsx)(m,{tokens:r,value:l,onRemoveLastToken:d,onChange:g,onSubmit:p,onBlur:h,focus:f,readOnly:t,type:v,placeholder:y})]})};function c(e,t){return{display:"flex",flexWrap:"wrap",alignItems:"flex-start",minHeight:32,boxShadow:e.inputBoxShadow,background:e.inputBackground,borderRadius:4,fontSize:14,cursor:"text",overflow:"hidden",padding:"7px 9px 0px",...t}}function u(e,t){return{...c(e,t),fontSize:14,padding:"7px 10px 0"}}function m(e){let{tokens:t,value:a,onRemoveLastToken:n,onChange:d,onSubmit:c,onBlur:u,focus:m,readOnly:g,type:p,placeholder:h}=e;window.__c={n:"InputComponent"};const f=(0,s.O7)(),{device:v}=f,y=0===t.length;return(0,o.jsx)(r.Z,{format:r.B.Transparent,...(0,i.Z)({onKeyDown:e=>function(e,t,a){"Backspace"===e.key&&0===t.length&&a()}(e,a,n)},{onChange:d}),value:a,onSubmit:c,onBlur:u,focus:m,style:{...l,margin:v.isMobile?"0 8px 8px 0":"0 6px 6px 0"},readOnly:g,inputStyle:{height:18},size:1,type:p,placeholder:y?h:"",autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:!1})}},73075:(e,t,a)=>{a.d(t,{q:()=>d});a(67294);var s=a(24405),n=a(80750),i=a(82990),r=a(9291),o=(a(95477),a(63296)),l=a(85893);function d(e){let{runNewSearch:t,error:a}=e;window.__c={n:"AdminContentSearchError"};const d=(0,s.yK)((e=>({container:{marginTop:48,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},headerIcon:{width:28,height:28,color:e.redBadgeBackground,fill:"currentColor"},title:{margin:"8px auto",fontWeight:i.Z.fontWeight.medium,fontSize:16},description:{fontWeight:i.Z.fontWeight.regular,fontSize:14,lineHeight:1.3,color:e.lightTextColor,textAlign:"center",width:328,margin:"0 auto 16px"},errorMessage:{borderRadius:4,background:e.cardBackground,fontFamily:i.Z.baseFontFamily.mono,fontSize:12,color:e.lightTextColor,padding:"18px 24px",margin:"0 auto 12px"},errorButton:{width:195,margin:"8px auto 0",textAlign:"center"}})),[]);return(0,l.jsxs)("div",{style:d.container,children:[(0,n.l)(d.headerIcon),(0,l.jsx)("h1",{style:d.title,children:(0,l.jsx)(r.FormattedMessage,{id:"adminContentSearchTab.pagesTable.error.title",defaultMessage:"Something went wrong"})}),(0,l.jsx)("p",{style:d.description,children:(0,l.jsx)(r.FormattedMessage,{id:"adminContentSearchTab.pagesTable.error.description",defaultMessage:"Something went wrong when we were loading the results. Try to run your search again."})}),null,(0,l.jsx)(o.Z,{style:d.errorButton,onClick:()=>t(!0),children:(0,l.jsx)(r.FormattedMessage,{id:"adminContentSearchTab.pagesTable.error.confirm",defaultMessage:"Retry"})})]})}},53855:(e,t,a)=>{a.d(t,{A:()=>p,e:()=>h});var s=a(67294),n=a(87479),i=a(72141),r=a(29369),o=a(97880),l=a(9291),d=a(98165),c=a(80444),u=a(68373),m=a(69219),g=a(85893);function p(e){let{blockStore:t}=e;window.__c={n:"AudienceCell"};const[a,o]=(0,s.useState)();(0,s.useEffect)((()=>{!async function(){const{currentSpaceStore:e}=c.default.state,a=d.fJ(t),s=n.Wo(a),l=null==e?void 0:e.getPermissionItems().filter(i.jg),m=await n.uq({permissionItems:s,hasTeamLevelGuests:function(t){return!!e&&u.zX.createChildStore(e,{table:r.e0,id:t}).getMembers().some((e=>"team_level_guest"===e.type))},spaceUserPermissions:l});o(m)}()}),[t]);const l=(0,s.useMemo)((()=>{if(a)return h(a)}),[a]);return(0,g.jsx)(m.i,{useThinTitle:!0,title:l})}function h(e){switch(e){case"private":return(0,g.jsx)(l.FormattedMessage,{id:"adminContentSearchTab.pagesTable.audienceCell.private",defaultMessage:"Private"});case"shared_internally":return(0,g.jsx)(l.FormattedMessage,{id:"adminContentSearchTab.pagesTable.audienceCell.sharedInternally",defaultMessage:"Shared internally"});case"shared_externally":return(0,g.jsx)(l.FormattedMessage,{id:"adminContentSearchTab.pagesTable.audienceCell.sharedExternally",defaultMessage:"Shared externally"});case"shared_to_web":return(0,g.jsx)(l.FormattedMessage,{id:"adminContentSearchTab.pagesTable.audienceCell.publishedToWeb",defaultMessage:"Published to web"});default:(0,o.t1)(e)}}},36550:(e,t,a)=>{a.d(t,{y:()=>l});var s=a(67294),n=a(9291),i=a(89665),r=a(57702),o=a(85893);function l(e){let{spaceStore:t,createdByFilterIds:a,setCreatedByFilter:l,runNewSearch:d,includeGuests:c}=e;window.__c={n:"CreatedByFilter"};const u=(0,i.R)({spaceStore:t}),m=(0,s.useMemo)((()=>u.loading?[]:c?[...u.members,...u.guests]:u.members),[u,c]),g=(0,s.useMemo)((()=>u.loading?new Set:new Set(u.guests.map((e=>e.id)))),[u]);const p=(0,s.useMemo)((()=>a.map((e=>({id:e,type:"user"})))),[a]);return(0,o.jsx)(r.B,{userStores:m,title:(0,o.jsx)(n.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.createdBy.title",defaultMessage:"Created by"}),selectedItems:p,setSelectedItems:function(e){const t=e.map((e=>{let{id:t}=e;return t}));l(t)},onMenuClose:d,guestUserIdSet:g})}},79782:(e,t,a)=>{a.d(t,{f:()=>x});var s=a(67294),n=a(86628),i=a(24405),r=a(40506),o=a(69651),l=a(42853),d=a(97880),c=a(9291),u=a(27617),m=a(97638),g=a(64921),p=a(52275),h=a(14871),f=a(23096),v=a(8319),y=a(85893);function x(e){let{lastEditedTime:t,createdTime:a,setLastEditedTime:i,setCreatedOnTime:l}=e;window.__c={n:"DateFilter"};const g=(0,c.useIntl)(),[p,h]=(0,s.useState)("createdTime"),x=(0,s.useMemo)((()=>{switch(p){case"createdTime":return a;case"lastEditedTime":return t;default:(0,d.t1)(p)}}),[t,a,p]),b=(0,s.useMemo)((()=>{switch(p){case"createdTime":return l;case"lastEditedTime":return i;default:(0,d.t1)(p)}}),[i,l,p]);const w=(0,n.VK)((()=>{if((0,u.mK)(x))switch(p){case"createdTime":return(0,y.jsx)(c.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.createdOn.title",defaultMessage:"Created on"});case"lastEditedTime":return(0,y.jsx)(c.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.lastEditedOn.title",defaultMessage:"Last edited on"});default:(0,d.t1)(p)}const e=(0,u.Hq)(x),t=m._Q(e,g,r.sF);switch(p){case"createdTime":return(0,y.jsx)(c.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.createdOn.titleWithDateRange",defaultMessage:"Created on: {dateRangeString}",values:{dateRangeString:t}});case"lastEditedTime":return(0,y.jsx)(c.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.lastEditedOn.titleWithDateRange",defaultMessage:"Last edited on: {dateRangeString}",values:{dateRangeString:t}});default:(0,d.t1)(p)}}),[x,p,g]);return(0,y.jsx)(f.Z,{header:(0,y.jsx)(_,{selectedItem:p,setSelectedItem:function(e){h(e)}}),mode:v.z.Pill,focused:!1,hideTime:!0,pillTitle:w,title:w,icon:o.C,value:x,showButtons:"footer",onChange:e=>{b(e)}})}function _(e){let{selectedItem:t,setSelectedItem:a}=e;window.__c={n:"DateTimeFilterSelector"};const s=(0,i.yK)((e=>({button:{margin:"14px 12px 4px",padding:"2px 8px",width:"fit-content",borderRadius:4},text:{display:"flex",alignItems:"center",color:e.mediumTextColor,fill:e.lightIconColor,fontWeight:500,fontSize:13},icon:{height:10,width:10,marginLeft:4}})),[]),n={width:190,items:["createdTime","lastEditedTime"],selectedItem:t,getKey:e=>e,onSelect:e=>a(e),renderItem:e=>(0,y.jsx)(p.Z,{title:b(e.value),...e}),renderOrigin:e=>(0,y.jsx)(g.Z,{...e,style:s.button,children:(0,y.jsxs)("div",{style:s.text,children:[b(t),(0,l.i)(s.icon)]})})};return(0,y.jsx)(h.Z,{...n,mobileActionSheet:!0})}function b(e){return{lastEditedTime:(0,y.jsx)(c.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.lastEditedOn.option",defaultMessage:"Last edited on"}),createdTime:(0,y.jsx)(c.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.createdOn.option",defaultMessage:"Created on"})}[e]}},66994:(e,t,a)=>{a.d(t,{O:()=>p,p:()=>m});var s=a(67294),n=a(24405),i=a(49019),r=a(72126),o=a(9291),l=a(33929),d=a(42922),c=a(74194),u=a(85893);let m=function(e){return e.OnChange="on-change",e.Button="button",e}({});const g=(0,o.defineMessages)({placeholder:{id:"adminContentSearchTab.pagesTable.filters.query.placeholder",defaultMessage:"Search by page ID, title or content"}});function p(e){let{mode:t,query:a,setQueryFilter:p,placeholderText:h,disabled:f}=e;window.__c={n:"QuerySearchInput"};const[v,y]=(0,s.useState)(a??""),x=function(e){return(0,n.yK)((t=>({searchIcon:{color:t.lightIconColor,width:14},input:{padding:"4px 4px 4px 10px",margin:"0 auto 8px",width:"100%",background:t.modalBackground,opacity:e?.5:1},button:{opacity:e?.5:1}})),[e])}(f),_=(0,s.useMemo)((()=>(0,r.Ds)(p,500)),[p]),b=(0,s.useCallback)((e=>{y(e.target.value),t===m.OnChange&&_(e.target.value)}),[_,t]);return(0,u.jsx)(c.Z,{value:v,style:x.input,left:(0,i.e)(x.searchIcon),placeholder:h||l.default.formatMessage(g.placeholder),focus:!f&&void 0,onChange:b,onSubmit:()=>p(v),disabled:f,right:t===m.Button?(0,u.jsx)(d.Z,{onClick:()=>p(v),disabled:f,style:x.button,children:(0,u.jsx)(o.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.query.searchButton",defaultMessage:"Search"})}):null})}},35389:(e,t,a)=>{a.d(t,{p:()=>N});a(57658);var s=a(67294),n=a(86628),i=a(24405),r=a(84619),o=a(26774),l=a(97880),d=a(9291),c=a(45257),u=a(33929),m=a(87279),g=a(95697),p=a(29798),h=a(74016),f=a(42922),v=a(52275),y=a(78140),x=a(32163),_=a(89728),b=a(53437),w=a(72495),M=a(64369),C=a(46978),S=a(91642),j=a(85567),T=a(719),F=a(85893);const k=(0,d.defineMessages)({placeholder:{id:"adminContentSearchTab.pagesTable.filters.teams.placeholder",defaultMessage:"Search for teamspaces..."}});function N(e){let{selectedTeamIds:t,setSelectedTeamIds:a,onMenuClose:N,teamStores:E}=e;window.__c={n:"TeamsFilter"};const I=(0,n.qz)(void 0,p.Z),P=(0,i.yK)((e=>({optionContainer:{display:"flex",flexDirection:"row",alignItems:"center"},optionAvatar:{marginRight:4},pillContainer:{margin:"0px 6px 6px 0px",background:e.legacyDefaultSelectColor,height:20},pillContents:{display:"inline-flex",flexDirection:"row",justifyContent:"center",alignItems:"center",gap:4},pillText:{marginLeft:4},container:{padding:"6px 0 6px"},input:{margin:"4px auto",width:"95%"},footer:{padding:"8px 8px 2px 8px",justifyContent:"space-between",display:"flex"},icon:{width:16,marginRight:4,fill:"currentColor"},teamIcon:{marginRight:8},optionTitle:{display:"block"},noResultsMessage:{width:"100%",margin:"8px 12px"},optionCaption:{display:"block",color:e.mediumTextColor,fontSize:12,lineHeight:"15px"}})),[]),[R,D]=(0,s.useState)(!1),[V,Z]=(0,s.useState)(""),B=(0,n.VK)((()=>[...E].sort(g.KP)),[E]),L=(0,n.VK)((()=>t.map((e=>E.find((t=>t.id===e)))).filter(l.$K)),[E,t]);function O(){D(!1),Z(""),N()}function W(){Z(""),a([])}function q(e){const s=t.includes(e)?[]:[e];a(s),Z("")}const U=(0,s.useCallback)((e=>{Z(e.target.value)}),[]),z=(0,n.VK)((()=>L.map((e=>{const s=e.getName();return(0,F.jsx)(j.Z,{isSingle:!0,format:r.lo.Inline,showRemoveButton:!0,onClickRemove:()=>{const s=t.filter((t=>t!==e.id));a(s)},style:P.pillContainer,value:(0,F.jsxs)("div",{style:P.pillContents,children:[(0,F.jsx)(h.p,{disabled:!0,store:e,size:16}),(0,F.jsx)(M.Z,{style:P.pillText,children:s})]})},e.id)}))),[L,t,a,P]);const K=(0,F.jsx)(c.Z,{on:t.length>0,icon:(0,o.O)(P.icon),title:(0,F.jsx)(d.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.teams.title",defaultMessage:"Teamspace"}),onClick:()=>D(!0)});return(0,F.jsx)(S.Z,{children:(0,F.jsx)(b.ZP,{popupType:b.ZP.PopupType.Popup,placementToOrigin:b.ZP.Placement.Bottom,alignmentToOrigin:b.ZP.Alignment.Start,open:R,render:function(){const e=[];for(const n of B){const a=n.getName(),s=n.getTeamAccessLevel(),i=n.isDefault();a&&a.toLocaleLowerCase().includes(V)&&e.push({key:n.id,action:()=>q(n.id),render:e=>(0,F.jsx)(v.Z,{...e,icon:(0,F.jsx)(C.Z,{isSelected:t.includes(n.id)}),focused:!1,title:(0,F.jsxs)("div",{style:P.optionContainer,children:[(0,F.jsx)(h.p,{disabled:!0,store:n,size:24,style:P.teamIcon}),(0,F.jsxs)("div",{style:{paddingTop:4,paddingBottom:4},children:[(0,F.jsx)(M.Z,{style:P.optionTitle,children:a}),(0,F.jsx)(M.Z,{style:P.optionCaption,children:A(s,i)})]})]})})})}const a={key:"no-results",action:()=>{},render:e=>(0,F.jsx)(M.Z,{isSecondaryColor:!0,style:P.noResultsMessage,...e,children:(0,F.jsx)(d.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.teams.noResultsMessage",defaultMessage:"No results found."})})},s={key:"teamOptions",items:e.length>0?e:[a],render:e=>(0,F.jsx)(w.Z,{...e,title:null,loading:!1})};return(0,F.jsxs)("div",{style:P.container,children:[(0,F.jsx)(T.Z,{focus:!0,value:V,style:P.input,placeholder:u.default.formatMessage(k.placeholder),onChange:U,onRemoveLastToken:W,tokens:z}),(0,F.jsx)(y.Z,{menuType:m.og.Popup,header:null,maxHeight:250,width:300,children:(0,F.jsx)(x.Z,{type:x.i.Vertical,store:I,initialFocus:0,sections:[s]})}),(0,F.jsxs)(w.Z,{topBorder:!0,style:P.footer,children:[(0,F.jsx)(_.Z,{onClick:W,children:(0,F.jsx)(d.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.teams.clearButton",defaultMessage:"Clear"})}),(0,F.jsx)(f.Z,{onClick:O,children:(0,F.jsx)(d.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.teams.doneButton",defaultMessage:"Done"})})]})]})},onDismiss:O,keepFocus:!0,origin:K,preventScaleTransition:!0})})}function A(e,t){if(t)return(0,F.jsx)(d.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.teams.caption.default",defaultMessage:"Default"});switch(e){case"private":return(0,F.jsx)(d.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.teams.caption.private",defaultMessage:"Private"});case"closed":return(0,F.jsx)(d.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.teams.caption.closed",defaultMessage:"Closed"});case"open":return(0,F.jsx)(d.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.teams.caption.open",defaultMessage:"Open"});default:(0,l.t1)(e)}}},57702:(e,t,a)=>{a.d(t,{B:()=>V});a(57658);var s=a(67294),n=a(86628),i=a(24405),r=a(84619),o=a(40462),l=a(22686),d=a(26774),c=a(97880),u=a(7928),m=a(9291),g=a(45257),p=a(33929),h=a(87279),f=a(16639),v=a(80444),y=a(29798),x=a(42922),_=a(52275),b=a(60458),w=a(78140),M=a(32163),C=a(89728),S=a(53437),j=a(31278),T=a(43145),F=a(72495),k=a(64369),N=a(45653),A=a(46978),E=a(91642),I=a(85567),P=a(719),R=a(85893);const D=(0,m.defineMessages)({usersPlaceholder:{id:"adminContentSearchTab.pagesTable.filters.users.usersPlaceholder",defaultMessage:"Search for users..."},usersAndGroupsPlaceholder:{id:"adminContentSearchTab.pagesTable.filters.users.usersAndGroupsPlaceholder",defaultMessage:"Search for users and groups..."}});function V(e){let{userStores:t,title:a,selectedItems:V,setSelectedItems:Z,onMenuClose:B,isMultiSelect:L,includePermissionGroups:O,guestUserIdSet:W}=e;window.__c={n:"UsersFilter"};const q=(0,m.useIntl)(),U=(0,n.qz)(void 0,y.Z),z=(0,i.yK)((e=>({optionContainer:{display:"flex",flexDirection:"row",alignItems:"center"},optionAvatar:{marginRight:8},container:{padding:"6px 0 6px"},input:{margin:"4px auto",width:"95%",maxHeight:200,overflowY:"auto"},footer:{padding:"8px 8px 2px 8px",justifyContent:"space-between",display:"flex"},icon:{width:16,marginRight:4,fill:"currentColor"},defaultGroupIcon:{height:22,width:22,color:e.mediumTextColor,fill:"currentColor"},defaultGroupIconPill:{height:14,width:14,color:e.mediumTextColor,fill:"currentColor"},groupIconSpacing:{marginRight:8},pillContainer:{margin:"0px 6px 6px 0px",background:e.legacyDefaultSelectColor,height:20},guestPillContainer:{margin:"0px 6px 6px 0px",background:e.guestTokenBackground,height:20},guestIcon:{height:16,width:16,color:e.guestIconColor},pillContents:{display:"inline-flex",flexDirection:"row",justifyContent:"center",alignItems:"center"},pillText:{marginLeft:4},noResultsMessage:{width:"100%",margin:"8px 12px"},optionTitle:{display:"block"},optionCaption:{display:"block",color:e.mediumTextColor,fontSize:12,lineHeight:"15px"}})),[]),[K,G]=(0,s.useState)(10),[H,$]=(0,s.useState)(!1),[Q,Y]=(0,s.useState)(""),J=t.length,X=(0,n.VK)((()=>v.default.state.currentSpaceStore),[]),ee=(0,s.useMemo)((()=>V.map((e=>{let{id:t}=e;return t}))),[V]),te=(0,n.VK)((()=>{const e=v.default.state.currentSpaceStore;return O&&e?e.getPermissionGroups():[]}),[O]),ae=(0,n.VK)((()=>ee.map((e=>t.find((t=>t.id===e)))).filter(c.$K)),[ee,t]),se=(0,n.VK)((()=>ee.map((e=>te.find((t=>t.id===e)))).filter(c.$K)),[ee,te]);function ne(){G(10),$(!1),Y(""),B()}function ie(){Y(""),Z([])}function re(e){e<5&&K<J&&G(K+10)}function oe(e){if(L){return ee.includes(e.id)?[...V.filter((t=>{let{id:a}=t;return a!==e.id}))]:[...V,e]}return ee.includes(e.id)?[]:[e]}function le(e){const t=oe({id:e,type:"user"});Z(t),Y("")}function de(e){const t=oe({id:e,type:"permission_group"});Z(t),Y("")}const ce=(0,s.useCallback)((e=>{Y(e.target.value)}),[]),ue=(0,n.VK)((()=>ae.map((e=>{const t=(0,u.Nz)(q,e.getModel()),a=!!W&&W.has(e.id);return(0,R.jsx)(I.Z,{isSingle:!0,format:r.lo.Inline,showRemoveButton:!0,onClickRemove:()=>{const t=ee.filter((t=>t!==e.id)).map((e=>({id:e,type:"user"})));Z(t)},style:a?z.guestPillContainer:z.pillContainer,value:(0,R.jsxs)("div",{style:z.pillContents,children:[a?(0,o.o)(z.guestIcon):(0,R.jsx)(N.Z,{userStore:e,size:16}),(0,R.jsx)(k.Z,{style:z.pillText,children:t})]})},e.id)}))),[ee,ae,Z,W,z,q]),me=(0,n.VK)((()=>se.map((e=>{const t=f.kF({intl:q,group:e});return(0,R.jsx)(I.Z,{isSingle:!0,format:r.lo.Inline,showRemoveButton:!0,onClickRemove:()=>{const t=ee.filter((t=>t!==e.id)).map((e=>({id:e,type:"permission_group"})));Z(t)},style:z.pillContainer,value:(0,R.jsxs)("div",{style:z.pillContents,children:[(0,R.jsx)(j.Z,{disabled:!0,icon:e.icon&&X?{pointer:X.pointer,icon:e.icon}:void 0,size:14,isEmptyPage:!1,title:t,defaultIcon:(0,d.O)(z.defaultGroupIconPill),style:z.groupIconSpacing}),(0,R.jsx)(k.Z,{style:z.pillText,children:t})]})},e.id)}))),[ee,se,Z,z,X,q]);const ge=(0,R.jsx)(g.Z,{on:ee.length>0,icon:(0,l.f)(z.icon),title:a,onClick:()=>$(!0)});return(0,R.jsx)(E.Z,{children:(0,R.jsx)(S.ZP,{popupType:S.ZP.PopupType.Popup,placementToOrigin:S.ZP.Placement.Bottom,alignmentToOrigin:S.ZP.Alignment.Start,open:H,render:function(){const e=[];for(const o of t){var a;const t=(0,u.Nz)(q,o.getModel()),s=!!W&&W.has(o.id);(t.toLocaleLowerCase().includes(Q)||null!==(a=o.getEmail())&&void 0!==a&&a.toLocaleLowerCase().includes(Q))&&e.push({key:o.id,action:()=>le(o.id),render:e=>(0,R.jsx)(_.Z,{...e,icon:L?(0,R.jsx)(b.Z,{checked:ee.includes(o.id),onClick:()=>le(o.id),size:16}):(0,R.jsx)(A.Z,{isSelected:ee.includes(o.id)}),focused:!1,title:(0,R.jsxs)("div",{style:z.optionContainer,children:[(0,R.jsx)(N.Z,{userStore:o,size:24,style:z.optionAvatar}),(0,R.jsxs)("div",{style:{paddingTop:4,paddingBottom:4},children:[(0,R.jsx)(k.Z,{style:z.optionTitle,children:t}),(0,R.jsx)(k.Z,{style:z.optionCaption,children:s?(0,R.jsx)(m.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.users.guestCaption",defaultMessage:"Guest"}):(0,R.jsx)(m.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.users.memberCaption",defaultMessage:"Member"})})]})]})})})}const s=[];for(const t of te){const e=f.kF({intl:q,group:t});e.toLocaleLowerCase().includes(Q)&&s.push({key:t.id,action:()=>de(t.id),render:a=>(0,R.jsx)(_.Z,{...a,icon:L?(0,R.jsx)(b.Z,{checked:ee.includes(t.id),onClick:()=>de(t.id),size:16}):(0,R.jsx)(A.Z,{isSelected:ee.includes(t.id)}),focused:!1,title:(0,R.jsxs)("div",{style:z.optionContainer,children:[(0,R.jsx)(j.Z,{disabled:!0,icon:t.icon&&X?{pointer:X.pointer,icon:t.icon}:void 0,size:22,isEmptyPage:!1,title:e,defaultIcon:(0,d.O)(z.defaultGroupIcon),style:z.groupIconSpacing}),(0,R.jsxs)("div",{style:{paddingTop:4,paddingBottom:4},children:[(0,R.jsx)(k.Z,{style:z.optionTitle,children:e}),(0,R.jsx)(k.Z,{style:z.optionCaption,children:(0,R.jsx)(m.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.users.groupCaption",defaultMessage:"Group"})})]})]})})})}const n={key:"no-results",action:()=>{},render:e=>(0,R.jsx)(k.Z,{isSecondaryColor:!0,style:z.noResultsMessage,...e,children:(0,R.jsx)(m.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.users.noResultsMessage",defaultMessage:"No results found."})})},i=[...e,...s],r={key:"userOptions",items:i.length>0?i.slice(0,K):[n],render:e=>(0,R.jsx)(F.Z,{...e,title:null,loading:!1})};return(0,R.jsxs)("div",{style:z.container,children:[(0,R.jsx)(P.Z,{focus:!0,value:Q,style:z.input,placeholder:p.default.formatMessage(O?D.usersAndGroupsPlaceholder:D.usersPlaceholder),onChange:ce,onRemoveLastToken:()=>{const e=V.slice(0,-1);Z(e)},tokens:[...ue,...me]}),(0,R.jsxs)(w.Z,{menuType:h.og.Popup,header:null,maxHeight:250,width:300,children:[(0,R.jsx)(M.Z,{type:M.i.Vertical,store:U,initialFocus:0,sections:[r]}),(0,R.jsx)(T.Z,{onChange:re})]}),(0,R.jsxs)(F.Z,{topBorder:!0,style:z.footer,children:[(0,R.jsx)(C.Z,{onClick:ie,children:(0,R.jsx)(m.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.users.clearButton",defaultMessage:"Clear"})}),(0,R.jsx)(x.Z,{onClick:ne,children:(0,R.jsx)(m.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.users.doneButton",defaultMessage:"Done"})})]})]})},onDismiss:ne,keepFocus:!0,origin:ge,preventScaleTransition:!0})})}},34690:(e,t,a)=>{a.d(t,{N:()=>h});a(67294);var s=a(86628),n=a(24405),i=a(16184),r=a(26774),o=a(87479),l=a(72141),d=a(9291),c=a(98165),u=a(69219),m=a(36409),g=a(85893),p=function(e){return e.Shared="shared",e.Private="private",e.Hidden="hidden",e}(p||{});function h(e){let{blockStore:t,teamStore:a}=e;window.__c={n:"LocationCell"};const h=(0,n.yK)((e=>({icon:{height:18,width:18,color:e.lightIconColor,fill:"currentColor"}})),[]),f=(0,s.VK)((()=>{const e=(0,c.fJ)(t),a=(0,o.Wo)(e),s=a.filter((e=>!(0,l.Le)(e)));return 1===s.length&&(0,l.jg)(s[0])?p.Private:a.length>0?p.Shared:p.Hidden}),[t]);return a?(0,g.jsx)(m.r,{useThinTitle:!0,teamStore:a}):function(){switch(f){case p.Shared:return(0,g.jsx)(u.i,{useThinTitle:!0,icon:(0,r.O)(h.icon),title:(0,g.jsx)(d.FormattedMessage,{id:"adminContentSearchTab.pagesTable.locationCell.shared",defaultMessage:"Shared"})});case p.Hidden:case p.Private:return(0,g.jsx)(u.i,{useThinTitle:!0,icon:(0,i.Q)(h.icon),title:(0,g.jsx)(d.FormattedMessage,{id:"adminContentSearchTab.pagesTable.locationCell.private",defaultMessage:"Private"})})}}()}},77883:(e,t,a)=>{a.d(t,{t:()=>l});a(67294);var s=a(86628),n=a(19889),i=a(68373),r=a(17290),o=a(85893);function l(e){let{blockStore:t,userIds:a,isClickable:l}=e;window.__c={n:"UsersFromIdsCell"};const d=(0,s.VK)((()=>a.map((e=>i.U6.createChildStore(t,{table:n.KJ,id:e})))),[t,a]);return(0,o.jsx)(r.G,{userStores:d,isClickable:l})}},85579:(e,t,a)=>{a.d(t,{a:()=>wt,Z:()=>Mt});var s=a(67294),n=a(480),i=a(86628),r=a(9291),o=a(88632),l=a(64369),d=a(27386),c=a(23189),u=a(24405),m=a(50906),g=a(61652),p=a(63296),h=a(85893);function f(e){let{spaceId:t,filters:a,disabled:i}=e;window.__c={n:"AdminContentSearchExportButton"};const[o,l]=(0,s.useState)(!1),d=(0,n.O7)(),c=i||o,f=(0,u.yK)((e=>({button:{opacity:c?.5:1}})),[c]);return(0,h.jsx)(p.Z,{style:f.button,disabled:c,onClick:async function(){l(!0),m.j_(d,{filters:a}),await g.gJ(d,{spaceId:t,filters:a}),l(!1)},children:(0,h.jsx)(r.FormattedMessage,{id:"adminContentSearchTab.export",defaultMessage:"Export results"})})}var v=a(98165),y=a(40394),x=a(68785),_=a(71291),b=a(44678),w=a(44495),M=a(16184),C=a(82990),S=a(12714),j=a(97627),T=a(18514),F=a(42922),k=a(89728);function N(e){window.__c={n:"AdminContentSearchAcknowledgement"};const t=(0,n.O7)(),a=(0,u.yK)((e=>({container:{marginTop:48,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},headerIcon:{width:36,height:36,color:e.lightTextColor,fill:"currentColor"},disclaimerTitle:{margin:"12px auto",fontWeight:C.Z.fontWeight.medium,fontSize:16},disclaimer:{fontWeight:C.Z.fontWeight.regular,fontSize:14,color:e.lightTextColor,textAlign:"center",width:432,margin:"0 auto 16px"},acknowledgeButton:{width:195,margin:"8px auto 0"},learnMoreButton:{width:195,margin:"8px auto 0",justifyContent:"center",color:e.lightTextColor},learnMoreButtonIcon:{width:12,height:12,marginRight:4}})),[]),i=(0,s.useCallback)((()=>{m.vN(t),j.NY(t)}),[t]);return(0,h.jsxs)("div",{style:a.container,children:[(0,M.Q)(a.headerIcon),(0,h.jsx)("h1",{style:a.disclaimerTitle,children:(0,h.jsx)(r.FormattedMessage,{id:"adminContentSearchTab.pagesTable.acknowledgement.disclaimerTitle",defaultMessage:"Before using this feature"})}),(0,h.jsx)("p",{style:a.disclaimer,children:(0,h.jsx)(r.FormattedMessage,{id:"adminContentSearchTab.pagesTable.acknowledgement.disclaimer",defaultMessage:"As a workspace owner, you can use content search to find pages that you don't have access to, including the private pages of other workspace members. Consult with your organization's legal department on how to use this feature. Actions taken here will be recorded in the audit log."})}),(0,h.jsx)(F.Z,{style:a.acknowledgeButton,onClick:i,children:(0,h.jsx)(r.FormattedMessage,{id:"adminContentSearchTab.pagesTable.acknowledgement.confirm",defaultMessage:"Acknowledge"})}),(0,h.jsxs)(k.Z,{style:a.learnMoreButton,onClick:()=>{const e=(0,T.UY)("adminContentSearch");S.D({environment:t,url:e})},children:[(0,w.D)(a.learnMoreButtonIcon),(0,h.jsx)(r.FormattedMessage,{id:"adminContentSearchTab.pagesTable.acknowledgement.learnMore",defaultMessage:"Learn more"})]})]})}var A=a(73075),E=a(80721),I=a(26774),P=a(97880),R=a(45257),D=a(87279),V=a(29798),Z=a(52275),B=a(60458),L=a(78140),O=a(32163),W=a(53437),q=a(72495),U=a(91642);function z(e){let{selectedAudience:t,setSelectedAudience:a,onMenuClose:n,setPillTitleToActiveSelection:o}=e;window.__c={n:"AudienceFilter"};const l=(0,i.qz)(void 0,V.Z),d=(0,u.yK)((e=>({optionContainer:{display:"flex",flexDirection:"row",alignItems:"center"},optionAvatar:{marginRight:4},container:{padding:"6px 0 6px"},input:{margin:"4px auto",width:"95%"},footer:{padding:"8px 8px 2px 8px",justifyContent:"space-between",display:"flex"},icon:{width:16,marginRight:4,fill:"currentColor"},teamIcon:{marginRight:8}})),[]),[c,m]=(0,s.useState)(!1),g=["private","shared_internally","shared_externally","shared_to_web"];function p(){m(!1),n&&n()}function f(){a&&a([])}function v(e){const s=t.includes(e)?[...t.filter((t=>t!==e))]:[...t,e];a&&a(s)}const y=(0,h.jsx)(R.Z,{on:t.length>0,icon:(0,I.O)(d.icon),title:o&&t[0]?K(t[0]):(0,h.jsx)(r.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.audience.title",defaultMessage:"Audience"}),onClick:()=>m(!0),disabled:!a,hideChevron:!a});return a?(0,h.jsx)(U.Z,{children:(0,h.jsx)(W.ZP,{popupType:W.ZP.PopupType.Popup,placementToOrigin:W.ZP.Placement.Bottom,alignmentToOrigin:W.ZP.Alignment.Start,open:c,render:function(){const e={key:"teamOptions",items:g.map((e=>({key:e,action:()=>v(e),render:a=>(0,h.jsx)(Z.Z,{...a,icon:(0,h.jsx)(B.Z,{checked:t.includes(e),onClick:()=>v(e),size:16}),focused:!1,title:K(e),caption:G(e),shouldWrapCaption:!0})}))),render:e=>(0,h.jsx)(q.Z,{...e,title:null,loading:!1})};return(0,h.jsxs)("div",{style:d.container,children:[(0,h.jsx)(L.Z,{menuType:D.og.Popup,header:null,maxHeight:250,width:300,children:(0,h.jsx)(O.Z,{type:O.i.Vertical,store:l,initialFocus:0,sections:[e]})}),(0,h.jsxs)(q.Z,{topBorder:!0,style:d.footer,children:[(0,h.jsx)(k.Z,{onClick:f,children:(0,h.jsx)(r.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.audience.clearButton",defaultMessage:"Clear"})}),(0,h.jsx)(F.Z,{onClick:p,children:(0,h.jsx)(r.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.audience.doneButton",defaultMessage:"Done"})})]})]})},onDismiss:p,keepFocus:!0,origin:y,preventScaleTransition:!0})}):y}function K(e){switch(e){case"private":return(0,h.jsx)(r.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.audience.label.private",defaultMessage:"Private"});case"shared_externally":return(0,h.jsx)(r.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.audience.label.external",defaultMessage:"Shared externally"});case"shared_internally":return(0,h.jsx)(r.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.audience.label.internal",defaultMessage:"Shared internally"});case"shared_to_web":return(0,h.jsx)(r.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.audience.label.publishedToWeb",defaultMessage:"Shared to web"});default:(0,P.t1)(e)}}function G(e){switch(e){case"private":return(0,h.jsx)(r.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.audience.caption.private",defaultMessage:"Pages that only a single workspace member has access to."});case"shared_externally":return(0,h.jsx)(r.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.audience.caption.external",defaultMessage:"Pages that are shared with guests or connections."});case"shared_internally":return(0,h.jsx)(r.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.audience.caption.internal",defaultMessage:"Pages that are shared with other workspace members."});case"shared_to_web":return(0,h.jsx)(r.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.audience.caption.publishedToWeb",defaultMessage:"Pages that are available for anyone to see on the web."});default:(0,P.t1)(e)}}function H(e){let{filters:t,setFilters:a}=e;window.__c={n:"AdminContentSearchSuggestions"};const s=(0,u.yK)((e=>({container:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},title:{margin:"12px auto",fontWeight:C.Z.fontWeight.medium,fontSize:16},description:{fontWeight:C.Z.fontWeight.regular,fontSize:14,color:e.lightTextColor,textAlign:"center",width:386,margin:"0 auto 16px"},suggestion:{position:"relative",height:38,width:440,margin:"12px auto 0",justifyContent:"center",color:e.darkTextColor,boxShadow:e.borderBoxShadow},filterContainer:{margin:"0 8px",display:"flex",alignItems:"center",justifyContent:"center"},arrowIconContainer:{position:"absolute",right:12,transform:"rotate(180deg)"},arrowIcon:{width:18,height:18,opacity:.5,color:e.lightTextColor,fill:"currentColor"}})),[]);return(0,h.jsxs)("div",{style:s.container,children:[(0,h.jsx)("h1",{style:s.title,children:(0,h.jsx)(r.FormattedMessage,{id:"adminContentSearchTab.pagesTable.suggestions.title",defaultMessage:"Search pages in your workspace"})}),(0,h.jsx)("p",{style:s.description,children:(0,h.jsx)(r.FormattedMessage,{id:"adminContentSearchTab.pagesTable.suggestions.description",defaultMessage:"Use filters to find pages with specific sharing and permissions settings, such as:"})}),(0,h.jsxs)(k.Z,{style:s.suggestion,onClick:function(){a({query:"",lastEditedTime:{starting:void 0,ending:void 0},createdTime:{starting:void 0,ending:void 0},audience:["shared_externally"],teamIds:[]},{runSearchAfter:!0})},children:[(0,h.jsx)(r.FormattedMessage,{id:"adminContentSearchTab.pagesTable.suggestions.sharedToWeb",defaultMessage:"Search for pages <filter></filter>",values:{filter:()=>(0,h.jsx)("div",{style:s.filterContainer,children:(0,h.jsx)(z,{setPillTitleToActiveSelection:!0,selectedAudience:["shared_externally"]})})}}),(0,h.jsx)("div",{style:s.arrowIconContainer,children:(0,E.W)(s.arrowIcon)})]}),(0,h.jsxs)(k.Z,{style:s.suggestion,onClick:function(){a({query:"",lastEditedTime:{starting:void 0,ending:void 0},createdTime:{starting:void 0,ending:void 0},audience:["shared_to_web"],teamIds:[]},{runSearchAfter:!0})},children:[(0,h.jsx)(r.FormattedMessage,{id:"adminContentSearchTab.pagesTable.suggestions.sharedToWeb",defaultMessage:"Search for pages <filter></filter>",values:{filter:()=>(0,h.jsx)("div",{style:s.filterContainer,children:(0,h.jsx)(z,{setPillTitleToActiveSelection:!0,selectedAudience:["shared_to_web"]})})}}),(0,h.jsx)("div",{style:s.arrowIconContainer,children:(0,E.W)(s.arrowIcon)})]})]})}var $=a(53855),Q=a(34690),Y=a(15145),J=a(56666),X=a(27714),ee=a(62397),te=a(80560),ae=a(84210),se=a(77907),ne=a(28578),ie=a(61766),re=a(55899),oe=a(8675),le=a(31945),de=a(73063);function ce(e){let{blockStore:t}=e;window.__c={n:"PageCellActions"};const a=(0,n.O7)(),o=(0,i.qz)(void 0,ie.Z),l=(0,i.qz)(void 0,oe.Z),d=(0,i.qz)(void 0,re.ZP),c=(0,u.yK)((e=>({changePermissionsIcon:{height:18,width:18,color:e.regularIconColor,fill:"currentColor"},copyLinkIcon:{height:15,width:15,color:e.regularIconColor,fill:"currentColor"}})),[]),[m,g]=(0,s.useState)(!1);(0,s.useEffect)((()=>{l.setState({...l.state,privatePageStore:t,changePermissionsEnabled:!0,loading:!1,error:void 0})}),[t,l]);const p={key:"actions",render:e=>(0,h.jsx)(q.Z,{...e}),items:[{key:"change-permissions",render:e=>(0,h.jsx)(Z.Z,{...e,icon:(0,ee.I)(c.changePermissionsIcon),title:(0,h.jsx)(r.FormattedMessage,{id:"adminContentSearchTab.pagesTable.page.actions.changePermissions",defaultMessage:"Change permissions"})}),action:function(){g(!0)}},{key:"copy-link",render:e=>(0,h.jsx)(Z.Z,{...e,icon:(0,X.N)(c.copyLinkIcon),title:(0,h.jsx)(r.FormattedMessage,{id:"adminContentSearchTab.pagesTable.page.actions.copyLink",defaultMessage:"Copy link to page"})}),action:async function(){const e=(0,ae.ZP)({store:t,pageVisitSource:Y.tY.CopyLink});await te.RD({environment:a,stringValue:e,copiedMessage:te.tq.copiedLinkToClipboard}),o.setState({open:!1})}}]};return(0,h.jsx)(le.ZP,{popupType:W.kQ.Popup,alignmentToOrigin:W.ZP.Alignment.Center,placementToOrigin:W.ZP.Placement.Right,style:{width:m?450:248},render:()=>m?(0,h.jsx)(se.LazyShareMenuContainer,{store:t,sudoModeStore:l,inviteTargetsStore:d,location:"admin_content_search"}):(0,h.jsx)(L.Z,{menuType:D.og.Popup,width:248,children:(0,h.jsx)(O.Z,{type:O.i.Vertical,initialFocus:void 0,sections:[p]})}),onClose:()=>{g(!1),ne.ZP.reset()},buttonPopupStore:o,renderOrigin:e=>(0,h.jsx)(de.Z,{icon:J.o,...e})})}a(57658);var ue=a(53695),me=a(26388),ge=a(77420),pe=a(68373),he=a(36596),fe=a(28992),ve=a(70301);function ye(e){let{botId:t}=e;window.__c={n:"BotMenuItem"};const a=(0,r.useIntl)(),s=(0,n.O7)(),o=(0,i.VK)((()=>pe.t1.createUniqueRootStore(s,{table:ge.cZ,id:t})),[t,s]),l=(0,i.VK)((()=>o.getDisplayName(a)),[o,a]),d=(0,i.VK)((()=>o.getParentStore()),[o]),c=(0,i.VK)((()=>{if(d){if(d instanceof pe.U6)return d.getDisplayName(a);if(d instanceof pe.H2)return d.getName()}}),[d,a]),m=(0,u.yK)((()=>({desktopIconStyle:{alignSelf:"center",width:24,fontSize:18}})),[]);return l?(0,h.jsx)(fe.Z,{desktopIconStyle:m.desktopIconStyle,icon:(0,h.jsx)(ve.Z,{botStore:o,size:24}),title:l,caption:(0,h.jsx)(r.FormattedMessage,{id:"adminContentSearchTab.pagesTable.sharedWithCell.botMenuItem.createdBy",defaultMessage:"Created by {creatorName}",values:{creatorName:c}})}):(0,h.jsx)(xe,{})}function xe(){window.__c={n:"ShimmerLoader"};const e=(0,u.yK)((e=>({container:{userSelect:"none",minHeight:45,fontSize:14,padding:"4px 8px",display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center"},textContainer:{display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"flex-start",gap:6},icon:{flexGrow:0,flexShrink:0,width:24,height:24,borderRadius:"0.25em",marginRight:4,marginTop:1},title:{flexGrow:0,flexShrink:0,width:80,height:14,borderRadius:"0.25em",marginLeft:4},byline:{flexGrow:0,flexShrink:0,width:150,height:10,borderRadius:"0.25em",marginLeft:4}})),[]);return(0,h.jsxs)("div",{style:e.container,children:[(0,h.jsx)(he.Z,{style:e.icon}),(0,h.jsxs)("div",{style:e.textContainer,children:[(0,h.jsx)(he.Z,{emphasized:!1,style:e.title}),(0,h.jsx)(he.Z,{emphasized:!1,style:e.byline})]})]})}var _e=a(80444),be=a(31278);const we=(0,r.defineMessages)({editor:{id:"adminContentSearchTab.sharedWith.permissions.editor",defaultMessage:"Full access"},readAndWrite:{id:"adminContentSearchTab.sharedWith.permissions.readAndWrite",defaultMessage:"Can edit"},commentOnly:{id:"adminContentSearchTab.sharedWith.permissions.commentOnly",defaultMessage:"Can comment"},reader:{id:"adminContentSearchTab.sharedWith.permissions.reader",defaultMessage:"Can view"},none:{id:"adminContentSearchTab.sharedWith.permissions.none",defaultMessage:"None"}});function Me(e,t){switch(t){case"editor":return e.formatMessage(we.editor);case"read_and_write":return e.formatMessage(we.readAndWrite);case"comment_only":return e.formatMessage(we.commentOnly);case"reader":return e.formatMessage(we.reader);case"none":return e.formatMessage(we.none)}}function Ce(e){let{name:t,icon:a,role:s}=e;window.__c={n:"GroupMenuItem"};const n=(0,r.useIntl)(),o=(0,i.VK)((()=>_e.default.state.currentSpaceStore),[]),l=Me(n,s),d=(0,u.yK)((e=>({defaultIcon:{height:18,width:18,color:e.lightTextColor,fill:"currentColor"},defaultGroupIcon:{height:20,width:20,color:e.lightTextColor,fill:"currentColor"}})),[]);return(0,h.jsx)(fe.Z,{desktopIconStyle:{alignSelf:"center",width:24,fontSize:18},icon:(0,h.jsx)(be.Z,{disabled:!0,icon:a&&o?{pointer:o.pointer,icon:a}:void 0,size:20,isEmptyPage:!1,title:t,defaultIcon:(0,I.O)(d.defaultGroupIcon)}),title:t||(0,h.jsx)(r.FormattedMessage,{id:"adminContentSearchTab.pagesTable.sharedWithCell.untitledPage",defaultMessage:"Untitled{maybeRoleString}",values:{maybeRoleString:l?` · ${l}`:""}}),caption:(0,h.jsx)(r.FormattedMessage,{id:"adminContentSearchTab.pagesTable.sharedWithCell.group",defaultMessage:"Group{maybeRoleString}",values:{maybeRoleString:l?` · ${l}`:""}})})}var Se=a(72141),je=a(74016);function Te(e){let{permissionItem:t}=e;window.__c={n:"SpaceMenuItem"};const a=(0,r.useIntl)(),s=(0,i.VK)((()=>_e.default.state.currentSpaceStore),[]),n=(0,i.VK)((()=>{var e;return null===(e=_e.default.state.currentSpaceStore)||void 0===e?void 0:e.getName()}),[]),o=null==t?void 0:t.role,l=(0,Se.iC)(o)?Me(a,o):void 0;return(0,h.jsx)(fe.Z,{desktopIconStyle:{alignSelf:"center",width:24},icon:s?(0,h.jsx)(je.p,{disabled:!0,store:s,size:24}):void 0,title:n,caption:(0,h.jsx)(r.FormattedMessage,{id:"adminContentSearchTab.pagesTable.sharedWithCell.spaceMembers",defaultMessage:"Members{maybeRoleString}",values:{maybeRoleString:l?` · ${l}`:""}})})}var Fe=a(91192),ke=a(29369);function Ne(e){let{teamId:t,role:a,onlyOwners:s}=e;window.__c={n:"TeamMenuItem"};const o=(0,n.O7)(),l=(0,r.useIntl)(),d=(0,i.VK)((()=>new pe.zX(o,{table:ke.e0,id:t})),[o,t]),c=Me(l,a),u=(0,i.VK)((()=>d.getName()),[d]),m=u||(0,h.jsx)(r.FormattedMessage,{id:"adminContentSearchTab.pagesTable.sharedWithCell.unknownTeamName",defaultMessage:"Private teamspace"});return(0,h.jsx)(fe.Z,{desktopIconStyle:{alignSelf:"center",width:24},icon:u?(0,h.jsx)(je.p,{disabled:!0,store:d,size:24}):(0,Fe.x)(),title:m,caption:s?(0,h.jsx)(r.FormattedMessage,{id:"adminContentSearchTab.pagesTable.sharedWithCell.teamOwners",defaultMessage:"Owners{maybeRoleString}",values:{maybeRoleString:c?` · ${c}`:""}}):(0,h.jsx)(r.FormattedMessage,{id:"adminContentSearchTab.pagesTable.sharedWithCell.teamMembers",defaultMessage:"Members{maybeRoleString}",values:{maybeRoleString:c?` · ${c}`:""}})})}var Ae=a(64684),Ee=a(46654),Ie=a(88893),Pe=a(88280);var Re=a(19889),De=a(7928),Ve=a(45653);function Ze(e){let{userId:t,role:a,isGuest:s}=e;window.__c={n:"UserMenuItem"};const o=(0,r.useIntl)(),l=(0,n.O7)(),{userStore:d,userName:c}=(0,i.VK)((()=>{const e=new pe.U6(l,{table:Re.KJ,id:t}),a=(0,De.Nz)(o,e.getModel());return{userStore:e,userName:a}}),[l,t,o]),u=Me(o,a);return(0,h.jsx)(fe.Z,{desktopIconStyle:{alignSelf:"center",width:24},icon:(0,h.jsx)(Ve.Z,{userStore:d,size:24}),title:c,caption:s?(0,h.jsx)(r.FormattedMessage,{id:"adminContentSearchTab.pagesTable.sharedWithCell.guest",defaultMessage:"Guest{maybeRoleString}",values:{maybeRoleString:u?` · ${u}`:""}}):(0,h.jsx)(r.FormattedMessage,{id:"adminContentSearchTab.pagesTable.sharedWithCell.member",defaultMessage:"Member{maybeRoleString}",values:{maybeRoleString:u?` · ${u}`:""}})})}const Be=(0,r.defineMessages)({sharedWithWorkspaceMembers:{id:"adminContentSearchTab.pagesTable.sharedWithCell.sharedWithWorkspaceMembers",defaultMessage:"Workspace members"},sharedWithTeamOwners:{id:"adminContentSearchTab.pagesTable.sharedWithCell.sharedWithTeamOwners",defaultMessage:"Teamspace owners"},sharedWithTeamMembers:{id:"adminContentSearchTab.pagesTable.sharedWithCell.sharedWithTeamMembers",defaultMessage:"Teamspace members"},sharedWithMembers:{id:"adminContentSearchTab.pagesTable.sharedWithCell.sharedWithMembers",defaultMessage:"{numMembers, plural, one {# member} other {# members}}"},sharedWithGroups:{id:"adminContentSearchTab.pagesTable.sharedWithCell.sharedWithGroups",defaultMessage:"{numGroups, plural, one {# group} other {# groups}}"},sharedWithGuests:{id:"adminContentSearchTab.pagesTable.sharedWithCell.sharedWithGuests",defaultMessage:"{numGuests, plural, one {# guest} other {# guests}}"},sharedWithBots:{id:"adminContentSearchTab.pagesTable.sharedWithCell.sharedWithBots",defaultMessage:"{numBots, plural, one {# connection} other {# connections}}"},separator:{defaultMessage:", ",id:"adminContentSearchTab.pagesTable.sharedWithCell.separator"}});function Le(e){let{blockStore:t}=e;window.__c={n:"SharedWithCellImpl"};const a=function(e){return(0,i.VK)((()=>{const t=Pe.subscriptionDataStoreInstance.state,a=t?(0,Ie.CM)(t):[],s=_e.default.state.currentSpaceStore,n=(0,Ee.YO)(e),i=(null==s?void 0:s.getPermissionGroups())||[],r=(0,v.VP)(e),o=n.find((e=>{let{permissionItem:t}=e;return Se.$D(t)})),l=n.find((e=>{let{permissionItem:t}=e;return Se.ix(t)})),d=r?n.find((e=>{let{permissionItem:t}=e;return(0,Ae.J2)(t,r.id)})):void 0,c=n.map((e=>{let{permissionItem:t}=e;return t})).filter(Se.zU),u=n.map((e=>{let{permissionItem:t}=e;return t})).filter(Se.LW),m=n.map((e=>{let{permissionItem:t}=e;return t})).filter(Se.hV).reduce(((e,t)=>{const a=t.group_id,s=t.role,n=i.find((e=>e.id===a));if(n){const t={...n,role:s};e.push(t)}return e}),[]),[g,p]=n.map((e=>{let{permissionItem:t}=e;return t})).filter(Se.jg).reduce(((e,t)=>{const s=a.find((e=>e.userId===t.user_id));return Boolean(s&&!Se.zz(s.role)&&!Se.J5(s.role))?[e[0].concat(t),e[1]]:[e[0],e[1].concat(t)]}),[[],[]]);return{groupPermissions:m,mostPermissivePublicItem:o,spacePermission:l,teamPermission:d,teamSharePermissions:c,teamOwnerSharePermissions:u,guestUserPermissions:g,memberUserPermissions:p,botPermissions:n.map((e=>{let{permissionItem:t}=e;return t})).filter((e=>(0,Se.FB)(e)))}}),[e])}(t),s=(0,r.useIntl)(),n=function(e,t){const{mostPermissivePublicItem:a,spacePermission:s,groupPermissions:n,guestUserPermissions:i,memberUserPermissions:o,teamSharePermissions:l,teamOwnerSharePermissions:d,botPermissions:c}=e,u=s&&"none"!==s.permissionItem.role;if(a&&"none"!==a.permissionItem.role)return(0,h.jsx)(r.FormattedMessage,{id:"adminContentSearchTab.pagesTable.sharedWithCell.sharedWithWeb",defaultMessage:"Shared to web"});if(!u&&0===n.length&&0===i.length&&0===o.length&&0===l.length&&0===d.length&&0===c.length)return(0,h.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center"},children:[(0,h.jsx)(r.FormattedMessage,{id:"adminContentSearchTab.pagesTable.sharedWithCell.orphanedPage",defaultMessage:"Nobody"}),(0,h.jsx)(me.ZP,{render:e=>(0,h.jsx)("div",{...e,children:(0,w.D)({marginLeft:4,height:14,width:14,opacity:.5})}),renderTooltip:()=>(0,h.jsx)(r.FormattedMessage,{id:"adminContentSearchTab.pagesTable.sharedWithCell.orphanedPage.tooltip",defaultMessage:"No person, group, or teamspace has any access to this page."})})]});const m=[];u?m.push(t.formatMessage(Be.sharedWithWorkspaceMembers)):(d.length>0&&0===l.length?m.push(t.formatMessage(Be.sharedWithTeamOwners)):l.length>0&&m.push(t.formatMessage(Be.sharedWithTeamMembers)),o.length>0&&m.push(t.formatMessage(Be.sharedWithMembers,{numMembers:o.length})),n.length>0&&m.push(t.formatMessage(Be.sharedWithGroups,{numGroups:n.length})));i.length>0&&m.push(t.formatMessage(Be.sharedWithGuests,{numGuests:i.length}));c.length>0&&m.push(t.formatMessage(Be.sharedWithBots,{numBots:c.length}));return m.join(t.formatMessage(Be.separator))}(a,s),o=[...a.spacePermission?[{key:"space-permission",render:e=>{var t;return(0,h.jsx)(Te,{...e,permissionItem:null===(t=a.spacePermission)||void 0===t?void 0:t.permissionItem})},action:()=>{}}]:[],...a.teamOwnerSharePermissions.map((e=>({key:`${e.team_id}-owners`,render:t=>(0,h.jsx)(Ne,{...t,onlyOwners:!0,teamId:e.team_id,role:e.role}),action:()=>{}}))),...a.teamSharePermissions.map((e=>({key:`${e.team_id}-members`,render:t=>(0,h.jsx)(Ne,{...t,teamId:e.team_id,role:e.role}),action:()=>{}}))),...a.groupPermissions.map((e=>({key:e.id,render:t=>(0,h.jsx)(Ce,{...t,name:e.name,icon:e.icon,role:e.role}),action:()=>{}}))),...a.memberUserPermissions.map((e=>({key:e.user_id,render:t=>(0,h.jsx)(Ze,{...t,userId:e.user_id,role:e.role}),action:()=>{}}))),...a.guestUserPermissions.map((e=>({key:e.user_id,render:t=>(0,h.jsx)(Ze,{...t,isGuest:!0,userId:e.user_id,role:e.role}),action:()=>{}}))),...a.botPermissions.map((e=>({key:e.bot_id,render:t=>(0,h.jsx)(ye,{...t,botId:e.bot_id}),action:()=>{}})))];return(0,h.jsx)(ue.N,{title:n,items:o,disabled:0===o.length})}const Oe=s.memo(Le);var We=a(77883);const qe={id:"page",headerTitle:(0,h.jsx)(r.FormattedMessage,{id:"adminContentSearchTab.pagesTable.page.name",defaultMessage:"Page"}),renderCell:e=>(0,h.jsx)(b.o,{blockStore:e.pageStore,rightIcon:(0,h.jsx)(ce,{blockStore:e.pageStore})}),widthData:{width:320,maxWidth:320},sortable:!1},Ue={id:"location",headerTitle:(0,h.jsx)(r.FormattedMessage,{id:"adminContentSearchTab.pagesTable.location.name",defaultMessage:"Location"}),renderCell:e=>(0,h.jsx)(Q.N,{blockStore:e.pageStore,teamStore:e.teamStore}),widthData:{width:140},sortable:!1},ze={id:"createdTime",headerTitle:(0,h.jsx)(r.FormattedMessage,{id:"adminContentSearchTab.pagesTable.createdTime.name",defaultMessage:"Created on"}),renderCell:e=>(0,h.jsx)(_.T,{dateTs:e.createdTime}),widthData:{width:140},sortable:!1},Ke={id:"lastEditedTime",headerTitle:(0,h.jsx)(r.FormattedMessage,{id:"adminContentSearchTab.pagesTable.lastEditedTime.name",defaultMessage:"Last edited on"}),renderCell:e=>(0,h.jsx)(_.T,{dateTs:e.lastEditedTime}),widthData:{width:140},sortable:!1},Ge={id:"createdBy",headerTitle:(0,h.jsx)(r.FormattedMessage,{id:"adminContentSearchTab.pagesTable.createdBy.name",defaultMessage:"Created by"}),renderCell:e=>e.createdById?(0,h.jsx)(We.t,{blockStore:e.pageStore,userIds:[e.createdById]}):null,widthData:{width:140},sortable:!1},He={id:"lastEditedBy",headerTitle:(0,h.jsx)(r.FormattedMessage,{id:"adminContentSearchTab.pagesTable.lastEditedBy.name",defaultMessage:"Last edited by"}),renderCell:e=>e.lastEditedById?(0,h.jsx)(We.t,{blockStore:e.pageStore,userIds:[e.lastEditedById]}):null,widthData:{width:140},sortable:!1},$e=[qe,Ue,{id:"audience",headerTitle:(0,h.jsx)(r.FormattedMessage,{id:"adminContentSearchTab.pagesTable.audience.name",defaultMessage:"Audience"}),renderCell:e=>(0,h.jsx)($.A,{blockStore:e.pageStore}),widthData:{width:140},sortable:!1},{id:"sharedWith",headerTitle:(0,h.jsx)(r.FormattedMessage,{id:"adminContentSearchTab.pagesTable.sharedWith.name",defaultMessage:"Shared with"}),renderCell:e=>(0,h.jsx)(Oe,{blockStore:e.pageStore}),widthData:{width:140},sortable:!1},He,Ke,Ge,ze];function Qe(e){let{loading:t,error:a,loadNextPage:s,filters:n,setFilters:o,pageStores:d,showSuggestions:c,runNewSearch:m,hasUserConfirmedAcknowledgement:g}=e;window.__c={n:"AdminContentSearchTable"};const p=g&&!t&&!c,f=g&&!c,_=(0,i.VK)((()=>d.map((e=>({id:e.id,isClickable:!1,pageStore:e,teamStore:(0,v.VP)(e),createdTime:e.getCreatedTime(),lastEditedTime:e.getLastEditedTime(),createdById:e.getCreatedById(),lastEditedById:e.getLastEditedById()})))),[d]),b=(0,u.yK)((e=>(0,y.b)({columnRenderInfo:$e,theme:e,containerMarginTop:0})),[]);return a?(0,h.jsx)(A.q,{runNewSearch:m,error:a}):g?c&&0===_.length?(0,h.jsx)(H,{filters:n,setFilters:o}):(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(y.D,{hideHeaderRowPadding:!0,allowHorizontalScroll:!0,setStickyHeaderRow:!0,maxHeight:400,columnRenderInfo:$e,rows:_,onLoadMore:f?s:void 0,renderNoRowsComponent:()=>(0,h.jsx)(l.Z,{isSmall:!0,style:{marginTop:15,marginBottom:40,textAlign:"center"},children:p&&(0,h.jsx)(r.FormattedMessage,{id:"adminContentSearchTab.pagesTable.empty",defaultMessage:"No pages found with your query."})}),styles:b}),t?(0,h.jsx)(x.Z,{style:{margin:"24px auto 24px"}}):null]}):(0,h.jsx)(N,{})}var Ye=a(21697),Je=a(36550),Xe=a(79782),et=a(66994),tt=a(89665),at=a(57702);function st(e){let{spaceStore:t,sharedWithFilterItems:a,setSharedWithFilter:n,runNewSearch:i,includeGroups:o,includeGuests:l}=e;window.__c={n:"SharedWithFilter"};const d=(0,tt.R)({spaceStore:t}),c=(0,s.useMemo)((()=>d.loading?[]:l?[...d.members,...d.guests]:d.members),[d,l]),u=(0,s.useMemo)((()=>d.loading?new Set:new Set(d.guests.map((e=>e.id)))),[d]);return(0,h.jsx)(at.B,{isMultiSelect:!0,includePermissionGroups:o,userStores:c,title:(0,h.jsx)(r.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.sharedWith.title",defaultMessage:"Shared with"}),selectedItems:a??[],setSelectedItems:function(e){const t=e.map((e=>{let{id:t,type:a}=e;return{type:a,id:t}}));n(t.length>0?t:void 0)},onMenuClose:i,guestUserIdSet:u})}var nt=a(35389);function it(e){let{spaceStore:t,filters:a,runNewSearch:s,setFilters:n,hasUserConfirmedAcknowledgement:i}=e;window.__c={n:"FiltersSection"};const r=(0,Ye.x)(),o=(0,u.yK)((e=>({container:{margin:"0 auto 14px"},filterPillsContainer:{width:"100%",display:"flex",flexWrap:"wrap",rowGap:4,flexDirectionRow:"row",alignItemsCenter:"center"}})),[]);return(0,h.jsxs)("div",{style:o.container,children:[(0,h.jsx)(et.O,{mode:et.p.Button,query:a.query,setQueryFilter:function(e){n({query:e},{runSearchAfter:!0})},disabled:!i}),i?(0,h.jsxs)("div",{style:o.filterPillsContainer,children:[(0,h.jsx)(Xe.f,{lastEditedTime:a.lastEditedTime,createdTime:a.createdTime,setLastEditedTime:function(e){n({lastEditedTime:e,createdTime:{starting:void 0,ending:void 0}},{runSearchAfter:!0})},setCreatedOnTime:function(e){n({createdTime:e,lastEditedTime:{starting:void 0,ending:void 0}},{runSearchAfter:!0})}}),(0,h.jsx)(nt.p,{selectedTeamIds:a.teamIds,setSelectedTeamIds:function(e){n({teamIds:e})},onMenuClose:s,teamStores:r}),(0,h.jsx)(st,{spaceStore:t,sharedWithFilterItems:a.sharedWith,setSharedWithFilter:function(e){n({sharedWith:e})},runNewSearch:s,includeGroups:!0,includeGuests:!0}),(0,h.jsx)(z,{selectedAudience:a.audience,setSelectedAudience:function(e){n({audience:e})},onMenuClose:s}),(0,h.jsx)(Je.y,{spaceStore:t,createdByFilterIds:a.createdBy,setCreatedByFilter:function(e){n({createdBy:e})},runNewSearch:s,includeGuests:!0})]}):null]})}var rt=a(26263),ot=a(65958),lt=a(7406),dt=a(72126),ct=a(59753),ut=a(45953),mt=a(21202),gt=a(66504),pt=a(54642),ht=a(27617),ft=a(77080);const vt={query:"",createdBy:[],sharedWith:void 0,audience:[],lastEditedTime:{starting:void 0,ending:void 0},createdTime:{starting:void 0,ending:void 0},teamIds:[]},yt={...vt,audience:["shared_externally","shared_internally","shared_to_web"]},xt={filters:vt,pageStores:[],numPagesLoaded:0,hasNextPage:!0,paginationToken:void 0,loading:!1,error:void 0,shouldReRunSearch:!1,showSuggestions:!0},_t={...xt,filters:yt};function bt(e){let{spaceStore:t,userStore:a,hasUserConfirmedAcknowledgement:r}=e;const o=(0,i.VK)((()=>ft.default.checkGate("enabled_bev_default_audience_filter")),[])?_t:xt,l=(0,n.O7)(),[d,c]=(0,s.useState)(o),u=(0,s.useRef)(o.filters),g=(0,s.useCallback)((async e=>{let{restartSearch:s,ignoreFilterComparison:n}=e;if(!r)return;if(!n&&dt.Xy(d.filters,u.current))return;u.current=d.filters;let i=d.loading,o=d.error,g=d.hasNextPage,p=d.numPagesLoaded,h=d.paginationToken;if(s&&(c((e=>({...xt,showSuggestions:e.showSuggestions,filters:e.filters}))),i=xt.loading,o=xt.error,g=xt.hasNextPage,p=xt.numPagesLoaded,h=xt.paginationToken),g&&!i&&!o){c((e=>({...e,showSuggestions:!1,loading:!0})));try{const e=await pt.adminContentSearch(l,{spaceId:t.id,sort:{field:"relevance",direction:"desc"},limit:20,paginationToken:h,query:d.filters.query,audience:d.filters.audience,lastEditedTime:(0,ht.Hq)(d.filters.lastEditedTime),createdTime:(0,ht.Hq)(d.filters.createdTime),createdBy:d.filters.createdBy,sharedWith:d.filters.sharedWith,teamspaceIds:d.filters.teamIds});if("failed"===e.type)throw e.error;m.jd(l,{filters:d.filters,pageNumber:p});const s=e.data.paginationToken,n=e.data.recordIds,i=function(e){const{recordMapWithRoleJson:t}=e,a=ut.PF.create(t),s=ut.PF.create();for(const{pointer:n,model:i}of a)if(i){const e=ct.kk.fromValue(n.table,dt.Xh(i.__IM_SORRY__getValue()));s.setModelAndRole(n,e,"editor")}return s}({recordMapWithRoleJson:e.data.recordMap}),r=new rt.Z({name:ot.bv,data:new gt.o({[a.id]:i})});r.addCacheFallback(l.defaultRecordCache.inMemoryRecordCache),c((e=>{const t=[],a=new Set(e.pageStores.map((e=>e.id)));for(const s of n)if(!a.has(s)){const e=new pe.G(l,{table:mt.iU,id:s},{inMemoryRecordCache:r});t.push(e)}const i=[...e.pageStores,...t];return{...e,pageStores:i,loading:!1,error:void 0,numPagesLoaded:e.numPagesLoaded+1,paginationToken:s,hasNextPage:Boolean(s)}}))}catch(f){const e=(0,lt.tg)(f);c((t=>({...t,loading:!1,error:e})))}}}),[l,t,a,r,d.filters,d.loading,d.error,d.hasNextPage,d.numPagesLoaded,d.paginationToken]);(0,s.useEffect)((()=>{d.shouldReRunSearch&&(c((e=>({...e,shouldReRunSearch:!1}))),g({restartSearch:!0,ignoreFilterComparison:!1}))}),[d.shouldReRunSearch,g]);const p=(0,s.useCallback)((async()=>{d.shouldReRunSearch||await g({restartSearch:!1,ignoreFilterComparison:!0})}),[d.shouldReRunSearch,g]),h=(0,s.useCallback)((async e=>{await g({restartSearch:!0,ignoreFilterComparison:e||!1})}),[g]),f=(0,s.useCallback)(((e,t)=>{m.gL(l,{newFilters:e}),c((a=>({...a,filters:{...a.filters,...e},...null!=t&&t.runSearchAfter?{shouldReRunSearch:null==t?void 0:t.runSearchAfter}:void 0})))}),[l]);return{showSuggestions:d.showSuggestions,filters:d.filters,pageStores:d.pageStores,loading:d.loading,error:d.error,hasNextPage:d.hasNextPage,loadNextPage:p,runNewSearch:h,setFilters:f}}function wt(e){let{spaceStore:t,userStore:a,isOrganizationOwner:s}=e;window.__c={n:"AdminContentSearchTabContents"};const n=(0,i.VK)((()=>{const e=_e.default.state.currentSpaceViewStore,t=null==e?void 0:e.getSettings();return(null==t?void 0:t.admin_content_search_acknowledgement)??!1}),[]),o=s||n,{showSuggestions:d,loadNextPage:c,pageStores:u,loading:m,error:g,runNewSearch:p,filters:v,setFilters:y}=bt({spaceStore:t,userStore:a,hasUserConfirmedAcknowledgement:o});return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("div",{style:{display:"flex",flexDirection:"row",gap:24},children:[(0,h.jsx)(l.Z,{isMultiline:!0,style:{marginBottom:20},children:(0,h.jsx)(r.FormattedMessage,{id:"adminContentSearchTab.description",defaultMessage:"Search and filter for any page in the workspace, including private pages. Only workspace owners can use content search."})}),(0,h.jsx)(f,{spaceId:t.id,disabled:0===u.length||!o,filters:v})]}),(0,h.jsx)(it,{spaceStore:t,runNewSearch:p,setFilters:y,filters:v,hasUserConfirmedAcknowledgement:o}),(0,h.jsx)(Qe,{loading:m,error:g,pageStores:u,loadNextPage:c,filters:v,setFilters:y,showSuggestions:d,runNewSearch:p,hasUserConfirmedAcknowledgement:o})]})}const Mt=function(e){window.__c={n:"AdminContentSearchTab"};const t=(0,n.O7)();return(0,i.VK)((()=>o.Z.state.online),[])?(0,h.jsxs)(d.ZP,{children:[(0,h.jsx)(c.Z,{large:!t.device.isMobile||void 0,divider:t.device.isMobile?void 0:"full",children:(0,h.jsx)(r.FormattedMessage,{id:"adminContentSearchTab.title",defaultMessage:"Content Search"})}),(0,h.jsx)(wt,{...e})]}):(0,h.jsx)(d.ZP,{children:(0,h.jsx)(l.Z,{isSmall:!0,isMultiline:!0,style:{textAlign:"center"},children:(0,h.jsx)(r.FormattedMessage,{defaultMessage:"Please go online to access content search.",id:"adminContentSearchTab.offline.message"})})})}},21697:(e,t,a)=>{a.d(t,{x:()=>l});var s=a(67294),n=a(480),i=a(86628),r=a(95697),o=a(80444);function l(e){const[t,a]=(0,s.useState)([]),l=(0,n.O7)(),d=(0,i.VK)((()=>(null==e?void 0:e.spaceStore)??o.default.state.currentSpaceStore),[null==e?void 0:e.spaceStore]),c=(0,i.VK)((()=>{var e;return null===(e=o.default.state.currentUserStore)||void 0===e?void 0:e.id}),[]);return(0,s.useEffect)((()=>{!async function(){const e=await(0,r.sj)({spaceStore:d,currentUserId:c,includeArchived:!1,minRoleOnTeamStores:"editor",environment:l});a(e)}()}),[d,c,l]),t}},82162:(e,t,a)=>{a.d(t,{L:()=>g,S:()=>m});a(67294);var s=a(86628),n=a(24405),i=a(19889),r=a(9291),o=a(80444),l=a(68373),d=a(69219),c=a(45653),u=a(85893);function m(e){let{userId:t}=e;window.__c={n:"UserSummary"};const a=(0,r.useIntl)(),m=(0,n.yK)((e=>({iconStyle:{color:e.lightTextColor,fontWeight:500}})),[]),p=(0,s.VK)((()=>{const e=o.default.state.currentSpaceStore;if(!e)return;const s=l.U6.createChildStore(e,{table:i.KJ,id:t});return{userStore:s,isReady:s.isReady(),userName:s.getDisplayName(a),userEmail:s.getEmail()}}),[t,a]);return null!=p&&p.isReady?(0,u.jsx)(d.i,{useThinTitle:!0,title:p.userName,byline:p.userEmail,icon:(0,u.jsx)(c.Z,{size:28,userStore:p.userStore,iconStyle:m.iconStyle})}):(0,u.jsx)(g,{})}function g(e){window.__c={n:"LoadingUserSummary"};const t=(0,n.yK)((()=>({icon:{borderRadius:"100%",height:e.iconSize??28,width:e.iconSize??28,marginLeft:-4}})),[e.iconSize]);return(0,u.jsx)(d.H,{includeByline:!0,includeIcon:!0,iconStyles:t.icon})}},68117:(e,t,a)=>{a.d(t,{L:()=>c,V:()=>d});var s=a(67294),n=a(26263),i=a(480),r=a(45953),o=a(80444),l=a(85893);const d=(0,s.createContext)({organizationOwnerRecordCache:void 0,updateCacheWithRecordMap:e=>{}});function c(e){let{children:t}=e;window.__c={n:"OrganizationCacheProvider"};const a=(0,i.O7)(),[n,c]=(0,s.useState)(void 0);(0,s.useEffect)((()=>{const e=u(a);c(e)}),[a]);const m=(0,s.useCallback)((e=>{var t;const s=null===(t=o.default.state.currentUserStore)||void 0===t?void 0:t.id;if(!s||!e.data.organizationOwnerRecordMap)return;if(!e.data.organizationOwnerRecordMap)return;const n=r.Ak.create(e.data.organizationOwnerRecordMap);c((e=>{if(!e)return u(a);for(const{pointer:t,model:a}of n)e.setModelAndRole({pointer:t,userId:s},a,"editor");return u(a,e.data)}))}),[a]);return n?(0,l.jsx)(d.Provider,{value:{organizationOwnerRecordCache:n,updateCacheWithRecordMap:m},children:t}):null}function u(e,t){const a=new n.Z({name:"organizationSettingsConsoleCache",data:t});return a.addCacheFallback(e.defaultRecordCache.inMemoryRecordCache),a}},35238:(e,t,a)=>{a.d(t,{Z:()=>Pe});var s=a(67294),n=a(86628),i=a(24405),r=a(66673),o=a(82990),l=a(73123),d=a(9291),c=a(33929),u=a(18514),m=a(24026),g=a(26388),p=a(64369),h=a(74523),f=a(8840),v=a(42485),y=a(480),x=a(55964),_=a(90028),b=a(24697),w=a(35314),M=a(4023),C=a(23124),S=a(66661),j=a(97706),T=a(67579),F=a(85893);const k=640;function N(e){let{data:t,loading:a,error:n,daysFilter:r,setDaysFilter:m}=e;window.__c={n:"ContentAnalyticsSummaries"};const[f,v]=(0,w.e)(),N=(0,i.yK)((e=>({title:{fontWeight:o.Z.fontWeight.medium,fontSize:16,marginBlock:"8px 4px",display:"flex",alignItems:"center",justifyContent:"center"},infoIcon:{marginLeft:4},container:{display:"flex",flexDirection:"column",gap:16},titleContainer:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",gap:16},cardContainer:{justifyContent:"flex-start",gap:18},cardTextContainer:{alignItems:"flex-start"}})),[]),{pageViews:A,uniquePageViews:E,pagesCreated:I,pageEdits:P}=t,R=(0,y.O7)(),D=(0,s.useCallback)((e=>{b.ky(R,{daysFilter:e}),m(e)}),[R,m]);return(0,F.jsxs)("div",{style:N.container,ref:f,children:[(0,F.jsxs)("div",{style:N.titleContainer,children:[(0,F.jsxs)(p.Z,{style:N.title,children:[(0,F.jsx)(d.FormattedMessage,{id:"workspaceAnalytics.content.contentEngagement.title",defaultMessage:"Content engagement"}),(0,F.jsx)(g.ZP,{placement:M.u.Bottom,render:e=>(0,F.jsx)(h.Z,{...e,href:(0,u.UY)("guides.workspaceAnalytics"),analyticsFrom:"workspace_analytics_faq",style:N.infoIcon}),renderTooltip:()=>"all_time"!==r?(0,F.jsx)(d.FormattedMessage,{id:"settings.workspaceAnalytics.contentTab.contentEngagement.tooltip.lastDays",defaultMessage:"Activity on all workspace pages (includes private and shared) over the {dateRange}",values:{dateRange:c.default.formatMessage(l.xX[r])}}):(0,F.jsx)(d.FormattedMessage,{id:"settings.workspaceAnalytics.contentTab.contentEngagement.tooltip.allTime",defaultMessage:"All time activity on all pages in the workspace (includes private and shared)"})})]}),(0,F.jsx)(T.f,{currentFilter:r,onChangeFilter:D})]}),(0,F.jsxs)(C.rj,{gap:16,children:[(0,F.jsx)(C.r8,{row:1,col:1,children:(0,F.jsx)(j.q,{style:N.cardContainer,textStyles:N.cardTextContainer,loading:a,error:n,icon:x.N,iconStyles:{height:48,width:48},title:(0,F.jsx)(d.FormattedMessage,{id:"workspaceAnalytics.content.contentEngagement.totalViews",defaultMessage:"{pageViews} total views",values:{pageViews:(0,F.jsx)(S.e,{abbreviateNumber:v<k,num:A})}}),byline:(0,F.jsx)(p.Z,{isSecondaryColor:!0,children:(0,F.jsx)(d.FormattedMessage,{id:"workspaceAnalytics.content.contentEngagement.uniqueViews",defaultMessage:"{uniquePageViews} unique page views",values:{uniquePageViews:(0,F.jsx)(S.e,{abbreviateNumber:v<k,num:E})}})})})}),(0,F.jsx)(C.r8,{row:1,col:2,children:(0,F.jsx)(j.q,{style:N.cardContainer,textStyles:N.cardTextContainer,loading:a,error:n,icon:_.j,iconStyles:{height:36,width:36},title:(0,F.jsx)(d.FormattedMessage,{id:"workspaceAnalytics.content.contentEngagement.pagesCreated",defaultMessage:"{pagesCreated} pages created",values:{pagesCreated:(0,F.jsx)(S.e,{abbreviateNumber:v<k,num:I})}}),byline:(0,F.jsx)(p.Z,{isSecondaryColor:!0,children:(0,F.jsx)(d.FormattedMessage,{id:"workspaceAnalytics.content.contentEngagement.pageEdits.byline",defaultMessage:"{pageEdits} edits",values:{pageEdits:(0,F.jsx)(S.e,{abbreviateNumber:v<k,num:P})}})})})})]})]})}var A=a(98165),E=a(73075),I=a(53855),P=a(34690),R=a(77883),D=a(40394),V=a(68785),Z=a(71291),B=a(44678),L=a(98569),O=a(15145),W=a(33907),q=a(56666),U=a(27714),z=a(80560),K=a(12714),G=a(84210),H=a(87279),$=a(61766),Q=a(52275),Y=a(31945),J=a(73063),X=a(78140),ee=a(32163),te=a(53437),ae=a(72495);function se(e){let{blockStore:t}=e;window.__c={n:"PageCellActions"};const a=(0,y.O7)(),s=(0,n.qz)(void 0,$.Z),r=(0,i.yK)((e=>({changePermissionsIcon:{height:18,width:18,color:e.regularIconColor,fill:"currentColor"},copyLinkIcon:{height:15,width:15,color:e.regularIconColor,fill:"currentColor"},openLinkIcon:{height:15,width:15,color:e.regularIconColor,fill:"currentColor",transform:"rotate(-45deg)"}})),[]);const o={key:"actions",render:e=>(0,F.jsx)(ae.Z,{...e}),items:[{key:"copy-link",render:e=>(0,F.jsx)(Q.Z,{...e,icon:(0,U.N)(r.copyLinkIcon),title:(0,F.jsx)(d.FormattedMessage,{id:"adminContentSearchTab.pagesTable.page.actions.copyLink",defaultMessage:"Copy link to page"})}),action:async function(){const e=(0,G.ZP)({store:t,pageVisitSource:O.tY.CopyLink});await z.RD({environment:a,stringValue:e,copiedMessage:z.tq.copiedLinkToClipboard}),s.setState({open:!1})}},{key:"open-page-in-new-tab",render:e=>(0,F.jsx)(Q.Z,{...e,icon:(0,W.n)(r.openLinkIcon),title:(0,F.jsx)(d.FormattedMessage,{id:"adminContentSearchTab.pagesTable.page.actions.openLink",defaultMessage:"Open in new tab"})}),action:function(){const e=(0,G.ZP)({store:t,pageVisitSource:O.tY.LinkInPage});K.D({environment:a,url:e}),s.setState({open:!1})}}]};return(0,F.jsx)(Y.ZP,{popupType:te.kQ.Popup,alignmentToOrigin:te.ZP.Alignment.Center,placementToOrigin:te.ZP.Placement.Right,style:{width:248},render:()=>(0,F.jsx)(X.Z,{menuType:H.og.Popup,width:248,children:(0,F.jsx)(ee.Z,{type:ee.i.Vertical,initialFocus:void 0,sections:[o]})}),buttonPopupStore:s,renderOrigin:e=>(0,F.jsx)(J.Z,{icon:q.o,...e})})}const ne=(0,d.defineMessages)({views:{id:"workspaceAnalytics.contentTab.contentTable.viewsColumn.tooltip",defaultMessage:"Number of times users have viewed the page"},uniqueViews:{id:"workspaceAnalytics.contentTab.contentTable.uniqueViewsColumn.tooltip",defaultMessage:"Total number of users that have viewed page in the selected period"}}),ie={id:"page",headerTitle:(0,F.jsx)(pe,{message:l.y3.page}),renderCell:e=>(0,F.jsx)(B.o,{blockStore:e.navigableBlockStore,rightIcon:(0,F.jsx)(se,{blockStore:e.navigableBlockStore})}),widthData:{width:320,maxWidth:320},sortable:!1},re={id:"location",headerTitle:(0,F.jsx)(d.FormattedMessage,{id:"settings.workspaceAnalytics.contentTab.allPages.table.location.name",defaultMessage:"Location"}),renderCell:e=>(0,F.jsx)(P.N,{blockStore:e.navigableBlockStore,teamStore:e.teamStore}),widthData:{width:140},sortable:!1},oe={id:"audience",headerTitle:(0,F.jsx)(pe,{message:l.y3.audience}),renderCell:e=>(0,F.jsx)(p.Z,{children:(0,I.e)(e.audience)}),widthData:{width:140},sortable:!1},le={id:"views",headerTitle:(0,F.jsx)(L.r,{tooltipMessageDescriptor:ne.views,columnHeader:l.y3.allViews}),renderCell:e=>(0,F.jsx)(p.Z,{children:e.views.toLocaleString()}),widthData:{width:100},sortable:!0},de={id:"uniqueViews",headerTitle:(0,F.jsx)(L.r,{tooltipMessageDescriptor:ne.uniqueViews,columnHeader:l.y3.uniqueViews}),renderCell:e=>(0,F.jsx)(p.Z,{children:e.uniqueViews.toLocaleString()}),widthData:{width:100},sortable:!0},ce={id:"createdBy",headerTitle:(0,F.jsx)(pe,{message:l.y3.createdBy}),renderCell:e=>e.createdById?(0,F.jsx)(R.t,{blockStore:e.navigableBlockStore,userIds:[e.createdById]}):null,widthData:{width:140},sortable:!1},ue={id:"createdTime",headerTitle:(0,F.jsx)(pe,{message:l.y3.createdAt}),renderCell:e=>(0,F.jsx)(Z.T,{dateTs:e.createdTime}),widthData:{width:100},sortable:!1},me=[ie,le,de,re,oe,{id:"lastEditedBy",headerTitle:(0,F.jsx)(pe,{message:l.y3.lastEditedBy}),renderCell:e=>e.lastEditedById?(0,F.jsx)(R.t,{blockStore:e.navigableBlockStore,userIds:[e.lastEditedById]}):null,widthData:{width:140},sortable:!1},{id:"lastEditedTime",headerTitle:(0,F.jsx)(pe,{message:l.y3.lastEditedAt}),renderCell:e=>(0,F.jsx)(Z.T,{dateTs:e.lastEditedTime}),widthData:{width:100},sortable:!1},ce,ue];function ge(e){let{navigableBlockStores:t,analyticsByPageId:a,runNewSearch:r,sort:o,setSort:l,loadNextPage:c,loading:u,error:m}=e;window.__c={n:"ContentAnalyticsTable"};const g=(0,n.VK)((()=>t.map((e=>{var t,s,n;return{id:e.id,isClickable:!1,navigableBlockStore:e,teamStore:(0,A.VP)(e),views:(null===(t=a.get(e.id))||void 0===t?void 0:t.pageViews)||0,uniqueViews:(null===(s=a.get(e.id))||void 0===s?void 0:s.uniquePageViews)||0,createdTime:e.getCreatedTime(),lastEditedTime:e.getLastEditedTime(),createdById:e.getCreatedById(),lastEditedById:e.getLastEditedById(),audience:(null===(n=a.get(e.id))||void 0===n?void 0:n.audience)||"private"}}))),[t,a]),h=(0,s.useMemo)((()=>function(e){const t=me.find((t=>"pageViews"===e.field&&"views"===t.id||"uniquePageViews"===e.field&&"uniqueViews"===t.id));return t?{column:t,sortAscending:"asc"===e.direction}:void 0}(o)),[o]),f=(0,i.yK)((e=>(0,D.b)({columnRenderInfo:me,theme:e,containerMarginTop:0})),[]),v=(0,i.yK)((e=>({emptyQuery:{marginTop:15,marginBottom:40,textAlign:"center"},loadingSpinner:{margin:"24px auto 24px"}})),[]);return m?(0,F.jsx)(E.q,{error:m,runNewSearch:r}):(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(D.D,{hideHeaderRowPadding:!0,allowHorizontalScroll:!0,setStickyHeaderRow:!0,maxHeight:500,columnRenderInfo:me,rows:g,sortState:h,onSortStateChanged:e=>{l(function(e){const t="views"===e.column.id?"pageViews":"uniquePageViews",a=e.sortAscending?"asc":"desc";return{field:t,direction:a}}(e))},onLoadMore:c,renderNoRowsComponent:()=>(0,F.jsx)(p.Z,{isSmall:!0,style:v.emptyQuery,children:!u&&0===t.length&&(0,F.jsx)(d.FormattedMessage,{id:"settings.workspaceAnalytics.contentTab.allPages.table.empty",defaultMessage:"No pages found with your query."})}),styles:f}),u?(0,F.jsx)(V.Z,{style:v.loadingSpinner}):null]})}function pe(e){let{message:t}=e;window.__c={n:"FormatDefinedMessage"};const a=(0,d.useIntl)();return(0,F.jsx)(F.Fragment,{children:a.formatMessage(t)})}a(57658);var he=a(72126),fe=a(21202),ve=a(97880),ye=a(54642),xe=a(83726),_e=a(27617),be=a(68373),we=a(68117);const Me={query:"",createdBy:[],lastEditedTime:{starting:void 0,ending:void 0},createdTime:{starting:void 0,ending:void 0},teamIds:[]},Ce={field:"pageViews",direction:"desc"},Se=xe.D2,je={filters:Me,sort:Ce,timeRange:Se,navigableBlockIds:[],analyticsByPageId:new Map,numPagesLoaded:0,paginationToken:void 0,hasNextPage:!0,loading:!1,error:void 0,shouldReRunSearch:!1};var Te=a(30397),Fe=a(36550),ke=a(79782),Ne=a(66994),Ae=a(35389);const Ee=(0,d.defineMessages)({placeholder:{id:"settings.workspaceAnalytics.contentTab.placeholder",defaultMessage:"Search by title"}});function Ie(e){let{spaceStore:t,teamStores:a,timeRange:s,filters:r,runNewSearch:o,setFilters:l,setTimeRange:u}=e;window.__c={n:"SearchInputsSection"};const m=(0,n.VK)((()=>a??Te.Z.state.teams),[a]),g=(0,i.yK)((e=>({container:{width:"100%",margin:"0 auto 14px"},filterPillsContainer:{width:"100%",display:"flex",flexWrap:"wrap",rowGap:4,flexDirectionRow:"row",alignItems:"center"},timeRangeContainer:{display:"flex",flexDirectionRow:"row",alignItems:"center",justifyContent:"center",gap:4,borderRight:`1px solid ${e.tableDividerColor}`,marginRight:12,paddingRight:6}})),[]);return(0,F.jsxs)("div",{style:g.container,children:[(0,F.jsx)(Ne.O,{mode:Ne.p.OnChange,query:r.query,setQueryFilter:function(e){l({query:e},{runSearchAfter:!0})},placeholderText:c.default.formatMessage(Ee.placeholder)}),(0,F.jsxs)("div",{style:g.filterPillsContainer,children:[(0,F.jsxs)("div",{style:g.timeRangeContainer,children:[(0,F.jsx)(p.Z,{isSecondaryColor:!0,children:(0,F.jsx)(d.FormattedMessage,{id:"settings.workspaceAnalytics.contentTab.timeRange",defaultMessage:"Views from"})}),(0,F.jsx)(T.f,{currentFilter:s,onChangeFilter:u})]}),(0,F.jsx)(Ae.p,{selectedTeamIds:r.teamIds,setSelectedTeamIds:function(e){l({teamIds:e})},onMenuClose:o,teamStores:m}),(0,F.jsx)(Fe.y,{spaceStore:t,createdByFilterIds:r.createdBy,setCreatedByFilter:function(e){l({createdBy:e})},runNewSearch:o,includeGuests:!1}),(0,F.jsx)(ke.f,{lastEditedTime:r.lastEditedTime,createdTime:r.createdTime,setLastEditedTime:function(e){l({lastEditedTime:e,createdTime:{starting:void 0,ending:void 0}},{runSearchAfter:!0})},setCreatedOnTime:function(e){l({createdTime:e,lastEditedTime:{starting:void 0,ending:void 0}},{runSearchAfter:!0})}})]})]})}function Pe(e){var t;let{spaceStore:a,teamStores:o,contentEngagement:l}=e;window.__c={n:"SpaceAnalyticsContentTab"};const d=(0,r.D9)(a.id),c=(0,s.useRef)(!1),{loadNextPage:u,navigableBlockStores:m,analyticsByPageId:g,runNewSearch:p,setFilters:h,setTimeRange:f,timeRange:x,filters:_,sort:w,setSort:M,loading:C,error:S}=function(e){let{spaceStore:t}=e;const a=(0,y.O7)(),[n,i]=(0,s.useState)(je),r=(0,s.useRef)(Me),o=(0,s.useRef)(Ce),l=(0,s.useRef)(Se),{organizationOwnerRecordCache:d,updateCacheWithRecordMap:c}=(0,s.useContext)(we.V),u=(0,s.useCallback)((async e=>{let{fetchFromFirstPage:s,ignoreSearchInputComparison:d}=e;const u=!he.Xy(n.filters,r.current)||!he.Xy(n.sort,o.current)||!he.Xy(n.timeRange,l.current);if(!d&&!u)return;r.current=n.filters,o.current=n.sort,l.current=n.timeRange;let m=n.loading,g=n.error,p=n.hasNextPage,h=n.paginationToken;if(s&&(i((e=>({...je,filters:e.filters,timeRange:e.timeRange,sort:e.sort}))),m=je.loading,g=je.error,p=je.hasNextPage,h=je.paginationToken),!p||m)return;if(g)return;i((e=>({...e,loading:!0})));const f=await ye.loadContentAnalytics(a,{spaceId:t.id,sort:n.sort,titleQuery:n.filters.query,filters:{inTeams:n.filters.teamIds,lastEditedTime:(0,_e.Hq)(n.filters.lastEditedTime),createdTime:(0,_e.Hq)(n.filters.createdTime),createdBy:n.filters.createdBy},timeRange:n.timeRange,startCursor:h});if("failed"===f.type)return void i((e=>({...e,loading:!1,error:f.error})));c(f);const v=f.data.results;i((e=>{const t=[],a=new Set(e.navigableBlockIds),s=new Map(e.analyticsByPageId);for(const i of v){const e=i.id,n=i.analytics;a.has(e)||(t.push(e),s.set(e,n))}const n=[...e.navigableBlockIds,...t];return{...e,navigableBlockIds:n,analyticsByPageId:s,loading:!1,error:void 0,numPagesLoaded:e.numPagesLoaded+1,paginationToken:f.data.nextCursor,hasNextPage:Boolean(f.data.nextCursor)}}))}),[a,t,n.filters,n.sort,n.timeRange,n.loading,n.error,n.hasNextPage,n.paginationToken,c]),m=(0,s.useMemo)((()=>n.navigableBlockIds.map((e=>new be.G(a,{id:e,table:fe.iU},{inMemoryRecordCache:d})))),[n.navigableBlockIds,d,a]);(0,s.useEffect)((()=>{n.shouldReRunSearch&&(i((e=>({...e,shouldReRunSearch:!1}))),u({fetchFromFirstPage:!0,ignoreSearchInputComparison:!1}))}),[n.shouldReRunSearch,u]);const g=(0,s.useCallback)((async()=>{n.shouldReRunSearch||await u({fetchFromFirstPage:!1,ignoreSearchInputComparison:!0})}),[n.shouldReRunSearch,u]),p=(0,s.useCallback)((async e=>{await u({fetchFromFirstPage:!0,ignoreSearchInputComparison:e||!1})}),[u]),h=(0,s.useCallback)(((e,t)=>{i((a=>({...a,filters:{...a.filters,...e},...null!=t&&t.runSearchAfter?{shouldReRunSearch:null==t?void 0:t.runSearchAfter}:void 0})));for(const s of(0,ve.Yd)(e))he.Xy(e[s],Me[s])||b.uS(a,{filter:s,value:"createdBy"===s||"teamIds"===s?e[s]:void 0})}),[a]),f=(0,s.useCallback)((e=>{i((t=>({...t,timeRange:e,shouldReRunSearch:!0}))),b.e2(a,{daysFilter:e})}),[a]),v=(0,s.useCallback)((e=>{i((t=>({...t,sort:e,shouldReRunSearch:!0}))),b.jM(a,{column:e.field,isAscending:"asc"===e.direction})}),[a]);return{filters:n.filters,sort:n.sort,timeRange:n.timeRange,analyticsByPageId:n.analyticsByPageId,loading:n.loading,error:n.error,navigableBlockStores:m,loadNextPage:g,runNewSearch:p,setFilters:h,setTimeRange:f,setSort:v}}({spaceStore:a}),j=(0,i.yK)((e=>({container:{display:"flex",flexDirection:"column",gap:16}})),[]),T=(0,n.VK)((()=>Boolean(a.canAdmin())),[a]),k=(0,s.useMemo)((()=>void 0!==d&&a.id!==d),[a.id,d]);(0,s.useEffect)((()=>{c.current&&!k||(p(!0),c.current=!0)}),[p,k]);const A=(0,n.VK)((()=>a.getName()),[a]);return"NotFoundError"===(null==l||null===(t=l.error)||void 0===t?void 0:t.name)?(0,F.jsx)(v.y,{type:"empty",spaceName:A}):(0,F.jsxs)("div",{style:j.container,children:[(0,F.jsx)(N,{data:l.data,loading:l.loading,error:l.error,daysFilter:l.daysFilter,setDaysFilter:l.setDaysFilter}),(0,F.jsx)(Re,{canAdmin:T,daysFilter:x}),(0,F.jsx)(Ie,{spaceStore:a,teamStores:o,runNewSearch:p,setFilters:h,filters:_,timeRange:x,setTimeRange:f}),(0,F.jsx)(ge,{navigableBlockStores:m,analyticsByPageId:g,runNewSearch:p,sort:w,setSort:M,loadNextPage:u,loading:C,error:S})]})}function Re(e){window.__c={n:"ContentTableHeader"};const t=(0,i.yK)((()=>({sectionTitle:{fontWeight:o.Z.fontWeight.semibold,fontSize:16},sectionTitleSection:{display:"flex",flexFlow:"row",alignItems:"center"},helpInfo:{marginLeft:4},wrapper:{display:"flex",flexDirection:"row",justifyContent:"space-between",marginTop:12},exportButton:{marginLeft:5}})),[]),{canAdmin:a,daysFilter:s}=e,n=(0,F.jsxs)("div",{style:t.sectionTitleSection,children:[(0,F.jsx)(p.Z,{style:t.sectionTitle,children:(0,F.jsx)(d.FormattedMessage,{id:"settings.workspaceAnalytics.contentTab.allPages.title",defaultMessage:"Pages"})}),(0,F.jsx)(g.ZP,{placement:g.ug.Bottom,render:e=>(0,F.jsx)(h.Z,{...e,href:(0,u.UY)("guides.workspaceAnalytics"),analyticsFrom:"workspace_analytics_faq",style:t.helpInfo}),renderTooltip:()=>"all_time"!==s?(0,F.jsx)(d.FormattedMessage,{id:"settings.workspaceAnalytics.contentTab.pages.tooltip.lastDays",defaultMessage:"Activity from the {dateRange} on pages you have access to",values:{dateRange:c.default.formatMessage(l.xX[s])}}):(0,F.jsx)(d.FormattedMessage,{id:"settings.workspaceAnalytics.contentTab.pages.tooltip.allTime",defaultMessage:"All time activity on pages you have access to in the workspace"})})]});return(0,F.jsxs)("div",{style:t.wrapper,children:[n,a&&(0,F.jsx)(f.f,{style:t.exportButton,analyticsType:m.x.Content})]})}},42485:(e,t,a)=>{a.d(t,{y:()=>h});a(67294);var s=a(480),n=a(24405),i=a(83176),r=a(84169),o=a(9291),l=a(12714),d=a(33929),c=a(18514),u=a(89728),m=a(64369),g=a(85893);const p=(0,o.defineMessages)({emptyAnalyticsHeading:{id:"workspaceAnalyticsTabs.empty.heading",defaultMessage:"No workspace analytics yet"},emptyAnalyticsDescription:{id:"workspaceAnalyticsTabs.empty.description",defaultMessage:"It may take some time for workspace analytics information to appear."},disabledAnalyticsHeading:{id:"workspaceAnalyticsTabs.disabled.heading",defaultMessage:"Analytics are disabled"},disabledAnalyticsDescription:{id:"workspaceAnalyticsTabs.disabled.description",defaultMessage:"A workspace owner has turned off page view recording for {name}.{br}This information will not be available in your workspace settings or on individual pages."},disabledAnalyticsDescriptionNoSpaceName:{id:"workspaceAnalyticsTabs.disabled.description.unnamed",defaultMessage:"A workspace owner has turned off page view recording for this space.{br}This information will not be available in your workspace settings or on individual pages."}});function h(e){window.__c={n:"SpaceAnalyticsEmptyState"};const t=(0,n.yK)((e=>({outerDiv:{display:"flex",flexDirection:"column",justifyContent:"center",height:"80%",gap:24},innerDiv:{display:"flex",flexDirection:"column",textAlign:"center",alignItems:"center",gap:4},header:{fontSize:16,fontWeight:500},analyticsIcon:{fill:e.mediumTextColor,padding:20,height:150,width:150},learnMoreIcon:{width:14,height:14},learnMore:{gap:4}})),[]),a=(0,s.O7)(),{type:h,spaceName:f}=e,v=function(e,t){switch(e){case"empty":return{heading:d.default.formatMessage(p.emptyAnalyticsHeading),description:d.default.formatMessage(p.emptyAnalyticsDescription)};case"disabled":const e=t?(0,g.jsx)(o.FormattedMessage,{...p.disabledAnalyticsDescription,values:{name:t,br:(0,g.jsx)("br",{})}}):(0,g.jsx)(o.FormattedMessage,{...p.disabledAnalyticsDescriptionNoSpaceName,values:{br:(0,g.jsx)("br",{})}});return{heading:d.default.formatMessage(p.disabledAnalyticsHeading),description:e}}}(h,f);return(0,g.jsx)("div",{style:t.outerDiv,children:(0,g.jsxs)("div",{style:t.innerDiv,children:[(0,i.z)(t.analyticsIcon),(0,g.jsx)(m.Z,{isSecondaryColor:!0,style:t.header,children:v.heading}),(0,g.jsx)(m.Z,{isSecondaryColor:!0,children:v.description}),(0,g.jsxs)(u.Z,{onClick:()=>l.D({environment:a,url:(0,c.UY)("guides.workspaceAnalytics")}),style:t.learnMore,children:[(0,r.m)(t.learnMoreIcon),(0,g.jsx)(m.Z,{isSmall:!0,children:(0,g.jsx)(o.FormattedMessage,{id:"workspaceAnalyticsTabs.disabled.learnMore",defaultMessage:"Learn more"})})]})]})})}},89426:(e,t,a)=>{a.d(t,{Z:()=>I});var s=a(67294),n=a(86628),i=a(24405),r=a(42485),o=a(480),l=a(50780),d=a(55964),c=a(28495),u=a(21202),m=a(82990),g=a(73123),p=a(9291),h=a(24697),f=a(33929),v=a(18514),y=a(35314),x=a(4023),_=a(68373),b=a(23124),w=a(26388),M=a(64369),C=a(74523),S=a(66661),j=a(68117),T=a(55360),F=a(97706),k=a(67579),N=a(85893);function A(e){let{data:t,loading:a,error:r,daysFilter:A,setDaysFilter:E}=e;window.__c={n:"ContentEngagement"};const I=(0,o.O7)(),{organizationOwnerRecordCache:P}=(0,s.useContext)(j.V),R=(0,i.yK)((e=>({title:{fontWeight:m.Z.fontWeight.medium,fontSize:16,marginBlock:"9px 4px",display:"flex",alignItems:"center"},helpInfo:{marginLeft:4},container:{display:"flex",flexDirection:"column",gap:16},titleContainer:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",gap:16},overviewCard:{width:"fit-content"}})),[]),[D,V]=(0,y.e)(),{pageViews:Z,uniquePageViews:B,pageEdits:L,topPages:O}=t,W=(0,n.VK)((()=>O.map((e=>{let{pageId:t,pageViews:a}=e;return{store:new _.G(I,{id:t,table:u.iU},{inMemoryRecordCache:P}),caption:(0,N.jsx)(p.FormattedMessage,{id:"workspaceAnalytics.overview.contentEngagement.caption.pageView",defaultMessage:"{pageViews} views",values:{pageViews:(0,N.jsx)(S.e,{abbreviateNumber:!1,num:a})}})}}))),[I,O,P]),q=(0,s.useCallback)((e=>{E(e),h.m0(I,{filter:"content_engagement",daysFilter:e})}),[I,E]);return(0,N.jsxs)("div",{style:R.container,ref:D,children:[(0,N.jsxs)("div",{style:R.titleContainer,children:[(0,N.jsxs)(M.Z,{style:R.title,children:[(0,N.jsx)(p.FormattedMessage,{id:"workspaceAnalytics.overview.contentEngagement.title",defaultMessage:"Content engagement"}),(0,N.jsx)(w.ZP,{placement:x.u.Bottom,render:e=>(0,N.jsx)(C.Z,{...e,href:(0,v.UY)("guides.workspaceAnalytics"),analyticsFrom:"workspace_analytics_faq",style:R.helpInfo}),renderTooltip:()=>"all_time"!==A?(0,N.jsx)(p.FormattedMessage,{id:"settings.workspaceAnalytics.overviewTab.contentEngagement.tooltip.lastDays",defaultMessage:"Activity on all pages in the workspace over the {dateRange}",values:{dateRange:f.default.formatMessage(g.xX[A])}}):(0,N.jsx)(p.FormattedMessage,{id:"settings.workspaceAnalytics.overviewTab.contentEngagement.tooltip.allTime",defaultMessage:"All time activity on all pages in the workspace"})})]}),(0,N.jsx)(k.f,{currentFilter:A,onChangeFilter:q})]}),(0,N.jsxs)(b.rj,{gap:16,children:[(0,N.jsx)(b.r8,{row:1,col:1,colEnd:3,children:(0,N.jsx)(F.q,{loading:a,error:r,icon:d.N,textStyles:R.overviewCard,title:(0,N.jsx)(p.FormattedMessage,{id:"workspaceAnalytics.overview.contentEngagement.views",defaultMessage:"{pageViews} total views",values:{pageViews:(0,N.jsx)(S.e,{abbreviateNumber:V<640,num:Z})}})})}),(0,N.jsx)(b.r8,{row:2,col:1,colEnd:3,children:(0,N.jsx)(F.q,{loading:a,error:r,icon:c.v,textStyles:R.overviewCard,iconStyles:{height:18,width:18},title:(0,N.jsx)(p.FormattedMessage,{id:"workspaceAnalytics.overview.contentEngagement.uniqueViews",defaultMessage:"{uniquePageViews} unique page views",values:{uniquePageViews:(0,N.jsx)(S.e,{abbreviateNumber:V<640,num:B})}})})}),(0,N.jsx)(b.r8,{row:3,col:1,colEnd:3,children:(0,N.jsx)(F.q,{loading:a,error:r,icon:l.E,textStyles:R.overviewCard,iconStyles:{height:18,width:18},title:(0,N.jsx)(p.FormattedMessage,{id:"workspaceAnalytics.overview.contentEngagement.pageEdits",defaultMessage:"{pageEdits} edits",values:{pageEdits:(0,N.jsx)(S.e,{abbreviateNumber:V<640,num:L})}})})}),(0,N.jsx)(b.r8,{row:1,rowEnd:4,col:3,colEnd:5,children:(0,N.jsx)(T.$,{loading:a,error:r,title:(0,N.jsx)(p.FormattedMessage,{id:"workspaceAnalytics.overview.contentEngagement.popularPages",defaultMessage:"Most popular pages"}),items:W})})]})]})}var E=a(81653);function I(e){var t,a;let{onUserTabFilterChange:s,spaceStore:o,contentEngagement:l,userEngagement:d}=e;window.__c={n:"SpaceAnalyticsOverviewTab"};const c=(0,i.yK)((e=>({container:{display:"flex",flexDirection:"column",gap:24}})),[]),u=(0,n.VK)((()=>o.getName()),[o]);if("NotFoundError"===(null===(t=l.error)||void 0===t?void 0:t.name)||"NotFoundError"===(null===(a=d.error)||void 0===a?void 0:a.name))return(0,N.jsx)(r.y,{type:"empty",spaceName:u});return(0,N.jsxs)("div",{style:c.container,children:[(0,N.jsx)(E.D,{data:d.data,loading:d.loading,error:d.error,daysFilter:d.daysFilter,setDaysFilter:function(e){s({graphFilter:"all_time"===e?"last_90_days":e}),d.setDaysFilter(e)}}),(0,N.jsx)(A,{data:l.data,loading:l.loading,error:l.error,daysFilter:l.daysFilter,setDaysFilter:l.setDaysFilter})]})}},81653:(e,t,a)=>{a.d(t,{D:()=>N,c:()=>A});var s=a(67294),n=a(480),i=a(86628),r=a(24405),o=a(9999),l=a(29369),d=a(19889),c=a(97880),u=a(82990),m=a(73123),g=a(9291),p=a(24697),h=a(33929),f=a(18514),v=a(35314),y=a(4023),x=a(68373),_=a(23124),b=a(26388),w=a(64369),M=a(74523),C=a(66661),S=a(68117),j=a(55360),T=a(97706),F=a(67579),k=a(85893);function N(e){let{data:t,loading:a,error:o,daysFilter:c,setDaysFilter:N}=e;window.__c={n:"UserEngagement"};const E=(0,n.O7)(),{activeMembersCount:I,previousActiveMembersCount:P,activeGuestsCount:R,previousActiveGuestsCount:D,topTeamspaces:V,topViewers:Z,topEditors:B}=t,L=(0,r.yK)((e=>({title:{fontWeight:u.Z.fontWeight.medium,fontSize:16,marginBlock:"8px 4px",display:"flex",alignItems:"center"},helpInfo:{marginLeft:4},container:{display:"flex",flexDirection:"column",gap:16},summaryCard:{height:70},titleContainer:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",gap:16}})),[]),[O,W]=(0,v.e)(),{organizationOwnerRecordCache:q}=(0,s.useContext)(S.V),U=(0,s.useCallback)((e=>{p.m0(E,{filter:"user_engagement",daysFilter:e}),N(e)}),[E,N]),z=(0,i.VK)((()=>V.map((e=>{let{teamspaceId:t,pageViews:a}=e;return{store:new x.zX(E,{id:t,table:l.e0},{inMemoryRecordCache:q}),caption:(0,k.jsx)(g.FormattedMessage,{id:"workspaceAnalytics.overview.userEngagement.caption.pageViews",defaultMessage:"{pageViews} views",values:{pageViews:(0,k.jsx)(C.e,{abbreviateNumber:!0,num:a})}})}})).filter((e=>e.store.canRead())).slice(0,5)),[E,V,q]),K=(0,i.VK)((()=>Z.map((e=>{let{userId:t,pageViews:a}=e;return{store:new x.U6(E,{id:t,table:d.KJ}),caption:(0,k.jsx)(g.FormattedMessage,{id:"workspaceAnalytics.overview.userEngagement.caption.pageView",defaultMessage:"{pageViews} views",values:{pageViews:(0,k.jsx)(C.e,{abbreviateNumber:!0,num:a})}})}})).slice(0,5)),[E,Z]),G=(0,i.VK)((()=>B.map((e=>{let{userId:t,pageEdits:a}=e;return{store:new x.U6(E,{id:t,table:d.KJ}),caption:(0,k.jsx)(g.FormattedMessage,{id:"workspaceAnalytics.overview.userEngagement.caption.pageEdits",defaultMessage:"{pageEdits} edits",values:{pageEdits:(0,k.jsx)(C.e,{abbreviateNumber:!0,num:a})}})}})).slice(0,5)),[E,B]);return(0,k.jsxs)("div",{style:L.container,ref:O,children:[(0,k.jsxs)("div",{style:L.titleContainer,children:[(0,k.jsxs)(w.Z,{style:L.title,children:[(0,k.jsx)(g.FormattedMessage,{id:"workspaceAnalytics.overview.userEngagement.title",defaultMessage:"User engagement"}),(0,k.jsx)(b.ZP,{placement:y.u.Bottom,render:e=>(0,k.jsx)(M.Z,{...e,href:(0,f.UY)("guides.workspaceAnalytics"),analyticsFrom:"workspace_analytics_faq",style:L.helpInfo}),renderTooltip:()=>"all_time"!==c?(0,k.jsx)(g.FormattedMessage,{id:"settings.workspaceAnalytics.overviewTab.userEngagement.tooltip.lastDays",defaultMessage:"Active members and guests have viewed at least one page within the {dateRange}",values:{dateRange:h.default.formatMessage(m.xX[c])}}):(0,k.jsx)(g.FormattedMessage,{id:"settings.workspaceAnalytics.overviewTab.userEngagement.tooltip.allTime",defaultMessage:"Active members and guests have viewed at least one page in the workspace"})})]}),(0,k.jsx)(F.f,{currentFilter:c,onChangeFilter:U})]}),(0,k.jsxs)(_.rj,{gap:16,children:[(0,k.jsx)(_.r8,{row:1,col:1,children:(0,k.jsx)(T.q,{style:L.summaryCard,loading:a,error:o,title:(0,k.jsx)(g.FormattedMessage,{id:"workspaceAnalytics.overview.userEngagement.activeMembersCount",defaultMessage:"{activeMembersCount} active members",values:{activeMembersCount:(0,k.jsx)(C.e,{abbreviateNumber:W<640,num:I})}}),byline:void 0!==P?(0,k.jsx)(A,{userType:"members",daysFilter:c,count:I,previousCount:P}):null})}),(0,k.jsx)(_.r8,{row:1,col:2,children:(0,k.jsx)(T.q,{style:L.summaryCard,loading:a,error:o,title:(0,k.jsx)(g.FormattedMessage,{id:"workspaceAnalytics.overview.userEngagement.activeGuestsCount",defaultMessage:"{activeGuestsCount} active guests",values:{activeGuestsCount:(0,k.jsx)(C.e,{abbreviateNumber:W<640,num:R})}}),byline:void 0!==D?(0,k.jsx)(A,{userType:"guests",daysFilter:c,count:R,previousCount:D}):null})})]}),(0,k.jsxs)(_.rj,{gap:16,children:[(0,k.jsx)(_.r8,{row:1,col:1,children:(0,k.jsx)(j.$,{loading:a,error:o,title:(0,k.jsx)(g.FormattedMessage,{id:"workspaceAnalytics.overview.userEngagement.activeTeamspaces",defaultMessage:"Most active teamspaces"}),items:z})}),(0,k.jsx)(_.r8,{row:1,col:2,children:(0,k.jsx)(j.$,{loading:a,error:o,title:(0,k.jsx)(g.FormattedMessage,{id:"workspaceAnalytics.overview.userEngagement.activeViewers",defaultMessage:"Most active viewers"}),items:K})}),(0,k.jsx)(_.r8,{row:1,col:3,children:(0,k.jsx)(j.$,{loading:a,error:o,title:(0,k.jsx)(g.FormattedMessage,{id:"workspaceAnalytics.overview.userEngagement.activeEditors",defaultMessage:"Most active editors"}),items:G})})]})]})}function A(e){let{userType:t,daysFilter:a,count:s,previousCount:n}=e;window.__c={n:"MetricsChangeMessage"};const i=0===s&&0===n?0:Math.round((s-n)/n*100);let l;l=i===1/0?function(e,t,a){if("all_time"===a)return(0,k.jsx)(g.FormattedMessage,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.allTime.none",defaultMessage:"No changes yet"});return"guests"===e?(0,k.jsx)(g.FormattedMessage,{id:"workspaceAnalytics.overview.userEngagement.changeFromZero.summaryByline.guests.positive",defaultMessage:"{changeValue} more guests than previous {numberOfDays} days",values:{changeValue:t.toLocaleString(),numberOfDays:m.ez[a].toLocaleString()}}):(0,k.jsx)(g.FormattedMessage,{id:"workspaceAnalytics.overview.userEngagement.changeFromZero.summaryByline.members.positive",defaultMessage:"{changeValue} more members than previous {numberOfDays} days",values:{changeValue:t.toLocaleString(),numberOfDays:m.ez[a].toLocaleString()}})}(t,s,a):function(e,t){switch(t){case"all_time":return 0===e?(0,k.jsx)(g.FormattedMessage,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.allTime.none",defaultMessage:"No changes yet"}):e>0?(0,k.jsx)(g.FormattedMessage,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.allTime.positive",defaultMessage:"{changeInPercentage}% more since the start",values:{changeInPercentage:Math.abs(e)}}):(0,k.jsx)(g.FormattedMessage,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.allTime.negative",defaultMessage:"{changeInPercentage}% less since the start",values:{changeInPercentage:Math.abs(e)}});case"last_90_days":return 0===e?(0,k.jsx)(g.FormattedMessage,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.last_90_days.none",defaultMessage:"No changes in previous 90 days"}):e>0?(0,k.jsx)(g.FormattedMessage,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.last_90_days.positive",defaultMessage:"{changeInPercentage}% more than previous 90 days",values:{changeInPercentage:Math.abs(e)}}):(0,k.jsx)(g.FormattedMessage,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.last_90_days.negative",defaultMessage:"{changeInPercentage}% less than previous 90 days",values:{changeInPercentage:Math.abs(e)}});case"last_28_days":return 0===e?(0,k.jsx)(g.FormattedMessage,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.last_28_days.none",defaultMessage:"No changes in previous 28 days"}):e>0?(0,k.jsx)(g.FormattedMessage,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.last_28_days.positive",defaultMessage:"{changeInPercentage}% more than previous 28 days",values:{changeInPercentage:Math.abs(e)}}):(0,k.jsx)(g.FormattedMessage,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.last_28_days.negative",defaultMessage:"{changeInPercentage}% less than previous 28 days",values:{changeInPercentage:Math.abs(e)}});case"last_7_days":return 0===e?(0,k.jsx)(g.FormattedMessage,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.last_7_days.none",defaultMessage:"No changes in previous 7 days"}):e>0?(0,k.jsx)(g.FormattedMessage,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.last_7_days.positive",defaultMessage:"{changeInPercentage}% more than previous 7 days",values:{changeInPercentage:Math.abs(e)}}):(0,k.jsx)(g.FormattedMessage,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.last_7_days.negative",defaultMessage:"{changeInPercentage}% less than previous 7 days",values:{changeInPercentage:Math.abs(e)}});default:(0,c.t1)(t)}}(i,a);const d=i>0?(0,o.J)({height:12,width:12,fill:"currentColor"}):i<0?(0,o.J)({height:12,width:12,transform:"rotate(90deg)",fill:"currentColor"}):void 0,u=(0,r.yK)((e=>({text:{color:i>0?e.accentColors.green[500]:i<0?e.accentColors.red[500]:e.lightTextColor,display:"flex",alignItems:"center",gap:4}})),[i]);return(0,k.jsxs)("span",{style:u.text,children:[d,l]})}},88149:(e,t,a)=>{a.d(t,{Z:()=>B});var s=a(67294),n=a(86628),i=a(24405),r=a(66673),o=a(82990),l=a(73123),d=a(9291),c=a(33929),u=a(18514),m=a(26388),g=a(64369),p=a(74523),h=a(67579),f=a(42485),v=(a(57658),a(21703),a(480)),y=a(59730),x=a(72126),_=a(24697),b=a(54642),w=a(83726),M=a(33954);const C={field:"num_searches",direction:"desc"},S=w.D2,j={sort:C,timeRange:S,searchAnalyticsDataList:[],numPagesLoaded:0,paginationToken:void 0,hasNextPage:!0,loading:!1,error:void 0,shouldReRunSearch:!1};var T=a(97880),F=a(73075),k=a(40394),N=a(68785),A=a(98569),E=a(85893);const I=(0,d.defineMessages)({numSearches:{id:"workspaceAnalytics.searchTab.searchTable.searches.tooltip",defaultMessage:"Number of times users in the workspace have searched the query"},numUniqueUsers:{id:"workspaceAnalytics.searchTab.searchTable.uniqueSearches.tooltip",defaultMessage:"Total number of users that have searched the query"},ctr:{id:"workspaceAnalytics.searchTab.searchTable.ctr.tooltip",defaultMessage:"Percentage of times users have opened page from results of this query"}}),P=(0,d.defineMessages)({queryText:{id:"spaceAnalyticsSearchTable.column.query",defaultMessage:"Query"},numSearches:{id:"spaceAnalyticsSearchTable.column.searches",defaultMessage:"Searches"},numUniqueUsers:{id:"spaceAnalyticsSearchTable.column.uniqueSearches",defaultMessage:"Unique searches"},ctr:{id:"spaceAnalyticsSearchTable.column.ctr",defaultMessage:"Click-through rate"}}),R={queryText:{id:"queryText",headerTitle:c.default.formatMessage(P.queryText),renderCell:e=>(0,E.jsx)(g.Z,{children:e.queryText}),widthData:{width:200,maxWidth:300},sortable:!1},numSearches:{id:"numSearches",headerTitle:(0,E.jsx)(A.r,{tooltipMessageDescriptor:I.numSearches,columnHeader:P.numSearches}),renderCell:e=>(0,E.jsx)(Z,{value:e.numSearches}),widthData:{width:120,maxWidth:120},sortable:!0},numUniqueUsers:{id:"numUniqueUsers",headerTitle:(0,E.jsx)(A.r,{tooltipMessageDescriptor:I.numUniqueUsers,columnHeader:P.numUniqueUsers}),renderCell:e=>(0,E.jsx)(Z,{value:e.numUniqueUsers}),widthData:{width:120,maxWidth:120},sortable:!0},ctr:{id:"ctr",headerTitle:(0,E.jsx)(A.r,{tooltipMessageDescriptor:I.ctr,columnHeader:P.ctr}),renderCell:e=>(0,E.jsx)(Z,{value:Math.round(1e3*e.ctr)/1e3,isPercentage:!0}),widthData:{width:120,maxWidth:120},sortable:!0}},D=(0,T.Yd)(R).map((e=>R[e]));function V(e){let{searchAnalyticsDataList:t,runNewSearch:a,sort:r,setSort:o,loadNextPage:c,loading:u,error:m}=e;window.__c={n:"SpaceAnalyticsTable"};const p=(0,n.VK)((()=>t.map((e=>({id:e.queryText,isClickable:!1,...e})))),[t]),h=(0,s.useMemo)((()=>function(e){const t=l.Fi[e.field];if(!t)return;return{column:R[t],sortAscending:"asc"===e.direction}}(r)),[r]),f=(0,i.yK)((e=>(0,k.b)({columnRenderInfo:D,theme:e,containerMarginTop:0})),[]),v=(0,i.yK)((e=>({emptyQuery:{marginTop:15,marginBottom:40,textAlign:"center"},loadingSpinner:{margin:"24px auto 24px"}})),[]);return m?(0,E.jsx)(F.q,{error:m,runNewSearch:a}):(0,E.jsxs)("div",{children:[(0,E.jsx)(k.D,{hideHeaderRowPadding:!0,allowHorizontalScroll:!0,setStickyHeaderRow:!0,maxHeight:500,columnRenderInfo:D,rows:p,sortState:h,onSortStateChanged:e=>{o(function(e){const t=l.hx[e.column.id],a=e.sortAscending?"asc":"desc";if(!t)return{field:"num_searches",direction:a};return{field:t,direction:a}}(e))},onLoadMore:c,renderNoRowsComponent:()=>(0,E.jsx)(g.Z,{isSmall:!0,style:v.emptyQuery,children:!u&&0===t.length&&(0,E.jsx)(d.FormattedMessage,{id:"settings.workspaceAnalytics.searchTable.table.empty",defaultMessage:"No search query analytics to display."})}),styles:f}),u?(0,E.jsx)(N.Z,{style:v.loadingSpinner}):null]})}function Z(e){let{value:t,isPercentage:a}=e;window.__c={n:"CenteredNumericCell"};const s=(0,i.yK)((e=>({centered:{width:"100%",textAlign:"center"}})),[]),n=a?`${t}%`:t;return(0,E.jsx)(g.Z,{style:s.centered,children:n})}function B(e){window.__c={n:"SpaceAnalyticsSearchTab"};const{spaceStore:t}=e,a=(0,i.yK)((()=>({header:{display:"flex",width:"100%",justifyContent:"space-between",alignItems:"center",marginBottom:16},sectionTitle:{fontWeight:o.Z.fontWeight.semibold,fontSize:16,display:"flex",alignItems:"center"},helpInfo:{marginLeft:4}})),[]),w=(0,s.useRef)(!1),{searchAnalyticsDataList:T,timeRange:F,sort:k,loading:N,error:A,loadNextPage:I,runNewSearch:P,setTimeRange:R,setSort:D}=function(e){let{spaceStore:t}=e;const a=(0,v.O7)(),[n,i]=(0,s.useState)(j),r=(0,s.useRef)(C),o=(0,s.useRef)(S),l=(0,d.useIntl)(),c=(0,s.useCallback)((async e=>{let{fetchFromFirstPage:s,ignoreSearchInputComparison:l}=e;const d=!x.Xy(n.sort,r.current)||!x.Xy(n.timeRange,o.current);if(!l&&!d)return;r.current=n.sort,o.current=n.timeRange;let c=n.loading,u=n.error,m=n.hasNextPage,g=n.paginationToken;if(s&&(i((e=>({...j,timeRange:e.timeRange,sort:e.sort}))),c=j.loading,u=j.error,m=j.hasNextPage,g=j.paginationToken),!m||c)return;if(u)return;i((e=>({...e,loading:!0})));const p=await b.loadSearchAnalytics(a,{spaceId:t.id,sort:n.sort,timeRange:n.timeRange,startCursor:g});if("failed"===p.type)return void i((e=>({...e,loading:!1,error:p})));const h=p.data.results;i((e=>{const t=[],a=new Set(e.searchAnalyticsDataList.map((e=>e.queryText)));for(const n of h){const e=n.queryText;a.has(e)||(t.push(n),a.add(e))}const s=[...e.searchAnalyticsDataList,...t];return{...e,searchAnalyticsDataList:s,loading:!1,error:void 0,numPagesLoaded:e.numPagesLoaded+1,paginationToken:p.data.nextCursor,hasNextPage:Boolean(p.data.nextCursor)}}))}),[a,t,n.sort,n.timeRange,n.loading,n.error,n.hasNextPage,n.paginationToken]);(0,s.useEffect)((()=>{n.shouldReRunSearch&&(i((e=>({...e,shouldReRunSearch:!1}))),c({fetchFromFirstPage:!0,ignoreSearchInputComparison:!1}))}),[n.shouldReRunSearch,c]);const u=(0,s.useCallback)((async()=>{n.shouldReRunSearch||await c({fetchFromFirstPage:!1,ignoreSearchInputComparison:!0})}),[n.shouldReRunSearch,c]),m=(0,s.useCallback)((async e=>{await c({fetchFromFirstPage:!0,ignoreSearchInputComparison:e||!1})}),[c]),g=(0,s.useCallback)((e=>{"all_time"!==e&&(i((t=>({...t,timeRange:e,shouldReRunSearch:!0}))),_.ye(a,{daysFilter:e}))}),[a]),p=(0,s.useCallback)((e=>{i((t=>({...t,sort:e,shouldReRunSearch:!0}))),_.$f(a,{column:e.field,isAscending:"asc"===e.direction})}),[a]),h=(0,s.useMemo)((()=>{if(n.error)return 404===n.error.status?new y.dR({message:(0,M.wf)(l,n.error)}):new Error((0,M.wf)(l,n.error))}),[n.error,l]);return{...n,error:h,loadNextPage:u,runNewSearch:m,setTimeRange:g,setSort:p}}({spaceStore:t}),Z=(0,r.D9)(t.id),B=(0,s.useMemo)((()=>void 0!==Z&&t.id!==Z),[t.id,Z]);(0,s.useEffect)((()=>{w.current&&!B||(P(!0),w.current=!0)}),[P,B]);const L=(0,n.VK)((()=>t.getName()),[t]);return"NotFoundError"===(null==A?void 0:A.name)?(0,E.jsx)(f.y,{type:"empty",spaceName:L}):(0,E.jsxs)(E.Fragment,{children:[(0,E.jsxs)("div",{style:a.header,children:[(0,E.jsxs)(g.Z,{style:a.sectionTitle,children:[(0,E.jsx)(d.FormattedMessage,{id:"settings.workspaceAnalytics.searchTab.searchQueries.title",defaultMessage:"Search queries"}),(0,E.jsx)(m.ZP,{placement:m.ug.Bottom,render:e=>(0,E.jsx)(p.Z,{...e,href:(0,u.UY)("guides.workspaceAnalytics"),analyticsFrom:"workspace_analytics_faq",style:a.helpInfo}),renderTooltip:()=>(0,E.jsx)(d.FormattedMessage,{id:"settings.workspaceAnalytics.searchTab.searchQueries.tooltip",defaultMessage:"Displays popular search queries in the workspace from the {dateRange}",values:{dateRange:c.default.formatMessage(l.xX[F])}})})]}),(0,E.jsx)(h.f,{currentFilter:F,onChangeFilter:R,hideAllTime:!0})]}),(0,E.jsx)(V,{searchAnalyticsDataList:T,runNewSearch:P,sort:k,setSort:D,loadNextPage:I,loading:N,error:A})]})}},65552:(e,t,a)=>{a.d(t,{Z:()=>H});var s=a(67294),n=a(30251),i=a(480),r=a(86628),o=a(24405),l=a(8848),d=a(82990),c=a(73123),u=a(9291),m=a(24697),g=a(83726),p=a(33929),h=a(18514),f=a(35314),v=a(77907),y=a(4023),x=a(24026),_=a(43568),b=a(26388),w=a(64369),M=a(74523),C=a(8840),S=a(42485),j=a(23124),T=a(66661),F=a(97706),k=a(67579),N=a(81653),A=a(85893);function E(e){let{data:t,loading:a,error:s,daysFilter:n,setDaysFilter:i}=e;window.__c={n:"UsersAnalyticsSummaries"};const[r,l]=(0,f.e)(),m=(0,o.yK)((e=>({title:{fontWeight:d.Z.fontWeight.medium,fontSize:16,marginBlock:"8px 4px",display:"flex",alignItems:"center"},container:{display:"flex",flexDirection:"column",gap:16},helpInfo:{marginLeft:4},titleContainer:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",gap:16},summaryCard:{height:70},cardContainer:{justifyContent:"flex-start",gap:18},cardTextContainer:{alignItems:"flex-start"}})),[]),{activeMembersCount:g,previousActiveMembersCount:v,activeGuestsCount:x,previousActiveGuestsCount:_}=t;return(0,A.jsxs)("div",{style:m.container,ref:r,children:[(0,A.jsxs)("div",{style:m.titleContainer,children:[(0,A.jsxs)(w.Z,{style:m.title,children:[(0,A.jsx)(u.FormattedMessage,{id:"settings.workspaceAnalytics.usersTab.userEngagement.title",defaultMessage:"User engagement"}),(0,A.jsx)(b.ZP,{placement:y.u.Bottom,render:e=>(0,A.jsx)(M.Z,{...e,href:(0,h.UY)("guides.workspaceAnalytics"),analyticsFrom:"workspace_analytics_faq",style:m.helpInfo}),renderTooltip:()=>"all_time"!==n?(0,A.jsx)(u.FormattedMessage,{id:"settings.workspaceAnalytics.usersTab.userEngagement.tooltip.lastDays",defaultMessage:"Active members and guests have viewed at least one page within the {dateRange}",values:{dateRange:p.default.formatMessage(c.xX[n])}}):(0,A.jsx)(u.FormattedMessage,{id:"settings.workspaceAnalytics.usersTab.userEngagement.tooltip.allTime",defaultMessage:"Active members and guests have viewed at least one page in the workspace"})})]}),(0,A.jsx)(k.f,{currentFilter:n,onChangeFilter:i})]}),(0,A.jsxs)(j.rj,{gap:16,children:[(0,A.jsx)(j.r8,{row:1,col:1,children:(0,A.jsx)(F.q,{style:m.summaryCard,loading:a,error:s,title:(0,A.jsx)(u.FormattedMessage,{id:"workspaceAnalytics.overview.userEngagement.activeMembersCount",defaultMessage:"{activeMembersCount} active members",values:{activeMembersCount:(0,A.jsx)(T.e,{abbreviateNumber:l<640,num:g})}}),byline:void 0!==v?(0,A.jsx)(N.c,{userType:"members",daysFilter:n,count:g,previousCount:v}):null})}),(0,A.jsx)(j.r8,{row:1,col:2,children:(0,A.jsx)(F.q,{style:m.summaryCard,loading:a,error:s,title:(0,A.jsx)(u.FormattedMessage,{id:"workspaceAnalytics.overview.userEngagement.activeGuestsCount",defaultMessage:"{activeGuestsCount} active guests",values:{activeGuestsCount:(0,A.jsx)(T.e,{abbreviateNumber:l<640,num:x})}}),byline:void 0!==_?(0,A.jsx)(N.c,{userType:"guests",daysFilter:n,count:x,previousCount:_}):null})})]})]})}var I=a(44643),P=a(72141),R=a(97880),D=a(80444),V=a(21752),Z=a(40394),B=a(71291),L=a(82162),O=a(88775),W=a(98569);const q=(0,u.defineMessages)({page_views:{id:"workspaceAnalytics.usersTab.usersTable.pageViews.tooltip",defaultMessage:"Total number of page views for the user across all pages in the workspace"},page_edits:{id:"workspaceAnalytics.usersTab.usersTable.pageEdits.tooltip",defaultMessage:"Total number of page edits for the user across all pages in the workspace"}}),U=(0,u.defineMessages)({user:{id:"spaceAnalyticsUsersTab.column.user",defaultMessage:"User"},page_views:{id:"spaceAnalyticsUsersTab.column.pageViews",defaultMessage:"Page views"},page_edits:{id:"spaceAnalyticsUsersTab.column.pageEdits",defaultMessage:"Page edits"},last_active:{id:"spaceAnalyticsUsersTab.column.lastActive",defaultMessage:"Last active"},teams:{id:"spaceAnalyticsUsersTab.column.teams",defaultMessage:"Teamspaces"}}),z={user:{id:"user",renderCell:function(e){window.__c={n:"UserCell"};const{userStore:t,role:a}=e,n=(0,o.yK)((e=>({container:{height:52}})),[]);(0,s.useEffect)((()=>{t.load()}),[t]);return(0,r.VK)((()=>t.isReady()),[t])?(0,A.jsx)(V.Z,{containerStyle:n.container,actorStore:t,spaceRole:a&&(0,V.K)(a)}):(0,A.jsx)(L.L,{})},headerTitle:p.default.formatMessage(U.user),widthData:{width:100},sortable:!1},page_views:{id:"page_views",renderCell:function(e){window.__c={n:"PageViewsCell"};const{page_views:t}=e,a=(0,o.yK)((e=>({eyeHideIcon:{width:20,height:20,color:e.lightIconColor},cell:{marginLeft:10}})),[]);if(void 0===t)return(0,A.jsx)(b.ZP,{placement:b.ug.Bottom,render:e=>(0,A.jsx)("div",{...e,children:(0,I.L)(a.eyeHideIcon)}),renderTooltip:e=>(0,A.jsx)(u.FormattedMessage,{id:"spaceAnalyticsUsersTab.optedOutUser.icon.tooltip",defaultMessage:"User has disabled page view tracking"})});return(0,A.jsx)(w.Z,{children:t})},headerTitle:(0,A.jsx)(W.r,{tooltipMessageDescriptor:q.page_views,columnHeader:U.page_views}),widthData:{width:80},sortable:!0},page_edits:{id:"page_edits",renderCell:function(e){const{page_edits:t}=e;return(0,A.jsx)(w.Z,{children:t})},headerTitle:(0,A.jsx)(W.r,{tooltipMessageDescriptor:q.page_edits,columnHeader:U.page_edits}),widthData:{width:80},sortable:!0},last_active:{id:"last_active",renderCell:function(e){const t=e.last_active;let a;a=t?(0,A.jsx)(B.T,{dateTs:t}):(0,A.jsx)(w.Z,{isSecondaryColor:!0,children:(0,A.jsx)(u.FormattedMessage,{id:"settings.workspaceAnalytics.usersTab.userTable.lastActiveTimestamp.noLastActive",defaultMessage:"No activity"})});return(0,A.jsx)("div",{children:a})},headerTitle:p.default.formatMessage(U.last_active),widthData:{width:50},sortable:!0},teams:{id:"teams",renderCell:function(e){const{teamStores:t,userStore:a,role:s}=e;if(!s)return(0,A.jsx)(w.Z,{children:(0,A.jsx)(u.FormattedMessage,{id:"settings.workspaceAnalytics.usersTab.teamsColumn.guest",defaultMessage:"None"})});return(0,A.jsx)(O.ZP,{teamStores:t,member:{userId:a.id,role:s}})},headerTitle:p.default.formatMessage(U.teams),widthData:{width:50},sortable:!1}};const K=(0,R.Yd)(z).map((e=>z[e]));function G(e){window.__c={n:"UsersTable"};const t=(0,i.O7)(),[a,n]=(0,s.useState)(25),{teamStores:d,usersAndStats:g,filter:p,onUserTabFilterChange:h,usersAndStatsError:f}=e,v=(0,r.VK)((()=>{const{currentSpaceStore:e}=D.default.state,t=(null==e?void 0:e.getPermissionItems().filter(P.jg))||[],a={};for(const s of t)a[s.user_id]=s.role;return a}),[]),[y,x]=(0,s.useState)({column:z.last_active,sortAscending:!1}),_=(0,s.useCallback)((e=>{m.gE(t,{column:e.column.id,isAscending:e.sortAscending}),x(e)}),[x,t]),b=g.map((e=>{let{userStore:t,stats:a}=e;return{id:a.userId,userStore:t,teamStores:d,isClickable:!1,last_active:a.lastActive,page_views:a.numPageViews,page_edits:a.numPageEdits,role:v[a.userId]}})).sort(function(e){switch(e.column.id){case"last_active":return(t,a)=>(0,c.Zj)(t.last_active,a.last_active,e.sortAscending);case"page_views":return(t,a)=>(0,c.yM)(t.page_views,a.page_views,e.sortAscending);case"page_edits":return(t,a)=>e.sortAscending?t.page_edits-a.page_edits:a.page_edits-t.page_edits;default:return(e,t)=>0}}(y)),M=(0,s.useMemo)((()=>b.slice(0,a)),[b,a]),C=(0,o.yK)((e=>({error:{color:l.ZP.red},dateFilterPill:{display:"flex",marginTop:10,marginBottom:15,flexFlow:"row",alignItems:"center"},timeFilterDescription:{marginRight:5}})),[]);const S=(0,s.useCallback)((e=>{m.Iw(t,{daysFilter:e}),h({tableFilter:e})}),[t,h]),j=(0,o.yK)((e=>(0,Z.b)({columnRenderInfo:K,theme:e,containerMarginTop:0})),[]);return(0,A.jsxs)(A.Fragment,{children:[f&&(0,A.jsx)(w.Z,{isMultiline:!1,style:C.error,children:f}),(0,A.jsxs)("div",{style:C.dateFilterPill,children:[(0,A.jsx)(w.Z,{isSecondaryColor:!0,style:C.timeFilterDescription,children:(0,A.jsx)(u.FormattedMessage,{id:"workspaceAnalytics.timeFilter.description",defaultMessage:"Views and edits from"})}),(0,A.jsx)(k.f,{currentFilter:p,onChangeFilter:S})]}),(0,A.jsx)(Z.D,{allowHorizontalScroll:!0,hideHeaderRowPadding:!0,setStickyHeaderRow:!0,maxHeight:500,sortState:y,onSortStateChanged:_,columnRenderInfo:K,rows:M,renderNoRowsComponent:()=>(0,A.jsx)("div",{children:"N/A"}),styles:j,onLoadMore:function(){a<g.length&&n(a+25)}})]})}function H(e){var t,a;let{spaceStore:n,teamStores:v,usersTabData:_,onUserTabFilterChange:j,userEngagement:T}=e;window.__c={n:"SpaceAnalyticsUsersTab"};const[F,k]=(0,f.e)(),N=(0,o.yK)((e=>({container:{display:"flex",flexDirection:"column",gap:16},titleContainer:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",gap:16},sectionTitle:{fontWeight:d.Z.fontWeight.medium,fontSize:16},sectionTitleLeft:{marginBlock:"8px 4px",marginBottom:5,display:"flex",alignItems:"center"},helpInfo:{marginLeft:4},wrapper:{display:"flex",flexDirection:"row",justifyContent:"space-around"},numUsersCaption:{display:"flex"},overviewText:{textAlign:"center"},error:{color:l.ZP.red},tableHeader:{marginTop:20,flexDirection:"row",display:"flex",justifyContent:"space-between",alignItems:"end"},tooltip:{marginLeft:3},infoIcon:{height:14,width:14,color:e.mediumTextColor}})),[]),I=(0,i.O7)(),P=(0,u.useIntl)(),R=(0,s.useCallback)((e=>{m.KC(I,{daysFilter:e});j({graphFilter:"all_time"===e?"last_90_days":e}),T.setDaysFilter(e)}),[j,T,I]),D=(0,r.VK)((()=>n.getName()),[n]);if("NotFoundError"===(null==_||null===(t=_.usersAndStatsError)||void 0===t?void 0:t.name)||"NotFoundError"===(null===(a=T.error)||void 0===a?void 0:a.name))return(0,A.jsx)(S.y,{type:"empty",spaceName:D});const V=Math.floor(k-8);return(0,A.jsxs)("div",{style:N.container,children:[(0,A.jsx)(E,{data:T.data,loading:T.loading,error:T.error,daysFilter:T.daysFilter,setDaysFilter:R}),(0,A.jsx)($,{children:(0,A.jsx)("div",{ref:F,children:_?(0,A.jsx)(Q,{width:V,dailyUsersData:_.dailyUsersData,userEngagementDaysFilter:T.daysFilter,daysFilter:_.graphFilter,dailyUsersError:_.dailyUsersError&&g.Uk(_.dailyUsersError,P)}):(0,A.jsx)(Y,{})})}),(0,A.jsxs)("div",{style:N.tableHeader,children:[(0,A.jsxs)("div",{style:N.sectionTitleLeft,children:[(0,A.jsx)(w.Z,{style:N.sectionTitle,children:(0,A.jsx)(u.FormattedMessage,{id:"settings.workspaceAnalytics.usersTab.allUsers.title",defaultMessage:"All members in Notion"})}),(0,A.jsx)(b.ZP,{placement:y.u.Bottom,render:e=>(0,A.jsx)(M.Z,{...e,href:(0,h.UY)("guides.workspaceAnalytics"),analyticsFrom:"workspace_analytics_faq",style:N.helpInfo}),renderTooltip:()=>_&&"all_time"!==_.tableFilter?(0,A.jsx)(u.FormattedMessage,{id:"settings.workspaceAnalytics.allMembers.tooltip.lastDays",defaultMessage:"Per member workspace activity over the {dateRange}",values:{dateRange:p.default.formatMessage(c.xX[_.tableFilter])}}):(0,A.jsx)(u.FormattedMessage,{id:"settings.workspaceAnalytics.allMembers.tooltip.allTime",defaultMessage:"All time per member workspace activity"})})]}),(0,A.jsx)(C.f,{analyticsType:x.x.Users})]}),_?(0,A.jsx)(G,{teamStores:v,filter:_.tableFilter,usersAndStats:_.usersAndStats,onUserTabFilterChange:j,usersAndStatsError:_.usersAndStatsError&&g.Uk(_.usersAndStatsError,P)}):null]})}function $(e){window.__c={n:"DisplayBox"};const t=(0,o.yK)((e=>({border:{borderRadius:4,overflow:"hidden",border:`1px solid ${e.regularDividerColor}`,backgroundColor:e.contentBackground,color:e.regularTextColor,padding:20}})),[]);return(0,A.jsx)("div",{style:t.border,children:e.children})}function Q(e){window.__c={n:"UsersOverTimeGraph"};const{width:t,dailyUsersData:a,userEngagementDaysFilter:s,daysFilter:i,dailyUsersError:m}=e,g=(0,o.yK)((e=>({graphHeader:{marginBottom:10,display:"flex",justifyContent:"space-between"},graphTitle:{fontSize:d.Z.fontSize.UIRegular.desktop,fontWeight:"bolder",display:"flex",alignItems:"center",height:24},graphCaption:{fontSize:d.Z.fontSize.UISmall.desktop},graphTooltip:{marginLeft:5,width:14,height:14},helpInfo:{marginLeft:4},emptyGraphBody:{textAlign:"center",paddingTop:50,paddingBottom:50},error:{color:l.ZP.red},graphSubLabel:{paddingTop:4,color:"grey"}})),[]),{blueLayer:f}=(0,n.useTimeSeriesPalette)(),x=(0,r.VK)((()=>{if(0===a.length)return;return{startDate:a[0].ds,endDate:a[a.length-1].ds}}),[a]),_=(0,r.VK)((()=>a.map((e=>({ds:e.ds,values:{active_members:e.active_members||0}})))),[a]);let C;return C=!x||a.length<3?(0,A.jsx)("div",{style:g.emptyGraphBody,children:(0,A.jsx)(w.Z,{isSecondaryColor:!0,children:(0,A.jsx)(u.FormattedMessage,{id:"workspaceAnalytics.usersOverTime.emptyGraph",defaultMessage:"Not enough data to display graph"})})}):(0,A.jsx)(v.LazyTimeSeries,{startDate:x.startDate,endDate:x.endDate,width:t,data:_,height:300,layers:[{key:"active_members",...f,renderLabel:e=>(0,A.jsx)(u.FormattedMessage,{id:"workspaceAnalytics.usersOverTime.activeMembers",defaultMessage:"{activeMembers, plural, one {1 active member} other {{activeMembers} active members}}",values:{activeMembers:e}})}],renderTooltipSubLabel:()=>(0,A.jsx)("div",{style:g.graphSubLabel,children:(0,A.jsx)(u.FormattedMessage,{id:"workspaceAnalytics.usersOverTime.activeMembers.sublabel",defaultMessage:"Viewed a page in the {dateRange}",values:{dateRange:p.default.formatMessage(c.xX[i])}})})}),(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)("div",{style:g.graphHeader,children:(0,A.jsxs)(w.Z,{style:g.graphTitle,children:[(0,A.jsx)(u.FormattedMessage,{id:"workspaceAnalytics.membersOverTime.title",defaultMessage:"Active members over time"}),"all_time"===s&&(0,A.jsx)(b.ZP,{placement:y.u.Bottom,render:e=>(0,A.jsx)(M.Z,{...e,href:(0,h.UY)("guides.workspaceAnalytics"),analyticsFrom:"workspace_analytics_faq",style:g.helpInfo}),renderTooltip:()=>(0,A.jsx)(u.FormattedMessage,{id:"settings.workspaceAnalytics.membersOverTime.allTimeTooltip",defaultMessage:"All Time selection shows members who have viewed a page in the last 90 days."})})]})}),m&&(0,A.jsx)(w.Z,{isMultiline:!1,style:g.error,children:m}),C]})}function Y(){return(0,A.jsxs)("div",{children:[(0,A.jsx)(_.Z,{paragraphs:[{lineHeight:18,lineMargin:0,sectionWidths:[100],repeat:0,sectionMargin:0}]}),(0,A.jsx)(_.Z,{paragraphs:[{lineHeight:300,lineMargin:0,sectionWidths:[100],repeat:0,sectionMargin:12}]})]})}},98569:(e,t,a)=>{a.d(t,{r:()=>o});a(67294);var s=a(9291),n=a(33929),i=a(26388),r=a(85893);function o(e){const{tooltipMessageDescriptor:t,columnHeader:a}=e;return(0,r.jsx)(i.ZP,{placement:i.ug.Top,renderTooltip:e=>(0,r.jsx)("div",{...e,children:(0,r.jsx)(s.FormattedMessage,{...t})}),render:e=>(0,r.jsx)("div",{...e,children:n.default.formatMessage(a)})})}},55360:(e,t,a)=>{a.d(t,{$:()=>f});a(67294);var s=a(86628),n=a(24405),i=a(8848),r=a(97880),o=a(82990),l=a(9291),d=a(74016),c=a(43568),u=a(31278),m=a(76798),g=a(64369),p=a(45653),h=a(85893);function f(e){let{title:t,items:a,loading:s,error:i}=e;window.__c={n:"AnalyticsCardList"};const r=(0,n.yK)((e=>({title:{fontWeight:o.Z.fontWeight.semibold,marginBottom:8},container:{flex:1,display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"flex-start",height:"100%",border:`1px solid ${e.outlineButtonBorder}`,borderRadius:4,padding:12}})),[]);return(0,h.jsxs)("div",{style:r.container,children:[(0,h.jsx)(g.Z,{style:r.title,children:t}),s?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(y,{}),(0,h.jsx)(y,{}),(0,h.jsx)(y,{}),(0,h.jsx)(y,{}),(0,h.jsx)(y,{})]}):i?(0,h.jsx)(h.Fragment,{children:(0,h.jsx)(x,{})}):a.map(((e,t)=>(0,h.jsx)(v,{item:e},t)))]})}function v(e){let{item:t}=e;window.__c={n:"CardListItem"};const{store:a,caption:n}=t,i=(0,l.useIntl)(),o=_(),c=(0,s.VK)((()=>{switch(a.table){case"block":return(0,h.jsxs)("div",{style:o.nameAndIconContainer,children:[(0,h.jsx)(u.Z,{icon:a.getIcon(),size:18,isEmptyPage:!1,disabled:!0}),(0,h.jsx)(m.Z,{store:a})]});case"notion_user":return(0,h.jsxs)("div",{style:o.nameAndIconContainer,children:[(0,h.jsx)(p.Z,{userStore:a,size:18}),(0,h.jsx)(g.Z,{children:a.getDisplayName(i)})]});case"team":const e=a.getName();return(0,h.jsxs)("div",{style:o.nameAndIconContainer,children:[(0,h.jsx)(d.p,{disabled:!0,store:a,size:20}),(0,h.jsx)(g.Z,{children:e})]});default:(0,r.t1)(a)}}),[a,o.nameAndIconContainer,i]);return(0,h.jsxs)("div",{style:o.container,children:[(0,h.jsx)(g.Z,{style:o.label,children:c}),(0,h.jsx)("div",{style:o.caption,children:(0,h.jsx)(g.Z,{isSecondaryColor:!0,isSmall:!0,children:n})})]})}function y(){window.__c={n:"LoadingCardListItem"};const e=_();return(0,h.jsxs)("div",{style:e.container,children:[(0,h.jsx)(g.Z,{style:e.label,children:(0,h.jsx)(c.Z,{paragraphs:[{lineHeight:14,lineMargin:3,sectionWidths:[80],repeat:0,sectionMargin:2}]})}),(0,h.jsx)("div",{style:e.loadingCaption,children:(0,h.jsx)(c.Z,{paragraphs:[{lineHeight:14,lineMargin:3,sectionWidths:[80],repeat:0,sectionMargin:2}]})})]})}function x(){window.__c={n:"ErrorCardListItem"};const e=_();return(0,h.jsx)("div",{style:e.container,children:(0,h.jsx)(g.Z,{style:e.errorLabel,children:(0,h.jsx)(l.FormattedMessage,{id:"spaceAnalytics.basicErrorMessage",defaultMessage:"Something went wrong.{br}Try refreshing the page.",values:{br:(0,h.jsx)("br",{})}})})})}function _(){return(0,n.yK)((e=>({container:{width:"100%",display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",paddingBlock:4,gap:4},nameAndIconContainer:{display:"flex",flexDirection:"row",justifyContent:"flex-start",gap:8,alignItems:"center",width:"100%"},label:{width:"100%"},caption:{display:"flex",justifyContent:"center",alignItems:"center"},loadingCaption:{display:"block",width:"50%"},errorLabel:{width:"100%",textAlign:"center",color:i.ZP.red}})),[])}},97706:(e,t,a)=>{a.d(t,{q:()=>u});a(67294);var s=a(24405),n=a(8848),i=a(59730),r=a(82990),o=a(9291),l=a(43568),d=a(64369),c=a(85893);function u(e){let{icon:t,iconStyles:a,textStyles:u,style:m,title:g,byline:p,loading:h,error:f}=e;window.__c={n:"AnalyticsCardOverview"};const v=function(e,t,a){return(0,s.yK)((s=>({title:{fontWeight:r.Z.fontWeight.medium,fontSize:16},byline:{fontSize:r.Z.fontSize.UISmall.desktop,marginTop:4},textContainer:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",width:"100%",...t},titleContainer:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",gap:8},icon:{height:28,width:28,color:s.lightTextColor,fill:"currentcolor",...e},container:{height:"100%",flex:1,display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",border:`1px solid ${s.outlineButtonBorder}`,borderRadius:4,padding:12,gap:8,...a},loadingTitle:{display:"block",width:"40%"},loadingByline:{display:"block",width:"60%",marginTop:8,marginBottom:8},errorTitle:{textAlign:"center",color:n.ZP.red}})),[e,t,a])}(a,u,m);return h?(0,c.jsx)("div",{style:v.container,children:(0,c.jsxs)("div",{style:v.textContainer,children:[(0,c.jsx)("div",{style:v.loadingTitle,children:(0,c.jsx)(l.Z,{paragraphs:[{lineHeight:18,lineMargin:0,sectionWidths:[100],repeat:0,sectionMargin:0}]})}),p?(0,c.jsx)("div",{style:v.loadingByline,children:(0,c.jsx)(l.Z,{paragraphs:[{lineHeight:14,lineMargin:0,sectionWidths:[100],repeat:0,sectionMargin:0}]})}):null]})}):f?(0,c.jsx)("div",{style:v.container,children:(0,c.jsx)("div",{style:v.titleContainer,children:(0,c.jsx)(d.Z,{style:v.errorTitle,children:(0,i.Jx)(f)?f.message:(0,c.jsx)(o.FormattedMessage,{id:"spaceAnalytics.basicErrorMessage",defaultMessage:"Something went wrong.{br}Try refreshing the page.",values:{br:(0,c.jsx)("br",{})}})})})}):(0,c.jsxs)("div",{style:v.container,children:[t?t(v.icon):null,(0,c.jsxs)("div",{style:v.textContainer,children:[(0,c.jsx)(d.Z,{style:v.title,children:g}),p?(0,c.jsx)(d.Z,{style:v.byline,children:p}):null]})]})}},67579:(e,t,a)=>{a.d(t,{f:()=>v});var s=a(67294),n=a(24405),i=a(69651),r=a(73123),o=a(45257),l=a(33929),d=a(87279),c=a(52275),u=a(78140),m=a(32163),g=a(53437),p=a(72495),h=a(91642),f=a(85893);function v(e){window.__c={n:"DateFilter"};const t=(0,n.yK)((e=>({popup:{width:125,marginLeft:5},pillStyle:{display:"flex",alignItems:"center"}})),[]),{currentFilter:a,hideAllTime:v}=e,[y,x]=(0,s.useState)(!1),_=r.Hz.filter((e=>!v||"all_time"!==e)).map((t=>{const a=()=>{e.onChangeFilter(t),x(!1)};return{key:t,action:()=>{},render:()=>(0,f.jsx)(c.Z,{focused:!1,onClick:a,title:l.default.formatMessage(r.Rh[t])})}})),b=(0,f.jsx)(o.Z,{on:Boolean(a),wrapStyle:t.pillStyle,icon:(0,i.C)({width:16,marginRight:6,fill:"currentColor"}),title:l.default.formatMessage(r.Rh[a]),onClick:()=>{x(!0)}}),w=[{key:"filters",items:_,render:e=>(0,f.jsx)(p.Z,{...e,title:null,loading:!1})}],M=(0,f.jsx)(u.Z,{menuType:d.og.Popup,header:null,children:(0,f.jsx)(m.Z,{type:m.i.Vertical,initialFocus:0,sections:w})});return(0,f.jsx)(h.Z,{marginAfter:!1,children:(0,f.jsx)(g.ZP,{popupType:g.ZP.PopupType.Popup,placementToOrigin:g.ZP.Placement.Bottom,alignmentToOrigin:g.ZP.Alignment.Start,open:y,render:()=>M,onDismiss:()=>x(!1),keepFocus:!0,origin:b,preventScaleTransition:!0,style:t.popup})})}},8840:(e,t,a)=>{a.d(t,{f:()=>M});var s=a(67294),n=a(480),i=a(86628),r=a(97880),o=a(73123),l=a(9291),d=a(24697),c=a(61652),u=a(33929),m=a(87279),g=a(4023),p=a(80444),h=a(24026),f=a(52275),v=a(31945),y=a(78140),x=a(63296),_=a(53437),b=a(72495),w=a(85893);function M(e){return(0,w.jsx)(v.ZP,{popupType:_.kQ.Popup,alignmentToOrigin:g.v.End,render:t=>{let{close:a}=t;return(0,w.jsx)(C,{closePopup:a,analyticsType:e.analyticsType})},renderOrigin:t=>{let{onClick:a}=t;return(0,w.jsx)(x.Z,{style:e.style,onClick:a,children:(0,w.jsx)(l.FormattedMessage,{id:"spaceAnalytics.usersTab.export",defaultMessage:"Export as CSV"})})}})}function C(e){window.__c={n:"ExportAnalyticsMenu"};const{analyticsType:t,closePopup:a}=e,l=(0,n.O7)(),g=(0,i.VK)((()=>{var e;return null===(e=p.default.state.currentSpaceStore)||void 0===e?void 0:e.id}),[]),v=(0,s.useCallback)((async e=>{if(g){switch(t){case h.x.Users:d.Lb(l,{daysFilter:e}),await c.Tp(l,{spaceId:g,daysFilter:e});break;case h.x.Content:d.Z(l,{daysFilter:e}),await c.hN(l,{spaceId:g,daysFilter:e});break;default:(0,r.t1)(t)}a()}}),[l,g,t,a]),x=o.Hz.map((e=>(0,w.jsx)(f.Z,{focused:!1,onClick:()=>v(e),title:u.default.formatMessage(o.Rh[e])},e)));return(0,w.jsx)(y.Z,{menuType:m.og.Popup,children:(0,w.jsx)(b.Z,{children:x})})}},93502:(e,t,a)=>{a.d(t,{U:()=>d});var s=a(67294),n=a(480),i=a(59054),r=a(97880),o=a(54642);const l={pageViews:0,uniquePageViews:0,pagesCreated:0,pageEdits:0,topPages:[]};function d(e){let{spaceId:t}=e;const a=(0,n.O7)(),[d,c]=(0,s.useState)("last_90_days"),[{status:u,value:m,error:g}]=(0,i.r5)((async()=>{const e=await o.getContentEngagementAnalytics(a,{spaceId:t,daysFilter:d});switch(e.type){case"success":return{pageViews:e.data.pageViews,uniquePageViews:e.data.uniquePageViews,pagesCreated:e.data.pagesCreated,pageEdits:e.data.pageEdits,topPages:e.data.topPages};case"failed":throw e.body;default:(0,r.t1)(e)}}),[a,t,d]);return{data:(0,s.useMemo)((()=>m||l),[m]),loading:"pending"===u||"idle"===u,error:g,daysFilter:d,setDaysFilter:c}}},31303:(e,t,a)=>{a.d(t,{i:()=>m});var s=a(67294),n=a(480),i=a(86628),r=a(59054),o=a(90965),l=a(97880),d=a(54642),c=a(68117);const u={activeMembersCount:0,previousActiveMembersCount:0,activeGuestsCount:0,previousActiveGuestsCount:0,topTeamspaces:[],topViewers:[],topEditors:[]};function m(e){let{spaceStore:t,userId:a,isOrganizationOwner:m}=e;const g=(0,n.O7)(),{updateCacheWithRecordMap:p}=(0,s.useContext)(c.V),[h,f]=(0,s.useState)("last_90_days"),v=(0,i.VK)((()=>t.id),[t]),y=(0,i.VK)((()=>t&&a&&(0,o.wv)({permissions:t.getPermissionItems()},a)),[t,a]),[{status:x,value:_,error:b}]=(0,r.r5)((async()=>{if(!a||!(m||y))return u;const e=await d.getUserEngagementAnalytics(g,{spaceId:v,daysFilter:h});switch(e.type){case"success":return p(e),{activeMembersCount:e.data.activeMembersCount,previousActiveMembersCount:e.data.previousActiveMembersCount,activeGuestsCount:e.data.activeGuestsCount,previousActiveGuestsCount:e.data.previousActiveGuestsCount,topTeamspaces:e.data.topTeamspaces,topViewers:e.data.topViewers,topEditors:e.data.topEditors};case"failed":throw e.body;default:(0,l.t1)(e)}}),[g,a,v,h,y,m,p]);return{data:(0,s.useMemo)((()=>_||u),[_]),loading:"pending"===x||"idle"===x,error:b,daysFilter:h,setDaysFilter:f}}},35314:(e,t,a)=>{a.d(t,{e:()=>r});var s=a(67294),n=a(86628),i=a(77794);function r(){const[e,t]=(0,s.useState)(0),[a]=(0,s.useState)((()=>new i.E)),r=(0,s.createRef)();return(0,s.useEffect)((()=>{if(r.current)return a.observe(r.current),()=>{a.destroy()}}),[r,a]),(0,n.VK)((()=>{e!==a.rect.state.width&&t(a.rect.state.width)}),[e,a.rect]),[r,e]}},89665:(e,t,a)=>{a.d(t,{R:()=>d});var s=a(86628),n=a(19889),i=a(2438),r=a(68373),o=a(88893),l=a(88280);function d(e){let{spaceStore:t}=e;return(0,s.VK)((()=>{const e=l.subscriptionDataStoreInstance.state;if(!e)return{loading:!0};const a=o.CM(e);if(!a.every((e=>r.U6.createChildStore(t,{table:n.KJ,id:e.userId}).isReady())))return{loading:!0};const s=a.filter(i.CF),d=a.filter(i.du);return{loading:!1,members:s.map((e=>{let{userId:a}=e;return r.U6.createChildStore(t,{table:n.KJ,id:a})})),guests:d.map((e=>{let{userId:a}=e;return r.U6.createChildStore(t,{table:n.KJ,id:a})}))}}),[t])}},24026:(e,t,a)=>{a.d(t,{Z:()=>r,x:()=>n});var s=a(49085);let n=function(e){return e.Overview="overview",e.Users="users",e.Content="content",e.Search="search",e}({});class i extends s.default{getInitialState(){return{}}shouldRefreshState(e){const t=this.getState();return e!==t.currentSpaceId||!(t.currentTab!==n.Users||t.usersTabData&&t.usersTabData.usersAndStats)}}const r=new i},47054:(e,t,a)=>{a.d(t,{AD:()=>l});a(57658);var s=a(30120),n=a(59730),i=a(63143);function r(e){if(void 0===e)return s.ou.utc();const t={zone:"utc"};return"number"==typeof e?s.ou.fromMillis(e,t):s.ou.fromISO(e,t)}function o(e,t){const a=t?r(t):s.ou.utc(),i=r(e??function(e){const{days:t,endDate:a,startDate:i}=e;if(t<=0)throw new n.p8("Days must be greater than 0");const o=a?r(a):s.ou.utc();if(!o.isValid)throw new n.p8(`endDate ${a} is in an invalid format`);const l=i?r(i).toMillis():0,d=o.minus({days:t-1}).toMillis();return Math.max(d,l)}({days:7,endDate:t}));if(!i.isValid)throw new n.p8(`startDate ${e} is in an invalid format`);if(!a.isValid)throw new n.p8(`endDate ${t} is in an invalid format`);if(i>a)throw new n.p8(`startDate ${e} => ${i.toISO()} is after endDate ${t} => ${a.toISO()}`);return{startTimestamp:i.toMillis(),endTimestamp:a.toMillis()}}function l(e,t){const{startTimestamp:a,endTimestamp:s}=o(e,t),n=[];for(var l=a;l<=s;)n.push(r(l).toISODate()),l+=i.A0;return n}}}]);