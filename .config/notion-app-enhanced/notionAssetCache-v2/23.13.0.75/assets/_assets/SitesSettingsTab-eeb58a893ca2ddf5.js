"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[9582],{79698:(e,t,i)=>{i.d(t,{j:()=>g});var s=i(9291),o=i(14542),n=i(96809),a=i(47307),r=i(96802),d=i(27153),l=i(82530),c=i(53471);const u=(0,s.defineMessages)({pageCover:{defaultMessage:"Page cover",id:"pageCover.title"},fileTypeCaption:{defaultMessage:"Images wider than {idealImageWidth} pixels work best.",id:"pageCover.fileType.caption"},uploadFailed:{defaultMessage:"Upload failed",id:"pageCover.errorDialogMessage.uploadFailed"},embedTitle:{defaultMessage:"Link",id:"pageCover.embedType.title"},embedPlaceholder:{defaultMessage:"Paste an image linkâ€¦",id:"pageCover.embedType.placeholder"},embedCaption:{defaultMessage:"Works with any image from the web.",id:"pageCover.embedType.caption"},embedSubmit:{defaultMessage:"Submit",id:"pageCover.embedType.buttonText"}});function g(e){let{environment:t,intl:i,store:s,rect:o}=e;d.$(t,{originGap:3,originRect:o,isSmallWidth:!1,popupWidth:540,maxHeight:485,title:i.formatMessage(u.pageCover),onDelete:()=>{!function(e){let{environment:t,store:i}=e;d.Z(),l.createAndCommit({userAction:"PageCover.handleDelete",environment:t,perform:e=>{r.MF({store:i,transaction:e})}})}({environment:t,store:s})},currentTab:"gallery",tabs:[{type:"gallery",onChange:e=>{let{url:i,position:o}=e;m({environment:t,store:s,url:i,position:o})}},{type:"file",fileUpload:!1,imageUpload:!0,videoUpload:!1,caption:i.formatMessage(u.fileTypeCaption,{idealImageWidth:1500}),onUpload:e=>{d.Z(),c.cT({environment:t,file:e,bucket:"secure",record:s.pointer,onStart:h,onProgress:f,onComplete:e=>{var i;i={environment:t,store:s,url:e},p({...i,position:.5})},onError:()=>{a.showErrorMessage(i.formatMessage(u.uploadFailed))}})}},{type:"embed",title:i.formatMessage(u.embedTitle),inputPlaceholder:i.formatMessage(u.embedPlaceholder),caption:i.formatMessage(u.embedCaption),buttonText:i.formatMessage(u.embedSubmit),onChange:e=>{var i;i={environment:t,store:s,url:e},p({...i,position:.5}),d.Z()}},{type:"unsplash",onChange:e=>{let{url:i,position:o}=e;m({environment:t,store:s,url:i,position:o})}}]})}async function p(e){const{environment:t,store:i,url:s,position:a}=e,{serverCommitResult:d}=l.createAndCommit({userAction:"PageCover.updatePageCover",environment:t,perform:e=>{r.fs({store:i,url:s,position:a||.5,transaction:e})}});await d,n.Z.state.loadingMode===o.NS&&n.Z.setState({loadingMode:o.EP,dataURL:n.Z.state.dataURL,uploadProgress:100})}function m(e){p(e),e.environment.device.isMobile&&d.Z()}function h(e){const{file:t,name:i,size:s}=e;if(d.Z(),n.Z.setState({loadingMode:o.SS,file:t,name:i,size:s}),t.type.indexOf("image")>=0){const e=new FileReader;e.onload=e=>{n.Z.state.loadingMode===o.SS&&n.Z.setState({...n.Z.state,uploadProgress:0,loadingMode:o.NS,dataURL:e.target.result})},e.readAsDataURL(t)}}function f(e){const{progressPercent:t}=e;n.Z.state.loadingMode===o.NS&&n.Z.setState({...n.Z.state,uploadProgress:t})}},87636:(e,t,i)=>{i.d(t,{Z:()=>f});var s=i(67294),o=i(13991),n=i(480),a=i(24405),r=i(22491),d=i(97880),l=i(82990),c=i(17311),u=i(23063),g=i(64921),p=i(26388),m=i(85893);function h(e){window.__c={n:"ActionMenuGroupButton"};const{button:t,isLast:i}=e,o=(0,a.yK)((e=>({button:{display:"flex",alignItems:"center",padding:"4px 6px",fontWeight:l.Z.fontWeight.medium,borderRight:`1px solid ${e.regularDividerColor}`,color:e.actionMenuButtonTextColor,fill:e.actionMenuButtonTextColor},buttonLast:{borderRight:"none"},buttonHovered:{background:e.whiteButtonHoveredBackground},buttonPressed:{background:e.whiteButtonPressedBackground}})),[]);return s.cloneElement(t,{...(0,r.iv)(t.props.style,o.button,i&&o.buttonLast),hoveredStyle:(0,r.iv)(o.buttonHovered,i&&o.buttonLast).style,pressedStyle:o.buttonPressed})}const f=function(e){let{children:t,isVisible:i,position:f,style:v}=e;window.__c={n:"ActionMenuGroup"};const x=(0,n.O7)(),b=(0,a.yK)((e=>({container:{color:e.actionMenuButtonTextColor,fill:e.actionMenuButtonTextColor,fontSize:12,background:e.whiteButtonBackground,boxShadow:e.lightBoxShadow,display:"flex",whiteSpace:"nowrap",borderRadius:c.Z.borderRadius,maxWidth:"calc(100% - 16px)",minHeight:24,overflow:"hidden",pointerEvents:x.device.isMobile?"auto":"none",opacity:x.device.isMobile?1:0,fontFamily:l.Z.getCompositeFontFamily(o.SP).sans,position:"absolute",right:c.Z.horizontal.small,bottom:c.Z.vertical.small,zIndex:2},containerHover:{pointerEvents:"auto",opacity:1},containerTop:{top:c.Z.vertical.small,bottom:void 0}})),[x]),y=s.Children.toArray(t).filter(d.$K),S=y.length;return(0,m.jsx)(u.Z,{isVisible:!0,animationStyle:{opacity:i?1:0},render:()=>(0,m.jsx)("div",{...(0,r.iv)(b.container,v,i&&b.containerHover,"top"===f&&b.containerTop),children:y.map(((e,t)=>{const i=t===S-1;if(e&&"object"==typeof e&&"type"in e){if(e.type===p.ZP&&s.isValidElement(e))return s.cloneElement(e,{render:(t,s)=>{const o=e.props.render(t,s);return(0,m.jsx)(h,{isLast:i,button:o},e.key)}});if(e.type===g.Z&&s.isValidElement(e))return(0,m.jsx)(h,{isLast:i,button:e},e.key)}}))})})}},93289:(e,t,i)=>{i.d(t,{Z:()=>r});var s=i(67294),o=i(13991),n=i(77907),a=i(85893);const r=function(e){let{firstDayOfWeek:t,value:i,selectValue:r=!0,onChange:d,disabledDays:l}=e;window.__c={n:"DatePicker"};const c=(0,s.useMemo)((()=>new Date(i)),[i]),[u,g]=(0,s.useState)(c),p=(0,s.useRef)(i);(0,s.useLayoutEffect)((()=>{p.current!==i&&(g(new Date(i)),p.current=i)}),[i]);const m=(0,s.useCallback)(((e,t,i)=>{d(e.getTime())}),[d]);return(0,a.jsx)(n.LazyDayPicker,{locale:o.SP,className:"notion-calendar-picker",numberOfMonths:1,weekStartsOn:t,modifiers:r?{value:c}:{},showOutsideDays:!0,fixedWeeks:!0,onDayClick:m,onMonthSelected:g,disabled:l,month:u})}},65496:(e,t,i)=>{i.d(t,{Z:()=>P});var s=i(67294),o=i(83355),n=i(9291),a=i(96802),r=i(79698),d=i(82530),l=i(28651),c=i(50627),u=i(94841),g=i(14542),p=i(96809),m=i(87636),h=i(23063),f=i(64921),v=i(12981),x=i(65107),b=i(68785),y=i(32854),S=i(81865),C=i(97496),M=i(56282),w=i(85893);class j extends o.Z{constructor(){super(...arguments),this.lastProxiedUrl=void 0,this.storeTypes={mouseStore:l.Z},this.renderControl=e=>{let{isVisible:t,isRepositioning:i,handleCancelClick:s,handleRepositionClick:o,handleSavePositionClick:a}=e;if(this.props.disabled||p.Z.state.loadingMode!==g.LU)return;const{device:r}=this.environment,{isMobile:d}=r;return(0,w.jsx)(h.Z,{isVisible:!0,animationStyle:{width:k(this.props.store),opacity:t?1:0},render:()=>(0,w.jsx)("div",{style:{position:"absolute",pointerEvents:t?"auto":"none",maxWidth:"100%",top:48},children:(0,w.jsxs)(m.Z,{isVisible:t,position:"bottom",style:{marginRight:this.props.paddingRight,marginLeft:this.props.paddingLeft},children:[!i&&(0,w.jsx)(f.Z,{style:{borderRight:d?"none":void 0,...C.ar},onClick:this.handleChangeCoverClick,children:(0,w.jsx)(n.FormattedMessage,{defaultMessage:"Change cover",id:"pageCover.changeCover.text"})}),!i&&!d&&(0,w.jsx)(f.Z,{style:{...C.ar,borderRight:"none"},onClick:e=>o(e,this.lastProxiedUrl),children:(0,w.jsx)(n.FormattedMessage,{defaultMessage:"Reposition",id:"pageCover.reposition.text"})}),i&&!d&&(0,w.jsx)(f.Z,{style:C.ar,onClick:a,children:(0,w.jsx)(n.FormattedMessage,{defaultMessage:"Save position",id:"pageCover.savePosition.text"})}),i&&!d&&(0,w.jsx)(f.Z,{style:{...C.ar,borderRight:"none"},onClick:s,children:(0,w.jsx)(n.FormattedMessage,{defaultMessage:"Cancel",id:"pageCover.reposition.cancelText"})})]})})})},this.handleChangeCoverClick=e=>{const{intl:t,store:i}=this.props;this.stores.mouseStore.reset();const s=e.target.getBoundingClientRect();r.j({environment:this.environment,intl:t,store:i,rect:s})},this.coverWithRecordStore=this.createComputedStore((()=>this.props.store.getCover()),!0),this.isPersonalHome=this.createComputedStore((()=>(0,u.WE)(this.props.store)))}renderComponent(){const e=this.coverWithRecordStore.getState();if(!e)return;const t=p.Z.state,i=t.loadingMode!==g.LU&&t.loadingMode!==g.SS;return(0,w.jsx)(M.Z,{mouseStore:this.stores.mouseStore,onFlushTemporaryPosition:e=>function(e,t,i){const{imagePosition:s,reset:o}=e;d.createAndCommit({userAction:"PageCover.handleFlushTemporaryPosition",environment:i,perform:e=>{a.Mp({store:t,coverPosition:s,transaction:e}),o()}})}(e,this.props.store,this.environment),renderControl:this.renderControl,source:"page",store:this.props.store,style:{display:"flex",flexDirection:"column",alignItems:"center",height:this.props.height,cursor:"default"},render:o=>(0,w.jsxs)(s.Fragment,{children:[(0,w.jsx)(S.Z,{url:e.cover,isAuthenticated:!0,permissionRecord:e.pointer,width:this.props.proxyWidth,render:(e,s)=>{this.lastProxiedUrl=s;const n={width:"100%",height:this.props.height,objectFit:"cover",opacity:i?.5:1,objectPosition:`center ${100*(1-(o.imagePosition||0))}%`,borderRadius:0},a={width:"100%",height:this.props.height};return(0,w.jsx)(x.B,{src:s,placeholderSrc:i?t.dataURL:void 0,placeholderBehavior:i?"force-show-placeholder":"show-placeholder-if-loading-src",containerStyle:a,imageStyle:n,onLoadComplete:Z})}}),i&&(0,w.jsxs)("div",{style:v.I,children:[(0,w.jsx)(b.Z,{style:{width:16,height:16,marginRight:4}}),(0,w.jsx)("div",{style:{minWidth:30,textAlign:"right"},children:(0,w.jsx)(y.Z,{percentage:t.uploadProgress})})]})]})})}}j.displayName="PageCover";const P=(0,n.injectIntl)(j);function k(e){let t;return t=!!e.isFullWidth()?"100%":c.zL,t}function Z(){p.Z.reset()}},27386:(e,t,i)=>{i.d(t,{Um:()=>u,ZP:()=>g,kN:()=>c});i(67294);var s=i(480),o=i(24405),n=i(34859),a=i(91754),r=i(61519),d=i(53336),l=i(85893);function c(e){return e?18:60}function u(){return(0,l.jsx)(r.Z,{size:37})}const g=function(e){let{children:t,controlRow:i,bannerText:r,controlRowPaddingTopBottom:u,removeBoxShadow:g,contentPaddingLeftRight:p,controlRowPaddingLeftRight:m,getPaddingTopBottom:h,disableScroller:f}=e;window.__c={n:"SettingBox"};const v=(0,o.Fg)(),x=(0,s.O7)(),{device:b}=x,y=h?h():b.isMobile?18:36;return f?(0,l.jsxs)("div",{style:{paddingLeft:c(b.isMobile),paddingRight:c(b.isMobile)},children:[(0,l.jsx)("div",{style:{paddingTop:y,paddingBottom:y},children:t}),i&&(0,l.jsx)("div",{style:{paddingTop:u,paddingBottom:u,boxShadow:`0 -1px 0 ${v.regularDividerColor}`},children:i})]}):(0,l.jsxs)("div",{style:{display:"flex",flexDirection:"column",width:"100%",height:"100%",backgroundColor:v.cardContentBackground},children:[r&&(0,l.jsx)(a.Z,{styleKey:a.v.Blue,isMobile:!1,children:r}),(0,l.jsx)(d.Z,{type:n.Z.All,style:{flexGrow:1,WebkitOverflowScrolling:"touch",transform:"translateZ(0)",paddingLeft:p??c(b.isMobile),paddingRight:p??c(b.isMobile),paddingTop:r?15:y,paddingBottom:r?22:y},children:t}),i&&(0,l.jsx)("div",{style:{flexGrow:0,flexShrink:0,paddingLeft:m??c(b.isMobile),paddingRight:m??c(b.isMobile),paddingTop:u,paddingBottom:u,boxShadow:g?void 0:`0 -1px 0 ${v.regularDividerColor}`},children:i})]})}},56282:(e,t,i)=>{i.d(t,{Z:()=>w});i(67294);var s=i(73935),o=i(83355),n=i(13991),a=i(6740),r=i(49085),d=i(12137),l=i(8848),c=i(22491),u=i(72126),g=i(82990),p=i(63143),m=i(9291),h=i(24677),f=i(28651),v=i(27724);class x extends r.default{getInitialState(){return{showFadeInAnimation:!1,isRepositioning:!1}}}const b=x;var y=i(23063),S=i(6685),C=i(85893);class M extends o.Z{constructor(){super(...arguments),this.storeTypes={focusStore:r.default.createClass(!1),mouseStore:f.Z,withImageRepositioningStore:b},this.renderDraggable=()=>(0,C.jsx)(S.Z,{onDraggableDragStart:this.handleDragStart,onDraggableDragMove:this.handleDragMove,onDraggableDragEnd:this.handleDragEnd,onDraggableDragCancel:this.handleDragCancel,disabled:!this.isRepositioning(),render:e=>(0,C.jsx)("div",{...(0,c.iv)(this.getDragContainerStyle()),...e,children:this.props.render({imagePosition:this.getRenderedCoverPosition(),isRepositioning:this.isRepositioning(),showFadeInAnimation:!1})})}),this.shouldBeActiveStore=this.createComputedStore((()=>0===v.default.state.stores.length)),this.handleFocus=e=>{const t=e.target;void 0!==t&&t instanceof HTMLElement&&(0,a.E)(t)&&this.stores.focusStore.setState(!0)},this.handleBlur=e=>{this.stores.focusStore.setState(!1)},this.handleMouseMove=e=>{this.mouseStore.setState({...this.mouseStore.state,mouseEntered:!0})},this.handleMouseLeave=e=>{this.mouseStore.setState({...this.mouseStore.state,mouseEntered:!1})},this.handleMouseMoveThrottled=(0,u.P2)(this.handleMouseMove,100),this.handleMouseLeaveDebounced=(0,u.Ds)(this.handleMouseLeave,100),this.handleWindowMouseDown=e=>{const t=s.findDOMNode(this);t&&!t.contains(e.target)&&this.isRepositioning()&&this.props.onFlushTemporaryPosition({imagePosition:this.getRenderedCoverPosition(),reset:()=>{this.mouseStore.reset(),this.stores.withImageRepositioningStore.reset()}})},this.handleRepositionClick=(e,t)=>{h.ZH(this.environment);const i=new Image;i.onload=()=>{this.stores.withImageRepositioningStore.setState({...this.stores.withImageRepositioningStore.state,isRepositioning:!0,image:i})},t&&(i.src=t)},this.handleCancelClick=e=>{this.stores.withImageRepositioningStore.reset()},this.handleSavePositionClick=e=>{this.props.onFlushTemporaryPosition({imagePosition:this.getRenderedCoverPosition(),reset:()=>{this.stores.withImageRepositioningStore.reset()}})},this.handleDragStart=e=>{const t=this.isRepositioning(),{image:i}=this.stores.withImageRepositioningStore.state;if(i&&t){const e=s.findDOMNode(this);if(e&&e instanceof Element){const t=e.getBoundingClientRect().width/i.width*i.height,s=this.getRenderedCoverPosition();this.stores.withImageRepositioningStore.setState({...this.stores.withImageRepositioningStore.state,startDragImageScreenHeight:t,startDragRenderedPosition:s})}}},this.handleDragMove=e=>{if(this.isRepositioning()){const{startDragRenderedPosition:t,startDragImageScreenHeight:i}=this.stores.withImageRepositioningStore.state,s=e.diffY/(i||0)+(t||0);this.stores.withImageRepositioningStore.setState({...this.stores.withImageRepositioningStore.state,temporaryPosition:(0,u.NM)((0,d.Z)(s,0,1),4)})}},this.handleDragEnd=()=>{this.stores.withImageRepositioningStore.setState({...this.stores.withImageRepositioningStore.state,startDragImageScreenHeight:void 0,startDragRenderedPosition:void 0})},this.handleDragCancel=()=>{this.stores.withImageRepositioningStore.setState({...this.stores.withImageRepositioningStore.state,startDragImageScreenHeight:void 0,startDragRenderedPosition:void 0})}}didMount(){super.didMount(),window.addEventListener("mousedown",this.handleWindowMouseDown)}willUnmount(){super.willUnmount(),window.removeEventListener("mousedown",this.handleWindowMouseDown)}UNSAFE_willMountOrUpdate(){this.isRepositioning()&&!this.shouldBeActiveStore.state&&this.stores.withImageRepositioningStore.reset()}renderComponent(){const{device:e}=this.environment,{style:t}=this.props,{isMobile:i}=e,s=this.isRepositioning(),{mouseEntered:o}=this.mouseStore.state,n=this.stores.focusStore.state;return(0,C.jsxs)("div",{onFocus:this.handleFocus,onBlur:this.handleBlur,onMouseEnter:this.handleMouseMoveThrottled,onMouseMove:this.handleMouseMoveThrottled,onMouseLeave:this.handleMouseLeaveDebounced,...(0,c.iv)({position:"relative",width:"100%"},t),children:[this.renderDraggable(),this.renderDragMessage(),this.props.renderControl({handleRepositionClick:this.handleRepositionClick,handleSavePositionClick:this.handleSavePositionClick,handleCancelClick:this.handleCancelClick,isVisible:i||o||n||s,isRepositioning:s})]})}renderDragMessage(){const{isRepositioning:e}=this.stores.withImageRepositioningStore.state;if(!this.props.small)return(0,C.jsx)(y.Z,{isVisible:!0,animationStyle:{opacity:e?1:0},render:()=>(0,C.jsx)("div",{style:{background:l.ZP.blackWithAlpha(.4),borderRadius:4,color:l.ZP.white,fontSize:12,fontFamily:g.Z.getCompositeFontFamily(n.SP).sans,width:180,left:"calc(50% - 90px)",padding:"0.3em 1.5em 0.3em",pointerEvents:"none",position:"absolute",top:"calc(50% - 10px)",textAlign:"center"},"aria-hidden":!e,children:(0,C.jsx)(m.FormattedMessage,{defaultMessage:"Drag image to reposition",id:"withImageRepositioning.dragImage.text"})})})}isRepositioning(){return this.stores.withImageRepositioningStore.state.isRepositioning}getRenderedCoverPosition(){const{temporaryPosition:e}=this.stores.withImageRepositioningStore.state;return(0,u.hj)(e)?e:function(e,t){if("gallery"===e||"board"===e){const e=t.getFormat().card_cover_position;if((0,u.hj)(e))return e}const i=.5;if(t.isCollectionView()){const e=t.getCollectionViewCollectionStore();if(e){const t=e.getFormat().collection_cover_position;return(0,p.z4)(t)?i:t}}const s=t.getFormat().page_cover_position;if((0,u.hj)(s))return s;return i}(this.props.source,this.props.store)}get mouseStore(){return this.props.mouseStore||this.stores.mouseStore}getDragContainerStyle(){return{width:"100%",cursor:this.isRepositioning()?"move":"inherit"}}}M.displayName="WithImageRepositioning";const w=M},26907:(e,t,i)=>{i.d(t,{B:()=>n,H:()=>s});const s=e=>{const{target:t,inviteTargetsStore:i}=e;return i.state.inviteTargets.some((e=>"newUser"===t.type?e.type===t.type&&t.value.email===e.value.email:"invalidUser"===t.type?e.type===t.type&&t.value.text===e.value.text:e.type===t.type&&e.value.id===t.value.id))};function o(e){return"invalidUser"!==e.type}const n=e=>{const{inviteTargetsStore:t}=e,{inviteTargets:i}=t.state;return i.filter(o)}},57345:(e,t,i)=>{i.d(t,{Cv:()=>j,a6:()=>w,lG:()=>M,qg:()=>Z,zd:()=>k});i(67294);var s=i(33728),o=i(68626),n=i(91155),a=i(72141),r=i(4615),d=i(9291),l=i(50906),c=i(47307),u=i(76464),g=i(64964),p=i(19306),m=i(26907),h=i(46654),f=i(18245),v=i(88923),x=i(99332),b=i(29677),y=i(66708),S=i(28578),C=i(85893);function M(e){v.default.state.open?x.Z.setState({...x.Z.state,open:!0}):y.Z.setState({...y.Z.state,open:!0}),l.DB(e,{share_menu_session_id:S.ZP.state.sessionId})}function w(e){v.default.state.open?x.Z.setState({...x.Z.state,open:!1}):y.Z.setState({...y.Z.state,open:!1}),l.Rb(e,{share_menu_session_id:S.ZP.state.sessionId}),S.ZP.reset()}function j(e){const{success:t,inviteTargets:i,requestedUserEmails:s}=e;if(0!==i.length){if(!t||0!==(null==s?void 0:s.length))return t&&s.length>0?s.length===i.length?void g.oV({label:(0,C.jsx)(d.FormattedMessage,{id:"shareMenu.inviteSuccess.snackbarMessage.requestedUsersOnly",defaultMessage:"Sent request to invite {users} to this page",values:{users:P(i)}})}):void g.oV({label:(0,C.jsx)(d.FormattedMessage,{id:"shareMenu.inviteSuccess.snackbarMessage.requestedAndInvitedUsers",defaultMessage:"Invited {users} and requested inviting {numberOfRequestedUsers, plural, one {{numberOfRequestedUsers} guest} other {{numberOfRequestedUsers} guests}}",values:{users:P(i.filter((e=>!(0,b.fZ)(e)&&!(0,b.cl)(e)||!s.includes(e.value.email)))),numberOfRequestedUsers:s.length}})}):void g.oV({label:(0,C.jsx)(d.FormattedMessage,{id:"shareMenu.inviteFailure.snackbarMessage",defaultMessage:"Failed to invite {users}",values:{users:P(i)}})});g.oV({label:(0,C.jsx)(d.FormattedMessage,{id:"shareMenu.inviteSuccess.snackbarMessage",defaultMessage:"Successfully invited {users}",values:{users:P(i)}})})}}function P(e){return(0,p.W)(e.map((e=>"group"===e.type?e.value.name??"group":"invalidUser"===e.type?e.value.text:e.value.email)))}async function k(e){const{inviteTargetsStore:t}=e,i=(0,C.jsx)(d.FormattedMessage,{id:"shareMenu.closeInviteDialog.confirmationMessage",defaultMessage:"Your changes have not been saved. Discard changes?"}),s=(0,C.jsx)(d.FormattedMessage,{id:"shareMenu.closeInviteDialog.confirmationButton.label",defaultMessage:"Yes"}),o=(0,C.jsx)(d.FormattedMessage,{id:"shareMenu.closeInviteDialog.cancelButton.label",defaultMessage:"Cancel"});if(t.state.inviteTargets.length>0){return(await c.confirmUserActionV2({message:i,acceptLabel:s,cancelLabel:o})).accept}return!1}async function Z(e){const t=f.default.mark("share_menu.invite_user_lag"),{environment:i,blockStore:d,inviteTargetsStore:l,sudoModeStore:c,onInviteClick:g,onInviteComplete:p,inviteOrigin:v,role:x,emailMessage:b,flowId:y}=e;let S={success:!1,requestedUserEmails:[]};try{S=await async function(e){const{environment:t,blockStore:i,sudoModeStore:o,inviteTargetsStore:n,role:d,inviteOrigin:l,emailMessage:c,onInviteStart:g}=e,p=e.flowId||(0,r.ZP)();if(!(0,a.iC)(d))return{success:!1,requestedUserEmails:[]};const{tokenQuery:f,inviteTargets:v}=n.state;if((0,s.oH)(f.trim())&&0===v.length){const e={type:"newUser",value:{email:f.trim()},source:"email"};m.H({target:e,inviteTargetsStore:n})||n.setState({inviteTargets:[...n.state.inviteTargets,e],tokenQuery:""})}const x=h.mU(i,m.B({inviteTargetsStore:n}));null==g||g();const b=await u.n_({environment:t,store:i,sudoModeStore:o,inviteTargets:x,inviteRole:d,isOnboarding:!1,invite:{inviteFlowId:p,inviteMessage:c,inviteOrigin:l}});return{success:b.success,requestedUserEmails:b.success?Object.keys(b.requestedUsers):[]}}({environment:i,blockStore:d,sudoModeStore:c,inviteTargetsStore:l,role:x,emailMessage:b,inviteOrigin:v,onInviteStart:g,flowId:y})}catch(C){o.log({level:"error",from:"shareMenuActions",type:"handleInviteClick",error:(0,n.Ui)(C)})}finally{null==p||p(S.success,S.requestedUserEmails)}f.default.measure(t,{environment:i})}},68973:(e,t,i)=>{i.d(t,{TA:()=>S,Zg:()=>v,eT:()=>C,mk:()=>x});i(21703),i(57658),i(67294);var s=i(29477),o=i(45953),n=i(70921),a=i(21202),r=i(9291),d=i(54642),l=i(47307),c=i(4708),u=i(57345),g=i(28578),p=i(68373),m=i(54801),h=i(67181),f=i(85893);function v(e){h.Z.resetSitesForSpace(e.id)}async function x(e,t){const{spaceStore:i,currentUserId:n,limit:r}=t;if(!i.id)return;const[l]=await Promise.all([d.getPublishedPagesForUser(e,{spaceId:i.id,limit:r||50}),(0,s.Vs)(1500)]);if("failed"===l.type)throw new Error("Failed to fetch published pages.");if(l.data.recordMap){const t=(0,c.Hk)(),s=[],r=o.PF.create(l.data.recordMap);for(const{model:o}of r)if(o&&o.table===a.iU){const n=p.G.createChildStore(i,{table:a.iU,id:o.id});let r;if(t){const t=await d.getActivityLog(e,{spaceId:i.id,navigableBlock:o.id?{id:o.id,spaceId:i.id}:void 0,activityTypes:[],limit:100});if("failed"===t.type)throw t.error;r=b(n,t.data)}else r=n.getCreatedByPointer();s.push({store:n,publishedMetadata:{publishedTime:y(n),publishedOrCreatedBy:r}})}let u=s;return n&&(u=m.S(s,n)),h.Z.initializeSiteResultsForSpace(i.id,u),u}}function b(e,t){const{recordMap:i}=t,s=o.PF.create(i);let a,r;for(const{model:o}of s)if(o&&o.table===n.TY){const t=p.WJ.createChildStore(e,{table:n.TY,id:o.id,spaceId:o.getSpaceId()}),i=null==t?void 0:t.getEdits();if(i)for(const e of i)"permission-created"===e.type&&"public_permission"===e.permission_data.type&&"none"!==e.permission_data.role&&(!r||e.permission_data.added_timestamp&&r<e.permission_data.added_timestamp)&&(a=e,r=e.permission_data.added_timestamp)}return a&&a.authors?a.authors[0]:void 0}function y(e){const t=e.getPermissionItems().find((e=>"public_permission"===e.type));return"public_permission"===(null==t?void 0:t.type)?t.added_timestamp:void 0}function S(e){u.lG(e),g.ZP.setState({...g.ZP.state,display:g.wV.Publish,tab:g.XF.Publish})}async function C(e){return new Promise(((t,i)=>{l.showDialog({message:(0,f.jsx)("div",{style:{textAlign:"center"},children:(0,f.jsx)(r.FormattedMessage,{id:"sites.confirmUnpublish.title",defaultMessage:"Unpublish this site?"})}),description:(0,f.jsx)("div",{style:{textAlign:"center"},children:(0,f.jsx)(r.FormattedMessage,{id:"sites.confirmUnpublish.caption",defaultMessage:"{pageTitle} will no longer be live on the web.",values:{pageTitle:e}})}),keepFocus:!0,items:[{label:(0,f.jsx)(r.FormattedMessage,{id:"sites.confirmUnpublish.confirm",defaultMessage:"Unpublish"}),color:"red",onAccept:()=>t(!0)}],showCancel:!0})}))}},17655:(e,t,i)=>{i.r(t),i.d(t,{default:()=>it});var s=i(67294),o=i(86628),n=i(24405),a=i(82990),r=i(9291),d=i(61519),l=i(74523),c=i(27386),u=i(23189),g=i(4708),p=i(18514),m=i(480),h=i(25651),f=i(21202),v=i(3096),x=i(42922),b=i(73063),y=i(50506),S=i(26388),C=i(64369),M=i(40235),w=i(81236),j=i(68373),P=i(91694),k=i(88893),Z=i(15145),I=i(72640),D=i(95369),F=i(39567),B=i(84076),T=i(31278),R=i(76798),_=i(84210),A=i(98742),L=i(98567),U=i(4023),H=i(85893);function E(e){let{store:t,...i}=e;window.__c={n:"WithPagePreviewOnHover"};const o=(0,s.useCallback)((e=>(0,H.jsx)(L.E5,{store:t,events:e})),[t]);return(0,H.jsx)(S.ZP,{noStyle:!0,delayThreshold:400,placement:U.u.Bottom,alignment:U.v.Start,renderTooltip:o,...i})}const V=s.memo(E);var O=i(92083);function K(e){window.__c={n:"SiteRecord"};const{store:t,disableClick:i,isPublicHomePage:a}=e,r=(0,o.VK)((()=>{if(t)return{icon:t.getIcon(),isEmptyPage:t.isEmptyPage(),url:(0,_.Hu)({store:t,pageVisitSource:Z.tY.SiteSettings})}}),[t]),d=(0,s.useCallback)((e=>{e.metaKey||O.Z.setState({...O.Z.state,open:!1})}),[]),l=(0,n.yK)((e=>({container:{display:"flex",alignItems:"center",overflow:"hidden"},emptyPageIcon:{height:18,width:18,fill:e.accentColors.gray[500]},iconContainer:{position:"relative",width:20,height:20,marginRight:4},linkBox:{borderRadius:3,maxWidth:a?"88%":"100%"},linkIcon:{position:"absolute",width:10,height:10,right:0,bottom:0},pageRecordContainer:{display:"flex",alignItems:"center",paddingLeft:6,paddingRight:6,paddingTop:2,paddingBottom:2},pageTitle:{wordBreak:"break-word",borderBottom:"0.05em solid rgba(55,53,47,.25)"}})),[a]);if(!t||!r)return null;const c=(0,H.jsxs)("div",{style:l.pageRecordContainer,children:[(0,H.jsxs)("div",{style:l.iconContainer,children:[r.icon?(0,H.jsx)(T.Z,{icon:r.icon,store:t,disabled:!0,size:16,isEmptyPage:r.isEmptyPage,emojiSize:20}):(0,D.S)(l.emptyPageIcon),(0,F.Y)(l.linkIcon)]}),(0,H.jsx)(R.Z,{store:t,style:l.pageTitle})]});return i?(0,H.jsxs)("div",{style:l.container,children:[c,(0,H.jsx)(W,{isPublicHomePage:a})]}):(0,H.jsxs)("div",{style:l.container,children:[(0,H.jsx)(V,{store:t,render:e=>(0,H.jsx)(B.Z,{href:null==r?void 0:r.url,style:l.linkBox,...(0,A.Z)(e,{onClick:d}),children:c})}),(0,H.jsx)(W,{isPublicHomePage:a})]})}function W(e){window.__c={n:"HomePageIndicator"};const{isPublicHomePage:t}=e,i=(0,n.yK)((()=>({homeIcon:{width:18,height:18,marginLeft:4}})),[]);return t?(0,H.jsx)(S.ZP,{renderTooltip:()=>(0,H.jsx)(r.FormattedMessage,{id:"SitesRecord.homePageTooltip",defaultMessage:"This is your homepage on the web"}),placement:S.ug.Bottom,alignment:S.v2.Center,originGap:6,render:e=>(0,H.jsx)("span",{...e,children:(0,I.W)(i.homeIcon)})}):null}var N=i(13490),q=i(8848),z=i(91315),$=i(54497),G=i(72126),Y=i(74194),Q=i(68785),X=i(33929),J=i(38755);const ee=(0,r.defineMessages)({workspaceDomainInputPlaceholder:{id:"spaceBasicSettingsDomain.domainSection.workspaceDomainInput.placeholder",defaultMessage:"Your domain"}});function te(e){window.__c={n:"DomainNameInput"};const{spaceStore:t,domainName:i,setDomainName:o,domainAvailabilityStatus:a,setDomainAvailabilityStatus:r}=e,d=(0,m.O7)(),l=(0,s.useCallback)((async e=>{const i=(0,J.$U)(e.target.value);if(i){const e=await v.oM({environment:d,spaceStore:t,domainName:i});r(e)}o(i)}),[d,t,o,r]),c=(0,s.useMemo)((()=>G.Ds(l,300)),[l]),u=(0,n.yK)((e=>({container:{display:"flex",alignItems:"center",maxHeight:28},inputContainer:{flex:1,background:e.inputBackground,borderRadius:4,boxShadow:"rgb(15 15 15 / 10%) 0px 0px 0px 1px inset",display:"flex"},input:{background:"none",boxShadow:"none",padding:"4px 6px",width:"100%"}})),[]);return(0,H.jsxs)("div",{style:u.container,children:[(0,H.jsx)("div",{style:u.inputContainer,children:(0,H.jsx)(Y.Z,{type:"text",style:u.input,value:i,placeholder:X.default.formatMessage(ee.workspaceDomainInputPlaceholder),onChange:c})}),i&&"available"===a&&(0,H.jsx)(se,{}),"inuse"===a&&(0,H.jsx)(oe,{}),"disallowed"===a&&(0,H.jsx)(ne,{}),"loading"===a&&ae()]})}const ie={fieldContainer:{display:"flex",flexDirection:"row",alignItems:"center",fontSize:"14px"},fieldIcon:{height:16,width:16,margin:"0 4px 0 8px"}};function se(){window.__c={n:"DomainAvailableLabel"};const e=(0,n.yK)((e=>({container:{...ie.fieldContainer,color:e.invoiceGreen},icon:{...ie.fieldIcon,color:e.invoiceGreen}})),[]);return(0,H.jsxs)("div",{style:e.container,children:[(0,z.r)(e.icon),(0,H.jsx)("span",{children:(0,H.jsx)(r.FormattedMessage,{defaultMessage:"Available",id:"spaceBasicSettings.domainSection.workspaceDomainInput.validationMessage.available"})})]})}function oe(){window.__c={n:"DomainInUseLabel"};const e=(0,n.yK)((()=>({container:{...ie.fieldContainer,color:q.ZP.red}})),[]);return(0,H.jsxs)("div",{style:e.container,children:[(0,$.t)(ie.fieldIcon),(0,H.jsx)("span",{children:(0,H.jsx)(r.FormattedMessage,{defaultMessage:"Used",id:"spaceBasicSettings.domainSection.workspaceDomainInput.validationMessage.used"})})]})}function ne(){window.__c={n:"DomainDisallowedLabel"};const e=(0,n.yK)((()=>({container:{...ie.fieldContainer,color:q.ZP.red}})),[]);return(0,H.jsxs)("div",{style:e.container,children:[(0,$.t)(ie.fieldIcon),(0,H.jsx)("span",{children:(0,H.jsx)(r.FormattedMessage,{defaultMessage:"Not allowed",id:"spaceBasicSettings.domainSection.workspaceDomainInput.validationMessage.notAllowed"})})]})}const ae=()=>(0,H.jsx)(Q.Z,{style:ie.loadingSpinner});var re=i(59054),de=i(35840),le=i(32163),ce=i(53437),ue=i(11470),ge=i(72495),pe=i(28020);function me(e){window.__c={n:"SiteSearchInput"};const{initialFocus:t,setPublicHomePageId:i}=e,[o,a]=(0,s.useState)(""),[r,d]=(0,s.useState)(!1),l=(0,n.yK)((()=>({searchResultsPopup:{width:300}})),[]);return(0,H.jsx)(ce.ZP,{alignmentToOrigin:ce.ZP.Alignment.Start,origin:(0,H.jsx)(he,{initialFocus:t,query:o,setQuery:a,setShowSearchResults:d}),originGap:3,open:r,popupType:ce.ZP.PopupType.Popup,style:l.searchResultsPopup,render:()=>(0,H.jsx)(fe,{query:o,onSelection:i})})}function he(e){window.__c={n:"SearchInput"};const{initialFocus:t,query:i,setQuery:a,setShowSearchResults:d}=e,l=(0,m.O7)(),c=(0,r.useIntl)(),u=(0,o.VK)((()=>(0,k.M9)(l)),[l]),g=!Boolean(u),p=(0,n.yK)((e=>({input:{flex:1,background:e.inputBackground,borderRadius:4,boxShadow:"rgb(15 15 15 / 10%) 0px 0px 0px 1px inset",display:"flex",paddingLeft:4},icon:{fill:e.mediumIconColor,width:16,height:16,flexGrow:0,flexShrink:0}})),[]),h=(0,s.useCallback)((e=>{a(e.target.value),d(!0)}),[a,d]),f=(0,s.useCallback)((()=>{d(!0)}),[d]),v=(0,s.useCallback)((e=>{"Escape"===e.key&&d(!1)}),[d]);return(0,H.jsx)(Y.Z,{type:"text",style:p.input,focusInitial:t,value:i,disabled:!g,left:(0,de.R)(p.icon),placeholder:c.formatMessage({defaultMessage:"Select a page shared to web",id:"spaceBasicSettings.PublicHomePageSection.input.placeholder"}),onChange:h,onFocus:f,onKeyDown:v})}function fe(e){window.__c={n:"SearchResults"};const{query:t,onSelection:i}=e,s=(0,m.O7)(),a=(0,o.VK)((()=>(0,pe.RM)()),[]),[{value:d,status:l}]=(0,re.r5)((()=>v.a2(t,s)),[t,s]),c=(0,n.yK)((()=>({loadingSpinner:{textAlign:"center",visibility:"visible",display:"inline",marginLeft:8}})),[]);if(!(t||d&&0!==d.length))return null;return(0,H.jsx)(le.Z,{type:le.i.Vertical,sections:[{key:"public-pages-search-results",render:e=>(0,H.jsx)(ge.Z,{...e}),items:"idle"===l||"pending"===l?[{key:"results-loading-spinner",render:()=>(0,H.jsx)(Q.Z,{style:c.loadingSpinner}),action:()=>{}}]:a&&d&&0!==d.length?d.map((e=>{const t=j.G.createChildStore(a,{table:f.iU,id:e.id});return{key:`${e.id}-page`,render:e=>(0,H.jsx)(ue.Z,{store:t,...e}),action:()=>{i(e.id)}}})):[{key:"empty-results",render:()=>(0,H.jsx)(C.Z,{isSmall:!0,style:{marginLeft:8},children:(0,H.jsx)(r.FormattedMessage,{id:"spaceBasicSettings.PublicHomePageSection.dropdownLabel.noResults",defaultMessage:"No results"})}),action:()=>{}}]}],initialFocus:void 0})}function ve(e){window.__c={n:"SiteRecordWithInput"};const{spaceStore:t,publicHomePageId:i,setPublicHomePageId:o}=e,[a,r]=(0,s.useState)(!i),d=(0,s.useCallback)((()=>{r(!0)}),[r]),l=(0,s.useCallback)((e=>{o(e),r(!1)}),[o,r]),c=i?j.G.createChildStore(t,{table:f.iU,id:i}):void 0,u=(0,n.yK)((e=>({publicHomePageRecordContainer:{background:e.inputBackground,borderRadius:4,boxShadow:"rgb(15 15 15 / 10%) 0px 0px 0px 1px inset",paddingLeft:4,maxHeight:28,fontSize:14}})),[]);return c&&!a?(0,H.jsx)("div",{style:u.publicHomePageRecordContainer,onClick:d,children:(0,H.jsx)(K,{store:c,disableClick:!0})}):(0,H.jsx)(me,{initialFocus:a,setPublicHomePageId:l})}function xe(e){window.__c={n:"UpdateDomainModal"};const{spaceStore:t,messages:i,existingDomainName:d,existingPublicHomePageId:l,onSubmitDomainSettings:c}=e,u=(0,m.O7)(),[g,p]=(0,s.useState)(d),[h,f]=(0,s.useState)(""),[v,b]=(0,s.useState)(l),y=(0,o.VK)((()=>(0,k.M9)(u)),[u]),S=d!==g&&"available"===h||v!==l,M=(0,n.yK)((()=>({container:{position:"relative",padding:"22px 26px",width:480},title:{fontSize:18,fontWeight:a.Z.fontWeight.semibold},subTitle:{marginTop:3,marginBottom:26},publicHomePageTitleContainer:{display:"flex",alignItems:"center"},upsellButton:{marginTop:16,marginBottom:4,marginLeft:4},submitButtonContainer:{display:"flex",flexDirection:"row-reverse",width:"100%",paddingTop:16},submitButton:{flex:1}})),[]),w=(0,s.useCallback)((()=>{c({environment:u,spaceStore:t,domain:g,shouldUpdateDomain:g!==d,publicHomePageId:v,shouldUpdatePublicHomePageId:v!==l})}),[u,t,g,d,v,l,c]);return(0,H.jsxs)("div",{style:M.container,children:[(0,H.jsx)("div",{style:M.title,children:(0,H.jsx)(r.FormattedMessage,{...i.title})}),(0,H.jsx)(C.Z,{isMultiline:!0,isSmall:!0,isSecondaryColor:!0,style:M.subTitle,children:(0,H.jsx)(r.FormattedMessage,{...i.subTitle})}),(0,H.jsx)(N.Z,{hasMarginTop:!0,children:(0,H.jsx)(r.FormattedMessage,{id:"sites.domains.domainName.title",defaultMessage:"Name"})}),(0,H.jsx)(te,{spaceStore:t,domainName:g,setDomainName:p,domainAvailabilityStatus:h,setDomainAvailabilityStatus:f}),(0,H.jsxs)("div",{style:M.publicHomePageTitleContainer,children:[(0,H.jsx)(N.Z,{hasMarginTop:!0,children:(0,H.jsx)(r.FormattedMessage,{id:"sites.domains.domainPublicHomePage.title",defaultMessage:"Public Home Page"})}),y&&(0,H.jsx)(P.Z,{subscriptionTier:y,analyticsName:"public_domain_home_page",desktopStyle:M.upsellButton})]}),(0,H.jsx)(ve,{spaceStore:t,publicHomePageId:v,setPublicHomePageId:b}),(0,H.jsx)("div",{style:M.submitButtonContainer,children:(0,H.jsx)(x.Z,{onClick:w,isLarge:!0,disabled:!S,style:M.submitButton,children:(0,H.jsx)(r.FormattedMessage,{...i.submitButtonText})})})]})}const be=(0,r.defineMessages)({title:{id:"sites.addDomain.title",defaultMessage:"Add a new domain"},subTitle:{id:"sites.addDomain.subtitle",defaultMessage:"Add a new domain to publish your sites to. Learn more."},submitButtonText:{id:"sites.addDomain.add",defaultMessage:"Add domain"}}),ye=(0,r.defineMessages)({title:{id:"sites.updateDomain.title",defaultMessage:"Update domain"},subTitle:{id:"sites.updateDomain.subtitle",defaultMessage:"Update an existing domain"},submitButtonText:{id:"sites.updateDomain.update",defaultMessage:"Update domain"}}),Se=[{key:"name",header:(0,H.jsx)(r.FormattedMessage,{id:"sites.domains.domainColumnHeader",defaultMessage:"Domain"}),style:{width:"40%"}},{key:"home-page",header:(0,H.jsx)(r.FormattedMessage,{id:"sites.domains.homePageColumnHeader",defaultMessage:"Home page"}),style:{width:"55%"}},{key:"update",header:(0,H.jsx)(H.Fragment,{}),style:{width:"5%"}}];function Ce(e){window.__c={n:"DomainsSection"};const{spaceStore:t}=e,i=(0,m.O7)(),[a,d]=(0,s.useState)(!1),[l,c]=(0,s.useState)(),g=(0,o.VK)((()=>t.canAdmin()),[t]),p=(0,o.VK)((()=>(0,k.M9)(i)),[i]),h=(0,o.VK)((()=>{var e;return null===(e=w.Z.getPublicSpaceData(i,t.getSpaceId()))||void 0===e?void 0:e.domain}),[i,t]),b=(0,o.VK)((()=>{var e;return null===(e=w.Z.getPublicSpaceData(i,t.getSpaceId()))||void 0===e?void 0:e.domainIsAutogenerated}),[i,t]),S=(0,o.VK)((()=>{var e;return null===(e=w.Z.getPublicSpaceData(i,t.getSpaceId()))||void 0===e?void 0:e.publicHomePage}),[i,t]),Z=(0,n.yK)((()=>({headerContainer:{display:"flex",justifyContent:"space-between",alignItems:"center"},header:{display:"flex",flexDirection:"column",flex:1},upsellButton:{width:"fit-content"},tableBox:{tableLayout:"fixed"}})),[]),I=([{name:h,isAutogenerated:b,publicHomePageId:S}]||0).map((e=>{const i=e.publicHomePageId?j.G.createChildStore(t,{table:f.iU,id:e.publicHomePageId}):void 0;return{key:e.name||"default-domain",columns:[e.name,p?(0,H.jsx)(P.Z,{subscriptionTier:p,analyticsName:"public_domain_home_page",desktopStyle:Z.upsellButton},`${e.name}-upsell`):(0,H.jsx)(K,{store:i},`${e.name}-home-page`),(0,H.jsx)(Me,{disabled:!g,onClick:()=>{c(e)}},`${e.name}-update`)]}})),D=(0,s.useCallback)((()=>{c(void 0)}),[c]);return(0,H.jsxs)(H.Fragment,{children:[(0,H.jsxs)(u.Z,{style:Z.headerContainer,children:[(0,H.jsxs)("div",{style:Z.header,children:[(0,H.jsx)(r.FormattedMessage,{id:"sites.domains.title",defaultMessage:"Domains"}),(0,H.jsx)(C.Z,{isSmall:!0,children:(0,H.jsx)(r.FormattedMessage,{id:"sites.domains.caption",defaultMessage:"Pages shared to web will be under one of the domains below."})})]}),(0,H.jsx)(x.Z,{onClick:()=>{d(!0)},isLarge:!0,disabled:!0,children:(0,H.jsx)(r.FormattedMessage,{id:"sites.domains.new",defaultMessage:"Add domain"})})]}),(0,H.jsx)(M.Z,{columns:Se,rows:I,tableStyle:Z.tableBox}),(0,H.jsx)(y.Z,{open:a,onDismiss:()=>{d(!1)},showCloseIcon:!0,render:()=>(0,H.jsx)(xe,{spaceStore:t,messages:be,onSubmitDomainSettings:()=>{}})}),(0,H.jsx)(y.Z,{open:Boolean(l),onDismiss:D,showCloseIcon:!0,render:()=>l?(0,H.jsx)(xe,{spaceStore:t,messages:ye,existingDomainName:l.name,existingPublicHomePageId:l.publicHomePageId,onSubmitDomainSettings:e=>{v.J_({...e,onSubmit:D})}}):null})]})}function Me(e){window.__c={n:"UpdateDomainButton"};const{disabled:t,onClick:i}=e,s=(0,n.yK)((()=>({updateButtonIcon:{width:18,height:18}})),[]),o=t?(0,H.jsx)(r.FormattedMessage,{id:"sites.domains.noEditAccess",defaultMessage:"Only admins can update the domain."}):(0,H.jsx)(r.FormattedMessage,{id:"sites.domains.update",defaultMessage:"Update domain"});return(0,H.jsx)(S.ZP,{renderTooltip:()=>o,placement:S.ug.Bottom,render:e=>(0,H.jsx)(b.Z,{...e,iconStyle:s.updateButtonIcon,ariaLabel:"Update domain",icon:h.R,disabled:t,onClick:i})})}i(57658);var we=i(30120),je=i(7057),Pe=i(7189),ke=i(40462),Ze=i(27714),Ie=i(18442),De=i(85354),Fe=i(14549),Be=i(80560),Te=i(12714),Re=i(64921),_e=i(36596),Ae=i(29302),Le=i(95477),Ue=i(32326),He=i(259),Ee=i(68973),Ve=i(67181),Oe=i(21267),Ke=i(90335);function We(e){window.__c={n:"UpdateSiteSettingsModal"};const{spaceStore:t,blockId:i,onDismiss:s,onUnpublish:a}=e,r=j.G.createChildStore(t,{table:f.iU,id:i}),d=(0,o.VK)((()=>Ke.mk({spaceStore:t,store:r}).mostPermissivePublicItem),[t,r]),l=(0,n.yK)((()=>({container:{position:"relative",paddingLeft:2,paddingRight:2,paddingBottom:6,paddingTop:16,width:480}})),[]);return"none"===d.permissionItem.role?(s(),null):(0,H.jsx)("div",{style:l.container,children:(0,H.jsx)(Oe.Z,{store:r,mostPermissivePublicItem:d,permissionItemArgs:{location:"published_site_settings"},shouldAskForConfirmationOnPublish:!0,onUnpublish:a})})}function Ne(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=e?"3px 5px":0;return[{key:"page",header:(0,H.jsx)(r.FormattedMessage,{id:"sites.header.pageColumnHeader",defaultMessage:"Page"}),style:{width:"24%",padding:i}},{key:"domain",header:(0,H.jsx)(r.FormattedMessage,{id:"sites.header.domainColumnHeader",defaultMessage:"Domain"}),style:{width:"28%"}},{key:"published-or-created-by",header:t?(0,H.jsx)(r.FormattedMessage,{id:"sites.home.publishedByColumnHeader",defaultMessage:"Published by"}):(0,H.jsx)(r.FormattedMessage,{id:"sites.home.createdByColumnHeader",defaultMessage:"Created by"}),style:{width:"20%",padding:i}},{key:"published-date",header:(0,H.jsx)(r.FormattedMessage,{id:"sites.home.publishedDateColumnHeader",defaultMessage:"Published date"}),style:{width:"16%",padding:i}}]}function qe(e){return[...Ne(!1,e),{key:"view",header:(0,H.jsx)(H.Fragment,{}),style:{width:"4%"}},{key:"copy",header:(0,H.jsx)(H.Fragment,{}),style:{width:"4%"}},{key:"configure",header:(0,H.jsx)(H.Fragment,{}),style:{width:"4%"}}]}function ze(e){return[...Ne(!0,e),{key:"configure",header:(0,H.jsx)(H.Fragment,{}),style:{width:"12%"}}]}function $e(e){let{column:t,onSortableColumnClick:i,header:s}=e;window.__c={n:"HeaderCell"};const r=(0,n.yK)((e=>({wrapper:{display:"flex"},text:{fontSize:a.Z.fontSize.UISmall.desktop,fontWeight:a.Z.fontWeight.regular,color:e.mediumTextColor},sortButton:{display:"flex",alignItems:"center",padding:"3px 5px",overflow:"hidden",maxWidth:"100%",borderRadius:4},sortIcon:{fill:e.mediumTextColor,width:12,height:12,marginLeft:4}})),[]),{sortColumn:d,sortAscending:l}=(0,o.VK)((()=>{const{sortColumn:e,sortAscending:t}=Ve.Z.state;return{sortColumn:e,sortAscending:t}}),[]),c=["page","published-or-created-by","published-date"].includes(t),u=()=>{if(t===d)return(0,Pe.K)({...r.sortIcon,...!l&&{transform:"rotate(180deg)"}})};return s&&c?(0,H.jsx)("div",{style:r.wrapper,children:(0,H.jsxs)(Re.Z,{style:r.sortButton,onClick:()=>i(t),children:[s,u()]})}):s?(0,H.jsx)("div",{style:r.wrapper,children:s}):(0,H.jsx)(H.Fragment,{children:s})}function Ge(e){window.__c={n:"SitesSection"};const{spaceStore:t}=e,i=(0,m.O7)(),a=i.currentUser.id,d=(0,r.useIntl)(),[l,c]=(0,s.useState)(void 0),p=(0,o.VK)((()=>t.getPublicHomePage()),[t]);(0,s.useEffect)((()=>(Ee.mk(i,{spaceStore:t,currentUserId:a,limit:5e3}),()=>{Ee.Zg(t)})),[i,t,a,p]);const h=(0,o.VK)((()=>(0,g.Hk)()),[]),f=(0,n.yK)((()=>({headerContainer:{display:"flex",justifyContent:"space-between",alignItems:"center"},header:{display:"flex",flexDirection:"column",flex:1},caption:{width:"80%",marginBottom:6},captionCTA:{marginBottom:6,padding:0,paddingLeft:0,paddingRight:0,backgroundColor:void 0,boxShadow:void 0,textAlign:"left",alignItems:"flex-start"},tableBox:{tableLayout:"fixed"},cell:{paddingRight:12},shimmerCell:{paddingRight:12,height:46},shimmerBox:{height:12,gap:16,display:"flex",borderRadius:6}})),[]),v=(0,o.VK)((()=>t.canAdmin()),[t]),x=(0,o.VK)((()=>{const e=Ve.Z.getSortedSitesForSpace(t.id,d);if(!e)return;const s=[];for(const o of e){const{store:e,publishedMetadata:n}=o,a=e.id,r=e.canAdmin(),l=n.publishedTime?(0,je.ZW)(we.ou.fromMillis(n.publishedTime),"medium"):"",u=n.publishedOrCreatedBy,g=u?j.t1.createChildStore(e,u):void 0,m=null==g?void 0:g.getDisplayName(d),h=g instanceof j.U6?(0,H.jsx)(Ae.Z,{userStore:g,avatarSize:20,style:{width:"fit-content",maxWidth:"98%"}},`${a}-published-or-created-by`):(0,H.jsx)(Qe,{text:m},`${a}-published-or-created-by`);s.push({key:a,columns:[(0,H.jsx)(K,{store:e,isPublicHomePage:a===p},a),(0,H.jsx)(Ye,{spaceStore:t},`${a}-domain`),h,(0,H.jsx)(Qe,{text:l},`${a}-published-on`),(0,H.jsx)(Xe,{store:e},`${a}-view-site`),(0,H.jsx)(Je,{store:e},`${a}-copy-site-link`),(0,H.jsx)(et,{disabled:!r,onClick:()=>{c(a),Fe.gV(i,{action:"configure_site"})}},`${a}-configure-site`)]})}return[...s.filter((e=>e.key===p)),...s.filter((e=>e.key!==p))]}),[t,p,d,i]),b=(0,s.useCallback)((()=>{c(void 0)}),[c]),S=(0,s.useMemo)((()=>Array.from({length:9}).map(((e,t)=>({columns:Array.from({length:5}).map(((e,t)=>(0,H.jsx)(_e.Z,{style:f.shimmerBox},t))),key:`shimmerRow-${t}`})))),[f.shimmerBox]),w=!x,P=x&&0===x.length,k=(0,s.useCallback)((e=>{const{sortColumn:t,sortAscending:i}=Ve.Z.state,s=e!==t||!i;Ve.Z.setState({...Ve.Z.state,sortAscending:s,sortColumn:e})}),[]);return(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(u.Z,{style:f.headerContainer,children:(0,H.jsxs)("div",{style:f.header,children:[(0,H.jsx)(r.FormattedMessage,{id:"sites.home.title",defaultMessage:"Published sites"}),v?(0,H.jsx)(He.V,{style:f.captionCTA,ignoreAutogeneratedStatus:!0,title:(0,H.jsx)(r.FormattedMessage,{id:"sites.learnAboutDomains.setDomainAndHomePage",defaultMessage:"You can set up a public domain and a home page in your <settings>workspace settings</settings>.",values:{settings:e=>(0,H.jsx)(Ue.x,{children:e})}})}):(0,H.jsx)(C.Z,{isSmall:!0,style:f.caption,children:(0,H.jsx)(r.FormattedMessage,{id:"sites.home.caption",defaultMessage:"See all pages you can access that are published to the web."})})]})}),w?(0,H.jsx)(M.Z,{columns:ze(h),rows:S,tableStyle:f.tableBox,cellStyle:f.shimmerCell}):(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(M.Z,{columns:qe(h).map((e=>({key:e.key,header:(0,H.jsx)($e,{column:e.key,onSortableColumnClick:k,header:e.header}),style:e.style}))),rows:x,tableStyle:f.tableBox,cellStyle:f.cell}),P&&(0,H.jsx)(tt,{})]}),(0,H.jsx)(y.Z,{open:Boolean(l),onDismiss:b,showCloseIcon:!0,render:()=>l?(0,H.jsx)(We,{spaceStore:t,blockId:l,onDismiss:b,onUnpublish:()=>{Ve.Z.removeSiteFromSpace(t.id,l)}}):null})]})}function Ye(e){window.__c={n:"DomainTag"};const{spaceStore:t}=e,i=(0,o.VK)((()=>`${t.getPublicContentDomain()}.${Le.default.publicDomainName}`),[t]),s=(0,n.yK)((e=>({tag:{width:"fit-content",maxWidth:"98%",paddingLeft:6,paddingRight:6,borderRadius:3,background:e.buttonHoveredBackground,...a.Z.textOverflowStyle}})),[]);return(0,H.jsx)("div",{style:s.tag,children:i})}function Qe(e){window.__c={n:"PublishedMetadataText"};const{text:t}=e,i=(0,n.yK)((()=>({text:{width:"fit-content",maxWidth:"98%",...a.Z.textOverflowStyle}})),[]);return t?(0,H.jsx)("div",{style:i.text,children:t}):null}function Xe(e){window.__c={n:"ViewSiteButton"};const{store:t}=e,i=(0,m.O7)(),o=(0,n.yK)((e=>({viewSiteButtonIcon:{width:18,height:18,fill:e.accentColors.gray[500]}})),[]),a=(0,s.useCallback)((()=>{const e=(0,_.Hu)({store:t,preferPublicLink:!0,getSpaceDomain:()=>{var e;return null===(e=w.Z.getPublicSpaceData(i,t.getSpaceId()))||void 0===e?void 0:e.domain},pageVisitSource:Z.tY.SiteSettings});Te.D({environment:i,url:e}),Fe.gV(i,{action:"view_site"})}),[t,i]);return(0,H.jsx)(S.ZP,{renderTooltip:()=>(0,H.jsx)(r.FormattedMessage,{id:"sites.viewSite.tooltip",defaultMessage:"View site"}),placement:S.ug.Bottom,render:e=>(0,H.jsx)(b.Z,{...e,ariaLabel:"View site",icon:ke.o,iconStyle:o.viewSiteButtonIcon,onClick:a})})}function Je(e){window.__c={n:"CopySiteLinkButton"};const{store:t}=e,i=(0,m.O7)(),o=(0,n.yK)((e=>({copySiteLinkButtonIcon:{width:16,height:16,fill:e.accentColors.gray[500]}})),[]),a=(0,s.useCallback)((()=>{const e=(0,_.Hu)({store:t,preferPublicLink:!0,getSpaceDomain:()=>{var e;return null===(e=w.Z.getPublicSpaceData(i,t.getSpaceId()))||void 0===e?void 0:e.domain},pageVisitSource:Z.tY.SiteSettings});Be.RD({environment:i,stringValue:e,copiedMessage:Be.tq.copiedLinkToClipboard}),Fe.gV(i,{action:"copy_site_link"})}),[t,i]);return(0,H.jsx)(S.ZP,{renderTooltip:()=>(0,H.jsx)(r.FormattedMessage,{id:"sites.copySiteLink.tooltip",defaultMessage:"Copy link to site"}),placement:S.ug.Bottom,render:e=>(0,H.jsx)(b.Z,{...e,ariaLabel:"Copy link to site",icon:Ze.N,iconStyle:o.copySiteLinkButtonIcon,onClick:a})})}function et(e){window.__c={n:"ConfigureSiteButton"};const{disabled:t,onClick:i}=e,s=(0,n.yK)((e=>({configureButtonIcon:{width:16,height:16,fill:e.accentColors.gray[500]}})),[]),o=t?(0,H.jsx)(r.FormattedMessage,{id:"sites.configureButton.noEditAccessTooltip",defaultMessage:"You do not have access to update the settings for this published site."}):(0,H.jsx)(r.FormattedMessage,{id:"sites.configureButton.tooltip",defaultMessage:"Configure site settings"});return(0,H.jsx)(S.ZP,{renderTooltip:()=>o,placement:S.ug.Bottom,render:e=>(0,H.jsx)(b.Z,{...e,ariaLabel:"Configure site settings",icon:Ie.H,iconStyle:s.configureButtonIcon,disabled:t,onClick:i})})}function tt(){window.__c={n:"NoSitesMessage"};const e=(0,n.yK)((e=>({container:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",paddingTop:170,paddingBottom:170,borderBottom:1,borderBottomStyle:"solid",borderBottomColor:e.regularDividerColor},message:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center"},emptyIcon:{height:32,width:32,color:e.mediumIconColor,marginRight:6},learnMoreButton:{fontWeight:a.Z.fontWeight.regular}})),[]);return(0,H.jsxs)("div",{style:e.container,children:[(0,De.u)(e.emptyIcon),(0,H.jsx)(C.Z,{children:(0,H.jsx)(r.FormattedMessage,{id:"sites.results.empty",defaultMessage:"You have no published sites in this workspace"})}),(0,H.jsx)("div",{style:e.message}),(0,H.jsx)(l.Z,{buttonStyle:e.learnMoreButton,title:(0,H.jsx)(r.FormattedMessage,{id:"sites.caption.learnMore",defaultMessage:"Learn more about publishing"}),href:(0,p.UY)("guides.autogeneratedDomains"),analyticsFrom:"sites_settings"})]})}function it(e){window.__c={n:"SitesSettingsTab"};const{spaceStore:t}=e,i=(0,o.VK)((()=>(0,g.$d)()),[]),s=(0,n.yK)((()=>({headerContainer:{display:"flex"},titleContainer:{flex:1},learnMoreButton:{fontWeight:a.Z.fontWeight.regular}})),[]);return(0,H.jsxs)(c.ZP,{children:[(0,H.jsx)(u.Z,{large:!0,divider:"full",children:(0,H.jsxs)("div",{style:s.headerContainer,children:[(0,H.jsx)("div",{style:s.titleContainer,children:(0,H.jsx)(r.FormattedMessage,{id:"sites.heading.title",defaultMessage:"Sites"})}),(0,H.jsx)(l.Z,{buttonStyle:s.learnMoreButton,title:(0,H.jsx)(r.FormattedMessage,{id:"sites.heading.learnMore",defaultMessage:"Learn more"}),href:(0,p.UY)("guides.autogeneratedDomains"),analyticsFrom:"sites_settings"})]})}),i&&(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(Ce,{spaceStore:t}),(0,H.jsx)(d.Z,{size:36,isHidden:!0})]}),(0,H.jsx)(Ge,{spaceStore:t})]})}},54801:(e,t,i)=>{i.d(t,{N:()=>a,S:()=>n});var s=i(72141),o=i(46654);function n(e,t){return e.sort(((e,i)=>{const s=e.store.canAdmin();if(s===i.store.canAdmin()){if(t){var o,n;if((null===(o=e.store.getCreatedByStore())||void 0===o?void 0:o.id)===t)return-1;if((null===(n=i.store.getCreatedByStore())||void 0===n?void 0:n.id)===t)return 1}return 0}return s?-1:1}))}function a(e){const{environment:t,store:i}=e;if(!i.pathIsAccessibleAndAlive())return!1;return!!o.YO(i).find((e=>(0,s.$D)(e.permissionItem)&&"none"!==e.permissionItem.role))&&!o.IJ(t,i)}},67181:(e,t,i)=>{i.d(t,{Z:()=>d});var s=i(49085),o=i(72126),n=i(70203),a=i(68373);class r extends s.default{getInitialState(){return{sites:{},sortAscending:!0,sortColumn:void 0}}initializeSiteResultsForSpace(e,t){this.state.sites[e]=t,this.emit()}getSortedSitesForSpace(e,t){const{sortAscending:i,sortColumn:s}=this.state,r=this.state.sites[e];if(r)switch(s){case"page":return o.Xo(r,(e=>n.QaF(e.store.getTitleValue()).toLowerCase()),i?"asc":"desc");case"published-or-created-by":return o.Xo(r,(e=>{const i=e.publishedMetadata.publishedOrCreatedBy,s=i?a.t1.createChildStore(e.store,i):void 0;return null==s?void 0:s.getDisplayName(t).toLowerCase()}),i?"asc":"desc");case"published-date":return o.Xo(r,(e=>e.publishedMetadata.publishedTime),i?"asc":"desc");default:return r}}removeSiteFromSpace(e,t){const i=this.state.sites[e];i&&(this.state.sites[e]=i.filter((e=>e.store.id!==t)),this.emit())}resetSitesForSpace(e){this.state.sites[e]=void 0}}const d=new r},14542:(e,t,i)=>{i.d(t,{EP:()=>a,LU:()=>r,NS:()=>n,SS:()=>o,ZP:()=>l});var s=i(49085);const o="loadingLocalImage",n="uploading",a="downloading",r="loaded";class d extends s.default{getInitialState(){return{loadingMode:r}}}const l=d},96809:(e,t,i)=>{i.d(t,{Z:()=>s});const s=new(i(14542).ZP)},87199:(e,t,i)=>{i.d(t,{k:()=>s});const s=(0,i(9291).defineMessages)({paymentMethodUnverified:{id:"subscriptions.paymentMethodUnverified",defaultMessage:"Your payment is being processed. Please try again when your payment has completed."},otherPaymentMethod:{id:"subscriptions.otherPaymentMethod",defaultMessage:"Other"}})},44041:(e,t,i)=>{i.d(t,{y:()=>y});i(67294);var s=i(47425),o=i(9291),n=i(86572),a=i(47307),r=i(33929),d=i(52533),l=i(80444),c=i(92083),u=i(39343),g=i(87199),p=i(70060),m=i(88893),h=i(35057),f=i(88280),v=i(34583),x=i(64891),b=i(85893);const y=async function(e,t){var i;n.sA(e,{from:t.from,for_subscription_tier:t.for,addOnFeature:t.addOnFeature});if((0,h.QM)()&&["block_limit_sidebar","block_limit_settings","block_limit_banner"].includes(t.from)&&!t.addOnFeature&&(0,p.XA)(e))return void c.Z.setState({open:!0,openedFrom:"upsell",currentTab:"plans",defaultSubtab:void 0,highlightedSetting:void 0});if(!t.addOnFeature&&(0,s.QM)(t.for))return;const y=(0,d.S$)({environment:e})&&"personal"===t.for;if(e.device.isMobileNative){if("ai"===t.addOnFeature){const t=(0,d.Y2)({environment:e})?(0,b.jsx)(o.FormattedMessage,{id:"upsellActions.noIAPForAIWithExternalPurchaseOption",defaultMessage:"This workspace has used all of its free AI responses. Visit on desktop to purchase Notion AI and go unlimited."}):(0,b.jsx)(o.FormattedMessage,{id:"upsellActions.noIAPForAIWithoutExternalPurchaseOption",defaultMessage:"This workspace has used all of its free AI responses. Unfortunately, additional AI responses cannot be purchased on this platform."});return void a.showErrorMessage(t)}if(!y)return}const S=l.default.state.currentSpaceStore;if(!S)return;if(!S.canAdmin())return;await v.bi(e);const C=f.subscriptionDataStoreInstance.state;if(!C)return;if("unsubscribed_admin"!==C.type&&"subscribed_admin"!==C.type)return void(t.dontOpenPlansOnCancel||c.Z.setState({open:!0,openedFrom:"upsell",currentTab:"plans",defaultSubtab:void 0,highlightedSetting:void 0}));if(m.ri(C))return void a.showErrorMessage(r.default.formatMessage(g.k.paymentMethodUnverified));if(m.Q6(C)){const e=(0,b.jsx)(o.FormattedMessage,{id:"upsellActions.referToSalesRep",defaultMessage:"This workspace is part of a managed account. Please contact your account representative to discuss any changes to your subscription."});return void a.showErrorMessage(e)}if(y)return void(e.mobileNative&&S.id&&e.mobileNative.openUpgradeModal(S.id));if("revenueCat"===(null===(i=C.customerData)||void 0===i?void 0:i.activeSubscriptionPlatform)){const e=(0,b.jsx)(o.FormattedMessage,{id:"upsellActions.switchPlanFromInAppPurchase",defaultMessage:"You're currently subscribed through an in-app purchase with Apple. To switch plans, cancel your subscription with Apple first."});return void a.showErrorMessage(e)}const M=m.XX(C);if(t.addOnFeature&&(0,u.Fk)(M)){const e=(0,b.jsx)(o.FormattedMessage,{id:"upsellActions.noAddOnPurchaseDuringFreeTrial",defaultMessage:"Unfortunately, additional {addOn, select, ai {AI responses} other {features}} cannot be purchased while a workspace is on a free trial.",values:{addOn:t.addOnFeature}});a.showErrorMessage(e)}else{if(M&&m.MM(C))return t.addOnFeature?void x.af({environment:e,from:t.from,view:"add_ons",addOnFeature:t.addOnFeature,billingInterval:M.interval,pageSection:t.pageSection}):void x.af({environment:e,from:t.from,view:"plans",temporarySubscriptionTier:t.for,billingInterval:M.interval,pageSection:t.pageSection});{const i=(0,p.px)(e,t.for)?"ai_fifty_percent":void 0;v.I0(e,{subscriptionTier:t.for,from:t.from,addOnFeature:t.addOnFeature,coupon:i,isTrial:t.isTrial})}}}},32856:(e,t,i)=>{i.d(t,{D:()=>n});var s=i(86628),o=i(77080);function n(e){window.__c={n:"ExperimentSwitch"};const{experimentId:t,groups:i,disableExposureLogging:n}=e;return i[function(e){const{experimentId:t,disableExposureLogging:i,defaultGroup:n}=e;return(0,s.VK)((()=>o.default.getEligibleGroup({experimentId:t,defaultGroup:n??"control",disableExposureLogging:i})),[t,i,n])}({experimentId:t,disableExposureLogging:n})]}},91694:(e,t,i)=>{i.d(t,{Z:()=>v});i(67294);var s=i(480),o=i(86628),n=i(24405),a=i(8848),r=i(47425),d=i(97880),l=i(82990),c=i(9291),u=i(74136),g=i(26388),p=i(44041),m=i(70060),h=i(32856),f=i(85893);const v=function(e){let{subscriptionTier:t,mobileStyle:i,desktopStyle:v,analyticsName:x,onClick:b}=e;window.__c={n:"UpsellButton"};const y=(0,n.Fg)(),S=(0,s.O7)(),{device:C}=S,M=C.isIOS&&C.isNative,w=(0,o.VK)((()=>function(e,t){if(!(0,m.R$)())return{};switch(e){case"plus":case"business":case"enterprise":return{color:t.blueColor,background:"light"===t.mode?a.ZP.diffBackground:"rgba(35, 131, 226, 0.2)",fontWeight:l.Z.fontWeight.medium};default:return{}}}(t,y)),[t,y]);if(M)return null;let j;return"personal"===t?j=(0,f.jsx)(c.FormattedMessage,{defaultMessage:"Personal Pro",id:"upgradeButton.personal.text"}):(0,r.eR)(t)?j=(0,f.jsx)(h.D,{experimentId:"upsell_colors",groups:{control:(0,f.jsx)(c.FormattedMessage,{defaultMessage:"Plus",id:"upgradeButton.plus.text"}),on:(0,f.jsx)(c.FormattedMessage,{defaultMessage:"Plus â†—",id:"upgradeButton.plus.textWithArrow"})}}):(0,r.NG)(t)?j=(0,f.jsx)(h.D,{experimentId:"upsell_colors",groups:{control:(0,f.jsx)(c.FormattedMessage,{defaultMessage:"Business",id:"upgradeButton.business.text"}),on:(0,f.jsx)(c.FormattedMessage,{defaultMessage:"Business â†—",id:"upgradeButton.business.textWithArrow"})}}):(0,r.wP)(t)?j=(0,f.jsx)(h.D,{experimentId:"upsell_colors",groups:{control:(0,f.jsx)(c.FormattedMessage,{defaultMessage:"Enterprise",id:"upgradeButton.enterprise.text"}),on:(0,f.jsx)(c.FormattedMessage,{defaultMessage:"Enterprise â†—",id:"upgradeButton.enterprise.textWithArrow"})}}):(0,d.t1)(t),C.isMobile?(0,f.jsx)(u.Z,{mobileStyle:i,children:j}):(0,f.jsx)(g.ZP,{delayThreshold:120,placement:g.ug.Bottom,renderTooltip:()=>(0,f.jsxs)("div",{style:{maxWidth:500},children:[(0,f.jsx)(c.FormattedMessage,{defaultMessage:"Upgrade to use this feature.",id:"upgradeButton.upgrade.tooltip"}),(0,f.jsx)("br",{}),(0,f.jsx)(c.FormattedMessage,{defaultMessage:"Click to learn more.",id:"upgradeButton.learnMore.tooltip"})]}),originGap:6,render:e=>(0,f.jsx)(u.Z,{desktopStyle:v,innerStyle:w,onClick:e=>function(e,t,i,s,o){p.y(s,{from:t,for:i}),o&&o(e)}(e,x,t,S,b),...e,children:j})})}},54669:(e,t,i)=>{i.d(t,{Z:()=>l});i(67294);var s=i(480),o=i(26388),n=i(98742),a=i(44041),r=i(91694),d=i(85893);const l=function(e){window.__c={n:"UpsellGate"};const t=(0,s.O7)(),{render:i,requireUpgradeToTier:l,analyticsName:c,renderUpgradeTooltip:u,onUpgradeClick:g,alwaysAllowClick:p,tooltipPlacement:m,upgradeButtonDesktopStyle:h,upgradeButtonMobileStyle:f}=e;let v,{onClick:x,renderTooltip:b}=e;return l&&(v=(0,d.jsx)(r.Z,{subscriptionTier:l,analyticsName:c,desktopStyle:{display:"inline-block",pointerEvents:"none",...h},mobileStyle:{display:"inline-block",pointerEvents:"none",...f}}),p||(x=e=>{a.y(t,{from:c,for:l}),g&&g(e)},b=u)),(0,d.jsx)(o.ZP,{renderTooltip:b||(()=>null),render:e=>i((0,n.Z)(e,{onClick:x}),v),disableTooltip:!b,placement:m})}},39343:(e,t,i)=>{i.d(t,{Fk:()=>a,nx:()=>r});var s=i(30120),o=i(13991),n=i(7057);function a(e){return!(null==e||!e.trialEnd)&&e.trialEnd>=s.ou.now().toSeconds()}function r(e){const t=function(e){if(!a(e))return;const t=1e3*(null==e?void 0:e.trialEnd);return null!=e&&e.periodEnd&&e.periodEnd>=s.ou.now().toSeconds()&&e.periodEnd<t?e.periodEnd:t}(e);return t?(0,n.Yx)(t,"long",o.SP):void 0}},19255:(e,t,i)=>{i.d(t,{Mg:()=>g});i(30541),i(57658),i(21703);var s=i(67266),o=i.n(s),n=i(5242),a=i.n(n),r=i(15095),d=i(72126),l=i(70203),c=i(97880);let u=function(e){return e[e.removed=-1]="removed",e[e.added=1]="added",e[e.same=0]="same",e}({});function g(e){const{before:t,after:i,isIncompleteAfter:s,insertCursor:n}=e,g={count:0,encoding:{},decoding:{},annotationEncoding:{},annotationDecoding:{}},p=e=>{const t=g.encoding[e];if(t)return t;{const t=String.fromCharCode(g.count);return g.count++,g.encoding[e]=t,g.decoding[t]=e,t}},m=e=>{const t=o()(e),i=g.annotationEncoding[t];if(i)return i;{const i=String.fromCharCode(g.count);return g.count++,g.annotationEncoding[t]=i,g.annotationDecoding[i]=e,i}},h=e=>d.xH(l.lzi(e).map((e=>{const t=r.p4(e[0]).map(p);if(l.km_(e)){const i=l.hDy(e),s=l.I$B(i);s&&(t[0]=m({type:"mention",value:s}),i.forEach((e=>{l.ZAl(e)||l.kuv(e)||l.QVC(e)||(t.unshift(m({type:"start",value:e})),t.push(m({type:"end",value:e})))})))}else if(l.YrK(e)){const i=l.hDy(e),s=l.Ap(i);if(s){t[0]=m({type:"equation",value:s});for(const e of i)l.ZAl(e)||l.kuv(e)||l.QVC(e)||(t.unshift(m({type:"start",value:e})),t.push(m({type:"end",value:e})))}}else if(l.AJd(e)){l.hDy(e).forEach((e=>{t.unshift(m({type:"start",value:e})),t.push(m({type:"end",value:e}))}))}return t}))).join("");if(g.count>65535)throw new Error("This string has way too many different characters.");const f=function(e,t){const i=new(a())({timeout:2,editCost:6}),s=i.main(t,e);return i.cleanupSemantic(s),s}(h(i),h(t)),v=[];let x=[],b=0;const y=s?d.qr(f,(e=>0===e[0]||1===e[0])):0;let S=!1;const C=()=>e.insertedDeletedAnnotationEditId?["+",e.insertedDeletedAnnotationEditId]:["+"],M=()=>e.insertedDeletedAnnotationEditId?["-",e.insertedDeletedAnnotationEditId]:["-"];return f.forEach((e=>{let[t,i]=e;i.split("").forEach((e=>{if(g.decoding[e]){const i=g.decoding[e];t===u.added?v.push([i,[...x,C()]]):t===u.removed&&(!s||b<=y)?v.push([i,[...x,M()]]):(s&&n&&!S&&b===y+1&&(S=!0,v.push(["",[["tc"]]])),v.push([i,x]))}else{const i=g.annotationDecoding[e];if(t===u.added)if("mention"===i.type)v.push([l.qyI,[...x,C(),i.value]]);else if("start"===i.type)x=[...x,i.value];else if("end"===i.type)x=x.filter((e=>!d.Xy(e,i.value)));else if("equation"===i.type){const e=l.xey(i.value),t=l.qZ6(e,[...x,C()]);v.push(t)}else(0,c.t1)(i);else if(t===u.removed){if("mention"===i.type)v.push([l.qyI,[...x,M(),i.value]]);else if("equation"===i.type){const e=l.xey(i.value),t=l.qZ6(e,[...x,M()]);v.push(t)}}else if(t===u.same)if("mention"===i.type)v.push([l.qyI,[...x,i.value]]);else if("start"===i.type)x=[...x,i.value];else if("end"===i.type)x=x.filter((e=>!d.Xy(e,i.value)));else if("equation"===i.type){const e=l.xey(i.value),t=l.qZ6(e,x);v.push(t)}else(0,c.t1)(i)}})),s&&(b+=1)})),l.Zxt(v)}},7189:(e,t,i)=>{i.d(t,{K:()=>n});i(67294);var s=i(45238),o=i(85893);const n=(0,s.I)("arrowDownSmall",{viewBox:"0 0 12 12",svg:(0,o.jsx)("path",{d:"M5.99756 0.850098C5.53564 0.850098 5.21875 1.17236 5.21875 1.65576V7.61768L5.27246 8.7832L4.19287 7.53711L2.98438 6.33398C2.84473 6.18896 2.66211 6.09229 2.42578 6.09229C2.00684 6.09229 1.68994 6.40381 1.68994 6.84424C1.68994 7.04834 1.77051 7.23633 1.93164 7.40283L5.42285 10.8994C5.56787 11.0498 5.78809 11.1357 5.99756 11.1357C6.2124 11.1357 6.42725 11.0498 6.57227 10.8994L10.0688 7.40283C10.23 7.23633 10.3105 7.04834 10.3105 6.84424C10.3105 6.40381 9.99365 6.09229 9.57471 6.09229C9.34375 6.09229 9.16113 6.18896 9.01611 6.33398L7.80762 7.53711L6.72803 8.7832L6.77637 7.61768V1.65576C6.77637 1.17236 6.46484 0.850098 5.99756 0.850098Z"})})},32566:(e,t,i)=>{i.d(t,{k:()=>n});i(67294);var s=i(45238),o=i(85893);const n=(0,s.I)("arrowRightSmaller",{viewBox:"0 0 16 16",svg:(0,o.jsx)("path",{d:"M15.383 8.352a.877.877 0 01-.274.64l-5.156 5.14a.864.864 0 01-.617.266.831.831 0 01-.602-.234.795.795 0 01-.234-.586c0-.12.02-.232.063-.336a.912.912 0 01.187-.273l1.75-1.766 2.914-2.656.274.5-2.711.156H1.484c-.26 0-.471-.078-.632-.234a.851.851 0 01-.235-.617c0-.256.078-.461.235-.618a.856.856 0 01.632-.242h9.493l2.71.164-.273.508L10.5 5.5 8.75 3.727a.946.946 0 01-.188-.266.917.917 0 01-.062-.344c0-.234.078-.43.234-.586a.831.831 0 01.602-.234.79.79 0 01.328.07c.104.047.203.117.297.211l5.148 5.133a.877.877 0 01.274.64z"})})},39226:(e,t,i)=>{i.d(t,{v:()=>n});i(67294);var s=i(45238),o=i(85893);const n=(0,s.I)("blueCircleDot",{viewBox:"0 0 16 16",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("circle",{cx:"8",cy:"8",r:"8",fill:"none",stroke:"#2383E2",children:[(0,o.jsx)("animate",{attributeName:"r",from:"3",to:"8",dur:"1s",begin:"0s",repeatCount:"indefinite"}),(0,o.jsx)("animate",{attributeName:"opacity",from:"1",to:"0",dur:"1s",begin:"0s",repeatCount:"indefinite"})]}),(0,o.jsx)("circle",{cx:"8",cy:"8",r:"3",fill:"#2383E2"})]})})},91315:(e,t,i)=>{i.d(t,{r:()=>n});i(67294);var s=i(45238),o=i(85893);const n=(0,s.I)("circleCheckFilled",{viewBox:"0 0 16 16",svg:(0,o.jsx)("path",{d:"M8 16c4.377 0 8-3.631 8-8 0-4.376-3.631-8-8.008-8C3.624 0 0 3.624 0 8c0 4.369 3.631 8 8 8zm-.886-4.165c-.267 0-.487-.11-.69-.384l-1.97-2.416a.852.852 0 01-.187-.51c0-.352.274-.643.627-.643.228 0 .4.07.596.33l1.592 2.055 3.35-5.38c.148-.236.352-.362.556-.362.345 0 .667.236.667.604 0 .173-.102.353-.196.518l-3.686 5.804c-.165.259-.393.384-.66.384z"})})},40462:(e,t,i)=>{i.d(t,{o:()=>n});i(67294);var s=i(45238),o=i(85893);const n=(0,s.I)("globe2",{viewBox:"0 0 16 16",svg:(0,o.jsx)("path",{d:"M8 15.126C11.8623 15.126 15.0615 11.9336 15.0615 8.06445C15.0615 4.20215 11.8623 1.00293 7.99316 1.00293C4.13086 1.00293 0.938477 4.20215 0.938477 8.06445C0.938477 11.9336 4.1377 15.126 8 15.126ZM3.88477 3.76465C4.56836 3.11523 5.39551 2.61621 6.31836 2.34277C5.83301 2.82812 5.42285 3.51172 5.11523 4.3457C4.63672 4.19531 4.22656 3.99707 3.88477 3.76465ZM9.68848 2.34961C10.6045 2.62305 11.4316 3.11523 12.1084 3.76465C11.7734 4.00391 11.3633 4.19531 10.8848 4.35254C10.5771 3.51172 10.167 2.82812 9.68848 2.34961ZM8.47852 2.56836C9.0459 2.8418 9.56543 3.58008 9.93457 4.58496C9.4834 4.66699 8.99805 4.71484 8.47852 4.73535V2.56836ZM6.06543 4.58496C6.44141 3.58008 6.9541 2.8418 7.52148 2.56836V4.73535C7.00195 4.71484 6.5166 4.66699 6.06543 4.58496ZM2.05273 7.58594C2.14844 6.42383 2.58594 5.35059 3.25586 4.46875C3.67285 4.77637 4.21289 5.04297 4.8418 5.24121C4.66406 5.95215 4.54785 6.74512 4.51367 7.58594H2.05273ZM11.4863 7.58594C11.4521 6.74512 11.3359 5.95215 11.1582 5.24121C11.7871 5.04297 12.3271 4.7832 12.7373 4.46875C13.4141 5.35059 13.8516 6.42383 13.9473 7.58594H11.4863ZM5.49121 7.58594C5.52539 6.84082 5.62793 6.12988 5.78516 5.4873C6.33203 5.59668 6.91309 5.66504 7.52148 5.69238V7.58594H5.49121ZM8.47852 7.58594V5.69238C9.08691 5.66504 9.66797 5.59668 10.2148 5.4873C10.3721 6.12988 10.4746 6.84082 10.5088 7.58594H8.47852ZM2.05273 8.54297H4.51367C4.54785 9.39746 4.66406 10.1973 4.8418 10.915C4.21973 11.1133 3.68652 11.373 3.27637 11.6807C2.59277 10.792 2.14844 9.71191 2.05273 8.54297ZM5.49121 8.54297H7.52148V10.4707C6.91992 10.498 6.33203 10.5664 5.79199 10.6689C5.62793 10.0195 5.51855 9.29492 5.49121 8.54297ZM8.47852 10.4707V8.54297H10.5088C10.4814 9.29492 10.3721 10.0195 10.208 10.6689C9.66797 10.5664 9.08691 10.498 8.47852 10.4707ZM11.1582 10.915C11.3428 10.1973 11.4521 9.39746 11.4863 8.54297H13.9473C13.8516 9.71191 13.4072 10.792 12.7236 11.6807C12.3135 11.373 11.7803 11.1133 11.1582 10.915ZM8.47852 11.4277C8.99121 11.4482 9.47656 11.4961 9.9209 11.5781C9.55176 12.5625 9.03906 13.2939 8.47852 13.5605V11.4277ZM6.0791 11.5781C6.52344 11.4961 7.00879 11.4482 7.52148 11.4277V13.5605C6.96094 13.2939 6.44824 12.5625 6.0791 11.5781ZM3.90527 12.3848C4.24023 12.1523 4.65039 11.9609 5.12207 11.8105C5.42969 12.6309 5.83301 13.3008 6.30469 13.7793C5.40234 13.5059 4.58203 13.0205 3.90527 12.3848ZM10.8779 11.8105C11.3496 11.9609 11.7598 12.1523 12.0947 12.3848C11.418 13.0205 10.5977 13.5059 9.69531 13.7793C10.167 13.3008 10.5703 12.6309 10.8779 11.8105Z"})})},13530:(e,t,i)=>{i.d(t,{s:()=>n});i(67294);var s=i(45238),o=i(85893);const n=(0,s.I)("historyForward",{viewBox:"0 0 14 14",svg:(0,o.jsx)("polygon",{points:"11.14107 6.25324 5.94392 1.0561 7 0 13.471958 6.47196 14 7 13.471958 7.52804 7 14 5.94392 12.94392 11.14107 7.74676 0 7.74676 1.77635684e-15 6.25324"})})},72640:(e,t,i)=>{i.d(t,{W:()=>n});i(67294);var s=i(45238),o=i(85893);const n=(0,s.I)("home",{viewBox:"0 0 18 16",svg:(0,o.jsx)("path",{d:"M4.3584 15.9004H13.6074C14.6943 15.9004 15.3301 15.2646 15.3301 14.2188V7.93652L16.0752 8.55859C16.2598 8.71582 16.4717 8.83203 16.7041 8.83203C17.1484 8.83203 17.4834 8.55176 17.4834 8.11426C17.4834 7.86133 17.3809 7.64941 17.1826 7.47852L15.3301 5.92676V2.95996C15.3301 2.65234 15.1318 2.4541 14.8174 2.4541H13.751C13.4434 2.4541 13.2314 2.65234 13.2314 2.95996V4.16309L10.0664 1.50391C9.42383 0.957031 8.59668 0.957031 7.94727 1.50391L0.824219 7.48535C0.619141 7.64941 0.516602 7.88184 0.516602 8.10059C0.516602 8.50391 0.817383 8.83203 1.30273 8.83203C1.52832 8.83203 1.74023 8.71582 1.9248 8.55859L2.63574 7.9707V14.2188C2.63574 15.2715 3.27148 15.9004 4.3584 15.9004ZM10.9619 9.95996C10.9619 9.63867 10.75 9.42676 10.4287 9.42676H7.57129C7.25 9.42676 7.03809 9.63867 7.03809 9.95996V14.376H4.80273C4.38574 14.376 4.15332 14.1367 4.15332 13.7197V6.69238L8.67871 2.89844C8.88379 2.7207 9.12305 2.7207 9.33496 2.89844L13.8125 6.6582V13.7197C13.8125 14.1367 13.5801 14.376 13.1631 14.376H10.9619V9.95996Z",fill:"#ADACAA"})})},44295:(e,t,i)=>{i.d(t,{I:()=>n});i(67294);var s=i(45238),o=i(85893);const n=(0,s.I)("random",{viewBox:"0 0 14 14",svg:(0,o.jsx)("path",{d:"M9.45002,6.2999567 C8.87013,6.2999567 8.40002,5.8298565 8.40002,5.24995625 C8.40002,4.670056 8.87013,4.1999558 9.45002,4.1999558 C10.0299,4.1999558 10.5,4.670056 10.5,5.24995625 C10.5,5.8298565 10.0299,6.2999567 9.45002,6.2999567 Z M4.55,6.2999567 C3.9701,6.2999567 3.5,5.8298565 3.5,5.24995625 C3.5,4.670056 3.9701,4.1999558 4.55,4.1999558 C5.1299,4.1999558 5.6,4.670056 5.6,5.24995625 C5.6,5.8298565 5.1299,6.2999567 4.55,6.2999567 Z M6.993,0 C10.864,0 14,3.13600534 14,7.000007 C14,10.8639987 10.864,14 6.993,14 C3.129,14 0,10.8639987 0,7.000007 C0,3.13600534 3.129,0 6.993,0 Z M7,12.5999994 C10.094,12.5999994 12.6,10.0939983 12.6,7.000007 C12.6,3.90600567 10.094,1.4000046 7,1.4000046 C3.906,1.4000046 1.4,3.90600567 1.4,7.000007 C1.4,10.0939983 3.906,12.5999994 7,12.5999994 Z M7,10.8499986 C5.369,10.8499986 3.976,9.83499821 3.416,8.4000076 L4.585,8.4000076 C5.075,9.23299796 5.964,9.7999982 7,9.7999982 C8.036,9.7999982 8.932,9.23299796 9.415,8.4000076 L10.584,8.4000076 C10.024,9.83499821 8.631,10.8499986 7,10.8499986 Z"})})},85354:(e,t,i)=>{i.d(t,{u:()=>n});i(67294);var s=i(45238),o=i(85893);const n=(0,s.I)("sites",{viewBox:"0 0 22 17",svg:(0,o.jsx)("path",{d:"M3.305 15.164c-.844 0-1.482-.216-1.914-.648-.433-.428-.649-1.058-.649-1.891V3.117c0-.838.216-1.471.649-1.898.437-.427 1.075-.64 1.914-.64h13.382c.844 0 1.482.213 1.915.64.432.427.648 1.06.648 1.898v5.524l-1.234-1.25a.985.985 0 00-.149-.11.613.613 0 00-.148-.086v-2.57H2.28v7.867c0 .38.097.664.29.852.197.187.476.281.835.281h11.469l-.023 1.54H3.305zm.148-11.836a.68.68 0 00.508-.219.697.697 0 000-1.015.68.68 0 00-.508-.219.714.714 0 00-.523.219.71.71 0 00-.211.508c0 .192.07.362.21.507.147.146.321.22.524.22zm2.305 0c.198 0 .367-.07.508-.21a.705.705 0 000-1.024.68.68 0 00-.508-.219.714.714 0 00-.524.219.71.71 0 00-.21.508.718.718 0 00.734.726zm2.297 0c.198 0 .37-.07.515-.21a.705.705 0 000-1.024.705.705 0 00-.515-.219.705.705 0 00-.516.219.71.71 0 00-.21.508.718.718 0 00.726.726zm7.922 10.695l.078-6.156c.005-.161.073-.265.203-.312.13-.052.25-.024.36.086l4.234 4.336c.125.12.153.247.085.382-.062.13-.174.198-.335.204L19 12.608l1.344 3.11a.374.374 0 01.023.25c-.02.088-.08.153-.18.195l-.773.305a.313.313 0 01-.266-.008.41.41 0 01-.18-.195l-1.265-3.149-1.117 1.133a.372.372 0 01-.398.102c-.146-.047-.217-.157-.211-.329z"})})}}]);