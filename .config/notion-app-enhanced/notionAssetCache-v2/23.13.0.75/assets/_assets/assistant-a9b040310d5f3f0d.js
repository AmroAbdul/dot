"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[8721],{45257:(e,t,i)=>{i.d(t,{Z:()=>l});i(67294);var o=i(480),n=i(24405),s=i(42853),r=i(64921),a=i(85893);function l(e){window.__c={n:"CollectionViewFilterPill"};const{icon:t,title:i,on:l,hasDiff:c,wrapStyle:h,innerStyle:u,hideChevron:p}=e,m=(0,n.Fg)(),g=(0,o.O7)();return(0,a.jsxs)("div",{style:{borderRadius:14,marginRight:6,display:"inline-flex",...c&&{position:"relative"},...h},children:[(0,a.jsxs)(r.Z,{disabled:e.disabled,style:d(Boolean(l),m,u,g.device.isMobile),hoveredStyle:l?{background:m.outlineBlueButtonHoveredBackground}:void 0,pressedStyle:l?{background:m.outlineBlueButtonPressedBackground}:void 0,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,onClick:e.onClick,onDoubleClick:e.onDoubleClick,children:[t,i,!p&&(0,s.i)({width:10,marginLeft:4,marginTop:1,fill:l?m.blueColor:m.lightIconColor})]}),c&&(0,a.jsx)("div",{style:{position:"absolute",top:-2,right:-2,background:"dark"===m.mode?m.accentColors.orange[500]:m.accentColors.orange[300],border:`1px solid ${m.contentBackground}`,width:9,height:9,borderRadius:9}})]})}function d(e,t,i,o){return{fontSize:14,display:"inline-flex",alignItems:"center",justifyContent:"center",whiteSpace:"nowrap",borderRadius:32,height:o?28:24,lineHeight:o?"28px":"24px",padding:"0 8px",border:`1px solid ${t.outlineButtonBorder}`,color:t.mediumTextColor,...e&&{color:t.blueColor,border:`1px solid ${t.filterPillBorder}`,background:t.filterPillBackground},...i}}},87636:(e,t,i)=>{i.d(t,{Z:()=>f});var o=i(67294),n=i(13991),s=i(480),r=i(24405),a=i(22491),l=i(97880),d=i(82990),c=i(17311),h=i(23063),u=i(64921),p=i(26388),m=i(85893);function g(e){window.__c={n:"ActionMenuGroupButton"};const{button:t,isLast:i}=e,n=(0,r.yK)((e=>({button:{display:"flex",alignItems:"center",padding:"4px 6px",fontWeight:d.Z.fontWeight.medium,borderRight:`1px solid ${e.regularDividerColor}`,color:e.actionMenuButtonTextColor,fill:e.actionMenuButtonTextColor},buttonLast:{borderRight:"none"},buttonHovered:{background:e.whiteButtonHoveredBackground},buttonPressed:{background:e.whiteButtonPressedBackground}})),[]);return o.cloneElement(t,{...(0,a.iv)(t.props.style,n.button,i&&n.buttonLast),hoveredStyle:(0,a.iv)(n.buttonHovered,i&&n.buttonLast).style,pressedStyle:n.buttonPressed})}const f=function(e){let{children:t,isVisible:i,position:f,style:b}=e;window.__c={n:"ActionMenuGroup"};const v=(0,s.O7)(),x=(0,r.yK)((e=>({container:{color:e.actionMenuButtonTextColor,fill:e.actionMenuButtonTextColor,fontSize:12,background:e.whiteButtonBackground,boxShadow:e.lightBoxShadow,display:"flex",whiteSpace:"nowrap",borderRadius:c.Z.borderRadius,maxWidth:"calc(100% - 16px)",minHeight:24,overflow:"hidden",pointerEvents:v.device.isMobile?"auto":"none",opacity:v.device.isMobile?1:0,fontFamily:d.Z.getCompositeFontFamily(n.SP).sans,position:"absolute",right:c.Z.horizontal.small,bottom:c.Z.vertical.small,zIndex:2},containerHover:{pointerEvents:"auto",opacity:1},containerTop:{top:c.Z.vertical.small,bottom:void 0}})),[v]),y=o.Children.toArray(t).filter(l.$K),S=y.length;return(0,m.jsx)(h.Z,{isVisible:!0,animationStyle:{opacity:i?1:0},render:()=>(0,m.jsx)("div",{...(0,a.iv)(x.container,b,i&&x.containerHover,"top"===f&&x.containerTop),children:y.map(((e,t)=>{const i=t===S-1;if(e&&"object"==typeof e&&"type"in e){if(e.type===p.ZP&&o.isValidElement(e))return o.cloneElement(e,{render:(t,o)=>{const n=e.props.render(t,o);return(0,m.jsx)(g,{isLast:i,button:n},e.key)}});if(e.type===u.Z&&o.isValidElement(e))return(0,m.jsx)(g,{isLast:i,button:e},e.key)}}))})})}},55031:(e,t,i)=>{i.d(t,{G:()=>h,y:()=>c});var o=i(51454),n=i(28020),s=i(24646),r=i(5162),a=i(4926),l=i(85394),d=i(10388);function c(e,t){const{theme:i,rightEdgeDistance:r,isInPeekRenderer:l}=t,c=t.width??36,u=(0,s.ll)(e,l)-(0,s.vJ)(e);return{position:"absolute",display:"flex",alignItems:"center",justifyContent:"center",background:i.whiteButtonBackground,bottom:h(e,16+a.Z.state),right:r+a.Z.state,width:c,height:c,borderRadius:"100%",fontSize:20,boxShadow:i.lightBoxShadow,zIndex:o.hT,opacity:n.tu.state?0:1,transform:`translateX(-${u}px) translateZ(0)`,transition:`\n\t\t\topacity ${d.nk}ms,\n\t\t\tcolor ${d.nk}ms,\n\t\t\ttransform 200ms\n\t\t`}}function h(e,t){const i=e.device.isMobileNative,o=(0,r.Y)("supportsNativeBottomBar"),n=i&&!o;return e.WindowSizeStore.getSafePaddingBottomCSS(t+(n?l.MOBILE_BOTTOM_BAR_HEIGHT:0))}},11335:(e,t,i)=>{i.d(t,{Z:()=>p});i(67294);var o=i(86628),n=i(24405),s=i(80951),r=i(19255),a=i(32566),l=i(21202),d=i(97880),c=i(68373),h=i(14200),u=i(85893);function p(e){const t=e.propertySchema.type;switch(t){case"title":case"text":return(0,u.jsx)(m,{...e});case"relation":return(0,u.jsx)(g,{propertySchema:e.propertySchema,beforeValue:e.beforeValue,afterValue:e.afterValue,rootStore:e.rootStore});case"checkbox":case"number":case"person":case"file":case"url":case"email":case"phone_number":case"created_time":case"created_by":case"last_edited_time":case"last_edited_by":case"last_visited_time":case"formula":case"rollup":case"select":case"multi_select":case"date":case"button":case"status":case"auto_increment_id":case"location":case"verification":return(0,u.jsx)(f,{...e});default:(0,d.t1)(t)}}function m(e){const t={value:r.Mg({before:e.beforeValue.value,after:e.afterValue.value}),spaceId:e.beforeValue.spaceId};return(0,u.jsx)(h.Z,{value:t,propertySchema:e.propertySchema,rootStore:e.rootStore})}function g(e){window.__c={n:"RelationPropertyDiff"};const{beforeValue:t,afterValue:i,propertySchema:n,rootStore:r}=e,a=(0,o.VK)((()=>s.NT({beforeValue:t.value,afterValue:i.value,propertySchema:n,getRecordModel:r.getRecordModel,getBlockTitle:e=>c.G.createChildStore(r,{table:l.iU,id:e.id}).getPropertyValue("title")})),[t,i,n,r]);return(0,u.jsx)(h.Z,{value:{value:a,spaceId:t.spaceId},propertySchema:{type:"title",name:"Title"},rootStore:r})}function f(e){window.__c={n:"ArrowPropertyDiff"};const t=(0,n.yK)((()=>({arrowDiffWrap:{display:"inline-flex",alignItems:"center"}})),[]);return(0,u.jsxs)("div",{style:t.arrowDiffWrap,children:[(0,u.jsx)(h.Z,{value:e.beforeValue,propertySchema:e.propertySchema,rootStore:e.rootStore}),(0,u.jsx)(b,{}),(0,u.jsx)(h.Z,{value:e.afterValue,propertySchema:e.propertySchema,rootStore:e.rootStore})]})}function b(){window.__c={n:"Arrow"};const e=(0,n.yK)((e=>({container:{padding:"0px 8px"},icon:{width:15,height:15,fill:e.mediumIconColor}})),[]);return(0,u.jsx)("div",{style:e.container,children:(0,a.k)(e.icon)})}},255:(e,t,i)=>{i.d(t,{Z:()=>a});i(67294);var o=i(480),n=i(53465),s=i(73063),r=i(85893);const a=function(e){window.__c={n:"MenuItemRemoveButton"};const t=(0,o.O7)(),i={removeFilterButton:{height:void 0,width:void 0},removeFilterButtonMobile:{marginRight:-12,marginTop:-12,marginBottom:-12,paddingRight:12,paddingTop:12,paddingBottom:12}},{onClick:a,disabled:l}=e,{device:d}=t,c=d.isMobile?{...i.removeFilterButton,...i.removeFilterButtonMobile}:i.removeFilterButton;return(0,r.jsx)(s.Z,{icon:n.X,onClick:a,disabled:l,disableBackground:!0,style:c})}},85394:(e,t,i)=>{i.r(t),i.d(t,{MOBILE_BOTTOM_BAR_HEIGHT:()=>j,default:()=>T});var o=i(67294),n=i(83355),s=i(480),r=i(86628),a=i(24405),l=i(42107),d=i(81846),c=i(57037),h=i(20162),u=i(51454),p=i(83249),m=i(52423),g=i(87531),f=i(43250),b=i(51811),v=i(74948),x=i(5162),y=i(80444),S=i(72653),C=i(64921),M=i(58925),w=i(85893);const j=44;class k extends n.Z{constructor(){super(...arguments),this.canQuickAdd=this.createComputedStore((()=>Boolean(y.default.state.currentSpaceStore&&y.default.state.currentSpaceStore.canEdit())))}renderComponent(){const e=S.Z.state,t=(0,x.Y)("supportsNativeBottomBar"),{isTablet:i}=this.environment.device;if(e)return t?(0,w.jsx)("div",{className:f.alX,children:(0,w.jsx)(Z,{})}):(0,w.jsx)("div",{style:B(e,this.environment,this.theme),className:f.rKl,children:i?this.renderTabletButtons():this.renderPhoneButtons()})}renderPhoneButtons(){return(0,w.jsxs)(o.Fragment,{children:[(0,w.jsx)(P,{}),(0,w.jsx)(Z,{}),this.renderQuickAddPageButton()]})}renderTabletButtons(){return(0,w.jsxs)(o.Fragment,{children:[(0,w.jsx)(P,{}),(0,w.jsx)(Z,{}),this.renderQuickAddPageButton(),(0,w.jsx)(F,{})]})}renderQuickAddPageButton(){return(0,w.jsx)(C.Z,{style:R(this.environment),onClick:()=>{return e=this.environment,v.quickAddPage({environment:e,from:"mobile_bottom_bar"}),void p.nB(e,{itemName:"add_page"});var e},mobileFeedback:!0,disabled:!this.canQuickAdd.state,disabledFeedback:!0,children:(0,l.d)(I(this.theme))})}}k.displayName="MobileBottomBar";const T=k;function R(e){const{WindowSizeStore:t}=e,{isTablet:i}=e.device;return{display:"flex",alignItems:"center",justifyContent:"flex-end",flex:1,paddingRight:t.getSafePaddingRightCSS(18),...i&&{justifyContent:"center",flex:"none",paddingRight:0,width:54,marginRight:"auto"}}}function Z(){window.__c={n:"MobileBottomBarUpdatesButton"};const e=(0,s.O7)(),t=(0,r.VK)((()=>e.device.isTablet),[e]);return(0,w.jsx)(M.Z,{format:t?b.EX.MobileBottomBarTablet:b.EX.MobileBottomBarPhone})}function B(e,t,i){const{WindowSizeStore:o}=t,{isTablet:n}=t.device;return{position:"absolute",left:0,right:0,bottom:0,display:"flex",justifyContent:n?"flex-start":"space-around",height:o.getSafePaddingBottomCSS(j),paddingBottom:o.state.paddingBottomCSS,background:i.contentBackground,borderTop:`1px ${i.darkDividerColor} solid`,zIndex:u.D_,pointerEvents:e?"auto":"none",cursor:"pointer"}}function I(e){return{width:26,fill:e.regularTextColor}}function P(){window.__c={n:"SearchButtonComponent"};const e=(0,a.Fg)(),t=(0,s.O7)(),i=(0,r.VK)((()=>function(e){const{WindowSizeStore:t}=e,{isTablet:i}=e.device;return{display:"flex",alignItems:"center",justifyContent:"flex-start",flex:1,paddingLeft:t.getSafePaddingLeftCSS(18),...i&&{flex:"none",paddingLeft:2,width:54,justifyContent:"center"}}}(t)),[t]);return(0,w.jsx)(C.Z,{style:i,onClick:()=>function(e){g.Kf({environment:e,analyticsFrom:"mobile-bottom-bar"}),p.nB(e,{itemName:"search"})}(t),mobileFeedback:!0,children:(0,c.w)(I(e))})}function F(){window.__c={n:"UndoRedoButtonsComponent"};const e=(0,a.Fg)(),t=(0,s.O7)(),i=(0,r.VK)((()=>function(e){const{WindowSizeStore:t}=e;return{display:"flex",alignItems:"center",justifyContent:"flex-start",flex:"none",paddingLeft:t.getSafePaddingLeftCSS(18),width:54}}(t)),[t]),n=(0,r.VK)((()=>m.L0()),[]),l=(0,r.VK)((()=>m.AZ()),[]);return(0,w.jsxs)(o.Fragment,{children:[(0,w.jsx)(C.Z,{style:i,onClick:()=>function(e){m.Yw(e,!0),p.nB(e,{itemName:"undo"})}(t),mobileFeedback:!0,disabled:!n,disabledFeedback:!0,children:(0,h.O)(I(e))}),(0,w.jsx)(C.Z,{style:{display:"flex",alignItems:"center",justifyContent:"center",flex:"none",width:54,paddingRight:4},onClick:()=>function(e){m.KX(e,!0),p.nB(e,{itemName:"redo"})}(t),mobileFeedback:!0,disabled:!l,disabledFeedback:!0,children:(0,d.Y)(I(e))})]})}},65496:(e,t,i)=>{i.d(t,{Z:()=>k});var o=i(67294),n=i(83355),s=i(9291),r=i(96802),a=i(79698),l=i(82530),d=i(28651),c=i(50627),h=i(94841),u=i(14542),p=i(96809),m=i(87636),g=i(23063),f=i(64921),b=i(12981),v=i(65107),x=i(68785),y=i(32854),S=i(81865),C=i(97496),M=i(56282),w=i(85893);class j extends n.Z{constructor(){super(...arguments),this.lastProxiedUrl=void 0,this.storeTypes={mouseStore:d.Z},this.renderControl=e=>{let{isVisible:t,isRepositioning:i,handleCancelClick:o,handleRepositionClick:n,handleSavePositionClick:r}=e;if(this.props.disabled||p.Z.state.loadingMode!==u.LU)return;const{device:a}=this.environment,{isMobile:l}=a;return(0,w.jsx)(g.Z,{isVisible:!0,animationStyle:{width:T(this.props.store),opacity:t?1:0},render:()=>(0,w.jsx)("div",{style:{position:"absolute",pointerEvents:t?"auto":"none",maxWidth:"100%",top:48},children:(0,w.jsxs)(m.Z,{isVisible:t,position:"bottom",style:{marginRight:this.props.paddingRight,marginLeft:this.props.paddingLeft},children:[!i&&(0,w.jsx)(f.Z,{style:{borderRight:l?"none":void 0,...C.ar},onClick:this.handleChangeCoverClick,children:(0,w.jsx)(s.FormattedMessage,{defaultMessage:"Change cover",id:"pageCover.changeCover.text"})}),!i&&!l&&(0,w.jsx)(f.Z,{style:{...C.ar,borderRight:"none"},onClick:e=>n(e,this.lastProxiedUrl),children:(0,w.jsx)(s.FormattedMessage,{defaultMessage:"Reposition",id:"pageCover.reposition.text"})}),i&&!l&&(0,w.jsx)(f.Z,{style:C.ar,onClick:r,children:(0,w.jsx)(s.FormattedMessage,{defaultMessage:"Save position",id:"pageCover.savePosition.text"})}),i&&!l&&(0,w.jsx)(f.Z,{style:{...C.ar,borderRight:"none"},onClick:o,children:(0,w.jsx)(s.FormattedMessage,{defaultMessage:"Cancel",id:"pageCover.reposition.cancelText"})})]})})})},this.handleChangeCoverClick=e=>{const{intl:t,store:i}=this.props;this.stores.mouseStore.reset();const o=e.target.getBoundingClientRect();a.j({environment:this.environment,intl:t,store:i,rect:o})},this.coverWithRecordStore=this.createComputedStore((()=>this.props.store.getCover()),!0),this.isPersonalHome=this.createComputedStore((()=>(0,h.WE)(this.props.store)))}renderComponent(){const e=this.coverWithRecordStore.getState();if(!e)return;const t=p.Z.state,i=t.loadingMode!==u.LU&&t.loadingMode!==u.SS;return(0,w.jsx)(M.Z,{mouseStore:this.stores.mouseStore,onFlushTemporaryPosition:e=>function(e,t,i){const{imagePosition:o,reset:n}=e;l.createAndCommit({userAction:"PageCover.handleFlushTemporaryPosition",environment:i,perform:e=>{r.Mp({store:t,coverPosition:o,transaction:e}),n()}})}(e,this.props.store,this.environment),renderControl:this.renderControl,source:"page",store:this.props.store,style:{display:"flex",flexDirection:"column",alignItems:"center",height:this.props.height,cursor:"default"},render:n=>(0,w.jsxs)(o.Fragment,{children:[(0,w.jsx)(S.Z,{url:e.cover,isAuthenticated:!0,permissionRecord:e.pointer,width:this.props.proxyWidth,render:(e,o)=>{this.lastProxiedUrl=o;const s={width:"100%",height:this.props.height,objectFit:"cover",opacity:i?.5:1,objectPosition:`center ${100*(1-(n.imagePosition||0))}%`,borderRadius:0},r={width:"100%",height:this.props.height};return(0,w.jsx)(v.B,{src:o,placeholderSrc:i?t.dataURL:void 0,placeholderBehavior:i?"force-show-placeholder":"show-placeholder-if-loading-src",containerStyle:r,imageStyle:s,onLoadComplete:R})}}),i&&(0,w.jsxs)("div",{style:b.I,children:[(0,w.jsx)(x.Z,{style:{width:16,height:16,marginRight:4}}),(0,w.jsx)("div",{style:{minWidth:30,textAlign:"right"},children:(0,w.jsx)(y.Z,{percentage:t.uploadProgress})})]})]})})}}j.displayName="PageCover";const k=(0,s.injectIntl)(j);function T(e){let t;return t=!!e.isFullWidth()?"100%":c.zL,t}function R(){p.Z.reset()}},58925:(e,t,i)=>{i.d(t,{Z:()=>L});i(67294);var o=i(83355),n=i(86628),s=i(24405),r=i(9555),a=i(59078),l=i(79102),d=i(82990),c=i(9291),h=i(19719),u=i(17659),p=i(8055),m=i(98742),g=i(50659),f=i(18514),b=i(51811),v=i(77907),x=i(48451),y=i(50770),S=i(4023),C=i(5162),M=i(62820),w=i(4761),j=i(64921),k=i(31945),T=i(58261),R=i(26388),Z=i(39849),B=i(92955),I=i(14694),P=i(85893);const F={display:"flex",alignItems:"center",justifyContent:"center",width:62,flex:"none"},O={display:"flex",alignItems:"center",justifyContent:"center",flex:1},_={display:"flex",alignItems:"center",justifyContent:"center",flexGrow:0,flexShrink:0,height:"100%",minWidth:34,position:"relative"};class D extends o.Z{willUnmount(){E(this.environment)}renderComponent(){const{device:e,mobileNative:t}=this.environment;if(this.props.format===b.EX.RenderAsPage)return(0,P.jsx)("div",{style:{background:this.theme.popoverBackground},children:(0,y.H)()?(0,P.jsx)(x.LV,{format:this.props.format,onClose:()=>A(this.environment)}):(0,P.jsx)(v.LazyUpdatesPopup,{format:this.props.format,onClose:()=>A(this.environment)})});const i=(0,P.jsx)(c.FormattedMessage,{defaultMessage:"Updates for all pages in this workspace",id:"updatesButton.tooltip"});return(0,P.jsx)(R.ZP,{renderTooltip:()=>(0,P.jsxs)("div",{children:[(0,P.jsx)("div",{children:i}),(0,P.jsx)(T.Z,{style:{color:this.theme.mediumInvertedTextColor},name:"toggleAllUpdates"})]}),originGap:6,placement:S.u.Right,render:i=>(0,P.jsx)(k.ZP,{popupType:e.isMobile?k.Z4.SlideUp:k.Z4.Popup,alignmentToOrigin:S.v.Start,placementToOrigin:S.u.Right,onClick:()=>{return e=this.environment,w.ZP.endSession(),void u.G7({environment:e,newTab:"mentions",shouldTrack:!0});var e},originGap:0,style:{...!e.isMobile&&{width:500,overflow:"hidden"}},isWideTabletWidth:!0,render:()=>(0,y.H)()?(0,P.jsx)(x.LV,{format:this.props.format,onClose:()=>A(this.environment)}):(0,P.jsx)(v.LazyUpdatesPopup,{format:this.props.format,onClose:()=>A(this.environment)}),onClose:()=>{E(this.environment)},isFullWidthOnMobile:!0,preventScaleTransition:!0,preventSlideUpTransition:(null==t?void 0:t.supportsNativeHomeOnPhone())||!1,buttonPopupStore:M.Z,renderOrigin:e=>(0,P.jsx)(V,{format:this.props.format,tooltipEvents:i,buttonPopupEvents:e})})})}}D.displayName="UpdatesButton";const L=D;function V(e){let{tooltipEvents:t,buttonPopupEvents:i,format:o}=e;window.__c={n:"ButtonComponent"};const h=(0,s.Fg)(),p=(0,n.VK)((()=>M.Z.state.open),[]),f=(0,n.VK)((()=>u.aY()),[]),v=(0,n.VK)((()=>(0,y.H)()),[]),x=(0,n.VK)((()=>function(e){return e===b.EX.Sidebar&&M.Z.state.open}(o)),[o]),S=Z.N.Red;if(o===b.EX.MobileBottomBarPhone)return(0,P.jsx)(j.Z,{style:O,mobileFeedback:!0,...i,children:(0,P.jsxs)("div",{style:{position:"relative"},children:[v?(0,a.W)({height:26,width:26,fill:h.regularTextColor}):(0,r.Y)({width:26,fill:h.regularTextColor}),(0,P.jsx)(B.Z,{type:"currentSpace",color:S,style:{position:"absolute",top:-3,right:f<99?-5:-8}})]})});if(o===b.EX.MobileBottomBarTablet)return(0,P.jsx)(j.Z,{style:F,mobileFeedback:!0,...i,children:(0,P.jsxs)("div",{style:{position:"relative"},children:[(0,r.Y)({width:26,fill:h.regularTextColor}),(0,P.jsx)(B.Z,{type:"currentSpace",color:S,style:{position:"absolute",top:-3,right:f<99?-5:-8}})]})});if(o===b.EX.TopbarMobile)return(0,P.jsxs)(j.Z,{style:{..._,marginLeft:2,marginRight:2},mobileFeedback:!0,...i,children:[v?(0,a.W)({height:26,width:26}):(0,r.Y)({width:26}),(0,P.jsx)(B.Z,{type:"currentSpace",color:S,style:{position:"absolute",top:8,right:0}})]});if(o===b.EX.SidebarMobile)return(0,P.jsxs)(j.Z,{style:_,mobileFeedback:!0,...i,children:[v?(0,a.W)({height:26,width:26}):(0,r.Y)({width:26}),(0,P.jsx)(B.Z,{type:"currentSpace",color:S,style:{position:"absolute",top:8,right:0}})]});if(o===b.EX.Sidebar){const e=(0,P.jsx)(c.FormattedMessage,{defaultMessage:"Updates",id:"updatesButton.allUpdates.sidebarButton"}),o=v?(0,a.W)({fill:x?h.regularIconColor:h.mediumIconColor,width:20}):(0,l.Y)({fill:x?h.regularIconColor:h.mediumIconColor,width:20});return(0,P.jsx)(j.Z,{style:{...x&&{fontWeight:d.Z.fontWeight.medium,color:h.regularTextColor},...(0,g.G$)({isMobile:!1})},...(0,m.Z)(t,i),children:(0,P.jsx)(I.Z,{left:(0,P.jsx)("div",{style:{color:x?h.regularTextColor:"inherit"},children:o}),right:(0,P.jsx)(B.Z,{type:"currentSpace",color:S,style:{marginBottom:2,marginLeft:6}}),style:{background:p?h.buttonHoveredBackground:"none"},children:e})})}return null}function E(e){h.nI(e),u.G7({environment:e,newTab:"mentions",shouldTrack:!1})}function A(e){(0,C.Y)("supportsNativeInbox")&&f.__(e)&&f.NW(e)?p.op(e):(E(e),M.Z.setState({...M.Z.state,open:!1}))}},97680:(e,t,i)=>{i.d(t,{Z:()=>g});var o=i(67294),n=i(480),s=i(66897),r=i(97880),a=i(9291),l=i(98742),d=i(4023),c=i(52275),h=i(26388),u=i(70301),p=i(45653),m=i(85893);const g=o.forwardRef(((e,t)=>{window.__c={n:"UserMenuItem"};const{actor:i,userTitle:o,useEmailAsTooltip:g,tooltip:f,tooltipPlacement:b}=e,v=(0,n.O7)(),x=(0,a.useIntl)(),y=i.asActor&&i.isUser()?i.email:void 0,S=g&&y?y:f,C=v.device.isMobile?24:20;let M;return(0,s.YU)(i)?M=(0,m.jsx)(u.Z,{botValue:null==i?void 0:i.asActor,size:C}):(0,s.$S)(i)?M=(0,m.jsx)(p.Z,{userValue:null==i?void 0:i.asActor,size:C}):(0,s.Iq)(i)?M=(0,m.jsx)(p.Z,{userValue:void 0,size:C}):(0,r.t1)(i),(0,m.jsx)(h.ZP,{ref:t,placement:b??d.u.Bottom,alignment:d.v.Start,textWrap:!0,render:t=>(0,m.jsx)(c.Z,{...(0,l.Z)(t,e),icon:M,title:o??(0,s.$4)(x,i),className:"notranslate"}),disableTooltip:!S,renderTooltip:()=>S})}))},56282:(e,t,i)=>{i.d(t,{Z:()=>w});i(67294);var o=i(73935),n=i(83355),s=i(13991),r=i(6740),a=i(49085),l=i(12137),d=i(8848),c=i(22491),h=i(72126),u=i(82990),p=i(63143),m=i(9291),g=i(24677),f=i(28651),b=i(27724);class v extends a.default{getInitialState(){return{showFadeInAnimation:!1,isRepositioning:!1}}}const x=v;var y=i(23063),S=i(6685),C=i(85893);class M extends n.Z{constructor(){super(...arguments),this.storeTypes={focusStore:a.default.createClass(!1),mouseStore:f.Z,withImageRepositioningStore:x},this.renderDraggable=()=>(0,C.jsx)(S.Z,{onDraggableDragStart:this.handleDragStart,onDraggableDragMove:this.handleDragMove,onDraggableDragEnd:this.handleDragEnd,onDraggableDragCancel:this.handleDragCancel,disabled:!this.isRepositioning(),render:e=>(0,C.jsx)("div",{...(0,c.iv)(this.getDragContainerStyle()),...e,children:this.props.render({imagePosition:this.getRenderedCoverPosition(),isRepositioning:this.isRepositioning(),showFadeInAnimation:!1})})}),this.shouldBeActiveStore=this.createComputedStore((()=>0===b.default.state.stores.length)),this.handleFocus=e=>{const t=e.target;void 0!==t&&t instanceof HTMLElement&&(0,r.E)(t)&&this.stores.focusStore.setState(!0)},this.handleBlur=e=>{this.stores.focusStore.setState(!1)},this.handleMouseMove=e=>{this.mouseStore.setState({...this.mouseStore.state,mouseEntered:!0})},this.handleMouseLeave=e=>{this.mouseStore.setState({...this.mouseStore.state,mouseEntered:!1})},this.handleMouseMoveThrottled=(0,h.P2)(this.handleMouseMove,100),this.handleMouseLeaveDebounced=(0,h.Ds)(this.handleMouseLeave,100),this.handleWindowMouseDown=e=>{const t=o.findDOMNode(this);t&&!t.contains(e.target)&&this.isRepositioning()&&this.props.onFlushTemporaryPosition({imagePosition:this.getRenderedCoverPosition(),reset:()=>{this.mouseStore.reset(),this.stores.withImageRepositioningStore.reset()}})},this.handleRepositionClick=(e,t)=>{g.ZH(this.environment);const i=new Image;i.onload=()=>{this.stores.withImageRepositioningStore.setState({...this.stores.withImageRepositioningStore.state,isRepositioning:!0,image:i})},t&&(i.src=t)},this.handleCancelClick=e=>{this.stores.withImageRepositioningStore.reset()},this.handleSavePositionClick=e=>{this.props.onFlushTemporaryPosition({imagePosition:this.getRenderedCoverPosition(),reset:()=>{this.stores.withImageRepositioningStore.reset()}})},this.handleDragStart=e=>{const t=this.isRepositioning(),{image:i}=this.stores.withImageRepositioningStore.state;if(i&&t){const e=o.findDOMNode(this);if(e&&e instanceof Element){const t=e.getBoundingClientRect().width/i.width*i.height,o=this.getRenderedCoverPosition();this.stores.withImageRepositioningStore.setState({...this.stores.withImageRepositioningStore.state,startDragImageScreenHeight:t,startDragRenderedPosition:o})}}},this.handleDragMove=e=>{if(this.isRepositioning()){const{startDragRenderedPosition:t,startDragImageScreenHeight:i}=this.stores.withImageRepositioningStore.state,o=e.diffY/(i||0)+(t||0);this.stores.withImageRepositioningStore.setState({...this.stores.withImageRepositioningStore.state,temporaryPosition:(0,h.NM)((0,l.Z)(o,0,1),4)})}},this.handleDragEnd=()=>{this.stores.withImageRepositioningStore.setState({...this.stores.withImageRepositioningStore.state,startDragImageScreenHeight:void 0,startDragRenderedPosition:void 0})},this.handleDragCancel=()=>{this.stores.withImageRepositioningStore.setState({...this.stores.withImageRepositioningStore.state,startDragImageScreenHeight:void 0,startDragRenderedPosition:void 0})}}didMount(){super.didMount(),window.addEventListener("mousedown",this.handleWindowMouseDown)}willUnmount(){super.willUnmount(),window.removeEventListener("mousedown",this.handleWindowMouseDown)}UNSAFE_willMountOrUpdate(){this.isRepositioning()&&!this.shouldBeActiveStore.state&&this.stores.withImageRepositioningStore.reset()}renderComponent(){const{device:e}=this.environment,{style:t}=this.props,{isMobile:i}=e,o=this.isRepositioning(),{mouseEntered:n}=this.mouseStore.state,s=this.stores.focusStore.state;return(0,C.jsxs)("div",{onFocus:this.handleFocus,onBlur:this.handleBlur,onMouseEnter:this.handleMouseMoveThrottled,onMouseMove:this.handleMouseMoveThrottled,onMouseLeave:this.handleMouseLeaveDebounced,...(0,c.iv)({position:"relative",width:"100%"},t),children:[this.renderDraggable(),this.renderDragMessage(),this.props.renderControl({handleRepositionClick:this.handleRepositionClick,handleSavePositionClick:this.handleSavePositionClick,handleCancelClick:this.handleCancelClick,isVisible:i||n||s||o,isRepositioning:o})]})}renderDragMessage(){const{isRepositioning:e}=this.stores.withImageRepositioningStore.state;if(!this.props.small)return(0,C.jsx)(y.Z,{isVisible:!0,animationStyle:{opacity:e?1:0},render:()=>(0,C.jsx)("div",{style:{background:d.ZP.blackWithAlpha(.4),borderRadius:4,color:d.ZP.white,fontSize:12,fontFamily:u.Z.getCompositeFontFamily(s.SP).sans,width:180,left:"calc(50% - 90px)",padding:"0.3em 1.5em 0.3em",pointerEvents:"none",position:"absolute",top:"calc(50% - 10px)",textAlign:"center"},"aria-hidden":!e,children:(0,C.jsx)(m.FormattedMessage,{defaultMessage:"Drag image to reposition",id:"withImageRepositioning.dragImage.text"})})})}isRepositioning(){return this.stores.withImageRepositioningStore.state.isRepositioning}getRenderedCoverPosition(){const{temporaryPosition:e}=this.stores.withImageRepositioningStore.state;return(0,h.hj)(e)?e:function(e,t){if("gallery"===e||"board"===e){const e=t.getFormat().card_cover_position;if((0,h.hj)(e))return e}const i=.5;if(t.isCollectionView()){const e=t.getCollectionViewCollectionStore();if(e){const t=e.getFormat().collection_cover_position;return(0,p.z4)(t)?i:t}}const o=t.getFormat().page_cover_position;if((0,h.hj)(o))return o;return i}(this.props.source,this.props.store)}get mouseStore(){return this.props.mouseStore||this.stores.mouseStore}getDragContainerStyle(){return{width:"100%",cursor:this.isRepositioning()?"move":"inherit"}}}M.displayName="WithImageRepositioning";const w=M},61679:(e,t,i)=>{i.d(t,{$K:()=>v,Ar:()=>u,Cq:()=>M,bU:()=>g,cx:()=>x,hy:()=>f,i2:()=>y,kg:()=>S,mZ:()=>b,rO:()=>C,us:()=>m});var o=i(94184),n=i.n(o),s=i(67294),r=i(60177),a=i(64338),l=i(24405),d=i(73420),c=i(97053),h=i(85893);function u(e){let{children:t,type:i,gap:o,withBottomPadding:s,style:r}=e;window.__c={n:"Layout"};const a=(0,c.Bt)(i);return(0,h.jsx)("div",{className:n()("layout",{"layout-wide":"wide"===i,"layout-wide-right-margin-expanded":"wide-right-margin-expanded"===i,"layout-side-peek":"side-peek"===i,"layout-center-peek":"center-peek"===i,"layout-home":"home"===i,"layout-home-phone":"home-phone"===i,"layout-phone":"phone"===i,"layout-tablet":"tablet"===i,"layout-template-preview":"template-preview"===i,"layout-chat":"chat"===i}),style:{paddingBottom:s?a:void 0,gap:o,...r},children:t})}const p="layout-nested-grid",m="hide-scrollbar";function g(e){return(0,h.jsx)("div",{className:n()("layout-content",e.className),style:e.style,children:e.children})}function f(e){return(0,h.jsx)("div",{className:"layout-full",style:e.style,children:e.children})}function b(e){return(0,h.jsx)("div",{className:"layout-margin-left",children:e.children})}function v(e){return(0,h.jsx)("div",{className:"layout-margin-right",children:e.children})}const x=(0,s.forwardRef)((function(e,t){return(0,h.jsx)("div",{className:n()(p,e.className),onClick:e.onClick,style:e.style,role:e.role,id:e.id,"aria-labelledby":e["aria-labelledby"],ref:t,children:e.children})}));function y(e){return(0,h.jsx)("div",{className:n()(p,"layout-margin-scrollable",{[m]:e.hideScrollbar}),style:e.style,children:(0,h.jsx)(g,{children:e.children})})}function S(e){let{items:t,style:i}=e;window.__c={n:"LayoutTabs"};const[o,n]=s.useState(0),c=(0,s.useRef)([]),u=(0,r.Dl)();(0,a.q7)(null==u?void 0:u.domLock);const p=(0,l.yK)((e=>({icon:{width:16,height:16,fill:"currentColor"},label:{fontSize:14,fontWeight:600},tab:"centered"===i?{cursor:"pointer",border:"none",padding:"6px 12px",borderRadius:20,color:e.text.secondary,background:"none"}:{cursor:"pointer",border:"none",borderBottom:"2px solid",borderColor:"transparent",padding:"6px 8px 12px",color:e.text.secondary,background:"none"},tabSelected:"centered"===i?{color:e.text.primary,background:e.tint.regular}:{color:e.text.primary,borderColor:e.regularTextColor}})),[i]),m=(0,s.useId)(),f=(0,s.useCallback)((e=>`${m}-tab-${e}`),[m]),b=(0,s.useCallback)((e=>`${m}-tabpanel-${e}`),[m]),v=(0,s.useCallback)((e=>{let i;var s;("ArrowLeft"===e.key?(e.preventDefault(),i=(o+t.length-1)%t.length):"ArrowRight"===e.key&&(e.preventDefault(),i=(o+1)%t.length),void 0!==i)&&(n(i),null===(s=c.current[i])||void 0===s||s.focus())}),[o,t.length]);return(0,h.jsxs)(x,{children:[(0,h.jsx)(g,{children:(0,h.jsx)("div",{role:"tablist",children:(0,h.jsx)(d.X2,{justifyContent:"centered"===i?"center":"flex-start",children:t.map(((e,t)=>{var i;return(0,h.jsx)("button",{ref:e=>{e&&(c.current[t]=e)},id:f(t),role:"tab","aria-controls":b(t),"aria-selected":t===o,tabIndex:t===o?void 0:-1,onKeyDown:v,style:{...p.tab,...t===o&&p.tabSelected},onClick:e=>{e.stopPropagation(),n(t)},children:(0,h.jsxs)(d.X2,{gap:4,alignItems:"center",children:[null===(i=e.icon)||void 0===i?void 0:i.call(e,p.icon),e.label&&(0,h.jsx)("div",{style:p.label,children:e.label})]})},e.key)}))})})}),(0,h.jsx)(x,{id:b(o),role:"tabpanel","aria-labelledby":f(o),children:t[o]?t[o].children:null})]})}function C(e){return(0,h.jsx)("div",{className:"layout-column",style:{"--min-column-width":`${e.minWidth}px`,...e.style},children:e.children})}function M(e){return(0,h.jsxs)(C,{minWidth:e.minWidth,children:[e.left,e.right]})}},97053:(e,t,i)=>{i.d(t,{Bt:()=>M,Nr:()=>y,Qg:()=>C,WJ:()=>w,h9:()=>x,m4:()=>v,xC:()=>S});var o=i(480),n=i(97511),s=i(86628),r=i(41432),a=i(61045),l=i(57819),d=i(10906),c=i(92650),h=i(19124),u=i(12534),p=i(61931),m=i(16772),g=i(19111),f=i(94896),b=i(17963);function v(e){(0,u.ZP)({event:e,context:u.Af.EditorMouseDown,callback:()=>{}})}function x(e){(0,u.ZP)({event:e,context:u.Af.EditorClick,callback:()=>{}})}function y(e){return(0,s.VK)((()=>Boolean(b.Z.state.pageMap[e.id])||f.Z.state.pages.has(e.id)),[e.id])}function S(e,t){const i=(0,o.O7)(),r=(0,n.l)(),a=y(e),l=C(e);return(0,s.VK)((()=>{const o=i.currentUser.isLoggedIn(),n=r&&r.publicEditModeStore.state;return Boolean(e&&t&&e.isDefined()&&!e.isLocked()&&e.canEdit()&&!e.hasContent()&&o&&(!(null!=n&&n.hasPublicPermission)||"edit"===(null==n?void 0:n.permission))&&!a&&t.state.ready&&!l&&(!(0,h.GD)(n)||"completionPopup"!==m.default.state.type))}),[i,l,t,r,a,e])}function C(e){return(0,s.VK)((()=>{if(e.isCollectionView()){const t=e.getCollectionViewSourceCollectionStore();return!!t&&t.isSyncedCollection()}return e.isType(r.Ti.externalObjectInstancePage)}),[e])}function M(e){const{device:t,WindowSizeStore:i}=(0,o.O7)(),n=(0,s.VK)((()=>{const e=i.state.height,o=t.isMobile&&g.Z.state.open?e:0;return a._4()+o}),[i,t.isMobile]);return(0,s.VK)((()=>Boolean((0,l.RR)(m.default.state))?600:"home-phone"===e?p.jq:t.isTablet?380:t.isIOS?Math.max(350,n):t.isMobile?400:"side-peek"===e||"center-peek"===e?80:"home"===e?p.XX:"30vh"),[t,n,e])}function w(e){const t=(0,o.O7)(),i=(0,s.VK)((()=>(0,c.fg)(t,e)),[t,e]);return(0,s.VK)((()=>i&&!e.isFullWidth()?(0,c.gC)(t,(0,d.en)(e),(0,d.Ks)(e)):0),[t,i,e])}},8319:(e,t,i)=>{i.d(t,{z:()=>W,Z:()=>z});var o=i(67294),n=i(83355),s=i(47453),r=i(72126),a=i(97880),l=i(9291),d=i(45257),c=i(75024),h=i(49085);class u extends h.default{getInitialState(){return{isMenuOpen:!1,inputTemporaryValue:"",indexToReplace:void 0,popupOriginRect:void 0}}}const p=u;var m=i(42922),g=i(52275),f=i(89728),b=i(53437),v=i(72495),x=i(75689),y=i(91642),S=i(480),C=i(86628),M=i(68626),w=i(91155),j=i(23586),k=i(87279),T=i(29798),R=i(72087),Z=i(78140),B=i(32163),I=i(43765),P=i(40721),F=i(47082),O=i(85893);const _={input:{marginTop:8,marginLeft:8,marginRight:8,boxSizing:"border-box",width:"auto"},menu:{width:250,maxHeight:"40vh"},inputMenu:{maxHeight:"20vh"}};class D extends n.Z{constructor(){super(...arguments),this.storeTypes={requestStore:R.Z,menuListStore:T.Z},this.CLASS_COMPONENT_CONVERSION_DO_NOT_TOUCH_renderRequest=(e,t,i)=>(0,O.jsx)(N,{error:e,data:t,ready:i,labelText:this.props.labelText,value:this.props.value,renderResultMenuItem:this.props.renderResultMenuItem,onConfirm:this.props.onConfirm,menuListStore:this.stores.menuListStore})}renderComponent(){const{value:e,items:t,performRequest:i}=this.props,{requestStore:o}=this.stores,n={query:e,current:t};return(0,O.jsx)(Z.Z,{...A(this.environment,this.props.onDismiss,this.props.labelText,this.props.value,this.props.items,this.props.onChange,this.props.renderToken,this.props.onRemove,this.props.onClear,this.props.disabled),children:(0,O.jsx)(j.Z,{debounce:100,requestStore:o,request:n,performRequest:i,render:this.CLASS_COMPONENT_CONVERSION_DO_NOT_TOUCH_renderRequest})})}}D.displayName="SearchTokenInputMenu";const L=D;function V(e){const{device:t}=e;return t.isMobile}function E(e){let{labelText:t,value:i,items:o,disabled:n,onChange:s,renderToken:a,onRemove:l,onClear:d}=e;window.__c={n:"TokenInputComponent"};const c=(0,S.O7)(),h=o.map((e=>a(e,{onRemove:()=>l(e)})));return(0,O.jsx)(F.Z,{focus:!V(c)||void 0,focusAfterAnimation:!0,format:F.U.FilterValue,tokens:h,placeholder:t.tokenInputPlaceholder,onRemoveLastToken:()=>function(e,t){const i=r.Z$(e);i&&t(i)}(o,l),onClearButtonClick:d,value:i,onChange:s,showClearButton:!0,disabled:Boolean(n),style:_.inputMenu})}function A(e,t,i,o,n,s,r,a,l,d){if(V(e)){return{menuType:k.og.Modal,title:i.title,right:(0,O.jsx)(P.DoneMenuText,{}),onClickRight:t,header:(0,O.jsx)(E,{labelText:i,value:o,items:n,disabled:d,onChange:s,renderToken:r,onRemove:a,onClear:l})}}return{menuType:k.og.Popup,onClickOutside:t,header:(0,O.jsx)(E,{labelText:i,value:o,items:n,disabled:d,onChange:s,renderToken:r,onRemove:a,onClear:l}),..._.menu}}function N(e){let{error:t,data:i,ready:o,labelText:n,value:s,renderResultMenuItem:r,onConfirm:a,menuListStore:d}=e;window.__c={n:"RequestComponent"};const c=(0,C.qz)(d,T.Z),h=e=>(0,O.jsx)(v.Z,{...e,title:n.resultSectionTitle,loading:!o});if(t)return M.log({level:"error",from:n.componentDebugName,type:"requestFailed",error:(0,w.Ui)(t),data:{miscDataToConvertToString:{query:s}}}),(0,O.jsx)(h,{children:(0,O.jsx)(I.Z,{title:(0,O.jsx)(l.FormattedMessage,{defaultMessage:"Something went wrong.",id:"search.inputMenu.errorMessage"})})});if(!i)return(0,O.jsx)(h,{children:(0,O.jsx)(I.Z,{title:(0,O.jsx)(l.FormattedMessage,{defaultMessage:"Loading…",id:"search.inputMenu.loading.message"})})});if(i&&0===i.length)return(0,O.jsx)(h,{children:(0,O.jsx)(I.Z,{title:(0,O.jsx)(l.FormattedMessage,{defaultMessage:"No results found.",id:"search.inputMenu.noResults.message"})})});const u={key:"results",items:i.map((e=>function(e,t,i){return{key:e,action:()=>i(e),render:i=>t(e,i)}}(e,r,a))),render:h};return(0,O.jsx)(B.Z,{type:B.i.Vertical,store:c,initialFocus:0,sections:[u]})}let W=function(e){return e.Button="Button",e.Section="Section",e.Pill="Pill",e}({});class U extends n.Z{constructor(){super(...arguments),this.animationFrame=void 0,this.origin=o.createRef(),this.storeTypes={componentStore:p},this.renderMobileFilterSummary=e=>{const{title:t,items:i,renderItemForSummary:n}=this.props,{disableFilters:s}=e,r=X(this.environment,this.props.mode),a={...c.mK,...r.summary},l=i.length-1,d=(0,O.jsx)("ul",{style:a,children:i.map(((e,t)=>(0,O.jsx)("li",{style:r.summaryItem,children:(0,O.jsxs)(o.Fragment,{children:[n(e),t!==l&&","," "]})},e)))});return(0,O.jsx)(x.Z,{disabled:s,onClick:this.handleMenuOpenMobile,onClickClear:()=>K(this.props.onChange),label:t,title:d})},this.renderMenu=()=>{const{renderToken:e,renderFooter:t,allowApplyBatchSelection:i}=this.props,{componentStore:{state:o}}=this.stores;return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(L,{...this.props,value:o.inputTemporaryValue,onChange:this.handleMenuInputChange,onDismiss:this.handleMenuClose,onConfirm:this.handleItemConfirm,onClear:()=>{this.handleClearTemporary(),K(this.props.onChange)},onRemove:e=>q(e,this.props.items,this.props.onChange),renderToken:e}),t&&(0,O.jsxs)(v.Z,{topBorder:!0,style:{padding:6,justifyContent:"space-between",display:"flex"},children:[(0,O.jsx)(f.Z,{onClick:()=>{K(this.props.onChange)},children:(0,O.jsx)(l.FormattedMessage,{id:"searchTokenFilter.clearButton",defaultMessage:"Clear"})}),i&&(0,O.jsx)(m.Z,{onClick:()=>{this.handleMenuClose("applyButton")},children:(0,O.jsx)(l.FormattedMessage,{id:"searchTokenFilter.applyButton",defaultMessage:"Apply"})})]})]})},this.handleMenuOpen=e=>{const{onMenuOpen:t}=this.props;t&&t(),this.scheduleMeasurement(void 0,(t=>({...t,isMenuOpen:!0,indexToReplace:e})))},this.handleMenuOpenMobile=()=>{const{componentStore:e}=this.stores;e.setState({...e.state,isMenuOpen:!0})},this.handleMenuClose=e=>{const{onMenuDismiss:t}=this.props,{componentStore:i}=this.stores;this.clearInput(),i.setState({...i.state,isMenuOpen:!1,indexToReplace:void 0}),t&&t(e)},this.handleClearTemporary=()=>{const{componentStore:e}=this.stores;e.setState({...e.state,inputTemporaryValue:""})},this.handleItemConfirm=e=>{const{items:t}=this.props,{componentStore:i}=this.stores,{indexToReplace:o}=i.state;"number"==typeof o&&o<t.length?function(e,t,i,o){const n=i.slice(0,e).concat(t,i.slice(e+1));o(n)}(o,e,this.props.items,this.props.onChange):t.includes(e)&&W.Pill?H(e,this.props.items,this.props.onChange):function(e,t,i){const o=t.concat(e);i(r.jj(o))}(e,this.props.items,this.props.onChange),this.props.keepInputOnItemConfirm||this.clearInput()},this.handleMenuInputChange=e=>{const{componentStore:t}=this.stores,{target:i}=e;t.setState({...t.state,inputTemporaryValue:String(i.value)})},this.scheduleMeasurement=(e,t)=>{this.animationFrame=requestAnimationFrame(this.measureOriginRect(t))},this.measureOriginRect=e=>t=>{const{componentStore:i}=this.stores;if(!this.origin)return;if(!this.origin.current)return;const o=e?e(i.state):i.state;i.setState({...o,popupOriginRect:this.origin.current.getBoundingClientRect()})},this.isMenuOpen=()=>{const{componentStore:{state:e}}=this.stores;return e.isMenuOpen},this.clearInput=()=>{const{componentStore:e}=this.stores;e.setState({...e.state,inputTemporaryValue:"",indexToReplace:void 0})}}didMount(){window.addEventListener("resize",this.scheduleMeasurement)}willUnmount(){window.removeEventListener("resize",this.scheduleMeasurement),this.animationFrame&&(cancelAnimationFrame(this.animationFrame),this.animationFrame=void 0)}didUpdate(e){(e.items.length!==this.props.items.length||e.mode!==this.props.mode)&&this.scheduleMeasurement()}renderComponent(){const{device:e}=this.environment,{mode:t}=this.props;return e.isMobile?this.renderMobile(t):this.renderDesktop(t)}renderDesktop(e){const{title:t,disabled:i}=this.props,{componentStore:{state:o}}=this.stores,n=i||o.isMenuOpen;let s;const r=(()=>e===W.Section?(s=t,this.renderSectionOrigin()):e===W.Button?this.renderButtonOrigin():e===W.Pill?this.renderPillOrigin():void(0,a.t1)(e))();return(0,O.jsxs)(y.Z,{title:s,marginAfter:e===W.Section,style:X(this.environment,this.props.mode).sectionMenuItem,children:[e!==W.Pill&&this.renderFilters({disableFilters:n,showLabel:!1}),r,(0,O.jsx)(b.ZP,{popupType:b.ZP.PopupType.Popup,placementToOrigin:b.ZP.Placement.Bottom,alignmentToOrigin:b.ZP.Alignment.Start,open:this.isMenuOpen(),originRect:o.popupOriginRect,render:()=>this.renderMenu(),onDismiss:this.handleMenuClose,keepFocus:!0,preventScaleTransition:!0})]})}renderButtonOrigin(){const{icon:e,title:t,disabled:i,focused:o}=this.props,n=X(this.environment,this.props.mode),s=$(this.theme),r={...n.menuItem,...s.buttonMenuItem};return(0,O.jsx)("div",{ref:this.origin,style:n.menuItemWrapper,children:(0,O.jsx)(g.Z,{disabled:i||this.isMenuOpen(),icon:e(n.icon),title:t,focused:o,onClick:e=>this.handleMenuOpen(),style:r})})}renderPillOrigin(){const{icon:e,title:t,disabled:i,iconStyles:o}=this.props,n=X(this.environment,this.props.mode),s=this.props.mode===W.Pill&&this.props.hasItemsSelected;return(0,O.jsx)("div",{ref:this.origin,style:n.menuItemWrapper,children:(0,O.jsx)(d.Z,{on:s,icon:e({...n.icon,...o}),title:(0,O.jsx)("span",{children:t}),onClick:e=>this.handleMenuOpen(),wrapStyle:{opacity:i?.4:1}})})}renderSectionOrigin(){const{addItemLabel:e,disabled:t}=this.props,i=X(this.environment,this.props.mode),n=$(this.theme);return(0,O.jsxs)(o.Fragment,{children:[(0,O.jsx)("div",{ref:this.origin,style:i.menuItemWrapper}),(0,O.jsx)(g.Z,{disabled:t||this.isMenuOpen(),icon:(0,s.R)(i.iconSmall),title:e,focused:!1,onClick:e=>this.handleMenuOpen(),style:{...i.appendListItemButton,...n.appendListItemButton}})]})}renderMobile(e){const{disabled:t}=this.props,i=t||this.isMenuOpen(),o=e===W.Section?this.renderMobileFilterSummary({disableFilters:i}):this.renderMobileButtonOrigin({disableFilters:i});return(0,O.jsx)(b.ZP,{popupType:b.ZP.PopupType.SlideUp,open:this.isMenuOpen(),origin:o,render:this.renderMenu,onDismiss:this.handleMenuClose,keepFocus:!0})}renderMobileButtonOrigin(e){const{icon:t,title:i}=this.props,o=X(this.environment,this.props.mode);return(0,O.jsx)(g.Z,{disabled:e.disableFilters,focused:!1,icon:t({...o.icon}),title:i,onClick:e=>this.handleMenuOpenMobile()})}renderFilters(e){const{items:t,renderFilter:i}=this.props,{device:o}=this.environment,n=t.map(((t,n)=>(0,O.jsx)("li",{children:i(t,{disabled:e.disableFilters,onRemove:()=>q(t,this.props.items,this.props.onChange),onClick:()=>o.isMobile?this.handleMenuOpenMobile():this.handleMenuOpen(n)})},`${t}_${n}`)));return(0,O.jsx)("ul",{style:c.mK,children:n})}}U.displayName="SearchTokenFilter";const z=U;function H(e,t,i){i(t.filter((t=>t!==e)))}function K(e){e([])}function $(e){return{buttonMenuItem:{color:e.mediumTextColor},appendListItemButton:{color:e.lightTextColor}}}function q(e,t,i){H(e,t,i)}function X(e,t){return{menuItem:{minHeight:void 0,paddingTop:e.device.isMobile?12:4,paddingBottom:e.device.isMobile?12:4},menuItemWrapper:{display:"flex"},sectionMenuItem:{display:"flex"},appendListItemButton:{minHeight:void 0,paddingTop:4,paddingBottom:4,fontSize:c.yv(e,"UIRegular")},icon:{height:16,width:16,marginRight:"Pill"===t?6:-2,fill:"currentColor"},iconSmall:{height:12,width:12},summary:{display:"inline"},summaryItem:{display:"inline"}}}},75689:(e,t,i)=>{i.d(t,{Z:()=>c});i(67294);var o=i(480),n=i(24405),s=i(82990),r=i(52275),a=i(24006),l=i(255),d=i(85893);const c=function(e){window.__c={n:"SearchFilterSummaryMenuItem"};const{disabled:t,label:i,title:s,onClick:a,isToggle:l,isToggleActive:c,onClickClear:p,...m}=e,g=(0,n.Fg)(),f=(0,o.O7)(),b=function(e){return{menuItemLabel:{color:e.lightTextColor}}}(g),v=h(f),x=(0,d.jsx)("span",{style:b.menuItemLabel,children:i});return(0,d.jsx)(r.Z,{focused:!1,...m,inline:l,disabled:t,icon:x,title:s,right:(0,d.jsx)(u,{disabled:!!t,isToggle:!!l,isToggleActive:!!c,onClick:a,onClickClear:p}),onClick:a,dontShrinkIcon:!0,dontShrinkRight:!0,shouldWrapTitle:!0,style:v.menuItem,desktopIconStyle:v.menuItemLabel})};function h(e){return{menuItem:{background:void 0,minHeight:void 0,fontSize:e.device.isMobile?s.Z.fontSize.UISmall.mobile:s.Z.fontSize.UIRegular.desktop,paddingTop:e.device.isMobile?12:4,paddingBottom:e.device.isMobile?12:4},labeledMenuItemTitle:{display:"inline-flex",alignItems:"center"},menuItemLabel:{marginTop:0},rightWrapper:{display:"flex",alignItems:"center",marginTop:"-50%",marginBottom:"-50%",height:44}}}function u(e){let{disabled:t,isToggle:i,isToggleActive:n,onClick:s,onClickClear:r=(()=>{})}=e;window.__c={n:"RightComponent"};const c=h((0,o.O7)()).rightWrapper;return i?(0,d.jsx)("div",{style:c,children:(0,d.jsx)(a.Z,{on:!!n,onClick:s})}):(0,d.jsx)(l.Z,{disabled:t,onClick:r})}},91642:(e,t,i)=>{i.d(t,{Z:()=>s});i(67294);var o=i(72495),n=i(85893);const s=function(e){const t={desktopTitleStyle:{marginBottom:4},marginAfter:{marginBottom:16}},{title:i,marginAfter:s,desktopStyle:r,desktopTitleStyle:a,...l}=e,d=(s||r)&&{...s&&t.marginAfter,...r},c=a?{...t.desktopTitleStyle,...a}:t.desktopTitleStyle;return(0,n.jsx)(o.Z,{isTitleUppercase:!0,disableDesktopPadding:!0,enableActionSheetTitle:!0,desktopStyle:d,desktopTitleStyle:c,shouldShowBottomDivider:!1,title:i,...l})}},72653:(e,t,i)=>{i.d(t,{Z:()=>a});var o=i(14577),n=i(5162),s=i(69454),r=i(55320);const a=new o.Z((()=>{const{phase:e}=s.Z.state;if(r.default.state.open)return!0;return(0,n.Y)("supportsFixedSizeWebView")&&!s.Z.state.shouldResizeWebView||e===s.i.hidden||e===s.i.willHide}),{debugName:"MobileBottomBarStore"})}}]);