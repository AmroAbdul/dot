"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[6943],{32603:(e,t,o)=>{o.r(t),o.d(t,{measureSubMetricsInBrowserProfiler:()=>c,setInitialRenderCompleted:()=>d,setSubMetric:()=>a,setSubMetricsAtRenderCallback:()=>r,updateMetricData:()=>l});var i=o(5809),n=o(83055),s=o(77144);function r(e){const{mainStartTime:t,prefetchInitiatedTime:o,renderStartTime:n,renderEndTime:r,mainImportEndTime:a}=e,l=(0,i.$)();if(!l)return;const d={app_start_to_main_start:{startTime:l,endTime:t},main_start_to_prefetch_initiated:{startTime:t,endTime:o},prefetch_initiated_to_render_start:{startTime:o,endTime:n},render_start_to_render_end:{startTime:n,endTime:r},import_start:{startTime:0,endTime:t},import_start_to_prefetch_stage_completion:{startTime:t,endTime:o},main_import:{startTime:t,endTime:a},react_render:{startTime:n,endTime:r}};s.Z.state.subMetrics.update((e=>({...e,...d})))}function a(e){const{name:t,endTime:o}=e,i=e.startTime(s.Z.state.subMetrics.state);i&&s.Z.state.subMetrics.update((e=>({...e,[t]:{startTime:i,endTime:o}})))}function l(e){s.Z.state.metricData.update((t=>({...t,...e})))}function d(){s.Z.update((e=>({...e,initialRenderCompleted:!0})))}function c(){for(const[t,o]of Object.entries(n.D9())){if(!o)break;try{window.performance.measure(t,{start:o.startTime,end:o.endTime})}catch(e){}}}},61916:(e,t,o)=>{o.d(t,{YT:()=>d,kQ:()=>l,nI:()=>c,vn:()=>r});var i=o(70203),n=o(96802),s=o(82530);function r(e){if(e){const t=(0,i.QaF)(e.getValue());return Boolean(t)}return!1}function a(e){if(e){const t=e.getSettings();if(t&&t.hidden_collection_descriptions)return t.hidden_collection_descriptions}return[]}function l(e){const{environment:t,store:o,value:i}=e;s.createAndCommit({userAction:"PageViewBlock.setCollectionViewPageDescription",environment:t,perform:e=>{n.FH({stores:[o],update:{hide_collection_view_page_description:i},transaction:e})}})}function d(e){const{environment:t,pageId:o,isExpanded:i,store:n,userSettingsStore:l,descriptionStore:d}=e,c=n.state.isExpanded;n.setState({isExpanded:i});r(d)&&l&&c!==i&&s.createAndCommit({userAction:"pageDescriptionActions.setExpanded",environment:t,perform:e=>{if(i){const t={pointer:{table:"user_settings",id:l.id},path:["settings","hidden_collection_descriptions"],command:"listRemove",args:{id:o}};s.applyOperation({store:l,transaction:e,operation:t})}else{const t={pointer:{table:"user_settings",id:l.id},path:["settings","hidden_collection_descriptions"],command:"listAfter",args:{id:o}};s.applyOperation({store:l,transaction:e,operation:t});let i=a(l);for(;i.length>1e3;){const t=i[0],o={pointer:{table:"user_settings",id:l.id},path:["settings","hidden_collection_descriptions"],command:"listRemove",args:{id:t}};s.applyOperation({store:l,transaction:e,operation:o}),i=a(l)}}}})}function c(e){const{pageId:t,store:o,userSettingsStore:i,descriptionHasText:n}=e;let s=n;a(i).includes(t)&&(s=!1),o.setState({isExpanded:s})}},59389:(e,t,o)=>{o.d(t,{T_:()=>S,Ud:()=>y,eV:()=>m});var i=o(1302),n=o(45953),s=o(42),r=o(58202),a=o(952),l=o(41433),d=o(96802),c=o(94419),p=o(9953),u=o(24677),h=o(98104),g=o(68422);function m(e){const{environment:t,store:o,transaction:n,preventTextSelection:s,onTextSelection:r}=e,l=o.useCrdt(),d=p.j4({environment:t,type:"text",inMemoryRecordCache:o.inMemoryRecordCache,transaction:n,spaceId:o.pointer.spaceId,useCrdt:l}),g=c.R3({parent:o.getContentStore(),append:d,transaction:n}).child;return s||i.default.afterNextFlush((()=>{u.eP({environment:t,store:g}),h.N_({store:g.getBlockTitleStore()}),null==r||r()})),a.W(t,{from:"template_picker",type:"text",creating_block_id:d.id}),g}function S(e){const{environment:t,store:o,transaction:i}=e;d.is({store:o,transaction:i}),m({environment:t,store:o,transaction:i})}function y(e){var t;const{environment:o,store:d,viewType:c,transaction:u}=e,h=null===(t=d.getBlockTitleStore())||void 0===t?void 0:t.getValue();l.ZI({environment:o,sourceBlockId:"root",targetBlockPointer:d.pointer,sourceBlockSubtree:(0,n.R3)((0,s.iC)({isInline:!1,viewType:c})),targetRecordCache:d.inMemoryRecordCache,transaction:u,deepCopyTransclusionContainers:!0,resolveTemplateVariables:!0,useCrdt:d.useCrdt()}),g.vs({environment:o,block:d,blockType:"collection_view_page",transaction:u}),h&&p.sO({store:d.getBlockTitleStore(),value:h,transaction:u}),i.default.afterNextFlush((()=>{const e=r.R.findCollectionViewBlockFromStore(d);null==e||e.handleCreated()})),a.W(o,{from:"template_picker",type:"collection_view_page",creating_block_id:d.id})}},19977:(e,t,o)=>{o.d(t,{Z:()=>d});o(67294);var i=o(86628),n=o(68709),s=o(77907),r=o(82136),a=o(92650),l=o(85893);function d(e){window.__c={n:"MarginComments"};const{pageBlockStore:t,isVisible:o,context:d}=e,c=(0,i.VK)((()=>t.isFullWidth()||d===r.S.CollectionPageView),[d,t]);return(0,l.jsx)(n.p,{allowSelectionWithin:!0,style:{width:c&&o?a.QB:0},children:(0,l.jsx)(s.LazyMarginCommentsSection,{...e})})}},87636:(e,t,o)=>{o.d(t,{Z:()=>S});var i=o(67294),n=o(13991),s=o(480),r=o(24405),a=o(22491),l=o(97880),d=o(82990),c=o(17311),p=o(23063),u=o(64921),h=o(26388),g=o(85893);function m(e){window.__c={n:"ActionMenuGroupButton"};const{button:t,isLast:o}=e,n=(0,r.yK)((e=>({button:{display:"flex",alignItems:"center",padding:"4px 6px",fontWeight:d.Z.fontWeight.medium,borderRight:`1px solid ${e.regularDividerColor}`,color:e.actionMenuButtonTextColor,fill:e.actionMenuButtonTextColor},buttonLast:{borderRight:"none"},buttonHovered:{background:e.whiteButtonHoveredBackground},buttonPressed:{background:e.whiteButtonPressedBackground}})),[]);return i.cloneElement(t,{...(0,a.iv)(t.props.style,n.button,o&&n.buttonLast),hoveredStyle:(0,a.iv)(n.buttonHovered,o&&n.buttonLast).style,pressedStyle:n.buttonPressed})}const S=function(e){let{children:t,isVisible:o,position:S,style:y}=e;window.__c={n:"ActionMenuGroup"};const v=(0,s.O7)(),f=(0,r.yK)((e=>({container:{color:e.actionMenuButtonTextColor,fill:e.actionMenuButtonTextColor,fontSize:12,background:e.whiteButtonBackground,boxShadow:e.lightBoxShadow,display:"flex",whiteSpace:"nowrap",borderRadius:c.Z.borderRadius,maxWidth:"calc(100% - 16px)",minHeight:24,overflow:"hidden",pointerEvents:v.device.isMobile?"auto":"none",opacity:v.device.isMobile?1:0,fontFamily:d.Z.getCompositeFontFamily(n.SP).sans,position:"absolute",right:c.Z.horizontal.small,bottom:c.Z.vertical.small,zIndex:2},containerHover:{pointerEvents:"auto",opacity:1},containerTop:{top:c.Z.vertical.small,bottom:void 0}})),[v]),x=i.Children.toArray(t).filter(l.$K),b=x.length;return(0,g.jsx)(p.Z,{isVisible:!0,animationStyle:{opacity:o?1:0},render:()=>(0,g.jsx)("div",{...(0,a.iv)(f.container,y,o&&f.containerHover,"top"===S&&f.containerTop),children:x.map(((e,t)=>{const o=t===b-1;if(e&&"object"==typeof e&&"type"in e){if(e.type===h.ZP&&i.isValidElement(e))return i.cloneElement(e,{render:(t,i)=>{const n=e.props.render(t,i);return(0,g.jsx)(m,{isLast:o,button:n},e.key)}});if(e.type===u.Z&&i.isValidElement(e))return(0,g.jsx)(m,{isLast:o,button:e},e.key)}}))})})}},94960:(e,t,o)=>{o.d(t,{Z:()=>E});var i=o(67294),n=o(1302),s=o(480),r=o(6740),a=o(86628),l=o(27961),d=o(83303),c=o(62965),p=o(70203),u=o(9291),h=o(61916),g=o(24677),m=o(98104),S=o(31192),y=o(28020),v=o(50627),f=o(85720),x=o(80444),b=o(63971),w=o(82136),C=o(53223),M=o(23063),k=o(89728),P=o(16720),j=o(5618),_=o(22735),I=o(35943),V=o(85893);function T(e){return"sprint_board"===e.getFormat().special_page_for_pm_launch}function Z(e){window.__c={n:"CollectionPageViewBlock"};const{canEdit:t,context:o,controlHoverStyle:c,disabled:S,handleHeaderMouseEnterThrottled:w,handleHeaderMouseLeaveDebounced:C,headerControlsStyle:Z,headerFocusStore:E,isEditable:B,paddingLeft:D,paddingRight:K,pageCover:F,store:A,topControls:O}=e,W=(0,s.O7)(),N=(0,i.useMemo)((()=>new b.Z),[]),U=(0,a.VK)((()=>A.getCollectionViewSourceDescriptionStore()),[A]),z=(0,a.VK)((()=>A.getCollectionViewSourceCollectionStore()),[A]),H=(0,a.VK)((()=>h.vn(U)),[U]),$=(0,a.VK)((()=>A.getTitleStore()),[A]),G=(0,a.VK)((()=>A.getFormat()),[A]),Q=(0,a.VK)((()=>T(A)),[A]),Y=i.useRef(!1);(0,i.useEffect)((()=>{if(!Y.current){Y.current=!0;const{currentUserSettingsStore:e}=x.default.state;h.nI({pageId:A.id,store:N,userSettingsStore:e,descriptionHasText:H})}}),[H,A.id,N]);const q=(0,a.VK)((()=>p.QaF(null==$?void 0:$.getValue())),[$]),X=(0,a.VK)((()=>!!A.getCollectionViewSourceCollectionStore()||!!$&&(!!q||!!(0,f.J5)($))),[A,$,q]),J=(0,a.VK)((()=>y.qG(A.id)),[A]),ee=(0,a.VK)((()=>(0,v.kC)(A,W)),[A,W]),te=(0,a.VK)((()=>(0,v.du)(A,o,W)),[A,o,W]),oe=()=>{const{currentUserSettingsStore:e}=x.default.state,t=A.id;h.YT({environment:W,pageId:t,isExpanded:!1,store:N,userSettingsStore:e,descriptionStore:U})},ie=()=>{const{currentUserSettingsStore:e}=x.default.state,t=A.id;h.YT({environment:W,pageId:t,isExpanded:!0,store:N,userSettingsStore:e,descriptionStore:U})},ne=(0,a.VK)((()=>{if("sprint_board"===A.getFormat().special_page_for_pm_launch)return!0;const e=N.isExpanded();return(h.vn(U)||B)&&e}),[U,B,N,A]),se=(0,a.VK)((()=>{if(!ne)return{type:"hidden"};if(!U)return{type:"hidden"};if(!N.isExpanded())return{type:"hidden"};const{currentUserSettingsStore:e}=x.default.state;return{type:"visible",descriptionStore:U,currentUserSettingsStore:e,collectionStore:z}}),[U,z,N,ne]),re=(0,a.VK)((()=>A.isLocked()),[A]),ae=e=>{const t=e.target;void 0!==t&&t instanceof HTMLElement&&(0,r.E)(t)&&E.setState(!0)},le=()=>{const{device:e}=W,{currentUserSettingsStore:t}=x.default.state,o=U;h.YT({environment:W,pageId:A.id,store:N,userSettingsStore:t,isExpanded:!0,descriptionStore:o}),n.default.afterNextFlush((()=>{o&&!e.isMobileBrowser&&m.NX({store:o})}))},de=()=>{E.setState(!1)},ce=()=>{$&&(g.ZH(W),m.NX({store:$}))},pe=()=>{const{device:e}=W;if(B&&!z&&!q)return(0,V.jsx)(k.Z,{style:c,isLightGray:!0,onClick:ce,icon:d.c,children:e.isSmallPhone?(0,V.jsx)(u.FormattedMessage,{id:"pageViewBlock.add.pageTitleMobile",defaultMessage:"Title"}):(0,V.jsx)(u.FormattedMessage,{id:"pageViewBlock.add.pageTitle",defaultMessage:"Add title"})},"add-title")},ue=()=>{const{device:e}=W;if(!Q||!B)return;return Boolean(G.hide_collection_view_page_description)?(0,V.jsx)(k.Z,{isLightGray:!0,style:c,onClick:()=>h.kQ({environment:W,store:A,value:!1}),icon:l.z,children:e.isSmallPhone?(0,V.jsx)(u.FormattedMessage,{defaultMessage:"Description",id:"pageViewBlock.showDescription.mobileButton"}):(0,V.jsx)(u.FormattedMessage,{defaultMessage:"Show description",id:"pageViewBlock.showDescription.button"})}):(0,V.jsx)(k.Z,{isLightGray:!0,style:c,onClick:()=>{h.kQ({environment:W,store:A,value:!0})},icon:l.z,children:(0,V.jsx)(u.FormattedMessage,{defaultMessage:"Hide description",id:"pageViewBlock.hideDescription.button"})})},he=()=>{const{device:e}=W;if(z)return ne?(0,V.jsx)(k.Z,{isLightGray:!0,style:c,onClick:oe,icon:l.z,children:(0,V.jsx)(u.FormattedMessage,{defaultMessage:"Hide description",id:"pageViewBlock.hideDescription.button"})}):B&&!H?(0,V.jsx)(k.Z,{isLightGray:!0,style:c,onClick:le,icon:l.z,children:e.isSmallPhone?(0,V.jsx)(u.FormattedMessage,{defaultMessage:"Description",id:"pageViewBlock.addDescription.mobileButton"}):(0,V.jsx)(u.FormattedMessage,{defaultMessage:"Add description",id:"pageViewBlock.addDescription.button"})}):H?(0,V.jsx)(k.Z,{isLightGray:!0,style:c,onClick:ie,icon:l.z,children:e.isSmallPhone?(0,V.jsx)(u.FormattedMessage,{defaultMessage:"Description",id:"pageViewBlock.showDescription.mobileButton"}):(0,V.jsx)(u.FormattedMessage,{defaultMessage:"Show description",id:"pageViewBlock.showDescription.button"})}):void 0};return(0,V.jsxs)(V.Fragment,{children:[function(){const{WindowSizeStore:i}=W,n=J?null:(0,V.jsxs)("div",{style:{display:"flex",alignItems:"flex-start"},children:[(0,V.jsx)(j.Z,{...e}),X&&(0,V.jsx)(I.Z,{...e})]});return(0,V.jsxs)("div",{style:ee,onMouseEnter:w,onMouseMove:w,onMouseLeave:C,children:[F,(0,V.jsx)(M.Z,{isVisible:!0,animationStyle:{width:te},render:()=>(0,V.jsxs)("div",{style:{maxWidth:"100%",paddingLeft:i.getSafePaddingLeftCSS(D)},children:[(0,V.jsxs)("div",{onFocus:ae,onBlur:de,style:{...Z},className:"notion-page-controls",children:[O,pe(),ue(),he()]}),(0,V.jsxs)("div",{style:{paddingRight:i.getSafePaddingRightCSS(K),marginBottom:8},children:[n,(0,V.jsx)(L,{store:A}),"visible"===se.type&&(0,V.jsx)(P.Z,{disabled:!B,canEdit:t,locked:re,pageId:A.id,toggleStore:N,descriptionStore:se.descriptionStore,collectionStore:se.collectionStore,userSettingsStore:se.currentUserSettingsStore}),(0,V.jsx)(_.V,{store:A,context:o,canEdit:t},A.id)]})]})})]})}(),(0,V.jsx)(R,{store:A,paddingLeft:D,paddingRight:K,context:o,disabled:S})]})}function R(e){let{store:t,paddingLeft:o,paddingRight:i,context:n,disabled:r}=e;window.__c={n:"CollectionView"};const l=(0,s.O7)(),d=(0,a.VK)((()=>(0,S.nZ)(t,l)),[t,l]);return(0,V.jsx)(C.DZ,{overridePaddingLeft:o,overridePaddingRight:i,store:t,isFullScreen:!0,viewId:d,disabled:r,hideHeaderActions:n===w.S.InAppTemplatePreview})}function L(e){let{store:t}=e;window.__c={n:"SprintBoardDescription"};const o=(0,a.VK)((()=>T(t)),[t]),i=(0,a.VK)((()=>Boolean(t.getFormat().hide_collection_view_page_description)),[t]);return o&&!i?(0,V.jsx)(P.k,{}):null}const E=i.memo(Z,c.Z)},65496:(e,t,o)=>{o.d(t,{Z:()=>P});var i=o(67294),n=o(83355),s=o(9291),r=o(96802),a=o(79698),l=o(82530),d=o(28651),c=o(50627),p=o(94841),u=o(14542),h=o(96809),g=o(87636),m=o(23063),S=o(64921),y=o(12981),v=o(65107),f=o(68785),x=o(32854),b=o(81865),w=o(97496),C=o(56282),M=o(85893);class k extends n.Z{constructor(){super(...arguments),this.lastProxiedUrl=void 0,this.storeTypes={mouseStore:d.Z},this.renderControl=e=>{let{isVisible:t,isRepositioning:o,handleCancelClick:i,handleRepositionClick:n,handleSavePositionClick:r}=e;if(this.props.disabled||h.Z.state.loadingMode!==u.LU)return;const{device:a}=this.environment,{isMobile:l}=a;return(0,M.jsx)(m.Z,{isVisible:!0,animationStyle:{width:j(this.props.store),opacity:t?1:0},render:()=>(0,M.jsx)("div",{style:{position:"absolute",pointerEvents:t?"auto":"none",maxWidth:"100%",top:48},children:(0,M.jsxs)(g.Z,{isVisible:t,position:"bottom",style:{marginRight:this.props.paddingRight,marginLeft:this.props.paddingLeft},children:[!o&&(0,M.jsx)(S.Z,{style:{borderRight:l?"none":void 0,...w.ar},onClick:this.handleChangeCoverClick,children:(0,M.jsx)(s.FormattedMessage,{defaultMessage:"Change cover",id:"pageCover.changeCover.text"})}),!o&&!l&&(0,M.jsx)(S.Z,{style:{...w.ar,borderRight:"none"},onClick:e=>n(e,this.lastProxiedUrl),children:(0,M.jsx)(s.FormattedMessage,{defaultMessage:"Reposition",id:"pageCover.reposition.text"})}),o&&!l&&(0,M.jsx)(S.Z,{style:w.ar,onClick:r,children:(0,M.jsx)(s.FormattedMessage,{defaultMessage:"Save position",id:"pageCover.savePosition.text"})}),o&&!l&&(0,M.jsx)(S.Z,{style:{...w.ar,borderRight:"none"},onClick:i,children:(0,M.jsx)(s.FormattedMessage,{defaultMessage:"Cancel",id:"pageCover.reposition.cancelText"})})]})})})},this.handleChangeCoverClick=e=>{const{intl:t,store:o}=this.props;this.stores.mouseStore.reset();const i=e.target.getBoundingClientRect();a.j({environment:this.environment,intl:t,store:o,rect:i})},this.coverWithRecordStore=this.createComputedStore((()=>this.props.store.getCover()),!0),this.isPersonalHome=this.createComputedStore((()=>(0,p.WE)(this.props.store)))}renderComponent(){const e=this.coverWithRecordStore.getState();if(!e)return;const t=h.Z.state,o=t.loadingMode!==u.LU&&t.loadingMode!==u.SS;return(0,M.jsx)(C.Z,{mouseStore:this.stores.mouseStore,onFlushTemporaryPosition:e=>function(e,t,o){const{imagePosition:i,reset:n}=e;l.createAndCommit({userAction:"PageCover.handleFlushTemporaryPosition",environment:o,perform:e=>{r.Mp({store:t,coverPosition:i,transaction:e}),n()}})}(e,this.props.store,this.environment),renderControl:this.renderControl,source:"page",store:this.props.store,style:{display:"flex",flexDirection:"column",alignItems:"center",height:this.props.height,cursor:"default"},render:n=>(0,M.jsxs)(i.Fragment,{children:[(0,M.jsx)(b.Z,{url:e.cover,isAuthenticated:!0,permissionRecord:e.pointer,width:this.props.proxyWidth,render:(e,i)=>{this.lastProxiedUrl=i;const s={width:"100%",height:this.props.height,objectFit:"cover",opacity:o?.5:1,objectPosition:`center ${100*(1-(n.imagePosition||0))}%`,borderRadius:0},r={width:"100%",height:this.props.height};return(0,M.jsx)(v.B,{src:i,placeholderSrc:o?t.dataURL:void 0,placeholderBehavior:o?"force-show-placeholder":"show-placeholder-if-loading-src",containerStyle:r,imageStyle:s,onLoadComplete:_})}}),o&&(0,M.jsxs)("div",{style:y.I,children:[(0,M.jsx)(f.Z,{style:{width:16,height:16,marginRight:4}}),(0,M.jsx)("div",{style:{minWidth:30,textAlign:"right"},children:(0,M.jsx)(x.Z,{percentage:t.uploadProgress})})]})]})})}}k.displayName="PageCover";const P=(0,s.injectIntl)(k);function j(e){let t;return t=!!e.isFullWidth()?"100%":c.zL,t}function _(){h.Z.reset()}},13677:(e,t,o)=>{o.d(t,{Z:()=>u});o(67294);var i=o(83355),n=o(72126),s=o(96802),r=o(82530),a=o(66890),l=o(79131),d=o(52247),c=o(85893);class p extends i.Z{renderComponent(){const{locked:e,disabled:t,propertyIds:o,type:i}=this.props,{collectionContextStore:a}=this.context;if(!a)return;const d=a.permissionScopes.state;return"minimal"===i?o.map(((e,t)=>(0,c.jsx)("div",{children:(0,c.jsx)(h,{schema:this.props.schema,format:this.props.format,locked:this.props.locked,collectionStore:this.props.collectionStore,store:this.props.store,disabled:this.props.disabled,isInPeekRenderer:this.props.isInPeekRenderer,handleMouseMove:this.props.handleMouseMove,handleMouseLeave:this.props.handleMouseLeave,blockPropertyValueOverlayStore:this.props.blockPropertyValueOverlayStore,topBorder:this.props.topBorder,propertyId:e,index:t})},e))):t||e||!d.canConfigureCollection?(0,c.jsx)("div",{style:l.yA,children:o.map(((e,t)=>(0,c.jsx)("div",{children:(0,c.jsx)(h,{schema:this.props.schema,format:this.props.format,locked:this.props.locked,collectionStore:this.props.collectionStore,store:this.props.store,disabled:this.props.disabled,isInPeekRenderer:this.props.isInPeekRenderer,handleMouseMove:this.props.handleMouseMove,handleMouseLeave:this.props.handleMouseLeave,blockPropertyValueOverlayStore:this.props.blockPropertyValueOverlayStore,topBorder:this.props.topBorder,propertyId:e,index:t})},e)))}):(0,c.jsx)(l.ZP,{direction:"vertical",keys:o,renderKey:(e,t,o)=>(0,c.jsx)(h,{propertyId:e,index:t,schema:this.props.schema,format:this.props.format,locked:this.props.locked,collectionStore:this.props.collectionStore,store:this.props.store,disabled:this.props.disabled,isInPeekRenderer:this.props.isInPeekRenderer,handleMouseMove:this.props.handleMouseMove,handleMouseLeave:this.props.handleMouseLeave,blockPropertyValueOverlayStore:this.props.blockPropertyValueOverlayStore}),onDrop:e=>function(e,t,o,i){const a=o.collection_page_sections||[],l=n.oA(e.map((e=>a.find((t=>t.section===e))))),d=a.filter((t=>!e.includes(t.section))),c=[...l,...d];r.createAndCommit({userAction:"RelationPropertyPageSections.handleReorder",environment:i,perform:e=>{s.FH({stores:[t],update:{collection_page_sections:c},transaction:e})}})}(e,this.props.collectionStore,this.props.format,this.environment)})}}p.displayName="RelationPropertyPageSections",p.contextTypes={...i.w,...a.xm};const u=p;function h(e){let{propertyId:t,index:o,schema:i,format:n,locked:s,collectionStore:r,store:a,disabled:l,isInPeekRenderer:p,handleMouseMove:u,handleMouseLeave:h,blockPropertyValueOverlayStore:g,topBorder:m}=e;const S=(n.collection_page_sections||[]).filter((e=>e.section===t)).map((e=>e.visibility))[0];return(0,c.jsx)(d.Z,{store:a,collectionStore:r,disabled:l,locked:s,property:t,schema:i,handleMouseMove:u,handleMouseLeave:h,handleContextMenu:()=>{},blockPropertyValueOverlayStore:g,format:n,visibility:S,isInPeekRenderer:p,topBorder:0!==o&&m})}},44862:(e,t,o)=>{o.d(t,{Z:()=>S});o(67294);var i=o(480),n=o(86628),s=o(24405),r=o(8848),a=o(60291),l=o(54497),d=o(9291),c=o(5149),p=o(41232),u=o(32363),h=o(16402),g=o(84076),m=o(85893);const S=function(e){let{collectionStore:t,collectionContextStore:o}=e;return window.__c={n:"SyncedCollectionIndicators"},(0,n.VK)((()=>t.isSyncedCollection()),[t])?(0,m.jsx)(f,{collectionStore:t,collectionContextStore:o}):null};function y(e){return{color:e.mediumTextColor,fontSize:14,lineHeight:1.2}}function v(e){let{collectionStore:t,collectionContextStore:o}=e;window.__c={n:"SyncStateComponent"};const p=(0,s.Fg)(),u=(0,i.O7)(),S=(0,n.VK)((()=>t.getFormatStore().getKeyStore("sync_state").getKeyStore("syncing").getValue()),[t]),v=(0,n.VK)((()=>t.getFormatStore().getKeyStore("sync_state").getKeyStore("last_synced_at").getValue()),[t]),f=(0,n.VK)((()=>null==o?void 0:o.numberChildrenUnfurled.state),[o]),x=(0,n.VK)((()=>null==o?void 0:o.numberChildrenReceived.state),[o]),b=f&&x&&f/x<1&&!u.device.isMobile,w=S&&u.device.isMobile;let C;return v&&(C=(0,m.jsx)(d.FormattedMessage,{defaultMessage:"Synced {lastSyncedAt}",id:"synced.lastSyncedAt.label",values:{lastSyncedAt:(0,h.IS)(v,{useLowercase:!0})}})),"row_limit_exceeded"===S?(0,m.jsx)(g.Z,{style:{display:"inline-flex",...y(p)},onClick:()=>function(e){e&&(c.r$({collectionContextStore:e,collectionSettingsStore:e.settingsStore}),c.H4({collectionSettingsStore:e.settingsStore,item:{type:"source"}}))}(o),children:(0,m.jsxs)("span",{style:{marginLeft:5,marginRight:5,display:"inline-flex",...y(p)},children:[(0,l.t)({fill:(0,r.fi)("orange",p).fill,marginLeft:4,marginRight:4,width:12,alignSelf:"center"}),(0,m.jsx)(d.FormattedMessage,{defaultMessage:"Partial Sync",id:"synced.partial_sync.label"})]})}):b||w?(0,m.jsxs)("span",{style:{marginLeft:5,marginRight:5,display:"inline-flex",...y(p)},children:[(0,m.jsx)(d.FormattedMessage,{defaultMessage:"Syncing",id:"synced.syncing.label"}),(0,a.b)({marginLeft:4,marginRight:4,width:12,alignSelf:"center"},"sync-spinner")]}):(0,m.jsx)("span",{style:{marginLeft:5,marginRight:5,display:"inline-flex",...y(p)},children:C})}function f(e){let{collectionStore:t,collectionContextStore:o}=e;window.__c={n:"SyncedCollectionIndicatorsComponent"};const i=(0,s.Fg)(),r=(0,n.VK)((()=>t.getFormatStore().getKeyStore("original_url").getValue()),[t]),a=(0,n.VK)((()=>t.getSpaceId()),[t]),l=(0,n.VK)((()=>Boolean(t.getFormatStore().getKeyStore("sync_state").getValue())),[t]),d=(0,n.VK)((()=>r&&(0,p.pI)(r,a)),[a,r]),c=(0,n.VK)((()=>(0,u.wY)(r,a)),[a,r]);return(0,m.jsxs)("div",{style:{display:"inline-flex",alignItems:"center"},children:[d&&(0,m.jsx)(g.Z,{href:d,style:{display:"inline-flex"},hoveredStyle:{background:"none",textDecoration:"underline"},innerStyle:{flexShrink:1,width:"none",padding:"2px 0px",marginRight:5,borderRadius:4,display:"flex",alignItems:"center",alignSelf:"center",...y(i)},external:!0,children:c}),l?(0,m.jsx)("span",{style:{color:i.mediumTextColor},children:"•"}):null,l?(0,m.jsx)(v,{collectionStore:t,collectionContextStore:o}):null]})}},37451:(e,t,o)=>{o.d(t,{Z:()=>Z});o(67294);var i=o(83355),n=o(15145),s=o(49271),r=o(9291),a=o(81193),l=o(98834),d=o(8055),c=o(59389),p=o(82530),u=o(10906),h=o(66213),g=o(24098),m=o(19124),S=o(84210),y=o(12534),v=o(17504),f=o(77907),x=o(80444),b=o(88632),w=o(83212),C=o(34583),M=o(64921),k=o(24405),P=o(36596),j=o(85893);function _(){window.__c={n:"TemplatePickerShimmer"};const e=(0,k.yK)((()=>({menu:{display:"flex",alignItems:"center",marginBottom:5},icon:{marginLeft:5,width:26,height:26,marginRight:10,borderRadius:4},menuItem:{height:14,marginTop:8,marginBottom:8,width:"25%",borderRadius:8}})),[]);return(0,j.jsx)(j.Fragment,{children:[...Array(6)].map(((t,o)=>(0,j.jsxs)("div",{style:e.menu,children:[(0,j.jsx)(P.Z,{style:e.icon}),(0,j.jsx)(P.Z,{style:e.menuItem})]},o)))})}const I={width:"100%"},V={width:"100%",display:"flex",flexDirection:"column",marginBottom:"14vh"};class T extends i.Z{constructor(){super(...arguments),this.publicEditModeStore=this.createComputedStore((()=>w.Z.getMode(this.environment,this.props.store))),this.handleCreateDatabaseTemplateClick=()=>{const{store:e}=this.props,t=e.getAssociatedCollectionStore();if(t&&C.M_(this.environment)){const{performResult:e}=p.createAndCommit({userAction:"TemplatePicker.newPage",environment:this.environment,perform:e=>l.nx({environment:this.environment,collectionStore:t,transaction:e})});e&&this.navigateToBlock(e),a.dZ(this.environment,{collection_id:t.id})}}}navigate(e){this.context.overrideLinkClick?this.context.overrideLinkClick(e):d.c4({environment:this.environment,url:e})}UNSAFE_willMount(e){super.UNSAFE_willMount(e),e.menuListStore.reset()}renderComponent(){const e=b.Z.state.online;return(0,j.jsx)(g.Z,{capture:!0,render:t=>(0,v.Z)((o=>(0,j.jsxs)("div",{...t,...o,style:V,children:[this.renderPlaceholder(),e&&(0,j.jsx)(f.LazyTemplatePickerTemplateList,{...this.props,renderLoading:()=>(0,j.jsx)(_,{})})]})))})}renderPlaceholder(){const e=this.renderPlaceholderMessage();return e?(0,j.jsx)("div",{style:I,children:(0,j.jsx)("div",{style:(t=this.theme,{...s.ZD,color:t.lightTextColor,paddingTop:5,paddingBottom:24}),onClick:e=>function(e,t,o){(0,y.ZP)({event:e,context:y.Af.EditorClick,callback:()=>{C.M_(o)&&(p.createAndCommit({userAction:"TemplatePicker.handleEmptyPageContinueClick",environment:o,perform:e=>{c.eV({environment:o,store:t,transaction:e})}}),a.rN(o,{template_name:"empty",is_keyboard:!1}))}})}(e,this.props.store,this.environment),children:e})}):void 0;var t}renderPlaceholderMessage(){const{device:e}=this.environment,t=this.props.store.isTemplate(),o=b.Z.state.online,i=(n=this.props.store,Boolean(n.getAssociatedCollectionStore()));var n;const s=function(e){const t=e.getAssociatedCollectionStore(),o=t?t.getTemplatePageStores():void 0;return o&&o.length>0}(this.props.store),a=i&&!s;return o?t?(0,j.jsx)(r.FormattedMessage,{defaultMessage:"{isMobileDevice, select, true {Tap here to continue with an empty page.} other {Press Enter to continue with an empty page.}}",id:"templatePicker.isTemplate.emptyPagePrompt",values:{isMobileDevice:e.isMobile}}):e.isMobile?a?(0,j.jsx)(r.FormattedMessage,{defaultMessage:"{isParentLocked, select, true {Tap here to continue with an empty page} other {Tap here to continue with an empty page, or <templatebutton>create a template</templatebutton>}}",id:"templatePicker.mobileCollectionEmptyPage.prompt",values:{isParentLocked:!R(this.props.store),templatebutton:e=>(0,j.jsx)(M.Z,{style:{display:"inline-block",textDecoration:"underline"},onClick:this.handleCreateDatabaseTemplateClick,children:e})}}):e.isTablet?(0,j.jsx)(r.FormattedMessage,{defaultMessage:"Tap here to continue with an empty page, or pick a template",id:"templatePicker.mobileTabletEmptyPage.withTemplates.prompt"}):(0,j.jsx)(r.FormattedMessage,{defaultMessage:"Tap here to continue...",id:"templatePicker.mobilePhoneEmptyPage.withTemplates.prompt"}):a?(0,j.jsx)(r.FormattedMessage,{defaultMessage:"{isParentLocked, select, true {Press Enter to continue with an empty page} other {Press Enter to continue with an empty page, or <templatebutton>create a template</templatebutton>}}",id:"templatePicker.webCollectionEmptyPage.prompt",values:{isParentLocked:!R(this.props.store),templatebutton:e=>(0,j.jsx)(M.Z,{style:{display:"inline-block",textDecoration:"underline"},onClick:this.handleCreateDatabaseTemplateClick,children:e})}}):!(0,m.GD)(this.publicEditModeStore.state)||i?(0,j.jsx)(r.FormattedMessage,{defaultMessage:"Press Enter to continue with an empty page, or pick a template (↑↓ to select)",id:"templatePicker.webEmptyPage.withTemplates.prompt"}):void 0:(0,j.jsx)(r.FormattedMessage,{defaultMessage:"{isMobileDevice, select, true {Tap here to continue with an empty page. Please go online to use templates.} other {Press Enter to continue with an empty page. Please go online to use templates.}}",id:"templatePicker.deviceOffline.goOnlinePrompt",values:{isMobileDevice:e.isMobile}})}navigateToBlock(e){const{mainEditorCurrentBlockStore:t}=x.default.state,o=t?(0,S.ZP)({store:t,peekViewBlockId:e.id,fullyQualified:!1,pageVisitSource:n.tY.LinkInPage}):(0,S.ZP)({store:e,fullyQualified:!1,pageVisitSource:n.tY.LinkInPage});this.navigate(o)}}T.displayName="TemplatePicker",T.contextTypes={...h.wK,...i.w};const Z=(0,r.injectIntl)(T);function R(e){const t=e.getAssociatedCollectionStore(),o=t&&t.getParentBlockStore();return u.eD({collectionStore:t,collectionViewBlockStore:o,checkNavigableAncestorLocked:!0})}},56282:(e,t,o)=>{o.d(t,{Z:()=>M});o(67294);var i=o(73935),n=o(83355),s=o(13991),r=o(6740),a=o(49085),l=o(12137),d=o(8848),c=o(22491),p=o(72126),u=o(82990),h=o(63143),g=o(9291),m=o(24677),S=o(28651),y=o(27724);class v extends a.default{getInitialState(){return{showFadeInAnimation:!1,isRepositioning:!1}}}const f=v;var x=o(23063),b=o(6685),w=o(85893);class C extends n.Z{constructor(){super(...arguments),this.storeTypes={focusStore:a.default.createClass(!1),mouseStore:S.Z,withImageRepositioningStore:f},this.renderDraggable=()=>(0,w.jsx)(b.Z,{onDraggableDragStart:this.handleDragStart,onDraggableDragMove:this.handleDragMove,onDraggableDragEnd:this.handleDragEnd,onDraggableDragCancel:this.handleDragCancel,disabled:!this.isRepositioning(),render:e=>(0,w.jsx)("div",{...(0,c.iv)(this.getDragContainerStyle()),...e,children:this.props.render({imagePosition:this.getRenderedCoverPosition(),isRepositioning:this.isRepositioning(),showFadeInAnimation:!1})})}),this.shouldBeActiveStore=this.createComputedStore((()=>0===y.default.state.stores.length)),this.handleFocus=e=>{const t=e.target;void 0!==t&&t instanceof HTMLElement&&(0,r.E)(t)&&this.stores.focusStore.setState(!0)},this.handleBlur=e=>{this.stores.focusStore.setState(!1)},this.handleMouseMove=e=>{this.mouseStore.setState({...this.mouseStore.state,mouseEntered:!0})},this.handleMouseLeave=e=>{this.mouseStore.setState({...this.mouseStore.state,mouseEntered:!1})},this.handleMouseMoveThrottled=(0,p.P2)(this.handleMouseMove,100),this.handleMouseLeaveDebounced=(0,p.Ds)(this.handleMouseLeave,100),this.handleWindowMouseDown=e=>{const t=i.findDOMNode(this);t&&!t.contains(e.target)&&this.isRepositioning()&&this.props.onFlushTemporaryPosition({imagePosition:this.getRenderedCoverPosition(),reset:()=>{this.mouseStore.reset(),this.stores.withImageRepositioningStore.reset()}})},this.handleRepositionClick=(e,t)=>{m.ZH(this.environment);const o=new Image;o.onload=()=>{this.stores.withImageRepositioningStore.setState({...this.stores.withImageRepositioningStore.state,isRepositioning:!0,image:o})},t&&(o.src=t)},this.handleCancelClick=e=>{this.stores.withImageRepositioningStore.reset()},this.handleSavePositionClick=e=>{this.props.onFlushTemporaryPosition({imagePosition:this.getRenderedCoverPosition(),reset:()=>{this.stores.withImageRepositioningStore.reset()}})},this.handleDragStart=e=>{const t=this.isRepositioning(),{image:o}=this.stores.withImageRepositioningStore.state;if(o&&t){const e=i.findDOMNode(this);if(e&&e instanceof Element){const t=e.getBoundingClientRect().width/o.width*o.height,i=this.getRenderedCoverPosition();this.stores.withImageRepositioningStore.setState({...this.stores.withImageRepositioningStore.state,startDragImageScreenHeight:t,startDragRenderedPosition:i})}}},this.handleDragMove=e=>{if(this.isRepositioning()){const{startDragRenderedPosition:t,startDragImageScreenHeight:o}=this.stores.withImageRepositioningStore.state,i=e.diffY/(o||0)+(t||0);this.stores.withImageRepositioningStore.setState({...this.stores.withImageRepositioningStore.state,temporaryPosition:(0,p.NM)((0,l.Z)(i,0,1),4)})}},this.handleDragEnd=()=>{this.stores.withImageRepositioningStore.setState({...this.stores.withImageRepositioningStore.state,startDragImageScreenHeight:void 0,startDragRenderedPosition:void 0})},this.handleDragCancel=()=>{this.stores.withImageRepositioningStore.setState({...this.stores.withImageRepositioningStore.state,startDragImageScreenHeight:void 0,startDragRenderedPosition:void 0})}}didMount(){super.didMount(),window.addEventListener("mousedown",this.handleWindowMouseDown)}willUnmount(){super.willUnmount(),window.removeEventListener("mousedown",this.handleWindowMouseDown)}UNSAFE_willMountOrUpdate(){this.isRepositioning()&&!this.shouldBeActiveStore.state&&this.stores.withImageRepositioningStore.reset()}renderComponent(){const{device:e}=this.environment,{style:t}=this.props,{isMobile:o}=e,i=this.isRepositioning(),{mouseEntered:n}=this.mouseStore.state,s=this.stores.focusStore.state;return(0,w.jsxs)("div",{onFocus:this.handleFocus,onBlur:this.handleBlur,onMouseEnter:this.handleMouseMoveThrottled,onMouseMove:this.handleMouseMoveThrottled,onMouseLeave:this.handleMouseLeaveDebounced,...(0,c.iv)({position:"relative",width:"100%"},t),children:[this.renderDraggable(),this.renderDragMessage(),this.props.renderControl({handleRepositionClick:this.handleRepositionClick,handleSavePositionClick:this.handleSavePositionClick,handleCancelClick:this.handleCancelClick,isVisible:o||n||s||i,isRepositioning:i})]})}renderDragMessage(){const{isRepositioning:e}=this.stores.withImageRepositioningStore.state;if(!this.props.small)return(0,w.jsx)(x.Z,{isVisible:!0,animationStyle:{opacity:e?1:0},render:()=>(0,w.jsx)("div",{style:{background:d.ZP.blackWithAlpha(.4),borderRadius:4,color:d.ZP.white,fontSize:12,fontFamily:u.Z.getCompositeFontFamily(s.SP).sans,width:180,left:"calc(50% - 90px)",padding:"0.3em 1.5em 0.3em",pointerEvents:"none",position:"absolute",top:"calc(50% - 10px)",textAlign:"center"},"aria-hidden":!e,children:(0,w.jsx)(g.FormattedMessage,{defaultMessage:"Drag image to reposition",id:"withImageRepositioning.dragImage.text"})})})}isRepositioning(){return this.stores.withImageRepositioningStore.state.isRepositioning}getRenderedCoverPosition(){const{temporaryPosition:e}=this.stores.withImageRepositioningStore.state;return(0,p.hj)(e)?e:function(e,t){if("gallery"===e||"board"===e){const e=t.getFormat().card_cover_position;if((0,p.hj)(e))return e}const o=.5;if(t.isCollectionView()){const e=t.getCollectionViewCollectionStore();if(e){const t=e.getFormat().collection_cover_position;return(0,h.z4)(t)?o:t}}const i=t.getFormat().page_cover_position;if((0,p.hj)(i))return i;return o}(this.props.source,this.props.store)}get mouseStore(){return this.props.mouseStore||this.stores.mouseStore}getDragContainerStyle(){return{width:"100%",cursor:this.isRepositioning()?"move":"inherit"}}}C.displayName="WithImageRepositioning";const M=C},58792:(e,t,o)=>{o.d(t,{B:()=>r});o(67294);var i=o(5618),n=o(35943),s=o(85893);const r=e=>{let{store:t,isEditable:o,hasCover:r,isInSidePeek:a,paddingLeft:l,paddingRight:d,openMenuOnMount:c,openMenuOnMountCallback:p,...u}=e;return(0,s.jsxs)("div",{style:{display:"flex",alignItems:"flex-start"},children:[(0,s.jsx)(i.Z,{store:t,isEditable:o,hasCover:r,isInSidePeek:a,openMenuOnMount:c,openMenuOnMountCallback:p}),(0,s.jsx)(n.Z,{store:t,isInSidePeek:a,paddingLeft:l,paddingRight:d,...u})]})}},98272:(e,t,o)=>{o.d(t,{X:()=>a});o(67294);var i=o(24405),n=o(9291),s=o(68785),r=o(85893);function a(){window.__c={n:"ImportingMessage"};const e=(0,i.yK)((e=>({wrapper:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:16,marginTop:"12vh"},message:{fontSize:14,marginTop:8,color:e.mediumTextColor}})),[]);return(0,r.jsxs)("div",{style:e.wrapper,children:[(0,r.jsx)(s.Z,{}),(0,r.jsx)("div",{style:e.message,children:(0,r.jsx)(n.FormattedMessage,{defaultMessage:"Importing…",id:"frame.importingMessage"})})]})}},67064:(e,t,o)=>{o.d(t,{Eg:()=>g,_h:()=>u,bM:()=>h});o(67294);var i=o(86628),n=o(50627),s=o(19671),r=o(82136),a=o(13023),l=o(68709),d=o(13677),c=o(61679),p=o(85893);function u(e){window.__c={n:"InlinePageSections"};const{state:t,store:o,disabled:n,isInPeekRenderer:s,blockPropertyValueOverlayStore:r,onMouseEnter:a,onMouseLeave:l,topBorder:c}=e,u=(0,i.VK)((()=>o.isLocked()),[o]),h=(0,i.VK)((()=>o.getSchema()),[o]);return(0,p.jsx)(d.Z,{topBorder:c,propertyIds:t.sectionPropertyIds,store:o,collectionStore:t.collectionStore,format:t.format,disabled:n,locked:u,schema:h,handleMouseMove:a,handleMouseLeave:l,handleContextMenu:()=>{},blockPropertyValueOverlayStore:r,isInPeekRenderer:s})}function h(e){window.__c={n:"InlinePageSectionsModule"};const{store:t,context:o,disabled:d,inlinePropertyIDs:h,onMouseEnter:m,onMouseLeave:S}=e,y=g({collectionStore:(0,i.VK)((()=>t.getAssociatedCollectionStore()),[t]),format:(0,i.VK)((()=>(0,n.y6)(t)),[t]),sectionPropertyIds:h});if("hidden"===y.type)return null;const v=o===r.S.PeekView;return(0,p.jsx)(c.bU,{className:"layout-content-with-divider",children:(0,p.jsx)(l.p,{allowSelectionWithin:!0,children:(0,p.jsx)(u,{topBorder:!0,state:y,store:t,disabled:d,onMouseEnter:m,onMouseLeave:S,blockPropertyValueOverlayStore:v?a.Z:s.Z,isInPeekRenderer:v})})})}function g(e){const{collectionStore:t,format:o,sectionPropertyIds:i}=e;return t&&o&&i&&i.length?{type:"visible",collectionStore:t,format:o,sectionPropertyIds:i}:{type:"hidden"}}},61679:(e,t,o)=>{o.d(t,{$K:()=>v,Ar:()=>u,Cq:()=>C,bU:()=>m,cx:()=>f,hy:()=>S,i2:()=>x,kg:()=>b,mZ:()=>y,rO:()=>w,us:()=>g});var i=o(94184),n=o.n(i),s=o(67294),r=o(60177),a=o(64338),l=o(24405),d=o(73420),c=o(97053),p=o(85893);function u(e){let{children:t,type:o,gap:i,withBottomPadding:s,style:r}=e;window.__c={n:"Layout"};const a=(0,c.Bt)(o);return(0,p.jsx)("div",{className:n()("layout",{"layout-wide":"wide"===o,"layout-wide-right-margin-expanded":"wide-right-margin-expanded"===o,"layout-side-peek":"side-peek"===o,"layout-center-peek":"center-peek"===o,"layout-home":"home"===o,"layout-home-phone":"home-phone"===o,"layout-phone":"phone"===o,"layout-tablet":"tablet"===o,"layout-template-preview":"template-preview"===o,"layout-chat":"chat"===o}),style:{paddingBottom:s?a:void 0,gap:i,...r},children:t})}const h="layout-nested-grid",g="hide-scrollbar";function m(e){return(0,p.jsx)("div",{className:n()("layout-content",e.className),style:e.style,children:e.children})}function S(e){return(0,p.jsx)("div",{className:"layout-full",style:e.style,children:e.children})}function y(e){return(0,p.jsx)("div",{className:"layout-margin-left",children:e.children})}function v(e){return(0,p.jsx)("div",{className:"layout-margin-right",children:e.children})}const f=(0,s.forwardRef)((function(e,t){return(0,p.jsx)("div",{className:n()(h,e.className),onClick:e.onClick,style:e.style,role:e.role,id:e.id,"aria-labelledby":e["aria-labelledby"],ref:t,children:e.children})}));function x(e){return(0,p.jsx)("div",{className:n()(h,"layout-margin-scrollable",{[g]:e.hideScrollbar}),style:e.style,children:(0,p.jsx)(m,{children:e.children})})}function b(e){let{items:t,style:o}=e;window.__c={n:"LayoutTabs"};const[i,n]=s.useState(0),c=(0,s.useRef)([]),u=(0,r.Dl)();(0,a.q7)(null==u?void 0:u.domLock);const h=(0,l.yK)((e=>({icon:{width:16,height:16,fill:"currentColor"},label:{fontSize:14,fontWeight:600},tab:"centered"===o?{cursor:"pointer",border:"none",padding:"6px 12px",borderRadius:20,color:e.text.secondary,background:"none"}:{cursor:"pointer",border:"none",borderBottom:"2px solid",borderColor:"transparent",padding:"6px 8px 12px",color:e.text.secondary,background:"none"},tabSelected:"centered"===o?{color:e.text.primary,background:e.tint.regular}:{color:e.text.primary,borderColor:e.regularTextColor}})),[o]),g=(0,s.useId)(),S=(0,s.useCallback)((e=>`${g}-tab-${e}`),[g]),y=(0,s.useCallback)((e=>`${g}-tabpanel-${e}`),[g]),v=(0,s.useCallback)((e=>{let o;var s;("ArrowLeft"===e.key?(e.preventDefault(),o=(i+t.length-1)%t.length):"ArrowRight"===e.key&&(e.preventDefault(),o=(i+1)%t.length),void 0!==o)&&(n(o),null===(s=c.current[o])||void 0===s||s.focus())}),[i,t.length]);return(0,p.jsxs)(f,{children:[(0,p.jsx)(m,{children:(0,p.jsx)("div",{role:"tablist",children:(0,p.jsx)(d.X2,{justifyContent:"centered"===o?"center":"flex-start",children:t.map(((e,t)=>{var o;return(0,p.jsx)("button",{ref:e=>{e&&(c.current[t]=e)},id:S(t),role:"tab","aria-controls":y(t),"aria-selected":t===i,tabIndex:t===i?void 0:-1,onKeyDown:v,style:{...h.tab,...t===i&&h.tabSelected},onClick:e=>{e.stopPropagation(),n(t)},children:(0,p.jsxs)(d.X2,{gap:4,alignItems:"center",children:[null===(o=e.icon)||void 0===o?void 0:o.call(e,h.icon),e.label&&(0,p.jsx)("div",{style:h.label,children:e.label})]})},e.key)}))})})}),(0,p.jsx)(f,{id:y(i),role:"tabpanel","aria-labelledby":S(i),children:t[i]?t[i].children:null})]})}function w(e){return(0,p.jsx)("div",{className:"layout-column",style:{"--min-column-width":`${e.minWidth}px`,...e.style},children:e.children})}function C(e){return(0,p.jsxs)(w,{minWidth:e.minWidth,children:[e.left,e.right]})}},99731:(e,t,o)=>{o.d(t,{f:()=>h,o:()=>g});o(67294);var i=o(480),n=o(86628),s=o(9291),r=o(80365),a=o(11599),l=o(77933),d=o(68709),c=o(97053),p=o(61679),u=o(85893);const h=e=>{let{store:t}=e;return(0,u.jsx)("div",{style:{width:"100%",maxWidth:"100%",margin:"0 auto 6px auto"},onMouseDown:c.m4,onClick:c.h9,children:(0,u.jsx)(l.Z,{type:"page",store:t,headerText:(0,u.jsx)(s.FormattedMessage,{defaultMessage:"Linked to this page",id:"page.expandedBacklinks.label"}),disableCurrentPageToken:!0,disableInaccessiblePages:!0})})};function g(e){window.__c={n:"PageExpandedBacklinksModule"};const t=(0,i.O7)(),o=(0,n.VK)((()=>t.PageDetailsStore.getToggleState({environment:t,type:"backlinks",id:e.store.id})),[e.store,t]),s=(0,n.VK)((()=>{const e=a.dy(t,"backlinks");return void 0===o?e:o}),[o,t]);return 0===(0,n.VK)((()=>{if(!s)return 0;return(0,r.L)(e.store,t).backlinks.length}),[s,e.store,t])?null:(0,u.jsx)(p.bU,{className:"layout-content-with-divider",children:(0,u.jsx)(d.p,{allowSelectionWithin:!0,children:(0,u.jsx)(h,{store:e.store})})})}},11803:(e,t,o)=>{o.d(t,{D:()=>h,p:()=>g});o(67294);var i=o(480),n=o(86628),s=o(51454),r=o(50627),a=o(68709),l=o(23063),d=o(65496),c=o(97053),p=o(61679),u=o(85893);function h(e){window.__c={n:"PageCoverModule"};const{store:t,isEditable:o,paddingLeft:s,paddingRight:r,pageCoverHeight:h,onMouseEnter:m,onMouseMove:S,onMouseLeave:y}=e,v=(0,i.O7)(),f=(0,n.VK)((()=>t.isCollectionView()?"20vh":h),[h,t]),x=(0,n.VK)((()=>v.WindowSizeStore.getSafePaddingLeftCSS(s)),[v.WindowSizeStore,s]),b=(0,n.VK)((()=>v.WindowSizeStore.getSafePaddingRightCSS(r)),[v.WindowSizeStore,r]),w=(0,n.VK)((()=>v.WindowSizeStore.state.width),[v.WindowSizeStore]),C=(0,c.WJ)(t),M=(0,n.VK)((()=>g(t,v)),[v,t]);return(0,u.jsx)(p.hy,{children:(0,u.jsx)(l.Z,{isVisible:!0,animationStyle:{translateX:C},render:()=>(0,u.jsx)(a.p,{allowSelectionWithin:!1,style:M,onMouseEnter:m,onMouseMove:S,onMouseLeave:y,children:(0,u.jsx)(d.Z,{height:f,store:t,disabled:!o,paddingLeft:x,paddingRight:b,proxyWidth:w})})})})}function g(e,t){const o=(0,r.kC)(e,t);return o.zIndex=s.ag,o}},16720:(e,t,o)=>{o.d(t,{Z:()=>T,k:()=>Z});var i=o(67294),n=o(83355),s=o(480),r=o(86628),a=o(24405),l=o(90199),d=o(1436),c=o(82990),p=o(9291),u=o(25888),h=o(61916),g=o(993),m=o(82530),S=o(28651),y=o(68056),v=o(46654),f=o(18514),x=o(61766),b=o(24666),w=o(84076),C=o(31278),M=o(76798),k=o(32662),P=o(26388),j=o(65187),_=o(85893);class I extends n.Z{constructor(){super(...arguments),this.editor=null,this.storeTypes={buttonPopupStore:x.Z},this.handleEnter=e=>{if(!this.canEdit())return;if(e.preventDefault(),this.editor&&this.editor.isComposing())return;const t=b.default.state;if("editing"===t.mode){const e=(0,y.QY)(t.multiSelection);if(!e)return;m.createAndCommit({userAction:"PageDescription.handleEnter",environment:this.environment,perform:t=>{g.hJ({environment:this.environment,store:this.props.descriptionStore,string:"\n",selection:e.selection,disableMentions:!0,disableDateMentions:!0,disableSlashCommands:!0,disableEmojiCommands:!0,transaction:t})}})}}}renderComponent(){return(0,_.jsx)("div",{style:{maxWidth:"100%",borderRadius:4,overflow:"hidden",marginBottom:12},children:this.renderExpanded()})}renderExpanded(){return this.environment.device.isMobile?(0,_.jsx)(i.Fragment,{children:this.renderDescriptionText()}):(0,_.jsx)(P.ZP,{renderTooltip:()=>(0,_.jsx)(L,{collectionStore:this.props.collectionStore}),disableTooltip:!this.props.locked||!this.props.canEdit,render:e=>(0,_.jsx)("div",{children:(0,_.jsx)("div",{style:{display:"flex",cursor:"text"},...e,children:this.renderDescriptionText()})})})}renderDescriptionText(){const{device:e}=this.environment,{intl:t}=this.props;if(this.props.descriptionStore)return(0,_.jsx)(j.Z,{ref:e=>{this.editor=e},store:this.props.descriptionStore,style:{...V,width:780},disabled:this.props.disabled,placeholder:t.formatMessage({defaultMessage:"Add a description…",id:"pageDescription.emptyPlaceholder"}),disableSlashCommands:!0,disableEmbedMenu:!0,disableDateMentions:!0,disableMentions:!0,onTab:E,onUntab:B,onEnter:this.handleEnter,onClick:R(this.props.toggleStore)?()=>{}:e=>function(e,t,o,i,n,s){R(t)||e.preventDefault();!function(e,t,o,i,n){const s=R(e);h.YT({environment:i,pageId:t,isExpanded:!s,store:e,userSettingsStore:n,descriptionStore:o})}(t,o,i,n,s)}(e,this.props.toggleStore,this.props.pageId,this.props.descriptionStore,this.environment,this.props.userSettingsStore),disableStyleAnnotations:e.isMobileBrowser,disableInsertedDeletedAnnotations:e.isMobileBrowser,disableHorizontalEdgeScroll:!0,pasteBehavior:"inline"})}canEdit(){const{descriptionStore:e}=this.props,t=this.pageContext&&this.pageContext.publicEditModeStore.state;return!this.props.disabled&&(!(0,v.YF)(t)&&e.canEdit())}}I.displayName="PageDescription",I.stores={buttonPopupStore:x.Z};const V={fontSize:14,paddingLeft:6,paddingBottom:4,paddingTop:3},T=(0,p.injectIntl)(I);function Z(){window.__c={n:"SprintBoardPageDescription"};const e=(0,s.O7)(),t=(0,r.qz)(void 0,S.Z),o=(0,r.VK)((()=>t.state.mouseEntered),[t]),i=(0,a.yK)((e=>({linkStyle:{...V,color:o?e.mediumTextColor:e.lightTextColor,cursor:"pointer"}})),[o]);return(0,_.jsx)("div",{style:{display:"flex"},onClick:()=>u.Fs(e,{from:"sprint_board_learn_how_to_use"}),children:(0,_.jsxs)(w.Z,{style:i.linkStyle,href:(0,f.UY)("guides.sprintPlanning"),external:!0,disabled:!0,onMouseEnter:()=>t.enter(),onMouseLeave:()=>t.exit(),children:[(0,_.jsx)(p.FormattedMessage,{defaultMessage:"Learn how to use Sprints",id:"pageDescription.sprintBoard.message"}),(0,_.jsx)(k.Z,{size:2}),(0,d.g)({width:16,display:"inline-block",position:"relative",top:"3px",height:void 0})]})})}function R(e){return e.isExpanded()}function L(e){let{collectionStore:t}=e;window.__c={n:"LockedTooltipComponent"};const o=(0,r.VK)((()=>t&&t.getIcon()),[t]);return(0,_.jsxs)("div",{style:{display:"flex",alignItems:"start"},children:[(0,_.jsx)("div",{style:{paddingTop:4,paddingRight:6},children:(0,l.b)({width:12})}),(0,_.jsx)("div",{children:(0,_.jsx)("div",{children:(0,_.jsx)(p.FormattedMessage,{defaultMessage:"Please unlock {pageTitleWithIcon} to edit the description.",id:"pageDescription.lockedTooltip.message",values:{pageTitleWithIcon:(0,_.jsxs)("span",{style:{whiteSpace:"nowrap",fontWeight:c.Z.fontWeight.bold},children:[o&&(0,_.jsx)(C.Z,{disabled:!0,icon:o,isEmptyPage:!1,size:12,style:{marginRight:4,display:"inline-block"}}),t&&(0,_.jsx)(M.Z,{store:t,style:{display:"inline"}})]})}})})})]})}function E(e){return!0}function B(e){return!0}},6779:(e,t,o)=>{o.d(t,{z:()=>j,s:()=>_});var i=o(67294),n=o(480),s=o(86628),r=o(43250),a=o(11599),l=o(50627),d=o(65598),c=o(68709),p=o(97053),u=o(61679),h=o(1302),g=o(23867),m=o(98104),S=o(82530),y=o(51798),v=o(34047),f=o(82994),x=o(77907),b=o(46351),w=o(82136),C=o(85893);const M=e=>{window.__c={n:"NewPageDiscussion"};const{store:t}=e,o=(0,n.O7)(),s=(0,i.useMemo)((()=>new f.Z(o,(0,g.C)(t.pointer.spaceId))),[o,t.pointer.spaceId]),r=(0,i.useCallback)((()=>{m.ZH(o)}),[o]),a=k({environment:o,discussionInputStore:s,store:t});return(0,C.jsx)(x.LazyDiscussionInput,{showAvatar:!0,parentStore:t,onSubmit:a,onCancel:r,discussionInputStore:s,discussionFormat:v.O2.Page,isMobileSlideUpMenu:!1,shouldSaveUnsentComments:!0,canDrop:!0,blockStore:t})},k=e=>{const{environment:t,discussionInputStore:o,store:n}=e,r=(0,s.qz)(void 0,w.Z),a=(0,i.useCallback)((e=>{var o;const i=n.id;null===(o=t.PageDetailsStore)||void 0===o||o.setToggleState({environment:t,type:"discussion",id:i},e)}),[t,n.id]);return(0,i.useCallback)((async()=>{const e=o.state.textStore.getValue(),i=o.state.files;if(e&&e.length>0||i.length>0){const{performResult:s}=S.createAndCommit({userAction:"PageDiscussion.useSubmitNewDiscussion",environment:t,perform:o=>y.i8({environment:t,blockStore:n,commentTextValue:e||[],transaction:o,files:i}),skipUpdatingEditedMetadata:!0});if(o.reset(),r.setState({...r.state,forceDiscussionOpen:!1}),a(!0),s&&!t.device.isMobile){await h.default.afterNextFlush();const e=b.Z.find((e=>e.getStore().id===s.id));e&&m.NX({store:e.getInputStore().state.textStore})}}}),[o,t,r,a,n])},P=e=>{window.__c={n:"UnresolvedPageDiscussion"};const{store:t,discussionStore:o,isFirst:s,isOnly:r}=e,a=(0,n.O7)(),l=(0,i.useMemo)((()=>new f.Z(a,(0,g.C)(t.pointer.spaceId))),[a,t.pointer.spaceId]);return(0,C.jsx)(x.LazyDiscussion,{store:o,format:v.O2.Page,isFirst:s,isOnly:r,discussionLocation:"page_discussion",showResolveButtonByDefaultIfPossible:!1,blockStore:t,discussionInputStore:l},o.id)},j=e=>{const{store:t,showDiscussionInput:o,unresolvedDiscussionStores:i}=e;return(0,C.jsxs)("div",{style:{width:"100%",margin:"0 auto"},onMouseDown:p.m4,onClick:p.h9,className:r.KA2,children:[i.map(((e,o,i)=>(0,C.jsx)(P,{store:t,discussionStore:e,isFirst:0===o,isOnly:1===i.length},e.id))),o&&(0,C.jsx)("div",{style:{padding:"6px 4px 12px"},children:(0,C.jsx)(M,{store:t})})]})};function _(e){window.__c={n:"PageDiscussionsModule"};const{store:t,disableDiscussionInput:o,shouldShowDiscussion:i}=e,r=(0,n.O7)(),p=(0,s.VK)((()=>{if(!i)return{type:"hidden"};if(a.A$("comments","section_hide"))return{type:"hidden"};const e=r.currentUser.isLoggedIn(),n=d.vV(t,{recursivelyLoadAllDiscussions:!1}),s=!o&&e&&t.canComment()&&0===n.length&&!(0,l.a_)(t);return s||0!==n.length?{type:"visible",showDiscussionInput:s,unresolvedDiscussionStores:n}:{type:"hidden"}}),[o,r.currentUser,i,t]);return"hidden"===p.type?null:(0,C.jsx)(u.bU,{className:"layout-content-with-divider",children:(0,C.jsx)(c.p,{allowSelectionWithin:!0,children:(0,C.jsx)(j,{...p,withLegacyInputPadding:!0,store:t})})})}},2524:(e,t,o)=>{o.d(t,{H:()=>x});var i=o(67294),n=o(60177),s=o(64338),r=o(480),a=o(86628),l=o(19977),d=o(92650),c=o(43250),p=o(50627),u=o(68785),h=o(29551),g=o(55217),m=o(37451),S=o(97053),y=o(61679),v=o(85893);const f=(0,i.forwardRef)((function(e,t){let{store:o,disabled:i,loadingContainerStore:r,templatePickerMenuListStore:l,onClick:d,legacyStyles:p}=e;window.__c={n:"PageEditor"};const h=(0,n.Dl)();(0,s.q7)(null==h?void 0:h.domLock);const y=(0,S.Nr)(o),f=(0,S.xC)(o,r),x=(0,S.Qg)(o),b=(0,a.VK)((()=>o.isLocked()||i),[o,i]);return(0,v.jsxs)("div",{className:c.QS0,onClick:d,style:p,ref:t,children:[!x&&(0,v.jsx)(g.Z,{store:o.getContentStore(),emptyDroppableStyle:{width:"100%"},disabled:b}),y&&(0,v.jsx)(u.Z,{}),f&&(0,v.jsx)(m.Z,{store:o,menuListStore:l})]})})),x=(0,i.forwardRef)(((e,t)=>{window.__c={n:"PageEditorModule"};const{pageBlockStore:o,pathToBlockId:i,disabled:n,context:s,loadingContainerStore:c,templatePickerMenuListStore:u,handlePlaceholderWrapClick:g,pageViewBlockAccessor:m,legacyStyles:S}=e,x=(0,r.O7)(),b=(0,a.VK)((()=>i?(0,h.Vg)({environment:x,pageBlockStore:o,pathToBlockId:i}):o),[x,o,i]),w=(0,a.VK)((()=>(0,d.fg)(x,o)),[x,o]),C=(0,a.VK)((()=>(0,p.CX)(o)),[o]);return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(y.bU,{className:"layout-editor",style:{minHeight:"170px"},children:(0,v.jsx)(f,{store:b,disabled:n,loadingContainerStore:c,templatePickerMenuListStore:u,onClick:C?g:void 0,legacyStyles:S,ref:t})}),w?(0,v.jsx)(y.$K,{children:(0,v.jsx)(l.Z,{pageBlockStore:o,isVisible:!0,context:s,pageViewBlockAccessor:m,isCollapsedAnchor:!0})}):null]})}))},56507:(e,t,o)=>{o.d(t,{U:()=>n});o(67294);var i=o(85893);function n(e){let{onMouseEnter:t,onMouseMove:o,onMouseLeave:n,headerControls:s}=e;return(0,i.jsx)("div",{onMouseEnter:t,onMouseMove:o,onMouseLeave:n,children:s})}},5618:(e,t,o)=>{o.d(t,{Z:()=>m});var i=o(67294),n=o(480),s=o(86628),r=o(41432),a=o(43593),l=o(9291),d=o(9953),c=o(82530),p=o(95477),u=o(28020),h=o(31278),g=o(85893);const m=i.memo((e=>{let{store:t,isEditable:o,hasCover:m,isInSidePeek:S,openMenuOnMount:y,openMenuOnMountCallback:v}=e;window.__c={n:"PageIcon"};const f=(0,n.O7)(),x=(0,l.useIntl)(),b=(0,s.VK)((()=>t.hasIcon()),[t]),w=(0,s.VK)((()=>{if(b)return t.getIcon()}),[b,t]),C=(0,s.VK)((()=>t.getIconStore()),[t]),M=(0,s.VK)((()=>t.getType()),[t]),k=(0,s.VK)((()=>{if(t.isCollectionView()){const e=t.getCollectionViewSourceCollectionStore();return!!e&&e.isSyncedCollection()}return t.isType(r.Ti.externalObjectInstancePage)}),[t]),P=(0,s.VK)((()=>t.isCollectionView()||S),[t,S]),j=(0,s.VK)((()=>P?36:k?74:140),[P,k]),_=(0,s.VK)((()=>t.isEmptyPage()),[t]),I=(0,i.useCallback)((async e=>{const o=t.getIconStore();if(o){const t=(0,a.Wv)(e,p.default.secureFileS3.url,p.default.secureFileS3V2.url,p.default.secureFileConfig.rootPath,p.default.secureFileConfig.hostname),i=t?t.link:e,{serverCommitResult:n}=c.createAndCommit({userAction:"PageIcon.handleChange",environment:f,perform:e=>{d.sO({store:o,value:i,transaction:e})}});await n}}),[f,t]);if(!b)return null;const V={position:"relative",zIndex:1,marginLeft:3,marginBottom:f.device.isMobile?8:0,marginTop:4,pointerEvents:"auto"};let T;P?V.marginRight=6:V.marginTop=m?-80:f.device.isMobile?0:(0,u.CP)(f),T=P?{marginTop:(f.device.isMobile,4),marginRight:8}:{marginTop:m?-42:f.device.isMobile?0:(0,u.CP)(f)};const Z=P?36:78;if(o){const e=null==C?void 0:C.table;return(0,g.jsx)(h.Z,{disabled:!1,bucket:"secure",icon:w,store:t,isEmptyPage:_,onChange:I,size:j,emojiSize:Z,style:V,emojiStyle:T,largeIcon:!0,openMenuOnMount:y,openMenuOnMountCallback:v,iconLoggingData:{recordTable:e,source:"page_header",block_type:M,collection_id:"collection"===e?null==C?void 0:C.id:void 0},label:x.formatMessage({id:"layout.pageIcon.label",defaultMessage:"Change page icon"})})}return(0,g.jsx)(h.Z,{disabled:!0,icon:w,isEmptyPage:_,size:j,emojiSize:Z,style:V,emojiStyle:T,largeIcon:!0,label:x.formatMessage({id:"layout.pageIcon.disabledLabel",defaultMessage:"Page icon"})})}))},22735:(e,t,o)=>{o.d(t,{$:()=>D,V:()=>K});var i=o(67294),n=o(86628),s=o(50627),r=o(19671),a=o(82136),l=o(13023),d=o(68709),c=o(480),p=o(24405),u=o(80951),h=o(6695),g=o(42875),m=o(72126),S=o(9291),y=o(82356),v=o(27714),f=o(4615),x=o(80560),b=o(63296),w=o(95477),C=o(77080),M=o(62878),k=o(13555),P=o(85893);const j=(0,S.defineMessages)({linkCopied:{defaultMessage:"Link copied. Share it with others who may find this useful.",id:"ai.gtmFavoriteActions.linkCopied"},share:{defaultMessage:"Share as AI favorite",id:"ai.gtmFavoriteActions.share"},add:{defaultMessage:"Add to AI favorites",id:"ai.gtmFavoriteActions.add"}});function _(e){window.__c={n:"GtmFavoriteButtons"};const{blockId:t}=e,o=(0,c.O7)(),n=(0,S.useIntl)(),s=(0,i.useCallback)((()=>{(0,M.importGtmFavorite)({environment:o,importArgs:{name:"aiGtmFavoriteImport",blockId:t}})}),[t,o]),r=(0,i.useCallback)((()=>{const e=`${w.default.domainBaseUrl}/ai-gtm/${(0,f.cj)(t)}`;x.RD({environment:o,stringValue:e,copiedMessage:j.linkCopied})}),[t,o]);return(0,P.jsxs)("div",{style:{marginTop:12,marginBottom:12},children:[(0,P.jsx)(b.Z,{onClick:r,icon:v.N,children:n.formatMessage(j.share)}),o.currentUser.isLoggedIn()&&(0,P.jsx)(b.Z,{onClick:s,style:{marginLeft:12},icon:y.l,children:n.formatMessage(j.add)})]})}var I=o(28651),V=o(85526),T=o(50478),Z=o(41883),R=o(12867),L=o(65091);function E(e){var t;window.__c={n:"PagePropertiesSection"};const{collectionStore:o,schema:s,store:r,format:a}=e,l=(0,S.useIntl)(),d=(0,c.O7)(),y=(0,i.useRef)(null),v=(0,n.qz)(void 0,I.Z),f=(0,p.yK)((e=>({pageProperties:{width:"100%",fontSize:14},dragHandle:{marginLeft:-(T.C$+10),marginRight:6},hidePropertiesButton:{margin:"0 0 10px"},showMoreButton:{margin:0},addPropertyButton:{margin:"4px 0 0"},moreProperties:{border:`1px solid ${"dark"===e.mode?e.accentColors.gray[300]:e.accentColors.gray[75]}`,borderRadius:4,padding:"8px 6px"}})),[]),x=(0,n.VK)((()=>Boolean(r.isAssociatedCollectionAPageTree())),[r]),b=(a.collection_page_properties||[]).filter((e=>{var t;return null===(t=a.collection_page_sections)||void 0===t||!t.some((t=>t.section===e.property&&("inline"===t.visibility||"minimal"===t.visibility)))})),w=(0,n.VK)((()=>{const e=r.getModel(),t="on"===C.default.getGroup("default-new-page-property-to-hide-when-empty")?h.iB(a,s,void 0,h.j5.Collection):o.getFormat(),i=t&&t.property_visibility;if(i){return b.map((t=>{var o;return{visibility:"show",hasValue:!Boolean(e&&u.wV({block:e,property:t.property,schema:s,getRecordModel:r.getRecordModel,userId:d.currentUser.id,userTimeZone:(0,g.r)(),intl:l})),name:(null===(o=s[t.property])||void 0===o?void 0:o.name)??"",...t,...i.find((e=>e.property===t.property))}}))}return b?b.map((e=>{var t;return{...e,visibility:"show",hasValue:Boolean(r.getPropertyValue(e.property)),name:(null===(t=s[e.property])||void 0===t?void 0:t.name)??""}})):[]}),[r,a,s,o,b,l,d.currentUser.id]),M=(0,n.VK)((()=>V.Z.state.forceShowProperties),[]),[j,E]=(0,i.useMemo)((()=>m.uK(w,(e=>{var t;return!!(null===(t=s[e.property])||void 0===t?void 0:t.type)&&function(e){if("section"===e.visibility)return!1;if("hide"===e.visibility)return!1;if("hide_if_empty"===e.visibility&&!e.hasValue)return!1;return!0}(e)}))),[w,s]),B=function(e){return(0,n.VK)((()=>{if(!C.default.checkGate("ai_favorites"))return!1;const t=(0,k.OF)();return!!t&&t.spaceId===e.getSpaceId()&&t.collectionId===e.id}),[e])}(o),D=j.concat(E),[K,F]=(0,i.useState)({open:!1,query:""}),{paddingLeft:A,paddingRight:O,width:W}=e,N=((null===(t=y.current)||void 0===t?void 0:t.clientWidth)??Number.MAX_VALUE)<Math.min(5,j.length)*R.Uv;let U;return U=!x||d.device.isMobile||N?(0,P.jsxs)("div",{style:{paddingBottom:8},children:[(0,P.jsx)(Z.Z,{...e,showHiddenProperties:M,mergedProperties:x?D:w,propertySearchState:K}),(0,P.jsx)(L.ZP,{...e,mergedProperties:x?D:w,propertySearchState:K,setPropertySearchState:F})]}):(0,P.jsx)(R.ZP,{...e,rowLength:5,compactProperties:j,hiddenProperties:E}),(0,P.jsx)("div",{style:f.pageProperties,onMouseEnter:()=>{v.setState({...v.state,mouseEntered:!0})},onMouseLeave:()=>{v.setState({...v.state,mouseEntered:!1})},ref:y,children:(0,P.jsx)("div",{style:{paddingLeft:A,paddingRight:O,width:W,maxWidth:"100%",padding:x?"10px 0":"8px 0",margin:"0 auto"},children:(0,P.jsxs)("div",{style:{paddingLeft:A,paddingRight:O,width:W,maxWidth:"100%",paddingTop:"8px",margin:"0 auto"},children:[U,B&&(0,P.jsx)(_,{blockId:r.id})]})})})}var B=o(61679);function D(e){window.__c={n:"PageProperties"};const{store:t,format:o,collectionStore:i,disabled:s,blockPropertyValueOverlayStore:r,isInPeekRenderer:a}=e,l=(0,n.VK)((()=>i.getSchema()),[i]),d=(0,n.VK)((()=>t.isLocked()),[t]);return(0,P.jsx)(E,{store:t,collectionStore:i,schema:l,format:o,disabled:s,locked:d,width:"100%",blockPropertyValueOverlayStore:r,isInPeekRenderer:a})}function K(e){window.__c={n:"PagePropertiesModule"};const{store:t,context:o,canEdit:i}=e,c=(0,n.VK)((()=>{if(t.isCollectionViewPageWithContent())return{type:"hidden"};const e=t.getAssociatedCollectionStore();if(!e)return{type:"hidden"};const o=(0,s.y6)(t);return o?{type:"visible",store:t,format:o,collectionStore:e}:{type:"hidden"}}),[t]);if("hidden"===c.type)return null;const p=o===a.S.PeekView;return(0,P.jsx)(B.bU,{className:"layout-content-with-divider",children:(0,P.jsx)(d.p,{allowSelectionWithin:!0,children:(0,P.jsx)(D,{...c,disabled:!i,isInPeekRenderer:p,blockPropertyValueOverlayStore:p?l.Z:r.Z})})})}},89534:(e,t,o)=>{o.d(t,{_:()=>m});o(67294);var i=o(86628),n=o(24405),s=o(82990),r=o(19671),a=o(82136),l=o(13023),d=o(97039),c=o(78030),p=o(68709),u=o(97820),h=o(61679),g=o(85893);function m(e){window.__c={n:"PagePropertyModule"};const{store:t,context:o,propertyId:m,canEdit:S}=e,y=(0,i.VK)((()=>{if(t.isCollectionViewPageWithContent())return{type:"hidden"};const e=t.getAssociatedCollectionStore();return e?{type:"visible",store:t,collectionStore:e,propertyId:m}:{type:"hidden"}}),[m,t]),v=(0,i.VK)((()=>{var e;return null===(e=y.collectionStore)||void 0===e?void 0:e.getSchema()[m]}),[y.collectionStore,m]),f=(0,i.VK)((()=>t.isLocked()),[t]),x=(0,n.yK)((e=>({propertyName:{color:e.mediumTextColor,fontSize:s.Z.fontSize.UIRegular.desktop,fontWeight:s.Z.fontWeight.regular,marginTop:16,marginBottom:16}})),[]);if(!v)return null;if("hidden"===y.type)return null;const b=o===a.S.PeekView;return(0,g.jsx)(h.bU,{className:"layout-content-with-divider",children:(0,g.jsx)(p.p,{allowSelectionWithin:!0,children:(0,g.jsxs)("div",{style:{display:"flex",flexDirection:"column",marginBottom:16},children:["relation"!==v.type?(0,g.jsx)(u.Z,{propertySchema:v,showIcon:!0,style:x.propertyName,property:m}):null,(0,g.jsx)(d.Z,{store:t,property:m,disabled:!S,locked:f,format:c.C.PropertyModule,tableWrap:!0,blockPropertyValueOverlayStore:b?l.Z:r.Z,collectionStore:y.collectionStore,isInPeekRenderer:b},m)]})})})}},35943:(e,t,o)=>{o.d(t,{Z:()=>B});var i=o(67294),n=o(13991),s=o(480),r=o(97511),a=o(86628),l=o(24405),d=o(49271),c=o(41432),p=o(42509),u=o(42875),h=o(27714),g=o(82990),m=o(9291),S=o(12714),y=o(28020),v=o(41232),f=o(33929),x=o(46654),b=o(24646),w=o(21273),C=o(68373),M=o(99757),k=o(68709),P=o(15560),j=o(73063),_=o(84076),I=o(26388),V=o(19987),T=o(79954),Z=o(44862),R=o(65187),L=o(85893);function E(e){window.__c={n:"SyncedIndicators"};const{store:t,collectionContextStore:o}=e,i=(0,a.VK)((()=>t.isCollectionView()),[t]),n=(0,a.VK)((()=>t.getCollectionViewSourceCollectionStore()),[t]);return i&&o&&n?(0,L.jsx)(Z.Z,{collectionStore:n,collectionContextStore:o}):null}const B=i.memo((e=>{let{store:t,disabled:o,isInSidePeek:i,extraStyles:Z,paddingLeft:B,paddingRight:D,titlePlaceholder:K,collectionContextStore:F,shouldShowTemplatePicker:A,onTitleChange:O,onTitleEditText:W,onTitleEsc:N,onTitleUntab:U,onTitleTab:z}=e;window.__c={n:"PageTitle"};const H=(0,s.O7)(),$=(0,r.l)(),G=(0,a.VK)((()=>t.getTitleStore()),[t]),Q=(0,a.VK)((()=>{if(t.isCollectionView()){const e=t.getCollectionViewSourceCollectionStore();return!!e&&e.isSyncedCollection()}return t.isType(c.Ti.externalObjectInstancePage)}),[t]),Y=(0,a.VK)((()=>{if(o)return!1;if(M.n.state)return!1;const e=$&&$.publicEditModeStore.state;return!(0,x.YF)(e)&&t.canEditCollection()}),[o,$,t]),q=(0,a.VK)((()=>{if(!t.isCollectionView())return!1;const e=t.getCollectionViewSourceCollectionStore();return!!e&&(0,p.OY)(e.getValue())}),[t]),X=(0,a.VK)((()=>{const e=t.getModel();return K??(null==e?void 0:e.getEmptyTitlePlaceholder({getRecordModel:t.getRecordModel,userTimeZone:(0,u.r)(),intl:f.default.getIntl()}))}),[t,K]),J=!H.device.isMobile&&i,ee=(0,a.VK)((()=>Y&&!t.isLocked()&&!Q&&!(0,y.qG)(t.id)),[Y,Q,t]),te=(0,a.VK)((()=>t.isEmptyPage()),[t]),oe=(0,a.VK)((()=>t.isTemplate()),[t]),ie=(0,a.VK)((()=>t.getAssociatedCollectionTemplateStores()),[t]),ne=(0,a.VK)((()=>t.getSyncedUri()),[t]),se=(0,a.VK)((()=>t.shouldShowBetaTagForProjectManagementLaunch()),[t]),re=function(e){const{store:t,paddingLeft:o,paddingRight:i,isInSidePeek:r,shouldShowBetaTagForProjectManagementLaunch:c,extraStyles:p}=e,u=(0,s.O7)(),h=(0,a.VK)((()=>t.getFormat()),[t]),m=(0,a.VK)((()=>t.isCollectionView()),[t]),S=(0,a.VK)((()=>(0,b.$3)(u)),[u]),y=(0,a.VK)((()=>(0,b.vJ)(u)),[u]),v=(0,a.VK)((()=>t.getAppContainerBlockStore()),[t]),f=(0,a.VK)((()=>t.isExternalObjectInstancePageBlockStore()),[t]);return(0,l.yK)((e=>{const t=!!h.page_small_text||u.device.isMobile||m||r?32:40,s=S+y-o-i;return{title:{...d.ZD,width:f||c?"fit-content":"100%"},selectable:{color:e.regularTextColor,fontWeight:g.Z.fontWeight.bold,lineHeight:1.2,fontSize:t,fontFamily:g.Z.getHeaderFontFamily({pageFont:h.page_font,locale:n.SP}),cursor:"text",display:"flex",alignItems:"center",textRendering:u.device.isSafari?"optimizeSpeed":void 0,width:m&&!v?s:void 0,...p},link:{width:16,fill:e.mediumIconColor},placeholder:{...d.ZD,WebkitTextFillColor:e.pageTitlePlaceholderTextColor,cursor:"text"}}}),[v,y,u.device.isMobile,u.device.isSafari,p,h.page_font,h.page_small_text,m,f,r,S,o,i,c])}({store:t,isInSidePeek:i,paddingLeft:B,paddingRight:D,shouldShowBetaTagForProjectManagementLaunch:se,extraStyles:Z}),ae=(0,a.VK)((()=>t.isExternalObjectInstancePageBlockStore()),[t]),le=(0,a.VK)((()=>t.isExternalCollectionBlockStore()?t:void 0),[t]),de=(0,a.VK)((()=>(null==le?void 0:le.canEdit())??!1),[le]),ce=(0,a.VK)((()=>ne?(0,v.pI)(ne,t.pointer.spaceId):void 0),[t.pointer.spaceId,ne]),pe=(0,a.VK)((()=>w.Z.isAssistantInWriterEnabled()),[]);if(q)return null;if(!G)return null;const ue=C.G.createChildStore(G,t.pointer),he=ie&&0===ie.length,ge=H.device.isIOS||H.device.isSafari,me=(0,L.jsx)(R.Z,{tagName:"h1",style:{...re.title,fontSize:"1em",fontWeight:"inherit",margin:0},store:G,placeholderStyle:re.placeholder,disabled:!ee,placeholder:X,disableSlashCommands:!0,disableSelectAllBlocks:!0,disableStyleAnnotations:!0,disableInsertedDeletedAnnotations:!pe,disableMobileActionBar:!1,disableShiftEnter:!0,disableEmbedMenu:!0,onEsc:N,onUntab:U,onTab:z,disableUpDownArrows:!(!A||oe||he||H.device.isMobile)&&te,disableEnter:!(!A||oe||he||H.device.isMobile)&&te,onChange:O,disableHorizontalEdgeScroll:!0,pasteBehavior:"block",trackEditsToUserFlow:"user_flow_edit_page_title"});return(0,L.jsxs)("div",{style:J?{flex:1}:void 0,children:[(0,L.jsxs)(T.Z,{canSelect:!1,canDrag:!1,canEditText:ee,onEditText:W,store:ue,style:re.selectable,analyticsName:"page_content",shouldShowDropZone:!0,children:[ge?(0,L.jsx)(k.p,{style:re.title,allowSelectionWithin:!0,children:me}):me,se&&(0,L.jsx)(P.Z,{style:{marginTop:8,marginLeft:8}}),ae&&(0,L.jsx)(I.ZP,{placement:I.ug.Bottom,renderTooltip:e=>(0,L.jsx)(m.FormattedMessage,{...e,defaultMessage:"Link to original url",description:"Link to the original source of the data.",id:"PageTitle.syncedBlock.original"}),render:e=>(0,L.jsx)(_.Z,{href:ce,ignoreLocalHoverState:!0,hovered:!1,children:(0,L.jsx)(j.Z,{ariaLabel:"Link",...e,icon:()=>(0,h.N)(re.link),style:{marginLeft:4},onClick:()=>{ce&&S.D({url:ce,environment:H})}})})}),le&&!H.device.isMobile&&(0,L.jsx)(V.Z,{store:le,canEdit:de,buttonStyle:{fontWeight:"normal",margin:0}})]}),(0,L.jsx)("div",{style:{marginLeft:4},children:(0,L.jsx)(E,{store:t,collectionContextStore:F})})]})}))},21953:(e,t,o)=>{o.d(t,{J:()=>u});var i=o(67294),n=o(480),s=o(6740),r=o(86628),a=o(68709),l=o(19987),d=o(5618),c=o(35943),p=o(85893);const u=e=>{let{store:t,hasCover:o,headerFocusStore:u,headerControls:h,isEditable:g,openMenuOnMount:m,openMenuOnMountCallback:S,pageViewBlockStore:y,discussionInputStore:v,...f}=e;window.__c={n:"PageTitleWithIcon"};const{device:x,WindowSizeStore:b}=(0,n.O7)(),w=x.isMobile&&!o,C=!x.isMobile&&f.isInSidePeek,M=(0,r.VK)((()=>t.isExternalObjectInstancePageBlockStore()&&t.hasError()?t:null),[t]),k=(0,r.VK)((()=>t.canEdit()),[t]),P=(0,r.VK)((()=>b.getSafePaddingLeftCSS(f.paddingLeft)),[b,f.paddingLeft]),j=(0,r.VK)((()=>b.getSafePaddingRightCSS(f.paddingRight)),[b,f.paddingRight]),_=(0,i.useCallback)((e=>{const t=e.target;void 0!==t&&t instanceof HTMLElement&&(0,s.E)(t)&&u.setState(!0)}),[u]),I=(0,i.useCallback)((e=>{u.setState(!1)}),[u]),V=(0,p.jsx)(d.Z,{store:t,isEditable:g,hasCover:o,isInSidePeek:f.isInSidePeek,openMenuOnMount:m,openMenuOnMountCallback:S}),T=(0,p.jsx)(c.Z,{store:t,...f});return(0,p.jsxs)("div",{style:{maxWidth:"100%",paddingLeft:P,width:"100%"},onClick:e=>{e.stopPropagation()},children:[(0,p.jsxs)(a.p,{onFocus:_,onBlur:I,allowSelectionWithin:!1,style:{pointerEvents:"none"},children:[w&&h,!C&&V,!w&&h]}),(0,p.jsx)("div",{style:{paddingRight:j},children:C?(0,p.jsxs)("div",{style:{display:"flex",alignItems:"flex-start"},children:[V,T]}):T}),M?(0,p.jsx)(l.Z,{store:M,canEdit:k}):null]})}},97053:(e,t,o)=>{o.d(t,{Bt:()=>C,Nr:()=>x,Qg:()=>w,WJ:()=>M,h9:()=>f,m4:()=>v,xC:()=>b});var i=o(480),n=o(97511),s=o(86628),r=o(41432),a=o(61045),l=o(57819),d=o(10906),c=o(92650),p=o(19124),u=o(12534),h=o(61931),g=o(16772),m=o(19111),S=o(94896),y=o(17963);function v(e){(0,u.ZP)({event:e,context:u.Af.EditorMouseDown,callback:()=>{}})}function f(e){(0,u.ZP)({event:e,context:u.Af.EditorClick,callback:()=>{}})}function x(e){return(0,s.VK)((()=>Boolean(y.Z.state.pageMap[e.id])||S.Z.state.pages.has(e.id)),[e.id])}function b(e,t){const o=(0,i.O7)(),r=(0,n.l)(),a=x(e),l=w(e);return(0,s.VK)((()=>{const i=o.currentUser.isLoggedIn(),n=r&&r.publicEditModeStore.state;return Boolean(e&&t&&e.isDefined()&&!e.isLocked()&&e.canEdit()&&!e.hasContent()&&i&&(!(null!=n&&n.hasPublicPermission)||"edit"===(null==n?void 0:n.permission))&&!a&&t.state.ready&&!l&&(!(0,p.GD)(n)||"completionPopup"!==g.default.state.type))}),[o,l,t,r,a,e])}function w(e){return(0,s.VK)((()=>{if(e.isCollectionView()){const t=e.getCollectionViewSourceCollectionStore();return!!t&&t.isSyncedCollection()}return e.isType(r.Ti.externalObjectInstancePage)}),[e])}function C(e){const{device:t,WindowSizeStore:o}=(0,i.O7)(),n=(0,s.VK)((()=>{const e=o.state.height,i=t.isMobile&&m.Z.state.open?e:0;return a._4()+i}),[o,t.isMobile]);return(0,s.VK)((()=>Boolean((0,l.RR)(g.default.state))?600:"home-phone"===e?h.jq:t.isTablet?380:t.isIOS?Math.max(350,n):t.isMobile?400:"side-peek"===e||"center-peek"===e?80:"home"===e?h.XX:"30vh"),[t,n,e])}function M(e){const t=(0,i.O7)(),o=(0,s.VK)((()=>(0,c.fg)(t,e)),[t,e]);return(0,s.VK)((()=>o&&!e.isFullWidth()?(0,c.gC)(t,(0,d.en)(e),(0,d.Ks)(e)):0),[t,o,e])}},13630:(e,t,o)=>{o.d(t,{Tf:()=>r,bl:()=>s,q0:()=>a});var i=o(25651),n=o(70406);const s={pageLayoutSchema:[{type:"cover"},{type:"titleWithIcon"},{type:"properties"},{type:"inlinePageSections"},{type:"expandedBacklinks"},{type:"discussions"},{type:"bottomControls"},{type:"editor"}],pageInfoLayoutSchema:[]},r={pageLayoutSchema:[{type:"cover"},{type:"titleWithIcon"},{type:"properties"},{type:"inlinePageSections"},{type:"expandedBacklinks"},{type:"discussions"},{type:"bottomControls"},{type:"tabs",style:"left-aligned",tabs:[{icon:"pencil",label:"Notes",content:[{type:"editor"}]},{icon:"transcript",label:"Transcript",content:[{type:"transcript"}]}]}],pageInfoLayoutSchema:[]},a={pencil:i.R,transcript:n.p}},70177:(e,t,o)=>{o.d(t,{L:()=>p});var i=o(13991),n=o(65669),s=o(90902),r=o(24990);const a={ko:()=>o.e(692).then(o.bind(o,13547)),es:()=>o.e(883).then(o.bind(o,98610)),de:()=>o.e(3224).then(o.bind(o,36802)),fr:()=>o.e(5038).then(o.bind(o,96627)),pt:()=>o.e(2138).then(o.bind(o,88048)),zh:()=>o.e(7835).then(o.bind(o,41787)),ja:()=>o.e(6377).then(o.bind(o,28202)),da:()=>o.e(7677).then(o.bind(o,99815)),fi:()=>o.e(6970).then(o.bind(o,65651)),nb:()=>o.e(3031).then(o.bind(o,92967)),nl:()=>o.e(2579).then(o.bind(o,86541)),sv:()=>o.e(382).then(o.bind(o,63462))};let l=!1,d=!1;async function c(e){for(const[o,i]of Object.entries(e.emojiLocaleKeywords)){var t;s.Q4[o]={...s.Q4[o],keywords:[...i,...(null===(t=s.Q4[o])||void 0===t?void 0:t.keywords)||[]]}}await r.Z.waitUntilLoaded(),r.Z.update((t=>{let{emojiByName:o,...i}=t;return{...i,emojiByName:{...o,...e.emojiByName}}}))}const p=(0,n.Z)((async()=>{await async function(){d||(await c(await o.e(3552).then(o.bind(o,62706))),d=!0)}(),await async function(){if(l)return;const[e]=i.SP.split("-");e in a&&(await c(await a[e]()),l=!0)}()}))},29755:(e,t,o)=>{o.d(t,{Z:()=>s});var i=o(49085);class n extends i.default{getInitialState(){return{pageMap:{}}}setStatus(e,t){const{pageMap:o}=this.state;t?o[e]=t:delete o[e],this.emit()}}const s=new n},63971:(e,t,o)=>{o.d(t,{Z:()=>s});var i=o(49085);class n extends i.default{getInitialState(){return{isExpanded:!0}}isExpanded(){return Boolean(this.state.isExpanded)}}const s=n},65669:(e,t,o)=>{function i(e){let t,o,i;return async function(){for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return t?(i=s,o||(o=t.then((()=>(o=void 0,t=e(...i),t))),o)):(t=e(...s),t)}}o.d(t,{Z:()=>i})}}]);