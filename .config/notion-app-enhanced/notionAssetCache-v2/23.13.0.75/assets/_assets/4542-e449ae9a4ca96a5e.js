"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[4542],{43664:(e,t,o)=>{o.d(t,{r:()=>D,z:()=>A});var a=o(1302),n=o(90559),r=o(35011),i=o(99036),s=o(80951),l=o(40506),d=o(7057),c=o(53877),p=o(35102),u=o(84682),g=o(42875),m=o(72126),h=o(38737),f=o(70203),y=o(44805),v=o(97880),S=o(63143),b=o(80560),x=o(83197),_=o(53437),M=o(95477),k=o(24990),C=o(49616),P=o(14976),w=o(33929),I=o(77080),T=o(8406),j=o(51365),R=o(9953),V=o(61045),Z=o(82530);function D(e){const{environment:t,theme:o,store:a,schema:i,property:d,collectionContextStore:m}=e,h=t.device,x=i[d];if(x){switch(x.type){case"formula":"v2"===x.version?function(e){const{environment:t,store:o,propertySchema:a,property:n}=e,i=o.getModel();if(!a.formula2||!i)return;const s=w.default.getIntl(),l=(0,g.r)(),d=(0,r.EC)({block:i,property:n,formulaCode:a.formula2.code,getRecordModel:o.getRecordModel,intl:s,userTimeZone:l,depth:0,visitedProperties:new Set,resultCache:new Map});if(!d)return;const c=(0,p.j4)(d),u=(0,P.Xh)(c,o);b.RD({stringValue:u,environment:t,copiedMessage:b.tq.copiedPropertyToClipboard})}({environment:t,store:a,propertySchema:x,property:d}):function(e){var t;const{environment:o,store:a,schema:n,property:r,propertySchema:i}=e,s=a.getValue();if(!s)return;const d=(0,u.AH)({property:r,schema:n,block:s,getRecordValue:a.getRecordValue,collectionRequestContext:{userId:void 0,userTimeZone:(0,g.r)(),depth:0,intl:w.default.getIntl(),resultCache:new Map,visitedProperties:new Set}}),c=null==i||null===(t=i.formula)||void 0===t?void 0:t.result_type;switch(c){case"number":S.hj(d)&&N({value:d,propertySchema:i,environment:o});break;case"date":d&&l.U3(d)&&B({date:d,environment:o});break;case"text":d&&b.RD({stringValue:d.toString(),environment:o,copiedMessage:b.tq.copiedPropertyToClipboard});break;case"checkbox":case void 0:return;default:(0,v.t1)(c)}}({environment:t,store:a,schema:i,property:d,propertySchema:x});break;case"person":{const e=a.getPropertyValue(d);F({actors:s.DW({textValue:e,propertySchema:x,blockCreatorPointer:a.getCreatedByPointer()}),environment:t,store:a});break}case"created_by":{const e=a.getCreatedByPointer();e&&F({actors:[e],environment:t,store:a});break}case"last_edited_by":{const e=a.getLastEditedByPointer();e&&F({actors:[e],environment:t,store:a});break}case"number":N({value:s.VY(a.getPropertyValue(d)),propertySchema:x,environment:t});break;case"text":{const e=a.getPropertyValue(d);if(!e)return;const n=y.hW({textValue:{value:e,spaceId:a.getSpaceId()},getRecordModel:a.getRecordModel,getRecordRole:a.getRecordRole,disableHover:!1,disableStyleAnnotations:!1,disableInsertedDeletedAnnotations:!1,disableDateStyleAnnotations:!0,disableLinks:!1,disabled:!1,userTimeZone:(0,g.r)(),isClient:!0,isAndroid:h.isAndroid,isSafariOrIOS:h.isSafari||h.isIOS,isWindows:h.isWindows,showEmojiInline:h.isWindows,emojiType:"raw",theme:o,baseUrl:M.default.domainBaseUrl,publicDomainName:M.default.publicDomainName,currentUserId:t.currentUser.id,intl:w.default.getIntl(),katex:void 0,overwriteBaseUrlFromSpaceId:void 0,externalIntegrations:[],formulaValueTypes:[],emojiData:k.Z.state,isMobileNative:h.isMobileNative,isMobileNativeExternalLinkFixEnabled:I.default.checkGate("mobile_native_external_link_fix")}),r=(0,P.Xh)(a.getPropertyValue(d),a);b.g9({stringValue:r,htmlValue:n,environment:t,copiedMessage:b.tq.copiedPropertyToClipboard});break}case"url":case"email":case"phone_number":{const e=f.Jcv(a.getPropertyValue(d));b.RD({stringValue:e,environment:t,copiedMessage:b.tq.copiedPropertyToClipboard});break}case"date":{const e=a.getPropertyValue(d),o=s.Gl(e);o&&B({date:o,environment:t,dateFormat:x.date_format,timeFormat:x.time_format});break}case"last_edited_time":case"created_time":{const e=a.getKeyStore(x.type).getValue();if(e){B({date:c.CQ(e,(0,g.r)()),environment:t,dateFormat:x.date_format,timeFormat:x.time_format})}break}case"auto_increment_id":{const e=a.getPropertyValue(d);!function(e){const{value:t,environment:o,collectionContextStore:a}=e;if(t&&a){var r;const e=(null===(r=a.collectionStore())||void 0===r||null===(r=r.getRecordKeyStore())||void 0===r?void 0:r.getRecordKey())??"";b.RD({stringValue:(0,n.wf)(e,t),environment:o,copiedMessage:b.tq.copiedPropertyToClipboard})}}({value:s.ah(e),environment:t,collectionContextStore:m});break}}T.S$(t,m,{block_id:a.id,property:d,property_type:x.type})}}function F(e){const{actors:t,environment:o,store:a}=e,n=s.C1(t);b.RD({stringValue:(0,P.Xh)(n,a),environment:o,copiedMessage:b.tq.copiedPropertyToClipboard})}function N(e){const{value:t,propertySchema:o,environment:a}=e;if(!m.i2(t)&&!S.z4(t)){const e=(null==o?void 0:o.number_format)||h.dk,n=h.uf(t,e,w.default.getIntl());b.RD({stringValue:n,environment:a,copiedMessage:b.tq.copiedPropertyToClipboard})}}function B(e){const{date:t,environment:o,dateFormat:a,timeFormat:n}=e,r=(0,d.ZV)({value:t,date_format:a??l.sF,time_format:n??l.c_,allowRelativeDates:!0,intl:w.default.getIntl()});b.RD({stringValue:r,environment:o,copiedMessage:b.tq.copiedPropertyToClipboard})}async function A(e){const{element:t,rect:o,environment:n,onClick:r,store:l,additionalStores:d=[],property:c,format:p,collectionStore:u,blockPropertyValueOverlayStore:g,disableHorizontalEdgeScroll:m,collectionContextStore:h,mouseStore:f,statusSetCheckbox:y,preventClearSelection:v,collectionsBulkActionsToolbarStore:S,scrollers:b}=e,{device:M,WindowSizeStore:k}=n,P=(h&&C.aJ({store:l,additionalStores:d,collectionContextStore:h})?h.normalizedSchemaStore.state:u.getSchema())[c],I=null==P?void 0:P.type;if(!I)return;if(!C.g0({property:c,collectionStore:u})){if("checkbox"===I){const e=l.getPropertyStore(c);e&&Z.createAndCommit({userAction:"BlockPropertyValue.handleEditButtonClick",environment:n,perform:e=>{j.vO({stores:[l,...d],property:c,transaction:e})}}),h&&T.rv({environment:n,collectionContextStore:h,block_id:e.id,property:c,property_type:I,from:C.Sy(p),isFromBulkActionsToolbar:Boolean(S)})}else if("status"===I&&"status"===P.type&&y){const e=l.getPropertyValue(c),t=s.rO(e,P,w.default.getIntl());l.getPropertyStore(c)&&Z.createAndCommit({userAction:"BlockPropertyValue.handleEditButtonClick",environment:n,perform:e=>{const o=P.groups??[],a=!0===t?o[0]:o[o.length-1],n=(P.options??[]).find((e=>{var t;return e.id===(null==a||null===(t=a.optionIds)||void 0===t?void 0:t[0])}));if(n)for(const t of[l,...d])R.sO({store:t.getPropertyStore(c),value:s.Is(n.value),transaction:e})}})}else{-1===i.uk.indexOf(I)&&(f&&f.setState({...f.state,mouseEntered:!1}),t&&b&&M.isMobileNative&&x.m[I]===_.kQ.Popup&&(V.bx({element:t,scrollers:b,vertical:{reveal:"bottom",paddingToTopEdge:4,paddingToBottomEdge:k.getSafePaddingBottomPx(320)},horizontal:{reveal:"closest"}}),await a.default.afterNextFlush()),j.bA({environment:n,blockPropertyValueOverlayStore:g,store:l,additionalStores:d,property:c,format:p,rect:o,disableHorizontalEdgeScroll:m,collectionContextStore:h,preventClearSelection:v,collectionsBulkActionsToolbarStore:S}),h&&T.zF({environment:n,collectionContextStore:h,property:c,property_type:I,from:C.Sy(p),isFromBulkActionsToolbar:Boolean(S)}))}r&&r()}}},14473:(e,t,o)=>{o.d(t,{O:()=>p});var a=o(15145),n=o(1800),r=o(70219),i=o(80444),s=o(88923),l=o(68373),d=o(50906),c=o(8055);function p(e,t,o,r,p){const{mainEditorCurrentBlockStore:g}=i.default.state;if(!g)return;const m=e.find((e=>e.id===t.id));if(!m)return;let h;if(p){const e=l.G.createChildStore(g,m).getModel(),t=e?u(o,e.getSpaceId()):void 0;h=(0,n.Z)({pageId:m.id,pageModel:e,baseUrl:t,pageVisitSource:a.tY.MentionInPage})}else{const e=g.getModel(),t=e?u(o,e.getSpaceId()):void 0;h=(0,n.Z)({pageId:g.id,pageModel:e,baseUrl:t,peekViewBlockId:m.id,peekMode:(0,s.getUrlParamFromPeekMode)(s.default.state.mode),pageVisitSource:a.tY.MentionInPage}),d.XX(o,{from:r,meta_click:Boolean(p)})}c.c4({environment:o,url:h,openInNew:p})}function u(e,t){return(0,r.b)(e)(t)}},34078:(e,t,o)=>{o.d(t,{Z:()=>l});var a=o(67294),n=o(24405),r=o(44495),i=o(35948),s=o(85893);function l(e){let{setIsHovered:t}=e;window.__c={n:"CollectionDescriptionIconTooltipIndicator"};const[o,l]=(0,i.C)();(0,a.useEffect)((()=>{t(l)}),[l,t]);const d=(0,n.yK)((e=>({container:{display:"inline-flex",alignItems:"center"},icon:{width:14,fill:l?e.mediumIconColor:e.lightIconColor,marginLeft:5,marginTop:1}})),[l]);return(0,s.jsx)("div",{ref:o,style:d.container,children:(0,r.D)(d.icon)})}},7801:(e,t,o)=>{o.d(t,{P:()=>s});o(67294);var a=o(68785),n=o(77907),r=o(97372),i=o(85893);function s(e){return(0,i.jsx)(n.LazyCollectionSettings,{...e,renderLoading:t=>(0,i.jsx)(r.ZP,{collectionSettingsStore:e.collectionSettingsStore,fullHeight:e.fullHeight,hideDesktopHeader:e.hideDesktopHeader,children:t&&(0,i.jsx)("div",{style:{display:"flex",justifyContent:"center",overflow:"hidden"},children:(0,i.jsx)(a.Z,{})})})})}},30694:(e,t,o)=>{o.d(t,{L:()=>T,Z:()=>V});o(67294);var a=o(480),n=o(86628),r=o(24405),i=o(15145),s=o(8848),l=o(61061),d=o(16184),c=o(26774),p=o(82990),u=o(9291),g=o(75754),m=o(51592),h=o(7692),f=o(24946),y=o(28020),v=o(49616),S=o(73744),b=o(98165),x=o(80444),_=o(68373),M=o(74016),k=o(64921),C=o(31278),P=o(85893);const w=(0,u.defineMessages)({shared:{defaultMessage:"Shared",id:"CollectionLocation.SidebarTitle.sectionShared"},private:{defaultMessage:"Private",id:"CollectionLocation.SidebarTitle.sectionPrivate"},noAccess:{defaultMessage:"No access",id:"CollectionLocation.noAccess"},emptyCollectionName:{id:"CollectionLocation.EmptyCollectionName",defaultMessage:"Untitled"}});function I(e){return(0,P.jsx)("span",{style:{paddingTop:4,paddingLeft:4,...e.style},children:"/"})}function T(e){window.__c={n:"LocationBreadcrumbTooltip"};const{collectionForLocation:t,collectionContextStore:o}=e,i=(0,a.O7)(),p=(0,u.useIntl)(),g=(0,n.VK)((()=>x.default.state.currentSpaceStore),[]),h=(0,n.VK)((()=>{const e=b.uJ(t);return e.reverse(),e}),[t]),f=(0,n.VK)((()=>o.collectionStoresStore.state),[o]),y=(0,n.VK)((()=>{if(g)return(0,m.x1)({environment:i,typedCollections:f,spaceStore:g})}),[f,i,g]),v=Boolean(null==y?void 0:y.privateDatabases[t.id]),S=Boolean(null==y?void 0:y.restrictedDatabases[t.id]),_=Boolean(null==y?void 0:y.sharedDatabases[t.id]),M=(0,n.VK)((()=>(0,s.gh)({theme:"light"})),[]),k=(0,r.yK)((e=>({textStyle:{color:M.popoverWaxPaperBackground,fontWeight:"normal"},shareTypeIndicatorIcon:{width:20,height:20,marginRight:2,color:e.mediumIconColor,padding:2,backgroundColor:M.accentColors.gray[100],borderRadius:3}})),[M]),C=v||S||_;let T=null;return v?T=(0,P.jsxs)(P.Fragment,{children:[(0,d.Q)(k.shareTypeIndicatorIcon),(0,P.jsx)("span",{children:p.formatMessage(w.private)})]}):S?T=(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)("div",{style:{...k.shareTypeIndicatorIcon,padding:0,paddingLeft:1,margin:0},children:(0,l.B)({...k.shareTypeIndicatorIcon,margin:0,background:void 0})}),(0,P.jsx)("span",{children:p.formatMessage(w.noAccess)})]}):_&&(T=(0,P.jsxs)(P.Fragment,{children:[(0,c.O)(k.shareTypeIndicatorIcon),(0,P.jsx)("span",{children:p.formatMessage(w.shared)})]})),(0,P.jsxs)("div",{style:{display:"flex"},children:[C&&(0,P.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",columnGap:4,...k.textStyle},children:[T,!S&&(0,P.jsx)(I,{style:{marginTop:-4,...k.textStyle}})]}),h.length>3?(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(j,{ancestorStore:h[0],showDivider:!0}),(0,P.jsx)("span",{style:{paddingLeft:2,paddingTop:4,...k.textStyle},children:"..."}),(0,P.jsx)(I,{style:k.textStyle}),!(v||_)&&(0,P.jsx)(j,{ancestorStore:h[h.length-2],showDivider:!0}),(0,P.jsx)(j,{ancestorStore:h[h.length-1],showDivider:!1})]}):h.map(((e,t)=>(0,P.jsx)(j,{ancestorStore:e,showDivider:t<h.length-1},e.id)))]})}function j(e){window.__c={n:"LocationBreadcrumbAncestor"};const{ancestorStore:t,showDivider:o}=e,a=(0,n.VK)((()=>(0,s.gh)({theme:"light"})),[]),i=(0,r.yK)((e=>({teamIconStyle:{background:e.popoverWaxPaperBackground},textStyle:{color:a.popoverWaxPaperBackground,fontWeigth:"normal"}})),[a]);return t instanceof _.zX?(0,P.jsxs)("div",{style:{display:"flex"},children:[(0,P.jsx)(f.Z,{store:t,showDivider:!1,maxWidth:160,iconSize:16,iconStyle:i.teamIconStyle,titleStyle:i.textStyle}),o&&(0,P.jsx)(I,{style:i.textStyle})]}):(0,P.jsxs)("div",{style:{display:"flex"},children:[(0,P.jsx)(h.Z,{store:t,showDivider:!1,emojiSize:18,maxWidth:160,titleStyle:i.textStyle},t.id),o&&(0,P.jsx)(I,{style:i.textStyle})]})}function R(e){window.__c={n:"CollectionInTeamLocation"};const{team:t,collection:o}=e,a=(0,n.VK)((()=>o.getIcon()),[o]),i=(0,r.yK)((e=>({miniTeamSpaceIcon:{background:e.home.tile.background,position:"absolute",bottom:-3,right:-3,borderRadius:2},teamSpaceIcon:{borderRadius:2,marginRight:2}})),[]);return a?(0,P.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",position:"relative",marginRight:2},children:[(0,P.jsx)(C.Z,{icon:a,size:20,emojiSize:20,isEmptyPage:!1,bucket:"public",isLarge:!0,largeIcon:!0,disabled:!0}),(0,P.jsx)(M.p,{store:t,disabled:!0,size:12,style:i.miniTeamSpaceIcon},"icon")]}):(0,P.jsx)(M.p,{store:t,disabled:!0,size:20,style:i.teamSpaceIcon},"icon")}const V=function(e){window.__c={n:"CollectionLocation"};const{collectionContextStore:t,collectionForLocation:o}=e,s=(0,a.O7)(),h=(0,u.useIntl)(),f=(0,n.VK)((()=>x.default.state.currentSpaceStore),[]),_=(0,n.VK)((()=>t.collectionStoresStore.state),[t]),M=(0,n.VK)((()=>{if(f)return(0,m.x1)({environment:s,typedCollections:_,spaceStore:f})}),[_,s,f]),I=(0,n.VK)((()=>b.VP(o)),[o]),T=Boolean(null==M?void 0:M.privateDatabases[o.id]),j=Boolean(null==M?void 0:M.restrictedDatabases[o.id]),V=Boolean(null==M?void 0:M.sharedDatabases[o.id]),Z=(0,n.VK)((()=>o.getName()??[[h.formatMessage(w.emptyCollectionName)]]),[o,h]),D=(0,n.VK)((()=>o.getIcon()),[o]),F=(0,n.VK)((()=>{var e;return null===(e=t.collectionViewBlockStore())||void 0===e?void 0:e.id}),[t]),N=(0,n.VK)((()=>{let e=i.tY.LocationProperty;return F?((0,y.qG)(F)&&(e=t.isCompactView.state?i.tY.PersonalHomeTileTasks:i.tY.PersonalHomePageTasks),e):e}),[F,t]),B=(0,r.yK)((e=>({button:{color:e.accentColors.gray[800],cursor:"pointer"},inner:{display:"flex",flexDirection:"row",alignItems:"center",columnGap:4},shareTypeIndicatorIcon:{width:20,height:20,marginRight:2,color:e.mediumIconColor,padding:2,backgroundColor:e.fill.lightGray,borderRadius:3},miniShareTypeIndicatorIcon:{position:"absolute",bottom:-3,right:-3,width:12,height:12,color:e.mediumIconColor,backgroundColor:e.fill.gray,borderRadius:3,paddingTop:1,paddingBottom:1},collectionTitleTextStyle:{lineHeight:1,fontWeight:p.Z.fontWeight.medium,marginTop:2,marginLeft:2,whiteSpace:"nowrap",...(0,v.z0)(e)}})),[]);if(!(I||T||j||V))return null;const A=T||j||V;let L=(0,c.O)(B.shareTypeIndicatorIcon);return D?L=(0,P.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",position:"relative"},children:[(0,P.jsx)(C.Z,{icon:D,size:20,emojiSize:20,isEmptyPage:!1,bucket:"public",isLarge:!0,largeIcon:!0,disabled:!0}),T?(0,d.Q)(B.miniShareTypeIndicatorIcon):(0,c.O)(B.miniShareTypeIndicatorIcon)]}):j?L=(0,P.jsx)("div",{style:{...B.shareTypeIndicatorIcon,padding:0,paddingLeft:1,margin:0},children:(0,l.B)({...B.shareTypeIndicatorIcon,margin:0,background:void 0})}):T&&(L=(0,d.Q)(B.shareTypeIndicatorIcon)),(0,P.jsx)(k.Z,{hoveredStyle:{background:"transparent"},pressedStyle:{background:"transparent"},style:B.button,onClick:e=>{const t=o.getParentBlockStore();if(t){const o=(0,S.DJ)(e);g._({environment:s,store:t,pageVisitSource:N,openInNew:o})}},children:(0,P.jsxs)("div",{style:B.inner,children:[I&&(0,P.jsx)(R,{team:I,collection:o}),A&&L,(0,P.jsx)("div",{style:B.collectionTitleTextStyle,children:Z})]})})}},56247:(e,t,o)=>{o.d(t,{b:()=>u});o(67294);var a=o(24405),n=o(72126),r=o(38737),i=o(63143),s=o(49616),l=o(33929),d=o(85248),c=o(78942),p=o(85893);function u(e){window.__c={n:"NumberValue"};const{numberValue:t,numberFormat:o,numberShowAs:u,shouldRenderTooltip:g,withComma:m,style:h}=e,f=(0,a.Fg)();if(n.i2(t)||i.z4(t))return null;const y=e.progressSize??21,v=(null==u?void 0:u.showValue)??!0,S=v&&r.uf(t,o,l.default.getIntl());let b;if("bar"===(null==u?void 0:u.type)||"ring"===(null==u?void 0:u.type)){const a=r.IM(t,u.maxValue),n="default"===u.color?f.selectLightGray:f.accentColors[u.color],i="dark"===f.mode?n[500]:n[400],l=n[50],m="dark"===f.mode?n[200]:f.selectLightGray[200],h=g?s.X7({numberValue:t,numberFormat:o,numberShowAs:u}):void 0;b="bar"===u.type?(0,p.jsx)(d.k,{percentage:a,filledColor:i,gapColor:l,unfilledColor:m,style:{marginLeft:v?8:0,height:y,...e.barStyle,...v?{}:{flexBasis:"100%"}},tooltip:h}):(0,p.jsx)(c.e,{percentage:a,filledColor:i,gapColor:l,unfilledColor:m,size:y,style:{marginLeft:v?8:0},tooltip:h})}const x={display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start",...h};return(0,p.jsxs)("div",{style:x,children:[S,b,m?", ":null]})}},80559:(e,t,o)=>{o.d(t,{Q:()=>K,Z:()=>q});o(67294);var a=o(83355),n=o(480),r=o(49085),i=o(99036),s=o(80951),l=o(72126),d=o(9291),c=o(5149),p=o(24677),u=o(98104),g=o(7801),m=o(34078),h=o(75330),f=o(10906),y=o(66890),v=o(68641),S=o(43224),b=o(19124),x=o(98742),_=o(39500),M=o(77907),k=o(22294),C=o(85526),P=o(86628),w=o(24405),I=o(90199),T=o(82990),j=o(31278),R=o(76798),V=o(26388),Z=o(85893);const D=function(e){let{store:t,propertyName:o,disableTooltip:a,render:n}=e;return(0,Z.jsx)(V.ZP,{renderTooltip:()=>(0,Z.jsx)(F,{store:t,propertyName:o}),disableTooltip:Boolean(a),delayThreshold:300,render:e=>n(e),placement:V.ug.Left})};function F(e){let{store:t,propertyName:o}=e;window.__c={n:"ParentCollectionLockedTooltipComponent"};const a=(0,w.Fg)(),n=(0,P.VK)((()=>t.getIcon()),[t]);return(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)("div",{children:o}),(0,Z.jsxs)("div",{style:{display:"flex",alignItems:"start"},children:[(0,Z.jsx)("div",{style:{paddingTop:4,paddingRight:6},children:(0,I.b)({width:12,fill:a.regularInvertedTextColor})}),(0,Z.jsxs)("div",{children:[(0,Z.jsx)("div",{children:(0,Z.jsx)(d.FormattedMessage,{defaultMessage:"Page properties are locked",id:"database.editProperty.databaseLocked.tooltipPart1"})}),(0,Z.jsx)("div",{style:{color:a.mediumInvertedTextColor},children:(0,Z.jsx)(d.FormattedMessage,{defaultMessage:"Please go to {recordIconAndTitle} to unlock",id:"database.editProperty.databaseLocked.tooltipPart2",values:{recordIconAndTitle:(0,Z.jsxs)("span",{style:{whiteSpace:"nowrap",fontWeight:T.Z.fontWeight.bold},children:[n&&(0,Z.jsx)(j.Z,{disabled:!0,icon:n,isEmptyPage:!1,size:12,style:{marginRight:4,display:"inline-block"}}),(0,Z.jsx)(R.Z,{store:t,style:{display:"inline"}})]})}})})]})]})]})}var N=o(23063),B=o(64921),A=o(50478),L=o(53437),O=o(97820);class K extends a.Z{constructor(){super(...arguments),this.popupContainer=null,this.storeTypes={isHoveringDescriptionIconStore:r.default.createClass(!1)},this.renderOrigin=e=>{const{property:t,schema:o,disabled:a,locked:n,canConfigureCollection:r,disableRowNameInteractivity:i}=this.props,{collectionContextStore:s}=this.context,d=o[t];if(!d)return;const c=null==s?void 0:s.collectionStore();if(!c||!s)return;const g=s.permissionScopes.state,m={onClick:!i&&g.canConfigureBlock?()=>function(e,t,o){u.ZH(o),p.ZH(o),h.wG(),C.Z.setState({...C.Z.state,openProperty:{property:e,isInPeekRenderer:t}})}(this.props.property,this.props.isInPeekRenderer,this.environment):l.yR};return f.p1(c)?(0,Z.jsx)(D,{propertyName:d.name,disableTooltip:n||!c.canEditCollection(),render:s=>(0,Z.jsx)(z,{hideIcon:Boolean(this.props.hideIcon),schema:o,property:t,disabled:a||Boolean(i),locked:n,canConfigureCollection:r,events:(0,x.Z)(e,(0,x.Z)(m,s)),propertyNameAriaId:this.props.propertyNameAriaId,setIsDescriptionIconTooltipHovered:e=>this.stores.isHoveringDescriptionIconStore.setState(e)}),store:c}):(0,Z.jsx)(z,{hideIcon:Boolean(this.props.hideIcon),schema:o,property:t,disabled:a||Boolean(i),locked:n,canConfigureCollection:r,events:(0,x.Z)(m,e),propertyNameAriaId:this.props.propertyNameAriaId,setIsDescriptionIconTooltipHovered:e=>this.stores.isHoveringDescriptionIconStore.setState(e)})},this.renderPopup=()=>{const{collectionContextStore:e}=this.context,t=null==e?void 0:e.settingsStore;if(e&&t)return(0,Z.jsx)(Z.Fragment,{children:t.state.open?(0,Z.jsx)(g.P,{context:v.HV.TopbarFilterPopup,collectionContextStore:e,collectionSettingsStore:t,hideDesktopHeader:!0}):(0,Z.jsx)(M.LazyPagePropertiesRowNameMenu,{...this.props,popupContainer:this.popupContainer})})}}renderComponent(){const{property:e,schema:t,disabled:o,locked:a,canConfigureCollection:n,isInPeekRenderer:r,origin:l,hideDragHandle:p,blockStore:u}=this.props,g=t[e],{device:m}=this.environment;if(!g)return;const{collectionContextStore:h}=this.context,y=null==h?void 0:h.collectionStore();if(!y||!h)return;const v=C.Z.state.hoveredProperty===e&&!k.Z.state.isKeyboardMode&&!p,{openProperty:x}=C.Z.state,M=this.stores.isHoveringDescriptionIconStore.state;return(0,Z.jsx)(V.ZP,{renderTooltip:t=>{const o=(0,i.qQ)(g)&&("text"===g.type||(0,b.KZ)())&&(0,i.q3)(g),a=(0,s.KK)(u.getModel(),y.getModel(),e);return(0,Z.jsxs)("div",{...t,style:S.F6,children:[(0,Z.jsx)("div",{children:g.name}),void 0!==(null==g?void 0:g.description)&&g.description.length>0?(0,Z.jsx)("div",{style:{color:this.theme.mediumInvertedTextColor},children:g.description}):null,o&&o.auto_update_on_edit&&(0,Z.jsx)("div",{style:{color:this.theme.mediumInvertedTextColor},children:(0,Z.jsx)(d.FormattedMessage,{defaultMessage:"Auto-updated by AI",id:"database.tableHeaderCell.tooltipAiAutofillDescription"})}),a&&(0,Z.jsx)("div",{style:{color:this.theme.mediumInvertedTextColor},children:(0,Z.jsx)(d.FormattedMessage,{defaultMessage:"Auto-updated by Notion Calendar",id:"database.tableHeaderCell.tooltipNotionCalendarDescription"})})]})},delayThreshold:M?0:500,placement:V.ug.Left,disableTooltip:f.p1(y),render:t=>(0,Z.jsxs)("div",{style:H(this.environment,this.theme,this.props.style),onMouseMove:()=>E(this.props.property),onMouseLeave:W,children:[!m.isMobile&&!o&&!(a||!n)&&!p&&(0,Z.jsx)(N.Z,{isVisible:!0,animationStyle:{opacity:v?1:0},enterAnimationStyle:{opacity:0},exitAnimationStyle:{opacity:0},render:()=>(0,Z.jsx)("div",{style:{width:A.C$+4,marginLeft:-(A.C$+4),...this.props.dragHandleStyle},onMouseMove:()=>E(this.props.property),onMouseLeave:W,children:(0,Z.jsx)(A.ZP,{role:"cell",disallowTabbing:!0,onClick:e=>function(e,t,o){_.X9()||C.Z.setState({...C.Z.state,openProperty:{property:t,isInPeekRenderer:o}})}(0,this.props.property,this.props.isInPeekRenderer)})})}),(0,Z.jsx)(L.ZP,{style:this.props.popupStyle,popupType:m.isMobile?L.kQ.SlideUp:L.kQ.Popup,originGap:1,alignmentToOrigin:L.ZP.Alignment.Start,render:this.renderPopup,open:Boolean(x&&x.property===e&&x.isInPeekRenderer===r),onDismiss:()=>{C.Z.setState({...C.Z.state,openProperty:void 0});const e=h.settingsStore;c.E3({collectionSettingsStore:e})},origin:l??this.renderOrigin(t),ref:e=>{this.popupContainer=e}})]},e)})}}function z(e){var t;window.__c={n:"PagePropertyRowNameLabel"};const{schema:o,property:a,disabled:r,locked:i,canConfigureCollection:s,events:l}=e,d=o[a],{isMobile:c}=(0,n.Fy)();return d?(0,Z.jsx)(B.Z,{role:"cell",id:e.propertyNameAriaId,style:{display:"flex",alignItems:"center",height:"100%",width:"100%",borderRadius:4,padding:"0 6px"},disabled:r||i||!s,...l,children:(0,Z.jsx)(O.Z,{propertySchema:d,showIcon:!e.hideIcon,badge:(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(O.o,{propertySchema:d}),!c&&!(null===(t=d.description)||void 0===t||!t.length)&&(0,Z.jsx)(m.Z,{setIsHovered:e.setIsDescriptionIconTooltipHovered})]}),style:{fontSize:14},property:a})}):null}K.displayName="PagePropertiesRowName",K.contextTypes={...a.w,...y.xm};const q=(0,d.injectIntl)(K);function H(e,t,o){const{device:a}=e;return{display:"flex",alignItems:"center",height:34,width:a.isMobile?120:160,flex:"none",color:t.mediumTextColor,...o}}function W(){C.Z.setState({...C.Z.state,hoveredProperty:void 0})}function E(e){C.Z.setState({...C.Z.state,hoveredProperty:e})}},52247:(e,t,o)=>{o.d(t,{Z:()=>pe});o(57658);var a=o(67294),n=o(73935),r=o(83355),i=o(1302),s=o(86628),l=o(24405),d=o(49085),c=o(92996),p=o(41432),u=o(99036),g=o(80951),m=o(39068),h=o(84619),f=o(89767),y=o(47453),v=o(70663),S=o(35840),b=o(4615),x=o(21202),_=o(6287),M=o(70203),k=o(82990),C=o(9291),P=o(50906),w=o(952),I=o(51365),T=o(31869),j=o(98834),R=o(60971),V=o(9953),Z=o(14473),D=o(98104),F=o(82530),N=o(51592),B=o(66890),A=o(49616),L=o(75079),O=o(33929),K=o(65598),z=o(29376),q=o(77907),H=o(86098),W=o(45452),E=o(77080),U=o(29798),$=o(85526),G=o(68373),Q=o(78030),X=o(88071),Y=o(64921),J=o(79131),ee=o(32163),te=o(72495),oe=o(26388),ae=o(80559),ne=o(85893);const re=E.default.checkGate("relation_menu_refactor")?q.LazyRelationMenuRow:q.LazyRelationMenuRowOld,ie={whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",minWidth:0};class se extends r.Z{constructor(){super(...arguments),this.storeTypes={menuListStore:U.Z,customTokenLimit:d.default.createClass(10),draggableListStore:W.Z},this.getRelationMenuRows=(e,t,o,a,n,r)=>{const{store:i,collectionStore:s,disabled:l,property:d,locked:p}=this.props,g=o.getFormatStore().getKeyStore("app_config_uri").getValue()===c.p$;return e.reduce(((e,c,m)=>{const h=G.G.createChildStore(i,c),f=h.getAssociatedCollectionStore();if((null==f?void 0:f.id)===u.F0(t)){const c={key:h.id,render:e=>(0,ne.jsx)(re,{...e,canDrag:n&&1!==t.limit&&i.canEdit(),collectionStore:s,targetCollectionStore:o,relatedPageStore:h,disabled:l,canConfigureCollection:r,locked:p,isSelected:!0,pageStore:i,property:d,rowType:"section",onActionButtonClick:()=>this.handleRemoveRelationClick(a,h,o),onMouseLeave:()=>this.stores.menuListStore.unsetFocus(),onSecondaryButtonClick:()=>this.handleCreateNewRelation(m+1,o,"relation_section_inline"),onInsertInline:g?()=>{D.ZH(this.environment)}:()=>this.handleCreateNewRelation(m+1,o,"relation_section_inline"),onOpenPageButtonClick:()=>{Z.O(a,h,this.environment,"relation_section_inline")},index:m+1,propertyLimit:t.limit}),action:e=>{}};e.push(c)}return e}),[])},this.relationValueStore=this.createComputedStore((()=>{const{store:e,schema:t,property:o}=this.props,a=t[o];if(!a||"relation"!==a.type)return[];const n=e.getPropertyValue(o);return g.j$({relationValue:g.rq(n),propertySchema:a,getRecordModel:e.getRecordModel})}),!0),this.numberOfRelations=this.createComputedStore((()=>this.relationValueStore.state.length)),this.handleRemoveRelationClick=(e,t,o)=>{var a;const{store:n,schema:r,property:i,blockPropertyValueOverlayStore:s}=this.props,{collectionContextStore:l}=this.context,d=r[i];if("relation"!==(null==d?void 0:d.type)||!l)return;const c=d.limit?[]:e.filter((e=>e.id!==t.id));F.createAndCommit({userAction:"RelationSection.handleRemoveRelationClick",environment:this.environment,perform:e=>{T.sf({store:n,propertyId:i,value:c,environment:this.environment,relatedPageId:t.id,propertySchema:d,transaction:e,collectionContextStore:l,analyticsData:{isFromBulkActionsToolbar:A.VM(s),analyticsFrom:A.Sy(Q.C.Page)},isUnthrottled:!1})}}),P.WF(this.environment,{from:"relation_section",collection_id:null===(a=this.props.collectionStore)||void 0===a?void 0:a.id,target_collection_id:null==o?void 0:o.id})},this.handleDraggableListDrop=(e,t)=>{const{menuListStore:o}=this.stores,{collectionStore:a,schema:n,property:r,store:i}=this.props,s=n[r];if(!s||"relation"!==s.type)return;const l=u.j0(s);if(!l)return;const d=G.NW.createChildStore(i,l);if(!(0,K.OY)(i)||!this.props.property)return;const c=i.getPropertyValue(this.props.property),p=g.j$({relationValue:g.rq(c),propertySchema:s,getRecordModel:i.getRecordModel});ge({value:[...e.map((e=>({id:e,spaceId:a.pointer.spaceId,table:x.iU}))),...p.slice(e.length)]},d,this.props.store,this.props.property,this.environment),P.yT(this.environment,{from:"relation_section"}),R.sv({store:o,focus:{section:0,indexLocal:t.endPosition,indexGlobal:t.endPosition}})},this.handleOpenProperty=(e,t,o)=>{const{blockPropertyValueOverlayStore:a,store:r,property:i}=this.props,{collectionContextStore:s}=this.context,l=n.findDOMNode(this.relationPropertyPageSectionRef);if(!(l&&l instanceof Element))return;const d=o?null==o?void 0:o.getBoundingClientRect():l.getBoundingClientRect(),c=e?d.top+z.Mu:d.top+5,p=new DOMRect(d.left,c,d.width,d.height);I.bA({environment:this.environment,blockPropertyValueOverlayStore:a,store:r,property:i,rect:p,format:Q.C.Page,mode:t,collectionContextStore:s}),P.ud(this.environment,{from:"relation_section"})},this.handleRelationPropertyPageSectionRefMount=e=>{e&&(this.relationPropertyPageSectionRef=e)},this.handleCreateNewRelation=(e,t,o)=>{const{store:a,schema:n,property:r,collectionStore:i}=this.props,{collectionContextStore:s}=this.context;if(!r)return;const l=n[r];if(!l||"relation"!==l.type)return;if(!a.canEdit())return;const d=(0,b.ZP)(),c=i.pointer.spaceId,p=l.limit,u={id:d,table:x.iU,spaceId:c};if(!(0,K.OY)(a)||!this.props.property)return;const m=a.getPropertyValue(this.props.property),h=g.j$({relationValue:g.rq(m),propertySchema:l,getRecordModel:a.getRecordModel}),{customTokenLimit:f}=this.stores,y=f.state;e&&e+1>y&&f.setState(e+1);ge({newPage:{id:d,spaceId:c,name:""},value:p?[u]:e?[...h.slice(0,e),u,...h.slice(e)]:[u,...h]},t,this.props.store,this.props.property,this.environment),w.W(this.environment,{...(0,L.Pn)(s),from:o,type:"page",target_collection_id:null==t?void 0:t.id,new_page_id:d,creating_block_id:d})}}renderComponent(){const{schema:e,format:t,locked:o,property:a,collectionStore:n,store:r,disabled:i,visibility:s,isInPeekRenderer:l,topBorder:d,disableRowNameInteractivity:p}=this.props,{device:g}=this.environment,{collectionContextStore:m}=this.context,S=e[a];if("relation"!==(null==S?void 0:S.type)||!m)return;const b=u.j0(S);if(!b)return;const x=G.NW.createChildStore(r,b),_=m.permissionScopes.state,M=this.relationValueStore.state,{customTokenLimit:k}=this.stores,P=k.state,w=M.slice(0,P),I=x.getFormatStore().getKeyStore("app_config_uri").getValue()===c.p$;if("section_hide"===s)return;if("minimal"===s||0===this.numberOfRelations.state)return(0,ne.jsx)(le,{property:a,propertySchema:S,numberOfRelations:this.numberOfRelations.state,onHandleOpenProperty:this.handleOpenProperty,onHandleRelationPropertyPageSectionRefMount:this.handleRelationPropertyPageSectionRefMount,schema:e,format:t,disabled:i,locked:o,canConfigureCollection:_.canConfigureCollection,blockStore:r,collectionStore:n,collectionContextStore:m,isInPeekRenderer:l,targetCollectionStore:x});const T=1===S.limit,j=!(g.isMobile||i||o||T),R=this.getRelationMenuRows(w,S,x,M,j,_.canConfigureCollection),V=R.map((e=>e.key.toString())),Z=(0,ne.jsx)(ee.Z,{type:ee.i.Vertical,store:this.stores.menuListStore,initialFocus:void 0,disableKeyboard:!0,style:{width:"100%"},sections:[{key:"section",render:e=>(0,ne.jsx)(te.Z,{...e,disableDesktopPadding:!0,disableMobileBorders:!0,children:j?(0,ne.jsx)(J.ZP,{direction:"vertical",keys:V,renderKey:t=>e.children[V.indexOf(t)],onDrop:this.handleDraggableListDrop,store:this.stores.draggableListStore}):e.children}),items:R}]}),D=x.canEdit(),F=r.canEdit(),N={maxWidth:g.isMobile?"none":300,...!g.isMobile&&{width:"auto"},...g.isMobile&&{paddingLeft:"none"}};return(0,ne.jsx)(de,{collectionContextStore:m,title:(0,ne.jsx)(ae.Q,{schema:e,format:t,property:a,blockStore:r,collectionStore:n,disabled:i,locked:o,canConfigureCollection:_.canConfigureCollection,intl:O.default.getIntl(),style:N,popupStyle:N,isInPeekRenderer:l,hideDragHandle:p,disableRowNameInteractivity:p}),collectionStore:n,targetCollectionStore:x,property:a,showRight:!0,disabled:i,schema:e,format:t,locked:o,canEditTargetCollection:x.canEdit(),canConfigureCollection:_.canConfigureCollection,canEditCurrentPage:F,handleMouseMove:this.props.handleMouseMove,onHandleOpenProperty:()=>{this.handleOpenProperty(!1)},onHandleRelationPropertyPageSectionRefMount:this.handleRelationPropertyPageSectionRefMount,onTitleEnter:()=>this.handleCreateNewRelation(void 0,x,"relation_section_inline"),handleClearProperty:()=>me(x,this.props.store,this.props.property,this.environment),topBorder:d,children:(0,ne.jsxs)("div",{style:{flex:1,minWidth:0,display:"flex",flexWrap:"wrap",flexDirection:"column",paddingBottom:"12px",paddingTop:"12px",width:"100%",...g.isMobile&&{paddingLeft:"none"}},onMouseMove:this.props.handleMouseMove,onMouseLeave:this.props.handleMouseLeave,children:[Z,M.length>P&&(0,ne.jsx)(Y.Z,{style:{width:"100%",display:"flex",alignItems:"center",borderRadius:3,fontSize:14,minHeight:30,margin:0,padding:"6px 8px 7px 8px"},onClick:()=>k.setState(P+10),children:(0,ne.jsx)(X.Z,{count:M.length-P,format:h.lo.Medium,style:{margin:void 0},fixedHeight:!1,isCompact:!1})}),D&&F&&!o&&(0,ne.jsxs)(Y.Z,{style:(B=this.theme,{display:"flex",alignItems:"center",color:B.lightTextColor,borderRadius:4,paddingLeft:4,paddingRight:6,height:32,width:"100%",fontSize:14}),onClick:()=>{I?me(x,this.props.store,this.props.property,this.environment):this.handleCreateNewRelation(M.length>=P?P:M.length+1,x,"relation_section_footer")},disabled:i||o,children:[I?(0,f.R)({width:16,height:16,marginRight:11,marginTop:1,marginLeft:4,fill:"#868682"}):1===S.limit?(0,v.h)(ue(this.theme)):(0,y.R)(ue(this.theme)),(0,ne.jsxs)("div",{style:ie,children:[I&&(0,ne.jsx)("span",{style:{color:this.theme.mediumTextColor},children:(0,ne.jsx)(C.FormattedMessage,{id:"RelationPropertyPageSection.button.replacePageSprint",defaultMessage:"Move to backlog"})}),!I&&(1===S.limit?(0,ne.jsx)(C.FormattedMessage,{id:"RelationPropertyPageSection.button.replacePage",defaultMessage:"Replace linked page from {propertyName}",values:{propertyName:S.name}}):(0,ne.jsx)(C.FormattedMessage,{id:"RelationPropertyPageSection.button.addPage",defaultMessage:"New page in {propertyName}",values:{propertyName:S.name}}))]})]})]})},a);var B}}function le(e){window.__c={n:"RelationPropertyMinimalPageSection"};const{property:t,propertySchema:o,numberOfRelations:n,schema:r,format:i,disabled:d,locked:p,canConfigureCollection:u,blockStore:g,collectionStore:h,onHandleOpenProperty:f,onHandleRelationPropertyPageSectionRefMount:y,isInPeekRenderer:v,targetCollectionStore:S}=e,b=(0,l.yK)((e=>({hoverButton:{display:"flex",alignItems:"baseline",justifyContent:"normal",color:e.mediumTextColor,width:"100%"},minimalButton:{display:"inline-flex",alignItems:"center",flexShrink:0,whiteSpace:"nowrap",height:28,borderRadius:4,fontSize:14,lineHeight:1.2,minWidth:0,paddingLeft:6,paddingRight:8,fontWeight:k.Z.fontWeight.medium,color:e.mediumTextColor},minimalButtonWrapper:{width:"100%",maxWidth:"100%",fontWeight:k.Z.fontWeight.medium,color:e.mediumTextColor},iconStyle:{width:14,height:14,fill:e.mediumIconColor,marginRight:6,alignItems:"baseline"},pagePropertiesRowName:{width:"100%",display:"inline-flex",flexWrap:"wrap"}})),[]),x=(0,l.Fg)(),_=(0,a.useCallback)((()=>{$.Z.setState({...$.Z.state,hoveredProperty:t})}),[t]),M=(0,a.useCallback)((()=>{$.Z.setState({...$.Z.state,hoveredProperty:void 0})}),[]),P=(0,s.VK)((()=>S.getFormatStore().getKeyStore("app_config_uri").getValue()),[S]),w=(0,N.sN)(c.p$),I=(0,N.Q_)(c.p$);return(0,ne.jsx)("div",{style:b.hoverButton,onMouseMove:_,onMouseLeave:M,children:(0,ne.jsx)(ae.Q,{schema:r,format:i,property:t,blockStore:g,collectionStore:h,disabled:d,locked:p,canConfigureCollection:u,intl:O.default.getIntl(),style:b.pagePropertiesRowName,popupStyle:b.pagePropertiesRowName,origin:(0,ne.jsx)("div",{ref:y,style:b.minimalButtonWrapper,children:(0,ne.jsx)(Y.Z,{style:b.minimalButton,onClick:()=>f(!0),onContextMenu:e=>{d||p||!u||(e.preventDefault(),$.Z.setState({...$.Z.state,openProperty:{property:t,isInPeekRenderer:v}}))},children:(0,ne.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,ne.jsx)(m.ZP,{size:14,style:b.iconStyle,theme:x,type:o.type??"relation",icon:o.icon}),P===c.p$?(0,ne.jsx)(C.FormattedMessage,{id:"RelationPropertyPageSection.sprints.showSprintRelations",defaultMessage:"{numberOfRelations, plural, =0 {Add {propertyName}} one {1 {singleTypedItemName}} other {{numberOfRelations} {pluralTypedItemName}}}",values:{numberOfRelations:n,propertyName:o.name,singleTypedItemName:w,pluralTypedItemName:I}}):(0,ne.jsx)(C.FormattedMessage,{id:"RelationPropertyPageSection.showRelations",defaultMessage:"{numberOfRelations, plural, =0 {Add {propertyName}} one {1 {propertyName}} other {{numberOfRelations} {propertyName}}}",values:{numberOfRelations:n,propertyName:o.name}})]})},`minimal-section-${t}`)}),hideDragHandle:!0,isInPeekRenderer:v})})}function de(e){window.__c={n:"RelationPropertyPageSectionHeader"};const{collectionStore:t,targetCollectionStore:o,property:a,showRight:n,disabled:r,locked:i,style:l,children:d,canEditTargetCollection:p,canConfigureCollection:g,canEditCurrentPage:m,handleMouseMove:h,onHandleOpenProperty:f,onHandleRelationPropertyPageSectionRefMount:v,onTitleEnter:b,topBorder:x=!0}=e,_=(0,s.VK)((()=>o.isSyncedCollection()),[o]),M=(0,s.VK)((()=>{const e=t.getSchema()[a];return Boolean(e&&u.NK(e))}),[t,a]),k=(0,s.VK)((()=>o.getFormatStore().getKeyStore("app_config_uri").getValue()===c.p$),[o]);return(0,ne.jsx)("div",{style:{width:"100%"},ref:v,children:(0,ne.jsx)(te.Z,{...e,topBorder:x,children:d,noTextOverflow:!0,isTitleUppercase:!1,right:n&&!_&&!M&&(0,ne.jsxs)("div",{style:{height:"100%",display:"flex",alignItems:"center",width:"100%"},children:[m&&(0,ne.jsx)(ce,{disabled:r,handleMouseMove:h,onClick:f,icon:S.R,tooltipMessage:k?(0,ne.jsx)(C.FormattedMessage,{id:"database.RelationPropertyPageSectionHeaderButton.tooltip.searchButtonSprints.message",defaultMessage:"Search for a sprint"}):(0,ne.jsx)(C.FormattedMessage,{id:"database.RelationPropertyPageSectionHeaderButton.tooltip.searchButton.message",defaultMessage:"Link a page"})},`searchIcon-${a}`),p&&m&&!k&&!i&&(0,ne.jsx)(ce,{disabled:r,handleMouseMove:h,onClick:b,icon:y.R,tooltipMessage:k?(0,ne.jsx)(C.FormattedMessage,{id:"database.RelationPropertyPageSectionHeaderButton.tooltip.addButtonSprints.message",defaultMessage:"Create new sprint"}):(0,ne.jsx)(C.FormattedMessage,{id:"database.RelationPropertyPageSectionHeaderButton.tooltip.addButton.message",defaultMessage:"Add new page"})},`addIcon-${a}`),(0,ne.jsx)(q.LazyRelationPropertyCustomizeLayoutMenu,{collectionStore:t,targetCollectionStore:o,property:a,disabled:r||!g,rowType:"section"})]}),style:{paddingTop:0,paddingBottom:2,width:"100%",...l},desktopTitleStyle:{height:6,paddingLeft:0,paddingRight:8,paddingTop:24,fontWeight:"normal"},mobileTitleStyle:{paddingLeft:0,alignItems:"center",fontWeight:"normal"}})})}function ce(e){window.__c={n:"RelationPropertyPageSectionHeaderButton"};const{disabled:t,handleMouseMove:o,onClick:a,icon:n,tooltipMessage:r}=e,i=(0,l.yK)((e=>({buttonStyle:{width:24,height:24,borderRadius:4,display:"inline-flex",alignItems:"center",justifyContent:"center",marginRight:4},iconStyle:{width:14,height:14,flexGrow:0,flexShrink:0,fill:e.mediumIconColor}})),[]);return(0,ne.jsx)(oe.ZP,{renderTooltip:()=>r,render:e=>(0,ne.jsx)(Y.Z,{style:i.buttonStyle,onMouseMove:o,onClick:a,disabled:t,...e,children:n(i.iconStyle)})})}se.displayName="RelationPropertyPageSection",se.contextTypes={...r.w,...B.xm};const pe=se;function ue(e){return{width:16,height:16,marginRight:11,marginTop:1,marginLeft:4,fill:e.lightIconColor}}function ge(e,t,o,a,n){if(!(0,K.OY)(o)||!a)return;let r;F.createAndCommit({userAction:"RelationToken.handleRelationPropertyMenuUpdate",environment:n,perform:i=>{const s=t.id;if(e.newPage&&s){const a=M.TPx(e.newPage.name),l={id:e.newPage.id,version:0,type:p.Ti.page,parent_id:s,parent_table:_.v,alive:!0,properties:{title:a},collection_id:void 0,space_id:e.newPage.spaceId};r=V.ae({environment:n,table:x.iU,value:l,inMemoryRecordCache:t.inMemoryRecordCache,transaction:i});const d=G.G.createChildStore(o,r.pointer),c=t.getDefaultTemplatePageStore();c&&j.ob({title:{text:a},environment:n,store:d,templateStore:c,isKeyboard:!1,isCreateIn:!1,transaction:i,from:"relation_property_page_section"})}if(e.value){const t=g.ow(e.value),n=o.getPropertyStore(a);V.sO({store:n,value:t,transaction:i})}}}),i.default.afterNextFlush((()=>{if(!r)return;const e=H.Z.findRow(r.id,"section",a);if(!e)return;const t=e.relationTokenBlockStoreRef.current;if(!t)return;const o=t.getBlockTitleStore(),n=o.getValue(),i=n?n[0][0].length:0,s={start:{index:i,store:o},end:{index:i,store:o}};D.NA({multiSelection:s})}))}function me(e,t,o,a){ge({value:[]},e,t,o,a)}},44831:(e,t,o)=>{o.d(t,{O:()=>g});o(67294);var a=o(86628),n=o(24405),r=o(99036),i=o(84242),s=o(82990),l=o(14976),d=o(77181),c=o(26842),p=o(26388),u=o(85893);function g(e){let{blockStore:t,collectionContextStore:o,columnWidth:g}=e;window.__c={n:"ParentItemIndicator"};const m=(0,a.VK)((()=>o.currentSubitemFormatStoreForCollection.state),[o]),h=(0,a.VK)((()=>t.getAssociatedCollectionStore()),[t]),f=(0,a.VK)((()=>{var e;return null===(e=o.collectionViewStore())||void 0===e?void 0:e.getType()}),[o]),y=(0,a.VK)((()=>{if(!m||!h)return;const e=h.getSchema()[m.property];return void 0!==e&&(0,r.p_)(e)?e:void 0}),[h,m]),v="table"===f||"list"===f||"timeline"===f,S=(0,n.yK)((e=>({parentItemIcon:{color:e.lightTextColor,width:10,height:12,marginRight:4},wrapper:{display:"inline-flex",alignItems:"center",...v?{}:{maxWidth:"100%"}},parentTitle:{...v?{maxWidth:g?.4*g+"px":"125px"}:{},textOverflow:"ellipsis",overflow:"hidden",color:e.lightTextColor,fontWeight:s.Z.fontWeight.medium,fontSize:s.Z.fontSize.UISmall.desktop,whiteSpace:"nowrap"}})),[g,v]),b=(0,a.VK)((()=>m&&y?(0,d.xb)({store:t,subitemFormat:m,propertySchema:y}):[]),[t,m,y]),x=(0,a.VK)((()=>{var e;if(0===b.length)return;const o=b[0],a=c.G.createChildStore(t,o),n=null===(e=a.getTitleStore())||void 0===e?void 0:e.getValue();return(0,l.Xh)(n,a)}),[t,b]);return(0,a.VK)((()=>(0,d.Cr)({collectionContextStore:o,blockId:t.id,blockStore:t})),[o,t])&&0!==b.length?(0,u.jsx)(p.ZP,{renderTooltip:()=>(0,u.jsx)("div",{children:x}),placement:p.ug.Bottom,alignment:p.v2.Start,delayThreshold:300,render:e=>(0,u.jsxs)("span",{style:S.wrapper,...e,children:[(0,i.v)(S.parentItemIcon),(0,u.jsx)("span",{style:S.parentTitle,children:x})]})}):null}},41137:(e,t,o)=>{o.d(t,{B:()=>p});o(67294);var a=o(86628),n=o(24405),r=o(99036),i=o(8505),s=o(82990),l=o(10906),d=o(77181),c=o(85893);function p(e){let{blockStore:t,collectionContextStore:o}=e;window.__c={n:"SubitemCountIndicator"};const p=(0,a.VK)((()=>o.currentSubitemFormatStoreForCollection.state),[o]),u=(0,a.VK)((()=>(0,l.Bm)({store:t,collectionContextStore:o})),[o,t]),g=(0,a.VK)((()=>{if(!p||!u)return;const e=u.getSchema()[p.property];return void 0!==e&&(0,r.p_)(e)?e:void 0}),[u,p]),m=(0,n.yK)((e=>({subItemIcon:{color:e.lightTextColor,width:10,height:12,marginRight:4},wrapper:{display:"inline-flex",alignItems:"center"},numSubitemsSpan:{fontSize:s.Z.fontSize.UISmall.desktop}})),[]),h=(0,a.VK)((()=>p&&g?(0,d.CJ)({store:t,subitemFormat:p,propertySchema:g}):[]),[t,p,g]);return(0,a.VK)((()=>(0,d.wI)({collectionContextStore:o,blockStore:t})),[o,t])&&0!==h.length?(0,c.jsxs)("span",{style:m.wrapper,children:[(0,i.S)(m.subItemIcon),(0,c.jsx)("span",{style:m.numSubitemsSpan,children:h.length})]}):null}},91007:(e,t,o)=>{o.d(t,{Z:()=>P});var a=o(67294),n=o(480),r=o(86628),i=o(24405),s=o(8848),l=o(13148),d=o(9291),c=o(38208),p=o(91851),u=o(40663),g=o(66890),m=o(33929),h=o(85957),f=o(24646),y=o(80444),v=o(3418),S=o(88923),b=o(23063),x=o(73063),_=o(32662),M=o(85893);const k="pm_intro_tooltip",C=(0,d.defineMessages)({dismissTooltip:{defaultMessage:"Dismiss tooltip",id:"components.collections.projManagementIntroTooltip.dismissTooltip"}});function P(e){window.__c={n:"ProjManagementIntroTooltip"};const t=(0,n.O7)(),o=(0,g.DK)(),P=(0,n.Fy)(),{store:w,origin:I,isFirstTooltip:T,phase:j,additionalPhaseToShowOn:R}=e,V=(0,r.VK)((()=>y.default.state.currentUserSettingsStore),[]),Z=(0,r.VK)((()=>y.default.state.currentSpaceStore),[]),D=(0,r.VK)((()=>(0,u.jH)(V,Z)),[V,Z]),F=(0,r.VK)((()=>{var e;return null==o||null===(e=o.settingsStore.state)||void 0===e?void 0:e.open}),[o]),N=(0,r.VK)((()=>{if("assign_to_someone"===D||"change_task_status"===D||"select_a_project"===D){const e=S.default.isSidePeekOpen()?590:650;return(0,h.wq)(w)&&(0,h.PQ)(t)>=e||!(0,h.wq)(w)&&(0,f.$3)(t)>=e?"right":"bottom"}return"bottom"}),[D,w,t]),B=(0,r.VK)((()=>{const e=y.default.state.inAppCalloutStore;return!(v.Z.state.openPopups.size>0||F||!e.canShow("pm_intro_tooltip"))&&(D===j||(!(D||!T)||!(!R||D!==R)))}),[F,D,j,T,R]),A=(0,a.useCallback)((()=>{T&&V&&Z&&!D&&p.uR({environment:t,requiredCurrPhase:void 0,nextPhase:"create_a_task",currentUserSettingsStore:V,currentSpaceStore:Z})}),[D,V,Z,t,T]);(0,a.useEffect)((()=>{if(B){var e;y.default.state.inAppCalloutStore.updateCalloutStatus({calloutId:k,visible:!0}),c.AD(t,{phase:j,collection_id:null==o||null===(e=o.collectionStore())||void 0===e?void 0:e.id,space_id:null==Z?void 0:Z.id}),A()}}),[o,null==Z?void 0:Z.id,t,j,B,A]);const L=(0,a.useCallback)((()=>{var e;if(V&&Z){if("create_a_task"===j)p.uR({environment:t,requiredCurrPhase:"create_a_task",nextPhase:"assign_to_someone",currentUserSettingsStore:V,currentSpaceStore:Z});else{y.default.state.inAppCalloutStore.updateCalloutStatus({calloutId:k,visible:!1}),p.uR({environment:t,requiredCurrPhase:void 0,nextPhase:"complete",currentUserSettingsStore:V,currentSpaceStore:Z})}c.rx(t,{phase:j,collection_id:null==o||null===(e=o.collectionStore())||void 0===e?void 0:e.id,space_id:null==Z?void 0:Z.id})}}),[o,Z,V,t,j]),O=(0,i.yK)((e=>({popupContainer:{fontSize:12,color:s.ZP.white,position:"absolute",..."bottom"===N?{top:"calc(100% + 12px)",left:"calc(50% - 110px)"}:{},..."right"===N?{top:"select_a_project"===j?"calc(2px - 50%)":"calc(-5px - 50%)",left:"calc(100% + 12px)"}:{},background:"dark"===e.mode?e.accentColors.gray[400]:e.accentColors.gray[700],borderRadius:6,padding:"8px 12px 12px 12px",width:220,boxShadow:e.largeLightBoxShadow,zIndex:99},circle:{position:"absolute",..."bottom"===N?{top:-12,left:"calc(50% - 3px)"}:{},..."right"===N?{top:"calc(50% - 3px)",left:-12}:{},background:s.ZP.UIDocNotificationsDarkGrayColor,width:6,height:6,borderRadius:6,boxShadow:`0 0 0 1.5px ${e.contentBackground}`},verticalLine:{position:"absolute",..."bottom"===N?{top:-11,left:"calc(50% - 1px)",width:2,height:11}:{},..."right"===N?{top:"calc(50% - 1px)",left:-11,width:11,height:2}:{},background:s.ZP.UIDocNotificationsDarkGrayColor},popupTitle:{width:"90%",fontWeight:500,marginBottom:2},popupDescription:{opacity:.8,lineHeight:1.35},iconButtonStyle:{position:"absolute",top:4,right:4,opacity:.8},iconStyle:{width:12,fill:s.ZP.white},dotStyle:{width:5,height:5,borderRadius:"50%",background:s.FN.dark.gray[600]},activeDotStyle:{width:5,height:5,borderRadius:"50%",background:s.FN.dark.gray[800]}})),[N,j]),K=(0,a.useCallback)((()=>(0,M.jsxs)("div",{style:O.popupContainer,children:[(0,M.jsx)("div",{style:O.circle}),(0,M.jsx)("div",{style:O.verticalLine}),(0,M.jsxs)("div",{style:O.popupTitle,children:["create_a_task"===j&&(0,M.jsx)(d.FormattedMessage,{defaultMessage:"Create a new task",id:"pmIntroTooltip.title.createATask"}),"assign_to_someone"===j&&(0,M.jsx)(d.FormattedMessage,{defaultMessage:"Assign it to someone",id:"pmIntroTooltip.title.assignToSomeone"}),"change_task_status"===j&&(0,M.jsx)(d.FormattedMessage,{defaultMessage:"Update status",id:"pmIntroTooltip.title.changeTaskStatus"}),"click_view_settings"===j&&(0,M.jsx)(d.FormattedMessage,{defaultMessage:"Configure your tasks",id:"pmIntroTooltip.title.clickViewSettings"}),"select_a_project"===j&&(0,M.jsx)(d.FormattedMessage,{defaultMessage:"Select a project",id:"pmIntroTooltip.title.selectAProject"})]}),(0,M.jsxs)("div",{style:O.popupDescription,children:["create_a_task"===j&&(0,M.jsx)(d.FormattedMessage,{defaultMessage:"Start from scratch or use the dropdown to select or create a template",id:"pmIntroTooltip.subtitle.createATask"}),"assign_to_someone"===j&&(0,M.jsx)(d.FormattedMessage,{defaultMessage:"Click to select one or multiple people",id:"pmIntroTooltip.subtitle.assignToSomeone"}),"change_task_status"===j&&(0,M.jsx)(d.FormattedMessage,{defaultMessage:"Click to change the status to ‘In progress’ or something else",id:"pmIntroTooltip.subtitle.changeTaskStatus"}),"click_view_settings"===j&&(0,M.jsx)(d.FormattedMessage,{defaultMessage:"Further configure your tasks layout, grouping, properties and more",id:"pmIntroTooltip.subtitle.clickViewSettings"}),"select_a_project"===j&&(0,M.jsx)(d.FormattedMessage,{defaultMessage:"Click to add this task to a project",id:"pmIntroTooltip.subtitle.selectAProject"})]}),(0,M.jsxs)("div",{style:{display:"flex",flexDirection:"row",marginTop:8},children:[(0,M.jsx)("div",{style:"create_a_task"===j?O.activeDotStyle:O.dotStyle}),(0,M.jsx)(_.Z,{size:6}),(0,M.jsx)("div",{style:"assign_to_someone"===j?O.activeDotStyle:O.dotStyle}),(0,M.jsx)(_.Z,{size:6}),(0,M.jsx)("div",{style:"change_task_status"===j?O.activeDotStyle:O.dotStyle}),(0,M.jsx)(_.Z,{size:6}),(0,M.jsx)("div",{style:"select_a_project"===j||"click_view_settings"===j?O.activeDotStyle:O.dotStyle})]}),(0,M.jsx)(x.Z,{icon:l.U,style:O.iconButtonStyle,iconStyle:O.iconStyle,onClick:L,ariaLabel:m.default.formatMessage(C.dismissTooltip)})]})),[L,j,O.activeDotStyle,O.circle,O.dotStyle,O.iconButtonStyle,O.iconStyle,O.popupContainer,O.popupDescription,O.popupTitle,O.verticalLine]);return P.isMobile?(0,M.jsx)(M.Fragment,{children:I}):(0,M.jsxs)("div",{style:{position:"relative"},children:[I,(0,M.jsx)(b.Z,{isVisible:B,animationStyle:{opacity:1},enterAnimationStyle:{opacity:-10},exitAnimationStyle:{opacity:0},render:K})]})}},11028:(e,t,o)=>{o.d(t,{z:()=>m});var a=o(67294),n=o(24405),r=o(94308),i=o(50063),s=o(97880),l=o(82990),d=o(70693),c=o(4308),p=o(9291),u=o(53876),g=o(85893);function m(e){window.__c={n:"VerificationPropertyLabel"};const{verificationValue:t,fontSize:o=u.z6}=e,m=(0,p.useIntl)(),h=(0,a.useMemo)((()=>c.WN(t)),[t]),f=h.type,y=(0,n.yK)((e=>({icon:{width:"expired"===f?8:14,height:"expired"===f?9:14,fill:"verified"===f?e.blueColor:e.mediumIconColor},caption:{fontVariantNumeric:"normal",fontWeight:l.Z.fontWeight.regular,color:e.regularTextColor,textTransform:"none",letterSpacing:0,marginLeft:6,marginRight:0,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontSize:o,lineHeight:u.Ac},expiredIconContainer:{width:14,height:14,borderRadius:6,border:"1px dashed",borderColor:e.mediumIconColor,display:"flex",justifyContent:"center",alignItems:"center",flexShrink:0}})),[f,o]);if("none"===f)return null;let v=null,S=null;const b=y.caption;switch(f){case"verified":v=(0,r.f)({...y.icon}),S=h.isIndefinite?(0,g.jsx)(p.FormattedMessage,{defaultMessage:"Verified",id:"VerificationPropertyButton.verifiedIndefinitely"}):(0,g.jsx)(p.FormattedMessage,{defaultMessage:"Until {date}",id:"VerificationPropertyButton.verifiedUntil",values:{date:d.mb({dateTime:h.dateTimeRange.end,intl:m})}});break;case"expired":v=(0,g.jsx)("div",{style:y.expiredIconContainer,children:(0,i.X)({...y.icon})}),S=(0,g.jsx)(p.FormattedMessage,{defaultMessage:"Expired {timeFromMoment}",id:"VerificationPropertyButton.expired",values:{timeFromMoment:c.kY(h.dateTimeRange.end)}});break;default:(0,s.t1)(f)}return(0,g.jsxs)("div",{style:{display:"flex",alignItems:"center",width:"100%"},children:[v,(0,g.jsx)("div",{style:b,children:S})]})}},58230:(e,t,o)=>{o.d(t,{Z:()=>h});o(67294);var a=o(480),n=o(86628),r=o(54368),i=o(77420),s=o(19889),l=o(97880),d=o(70693),c=o(9291),p=o(68373),u=o(39111),g=o(29302),m=o(85893);function h(e){window.__c={n:"VerificationSummary"};const{isMobile:t}=(0,a.Fy)();return(0,m.jsx)("div",{style:t?{padding:"12px 20px",fontSize:14}:{fontSize:12,display:"flex",alignItems:"center"},children:(0,m.jsx)(f,{...e})})}function f(e){window.__c={n:"VerificationSummaryMessage"};const{verificationState:t,blockStore:o}=e,a=(0,c.useIntl)();switch(t.type){case"none":return null;case"verified":return t.isIndefinite?(0,m.jsx)(c.FormattedMessage,{defaultMessage:"Verified by {user} on {date}",id:"VerificationSummary.verifiedIndefinitely",values:{user:(0,m.jsx)(y,{actorPointer:t.actorPointer,blockStore:o}),date:(0,d.mb)({dateTime:t.startDateTime,intl:a})}}):(0,m.jsx)(c.FormattedMessage,{defaultMessage:"Verified by {user} from {dateTimeRange}",id:"VerificationSummary.verified",values:{user:(0,m.jsx)(y,{actorPointer:t.actorPointer,blockStore:o}),dateTimeRange:(0,d.pe)({luxonRange:t.dateTimeRange,intl:a})}});case"expired":return(0,m.jsx)(c.FormattedMessage,{defaultMessage:"Last verified by {user} from {dateTimeRange}",id:"VerificationSummary.verificationExpired",values:{user:(0,m.jsx)(y,{actorPointer:t.actorPointer,blockStore:o}),dateTimeRange:(0,d.pe)({luxonRange:t.dateTimeRange,intl:a})}});default:(0,l.t1)(t)}}function y(e){window.__c={n:"VerificationSummaryUser"};const{actorPointer:t,blockStore:o}=e,a=(0,n.VK)((()=>p.t1.createChildStore(o,t)),[o,t]),d={display:"flex",marginLeft:4,marginRight:4};return a.table===s.KJ?(0,m.jsx)(g.Z,{userStore:a,inline:!0,style:d,avatarSize:16,avatarMarginRight:4}):a.table===i.cZ?(0,m.jsx)(u.Z,{botStore:a,style:d,avatarSize:16}):a.table===r.y?(0,m.jsx)(g.Z,{userStore:void 0,inline:!0,style:d,avatarSize:16,avatarMarginRight:4}):void(0,l.t1)(a)}},49616:(e,t,o)=>{o.d(t,{AF:()=>x,Hw:()=>b,Sy:()=>v,TP:()=>P,VM:()=>y,X7:()=>_,X9:()=>k,aJ:()=>w,g0:()=>M,z0:()=>S});var a=o(15145),n=o(80951),r=o(58810),i=o(17683),s=o(32240),l=o(72126),d=o(38737),c=o(97880),p=o(64002),u=o(63143),g=o(9291),m=o(78030),h=o(84210),f=o(33929);function y(e){return Boolean(e.state.isOpen&&e.state.collectionsBulkActionsToolbarStore)}function v(e){switch(e){case m.C.Table:return"table";case m.C.Board:return"board";case m.C.ListView:return"list";case m.C.GalleryView:return"gallery";case m.C.Relation:case m.C.RelationSection:return"relation_section";case m.C.Timeline:return"timeline";case m.C.Calendar:return"calendar";case m.C.Page:return"page_properties";case m.C.CompactPage:return"compact_page";case m.C.Mini:return"mini_peek";case m.C.PropertyModule:return"property_module";default:(0,c.t1)(e)}}function S(e){return{backgroundImage:`linear-gradient(\n\t\tto right,\n\t\t${e.darkDividerColor} 0%,\n\t\t${e.darkDividerColor} 100%\n\t)`,backgroundRepeat:"repeat-x",backgroundPosition:"0 100%",backgroundSize:"100% 1px"}}function b(e){const{store:t,property:o,propertySchema:r}=e,i=null==r?void 0:r.type;if("title"===i)return(0,h.ZP)({store:t,fullyQualified:!1,pageVisitSource:a.tY.LinkInPage});{const e=t.getPropertyValue(o);return n.Hw(i,e)}}function x(e){let t=n.zB(e);if(!t||""===t.trim()||t.trim().includes(" "))return{domain:void 0,restOfUrl:void 0};t=t.trim();let o=p.Qc(t),a=o.host;if(o.protocol&&a||(o=p.Qc(`http://${t}`),a=o.host),!a)return{domain:void 0,restOfUrl:void 0};a&&(a=a.replace(/^www./i,""));const r=t.toLowerCase().indexOf(a.toLowerCase());if(-1===r)return{domain:void 0,restOfUrl:void 0};a=t.slice(r,r+a.length);return{domain:a,restOfUrl:t.slice(r+a.length)}}function _(e){const{numberValue:t,numberFormat:o,numberShowAs:a}=e;if(!(l.i2(t)||u.z4(t)||"bar"!==(null==a?void 0:a.type)&&"ring"!==(null==a?void 0:a.type))){const e=f.default.getIntl();return"percent"===o?d.uf(t,"percent",e):`${t} / ${a.maxValue}`}}function M(e){const{property:t,collectionStore:o}=e,a=o.isSyncedCollection();return Boolean(a)&&n.wl(t)}function k(e,t){switch(e){case"side_peek":return{icon:s.y,tooltip:f.default.formatMessage(C.openInSidePeekTooltip),caption:t?"":f.default.formatMessage(C.openAsPageTitle)};case"center_peek":return{icon:i.Q,tooltip:f.default.formatMessage(C.openInCenterPeekTooltip),caption:t?"":f.default.formatMessage(C.openAsPageTitle)};case"full_page":return{icon:r.Z,tooltip:f.default.formatMessage(C.openAsPageTooltip),caption:t?"":f.default.formatMessage(C.openAsPageTitle)};default:(0,c.t1)(e)}}const C=(0,g.defineMessages)({openAsPageTitle:{defaultMessage:"Open",id:"database.actionButton.openAsPageTitle"},openAsPageTooltip:{defaultMessage:"Open as page",id:"database.actionButton.openAsPageTooltip"},openInCenterPeekTooltip:{defaultMessage:"Open in center peek",id:"database.actionButton.openInCenterPeekTooltip"},openInSidePeekTooltip:{defaultMessage:"Open in side peek",id:"database.actionButton.openInSidePeekTooltip"}});function P(e){const t=e.getSchema();if(t)for(const[a,n]of Object.entries(t)){var o;if(n&&"text"===n.type&&"summarize"===(null===(o=n.ai_inference)||void 0===o?void 0:o.type)){const t=e.getPropertyValue(a);if(t)return t}}}function w(e){const{store:t,additionalStores:o,collectionContextStore:a}=e,n=t.getAssociatedCollectionStore();return!("collectionTypedView"!==(null==a?void 0:a.contextType)||!n)&&o.some((e=>{var t;return(null===(t=e.getAssociatedCollectionStore())||void 0===t?void 0:t.id)!==n.id}))}},16187:(e,t,o)=>{o.d(t,{BG:()=>y,Ol:()=>b,SD:()=>S,Sn:()=>v,VN:()=>g,v6:()=>h});var a=o(41892),n=o(2032),r=o(40506),i=o(7057),s=o(72126),l=o(38737),d=o(97880),c=o(9291),p=o(33929);const u=(0,c.defineMessages)({show_unique:{defaultMessage:"Show unique values",id:"database.aggregationFullName.unique_values"},count:{defaultMessage:"Count all",id:"database.aggregationFullName.count"},count_values:{defaultMessage:"Count values",id:"database.aggregationFullName.count_values"},unique:{defaultMessage:"Count unique values",id:"database.aggregationFullName.unique"},empty:{defaultMessage:"Count empty",id:"database.aggregationFullName.empty"},not_empty:{defaultMessage:"Count not empty",id:"database.aggregationFullName.not_empty"},percent_empty:{defaultMessage:"Percent empty",id:"database.aggregationFullName.percent_empty"},percent_not_empty:{defaultMessage:"Percent not empty",id:"database.aggregationFullName.percent_not_empty"},sum:{defaultMessage:"Sum",id:"database.aggregationFullName.sum"},average:{defaultMessage:"Average",id:"database.aggregationFullName.average"},median:{defaultMessage:"Median",id:"database.aggregationFullName.median"},min:{defaultMessage:"Min",id:"database.aggregationFullName.min"},max:{defaultMessage:"Max",id:"database.aggregationFullName.max"},range:{defaultMessage:"Range",id:"database.aggregationFullName.range"},earliest_date:{defaultMessage:"Earliest date",id:"database.aggregationFullName.earliest_date"},latest_date:{defaultMessage:"Latest date",id:"database.aggregationFullName.latest_date"},date_range:{defaultMessage:"Date range",id:"database.aggregationFullName.date_range"},checked:{defaultMessage:"Checked",id:"database.aggregationFullName.checked"},unchecked:{defaultMessage:"Unchecked",id:"database.aggregationFullName.unchecked"},percent_checked:{defaultMessage:"Percent checked",id:"database.aggregationFullName.percent_checked"},percent_unchecked:{defaultMessage:"Percent unchecked",id:"database.aggregationFullName.percent_unchecked"},count_per_group:{defaultMessage:"Count per group",id:"database.aggregationFullName.count_per_group"},percent_per_group:{defaultMessage:"Percent per group",id:"database.aggregationFullName.percent_per_group"}}),g={count:p.default.formatMessage(u.count),count_values:p.default.formatMessage(u.count_values),unique:p.default.formatMessage(u.unique),show_unique:p.default.formatMessage(u.show_unique),empty:p.default.formatMessage(u.empty),not_empty:p.default.formatMessage(u.not_empty),percent_empty:p.default.formatMessage(u.percent_empty),percent_not_empty:p.default.formatMessage(u.percent_not_empty),sum:p.default.formatMessage(u.sum),average:p.default.formatMessage(u.average),median:p.default.formatMessage(u.median),min:p.default.formatMessage(u.min),max:p.default.formatMessage(u.max),range:p.default.formatMessage(u.range),earliest_date:p.default.formatMessage(u.earliest_date),latest_date:p.default.formatMessage(u.latest_date),date_range:p.default.formatMessage(u.date_range),checked:p.default.formatMessage(u.checked),unchecked:p.default.formatMessage(u.unchecked),percent_checked:p.default.formatMessage(u.percent_checked),percent_unchecked:p.default.formatMessage(u.percent_unchecked),count_per_group:p.default.formatMessage(u.count_per_group),percent_per_group:p.default.formatMessage(u.percent_per_group)},m=(0,c.defineMessages)({count:{defaultMessage:"Count",id:"database.aggregationShortName.count"},count_values:{defaultMessage:"Values",id:"database.aggregationShortName.count_values"},unique:{defaultMessage:"Unique",id:"database.aggregationShortName.unique"},show_unique:{defaultMessage:"Show unique",id:"database.aggregationShortName.showUnique"},empty:{defaultMessage:"Empty",id:"database.aggregationShortName.empty"},not_empty:{defaultMessage:"Not Empty",id:"database.aggregationShortName.not_empty"},percent_empty:{defaultMessage:"Empty",id:"database.aggregationShortName.percent_empty"},percent_not_empty:{defaultMessage:"Not Empty",id:"database.aggregationShortName.percent_not_empty"},sum:{defaultMessage:"Sum",id:"database.aggregationShortName.sum"},average:{defaultMessage:"Average",id:"database.aggregationShortName.average"},median:{defaultMessage:"Median",id:"database.aggregationShortName.median"},min:{defaultMessage:"Min",id:"database.aggregationShortName.min"},max:{defaultMessage:"Max",id:"database.aggregationShortName.max"},range:{defaultMessage:"Range",id:"database.aggregationShortName.range"},earliest_date:{defaultMessage:"Earliest",id:"database.aggregationShortName.earliest_date"},latest_date:{defaultMessage:"Latest",id:"database.aggregationShortName.latest_date"},date_range:{defaultMessage:"Range",id:"database.aggregationShortName.date_range"},checked:{defaultMessage:"Checked",id:"database.aggregationShortName.checked"},unchecked:{defaultMessage:"Unchecked",id:"database.aggregationShortName.unchecked"},percent_checked:{defaultMessage:"Checked",id:"database.aggregationShortName.percent_checked"},percent_unchecked:{defaultMessage:"Unchecked",id:"database.aggregationShortName.percent_unchecked"},count_per_group:{defaultMessage:"Count",id:"database.aggregationShortName.count_per_group"},percent_per_group:{defaultMessage:"Percent",id:"database.aggregationShortName.percent_per_group"}}),h={count:p.default.formatMessage(m.count),count_values:p.default.formatMessage(m.count_values),unique:p.default.formatMessage(m.unique),show_unique:p.default.formatMessage(m.show_unique),empty:p.default.formatMessage(m.empty),not_empty:p.default.formatMessage(m.not_empty),percent_empty:p.default.formatMessage(m.percent_empty),percent_not_empty:p.default.formatMessage(m.percent_not_empty),sum:p.default.formatMessage(m.sum),average:p.default.formatMessage(m.average),median:p.default.formatMessage(m.median),min:p.default.formatMessage(m.min),max:p.default.formatMessage(m.max),range:p.default.formatMessage(m.range),earliest_date:p.default.formatMessage(m.earliest_date),latest_date:p.default.formatMessage(m.latest_date),date_range:p.default.formatMessage(m.date_range),checked:p.default.formatMessage(m.checked),unchecked:p.default.formatMessage(m.unchecked),percent_checked:p.default.formatMessage(m.percent_checked),percent_unchecked:p.default.formatMessage(m.percent_unchecked),count_per_group:p.default.formatMessage(m.count_per_group),percent_per_group:p.default.formatMessage(m.percent_per_group)},f=(0,c.defineMessages)({count:{defaultMessage:"Counts the total number of pages, including blank pages.",id:"database.aggregationDescription.count"},count_values:{defaultMessage:"Counts the number of non-empty values for this property. For a type that can contain multiple values like multi-select or person, this will count the number of selected values for each page.",id:"database.aggregationDescription.count_values"},unique:{defaultMessage:"Counts the number of unique values for this property. For a type that can contain multiple values like multi-select or person, this will count the unique values across all pages.",id:"database.aggregationDescription.unique"},show_unique:{defaultMessage:"Shows the unique values for this property. For a type that can contain multiple values like multi-select or person, this will count the unique values across all pages.",id:"database.aggregationDescription.show_unique"},empty:{defaultMessage:"Counts the number of pages with an empty value for this property.",id:"database.aggregationDescription.empty"},not_empty:{defaultMessage:"Counts the number of pages with a non-empty value for this property.",id:"database.aggregationDescription.not_empty"},percent_empty:{defaultMessage:"Displays the percentage of pages that have an empty value for this property.",id:"database.aggregationDescription.percent_empty"},percent_not_empty:{defaultMessage:"Displays the percentage of pages that have a non-empty value for this property.",id:"database.aggregationDescription.percent_not_empty"},sum:{defaultMessage:"Computes the sum of a numeric property.",id:"database.aggregationDescription.sum"},average:{defaultMessage:"Computes the average of a numeric property.",id:"database.aggregationDescription.average"},median:{defaultMessage:"Finds the median of a numeric property.",id:"database.aggregationDescription.median"},min:{defaultMessage:"Finds the minimum of a numeric property.",id:"database.aggregationDescription.min"},max:{defaultMessage:"Finds the maximum of a numeric property.",id:"database.aggregationDescription.max"},range:{defaultMessage:"Computes the range (maximum - minimum) of a numeric property.",id:"database.aggregationDescription.range"},earliest_date:{defaultMessage:"Finds the earliest date in time of a date property.",id:"database.aggregationDescription.earliest_date"},latest_date:{defaultMessage:"Finds the latest date in time of a date property.",id:"database.aggregationDescription.latest_date"},date_range:{defaultMessage:"Computes the date range (latest date - earliest date) of a date property.",id:"database.aggregationDescription.date_range"},checked:{defaultMessage:"Counts the number of pages with a checked checkbox for this property.",id:"database.aggregationDescription.checked"},unchecked:{defaultMessage:"Counts the number of pages with an unchecked checkbox for this property.",id:"database.aggregationDescription.unchecked"},percent_checked:{defaultMessage:"Displays the percentage of pages that have a checked checkbox for this property.",id:"database.aggregationDescription.percent_checked"},percent_unchecked:{defaultMessage:"Displays the percentage of pages that have an unchecked checkbox for this property.",id:"database.aggregationDescription.percent_unchecked"},count_per_group:{defaultMessage:"Counts the total number of pages that have this Status Group.",id:"database.aggregationDescription.count_per_group"},percent_per_group:{defaultMessage:"Displays the percentage of pages that have this Status Group",id:"database.aggregationDescription.percent_per_group"}}),y={count:p.default.formatMessage(f.count),count_values:p.default.formatMessage(f.count_values),unique:p.default.formatMessage(f.unique),show_unique:p.default.formatMessage(f.show_unique),empty:p.default.formatMessage(f.empty),not_empty:p.default.formatMessage(f.not_empty),percent_empty:p.default.formatMessage(f.percent_empty),percent_not_empty:p.default.formatMessage(f.percent_not_empty),sum:p.default.formatMessage(f.sum),average:p.default.formatMessage(f.average),median:p.default.formatMessage(f.median),min:p.default.formatMessage(f.min),max:p.default.formatMessage(f.max),range:p.default.formatMessage(f.range),earliest_date:p.default.formatMessage(f.earliest_date),latest_date:p.default.formatMessage(f.latest_date),date_range:p.default.formatMessage(f.date_range),checked:p.default.formatMessage(f.checked),unchecked:p.default.formatMessage(f.unchecked),percent_checked:p.default.formatMessage(f.percent_checked),percent_unchecked:p.default.formatMessage(f.percent_unchecked),count_per_group:p.default.formatMessage(f.count_per_group),percent_per_group:p.default.formatMessage(f.percent_per_group)},v={count:a.Z.images.aggregations.countPng,count_values:a.Z.images.aggregations.countValuesPng,unique:a.Z.images.aggregations.uniquePng,show_unique:void 0,empty:a.Z.images.aggregations.emptyPng,not_empty:a.Z.images.aggregations.notEmptyPng,percent_empty:a.Z.images.aggregations.percentEmptyPng,percent_not_empty:a.Z.images.aggregations.percentNotEmptyPng,sum:a.Z.images.aggregations.sumPng,average:a.Z.images.aggregations.averagePng,median:a.Z.images.aggregations.medianPng,min:a.Z.images.aggregations.minPng,max:a.Z.images.aggregations.maxPng,range:a.Z.images.aggregations.rangePng,earliest_date:a.Z.images.aggregations.earliestDatePng,latest_date:a.Z.images.aggregations.latestDatePng,date_range:a.Z.images.aggregations.dateRangePng,checked:a.Z.images.aggregations.checkedPng,unchecked:a.Z.images.aggregations.uncheckedPng,percent_checked:a.Z.images.aggregations.percentCheckedPng,percent_unchecked:a.Z.images.aggregations.percentUncheckedPng,count_per_group:a.Z.images.aggregations.countPng,percent_per_group:a.Z.images.aggregations.percentCheckedPng};function S(e,t){switch(e){case"earliest_date":case"show_unique":case"latest_date":case"earliest_date":case"date_range":return;case"percent_empty":case"percent_not_empty":case"percent_checked":case"percent_unchecked":return"percent";case"count":case"empty":case"not_empty":case"unique":case"count_values":case"checked":case"unchecked":return"number";case"sum":case"average":case"median":case"min":case"max":case"range":return t??"number";default:switch(e.operator){case"count_per_group":return;case"percent_per_group":return"percent";default:(0,d.t1)(e.operator)}}}function b(e){const{aggregationType:t,value:o,userTimeZone:a,dateFormat:d,roundDecimal:c}=e;if("date"===o.type){if(!(0,n.Fw)(t))return;if(!o.value)return;return"date_range"===t?(0,i.LU)(o.value,a,p.default.getIntl()):(0,i.ZV)({value:r.QD(o.value),date_format:d??r.sF,userTimeZone:a,allowRelativeDates:!0,intl:p.default.getIntl()})}if((0,n.Fw)(t))return;if("show_unique"===t)return;if("object"==typeof o.value)return;if("string"==typeof o.value)return o.value;const u=void 0===o.value?void 0:s.NM(o.value,c),g=S(t,e.numberFormat);return(0,l.uf)(u,g,p.default.getIntl())}},73807:(e,t,o)=>{o.d(t,{_:()=>r});var a=o(86628),n=o(77080);function r(){return(0,a.VK)((()=>n.default.getConfigKey("collection_request_settings","clientFormulaTimeoutMs")),[])}},61931:(e,t,o)=>{o.d(t,{$1:()=>v,A5:()=>c,Cm:()=>d,EP:()=>s,Er:()=>S,FK:()=>g,MI:()=>f,Uf:()=>l,WB:()=>u,Wx:()=>h,XX:()=>n,_U:()=>b,iO:()=>i,jO:()=>y,jX:()=>p,jq:()=>r,yc:()=>m});var a=o(97880);const n=80,r=40,i=24,s=20,l=270,d=405,c=16,p=44,u=l-p,g=144,m=144,h="linear-gradient(transparent 0%, black 10px)",f={backdropFilter:"blur(48px)",WebkitBackdropFilter:"blur(48px)"};function y(e){return{width:48,height:48,fill:e.lightIconColor}}function v(e){let{theme:t,isPhone:o}=e;return o?t.personalHomeBackgroundPhone:t.personalHomeBackgroundDesktop}function S(e){let{theme:t,isPhone:o,buttonState:a,hasCover:n}=e,r=t.whiteButtonBackground;switch(a){case"hovered":r=t.whiteButtonHoveredBackground;break;case"pressed":r=t.whiteButtonPressedBackground}return o&&(r=void 0),{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",background:r,...f,boxShadow:n?b({isPhone:o,theme:t}):void 0,width:28,height:28,borderRadius:4}}function b(e){let{isPhone:t,theme:o}=e;if("dark"===o.mode)return"unset";o.mode;const n=t?.5:1,r=o.home.tile.border&&`0 0 0 ${n}px ${o.home.tile.border}`;return t?r:[r,"0 12px 40px rgba(0, 0, 0, 0.025)"].filter(a.$K).join(", ")}},86098:(e,t,o)=>{o.d(t,{Z:()=>r});var a=o(35431);class n extends a.Z{findRow(e,t,o){return this.find((a=>a.props.relatedPageStore.id===e&&a.props.rowType===t&&a.props.property===o))}}const r=new n},79576:(e,t,o)=>{o.d(t,{W:()=>i});var a=o(49085),n=o(4615);class r extends a.default{getInitialState(){return{type:"uninitialized"}}isWriting(){return"filling"===this.state.type&&!this.state.haveAllBlocksCompletedAutofill&&!this.state.didInterruptStreaming}setIsWriting(e){var t;const{propertySchema:o,stores:a,sessionIdForAnalytics:r}=e,i=a[0].getAssociatedCollectionId()??(null===(t=a[0].getCollectionViewCollectionStore())||void 0===t?void 0:t.id),s=r||(0,n.ZP)();return this.setState({type:"filling",propertySchema:o,collectionId:i,numBlocksToAutofill:a.length,numBlocksAutofilled:0,sessionId:s,didInterruptStreaming:!1,haveAllBlocksCompletedAutofill:!1}),s}}const i=new r},70693:(e,t,o)=>{o.d(t,{mb:()=>s,nK:()=>l,pe:()=>d});var a=o(40506),n=o(7057),r=o(53877),i=o(42875);function s(e){const{dateTime:t,intl:o,shortenDateAndRange:a}=e,i=r.OQ.toPersistedDate(t.valueOf());return n.ZV({value:i,allowRelativeDates:!0,intl:o,shortenDateAndRange:a,displayInUserTimezone:!0})}function l(e){const{dateTime:t,intl:o,userTimeZone:a,displayInUserTimezone:i,alwaysIncludeTimezone:s}=e,l=r.OQ.toPersistedDateTime(t.valueOf(),t.zoneName);return n.ZV({value:l,allowRelativeDates:!0,intl:o,userTimeZone:a,displayInUserTimezone:i,alwaysIncludeTimezone:s})}function d(e){const{luxonRange:t,intl:o}=e,s=r.OQ.toPersistedDateRange(t),l=n.ZV({value:s,allowRelativeDates:!1,shortenDateAndRange:!0,intl:o,displayInUserTimezone:!0}),d=t.end.setZone((0,i.r)()),c=n.mr({start_time:d.toFormat(a.jK),humanReadable:!1,intl:o});return o.formatMessage({id:"verification.timeRange",defaultMessage:"{formattedDateRange} at {formattedEndTime}"},{formattedDateRange:l,formattedEndTime:c})}}}]);