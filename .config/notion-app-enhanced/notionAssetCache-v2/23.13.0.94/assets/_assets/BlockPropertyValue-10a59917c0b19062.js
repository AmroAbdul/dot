"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[4832],{97039:(e,t,o)=>{o.d(t,{Z:()=>Di});var n=o(67294),r=o(33125),i=o(86628),l=o(66890),s=o(11368),a=o(58299),c=o(480),u=o(24405),d=o(90559),p=o(80951),y=o(39694),m=o(65473),f=o(8606),h=o(78030),S=o(53876),x=o(77722),b=o(85893);const v=n.memo((0,n.forwardRef)((function(e,t){const{store:o,collectionStore:r,buttonStyle:l,onContextMenu:s,quickActionButtons:a,property:c}=e,{baseStyles:d}=(0,n.useContext)(f.O),p=(0,i.VK)((()=>o.getPropertyValue(c)),[c,o]),y=(0,u.yK)((()=>({buttonStyle:{...d.buttonStyle,...l},buttonPressedStyle:d.buttonPressedStyle??{},buttonHoveredStyle:d.buttonHoveredStyle??{}})),[d.buttonHoveredStyle,d.buttonPressedStyle,d.buttonStyle,l]);return(0,b.jsx)(m.Z,{ref:t,style:y.buttonStyle,hoveredStyle:y.buttonHoveredStyle,pressedStyle:y.buttonPressedStyle,onContextMenu:s,quickActionButtons:a,editButtonClickProps:void 0,children:(0,b.jsx)(x.Y,{fontColor:"light",children:(0,b.jsx)(g,{propertyValue:p,collectionStore:r})})})})));function g(e){window.__c={n:"AutoIncrementIdPropertyValue"};const{propertyValue:t,collectionStore:o}=e,n=(0,i.VK)((()=>{var e;const n=null==o||null===(e=o.getRecordKeyStore())||void 0===e?void 0:e.getRecordKey(),r=(0,p.ah)(t);return void 0===r?"...":(0,d.wf)(n,r)}),[o,t]);return(0,b.jsx)(b.Fragment,{children:n})}const w=(0,n.forwardRef)((function(e,t){window.__c={n:"PageAutoIncrementIdProperty"};const{store:o,collectionStore:r,property:l,format:s}=e,a=(0,i.VK)((()=>r.getSchema()),[r]),c=(0,u.yK)((()=>({buttonStyle:{padding:S.sf[h.C.Page].text}})),[]),d=(0,n.useMemo)((()=>(0,b.jsx)(y.Z,{store:o,schema:a,property:l,format:s})),[s,l,a,o]),p=V(e,t,c);return(0,b.jsx)(v,{...p,quickActionButtons:d})})),C=(0,n.forwardRef)((function(e,t){window.__c={n:"TableAutoIncrementIdProperty"};const{store:o,collectionStore:r,property:l,format:s}=e,{isMobile:a}=(0,c.Fy)(),d=(0,i.VK)((()=>r.getSchema()),[r]),p=(0,u.yK)((()=>({buttonStyle:{padding:S.sf[h.C.Table].text}})),[]),m=(0,n.useMemo)((()=>{if(!a)return(0,b.jsx)(y.Z,{store:o,schema:d,property:l,format:s},"copy")}),[s,a,l,d,o]),f=V(e,t,p);return(0,b.jsx)(v,{...f,quickActionButtons:m})})),_=(0,n.forwardRef)((function(e,t){window.__c={n:"CompactAutoIncrementIdProperty"};const o=V(e,t,(0,u.yK)((()=>({buttonStyle:{padding:S.sf[h.C.CompactPage].text}})),[]));return(0,b.jsx)(v,{...o})})),P=(0,n.forwardRef)((function(e,t){window.__c={n:"ListAutoIncrementIdProperty"};const o=V(e,t);return(0,b.jsx)(v,{...o})})),k=(0,n.forwardRef)((function(e,t){window.__c={n:"BoardAutoIncrementIdProperty"};const o=V(e,t,(0,u.yK)((()=>({buttonStyle:{padding:S.sf[h.C.Board].text}})),[]));return(0,b.jsx)(v,{...o})})),R=(0,n.forwardRef)((function(e,t){window.__c={n:"CalendarAutoIncrementIdProperty"};const o=V(e,t);return(0,b.jsx)(v,{...o})})),j=(0,n.forwardRef)((function(e,t){window.__c={n:"GalleryAutoIncrementIdProperty"};const o=V(e,t);return(0,b.jsx)(v,{...o})})),M=(0,n.forwardRef)((function(e,t){window.__c={n:"TimelineAutoIncrementIdProperty"};const o=V(e,t);return(0,b.jsx)(v,{...o})})),B=(0,n.forwardRef)((function(e,t){window.__c={n:"RelationAutoIncrementIdProperty"};const o=V(e,t);return(0,b.jsx)(v,{...o})})),T=(0,n.forwardRef)((function(e,t){window.__c={n:"RelationSectionAutoIncrementIdProperty"};const o=V(e,t);return(0,b.jsx)(v,{...o})}));function V(e,t,o){const{store:n,collectionStore:r,property:i,onContextMenu:l}=e;return{ref:t,store:n,collectionStore:r,property:i,onContextMenu:l,buttonStyle:null==o?void 0:o.buttonStyle}}var A=o(98963),O=o(9291),I=o(47043),E=o(49117),F=o(33929),K=o(79797),Z=o(27755),L=o(63296);const N=n.memo((0,n.forwardRef)((function(e,t){const{store:o,property:r,collectionStore:l,buttonStyle:s,innerButtonStyle:a,onContextMenu:d,disabled:p}=e,y=(0,c.O7)(),{baseStyles:h,propertySchema:S,collectionContextStore:x}=(0,n.useContext)(f.O),v=S,g=(null==h?void 0:h.sizing)??"default",w=(0,i.VK)((()=>{const e=y.currentUser.id;if(!x||"button"!==(null==v?void 0:v.type)||!v.automation_id)return;const t=K.Mz.createChildStore(l,{table:A.cv,id:v.automation_id,spaceId:l.getSpaceId()});return{type:"button_property",persisted:!0,automationStore:t,collectionContextStore:x,propertyId:r,propertySchema:v,intl:F.default.getIntl(),parentRecordStore:t,currentUserId:e}}),[x,l,y.currentUser.id,r,v]),C=(0,n.useCallback)((async()=>{w&&await I.oS({environment:y,store:o,clientContext:w})}),[w,y,o]),_=(0,i.VK)((()=>(null==w?void 0:w.automationStore.getNameStore().getValue())??(null==v?void 0:v.name)),[null==w?void 0:w.automationStore,null==v?void 0:v.name]),P=(0,i.VK)((()=>{const e=w&&"sufficient"===(0,E.Gb)(w).state.executionPermissionStatus;return p||!e||!o.canEdit()}),[p,w,o]),k=!_||0===_.length,R=(0,u.yK)((e=>({textStyle:{...h.textStyle,color:e.lightTextColor},buttonStyle:{...h.buttonStyle,...s},buttonPressedStyle:h.buttonPressedStyle??{},buttonHoveredStyle:h.buttonHoveredStyle??{},innerButtonStyle:{pointerEvents:"auto",overflow:"hidden",height:"small"===g?20:24,...a},innerButtonLabelStyle:{overflow:"hidden",textOverflow:"ellipsis",color:k?e.lightTextColor:void 0},innerButtonLabelPlaceholderStyle:{color:e.lightTextColor}})),[h.buttonHoveredStyle,h.buttonPressedStyle,h.buttonStyle,h.textStyle,s,a,k,g]);return(0,b.jsx)(m.Z,{ref:t,style:R.buttonStyle,hoveredStyle:R.buttonHoveredStyle,pressedStyle:R.buttonPressedStyle,editButtonClickProps:void 0,onContextMenu:d,children:(0,b.jsx)(L.Z,{isSmall:!0,disabled:P,onClick:C,disabledFeedback:!0,style:R.innerButtonStyle,children:(0,b.jsx)("span",{style:R.innerButtonLabelStyle,children:k?(0,b.jsx)(O.FormattedMessage,{...Z.y.buttonPlaceholder}):_})})})}))),H=(0,n.forwardRef)((function(e,t){window.__c={n:"TableButtonProperty"};const o=X(e,t,(0,u.yK)((()=>({buttonStyle:{padding:S.sf[h.C.Table].button},innerButtonStyle:{maxWidth:"100%"}})),[]));return(0,b.jsx)(N,{...o})})),W=(0,n.forwardRef)((function(e,t){window.__c={n:"PageButtonProperty"};const o=X(e,t,(0,u.yK)((()=>({buttonStyle:{padding:S.sf[h.C.Page].button}})),[]));return(0,b.jsx)(N,{...o})})),D=(0,n.forwardRef)((function(e,t){window.__c={n:"CompactButtonProperty"};const o=X(e,t,(0,u.yK)((()=>({buttonStyle:{padding:S.sf[h.C.CompactPage].button}})),[]));return(0,b.jsx)(N,{...o})})),U=(0,n.forwardRef)((function(e,t){window.__c={n:"ListButtonProperty"};const o=X(e,t);return(0,b.jsx)(N,{...o})})),z=(0,n.forwardRef)((function(e,t){window.__c={n:"BoardButtonProperty"};const o=X(e,t,(0,u.yK)((()=>({buttonStyle:{padding:S.sf[h.C.Board].button}})),[]));return(0,b.jsx)(N,{...o})})),q=(0,n.forwardRef)((function(e,t){window.__c={n:"CalendarButtonProperty"};const o=X(e,t);return(0,b.jsx)(N,{...o})})),$=(0,n.forwardRef)((function(e,t){window.__c={n:"GalleryButtonProperty"};const o=X(e,t);return(0,b.jsx)(N,{...o})})),G=(0,n.forwardRef)((function(e,t){window.__c={n:"TimelineButtonProperty"};const o=X(e,t,(0,u.yK)((()=>({buttonStyle:{maxWidth:200}})),[]));return(0,b.jsx)(N,{...o})})),Q=(0,n.forwardRef)((function(e,t){window.__c={n:"RelationButtonProperty"};const o=X(e,t,(0,u.yK)((()=>({buttonStyle:{height:void 0}})),[]));return(0,b.jsx)(N,{...o})})),Y=(0,n.forwardRef)((function(e,t){window.__c={n:"RelationSectionButtonProperty"};const o=X(e,t);return(0,b.jsx)(N,{...o})}));function X(e,t,o){const{store:n,collectionStore:r,property:i,disabled:l,onContextMenu:s}=e;return{ref:t,store:n,collectionStore:r,property:i,disabled:l,onContextMenu:s,buttonStyle:null==o?void 0:o.buttonStyle,innerButtonStyle:null==o?void 0:o.innerButtonStyle}}var J=o(8406),ee=o(51365),te=o(82530),oe=o(49616),ne=o(24118),re=o(69823);const ie=n.memo(n.forwardRef((function(e,t){const{store:o,property:r,enablePointerEventsForInteractiveTypes:l,editButtonClickProps:s,onClick:a,onContextMenu:d,buttonStyle:y,showLabel:h,disabled:S}=e,x=(0,c.O7)(),v=(0,i.VK)((()=>p.Ml(o.getPropertyValue(r))),[r,o]),{baseStyles:g,propertySchema:w,format:C,collectionContextStore:_}=(0,n.useContext)(f.O),P=le(o,r,S),k=w,R=(0,n.useCallback)((()=>{const e=o.getPropertyStore(r);e&&_&&(te.createAndCommit({userAction:"BlockPropertyValue.handleEditButtonClick",environment:x,perform:e=>{ee.vO({stores:[o],property:r,transaction:e})}}),J.rv({environment:x,collectionContextStore:_,block_id:e.id,property:r,property_type:"checkbox",from:(0,oe.Sy)(C),isFromBulkActionsToolbar:!1})),a&&a()}),[_,x,C,a,r,o]),j=(0,u.yK)((()=>({buttonStyle:{...g.buttonStyle,...y},buttonPressedStyle:g.buttonPressedStyle??{},buttonHoveredStyle:g.buttonHoveredStyle??{}})),[g,y]);return(0,b.jsx)(m.Z,{ref:t,onContextMenu:d,editButtonClickProps:s,style:j.buttonStyle,hoveredStyle:j.buttonHoveredStyle,pressedStyle:j.buttonPressedStyle,children:(0,b.jsx)(re.n,{propertyLabel:h?null==k?void 0:k.name:void 0,checked:v,enablePointerEventsForInteractiveTypes:l,onClick:R,disabled:P})})})));function le(e,t,o){return(0,i.VK)((()=>o||!e.canEdit()||p.wl(t)||e.isLocked()),[o,t,e])}const se=n.forwardRef((function(e,t){window.__c={n:"TableCheckboxProperty"};const o=xe(e,t,(0,u.yK)((()=>({buttonStyle:{padding:S.sf[h.C.Table].checkbox}})),[]));return(0,b.jsx)(ie,{...o,showLabel:!1})})),ae=n.forwardRef((function(e,t){window.__c={n:"PageCheckboxProperty"};const o=xe(e,t,(0,u.yK)((()=>({buttonStyle:{padding:S.sf[h.C.Page].checkbox}})),[]));return(0,b.jsx)(ie,{...o,showLabel:!1})})),ce=n.forwardRef((function(e,t){window.__c={n:"CompactCheckboxProperty"};const o=xe(e,t,(0,u.yK)((()=>({buttonStyle:{padding:S.sf[h.C.CompactPage].checkbox}})),[]));return(0,b.jsx)(ie,{...o,showLabel:!0})})),ue=n.forwardRef((function(e,t){window.__c={n:"ListCheckboxProperty"};const o=xe(e,t);return(0,b.jsx)(ie,{...o,showLabel:!1})})),de=n.forwardRef((function(e,t){window.__c={n:"BoardCheckboxProperty"};const o=xe(e,t,(0,u.yK)((()=>({buttonStyle:{padding:S.sf[h.C.Board].checkbox}})),[]));return(0,b.jsx)(ie,{...o,showLabel:!0})})),pe=n.forwardRef((function(e,t){window.__c={n:"CalendarCheckboxProperty"};const o=xe(e,t);return(0,b.jsx)(ie,{...o,showLabel:!0})})),ye=n.forwardRef((function(e,t){window.__c={n:"GalleryCheckboxProperty"};const o=xe(e,t);return(0,b.jsx)(ie,{...o,showLabel:!0})})),me=n.forwardRef((function(e,t){window.__c={n:"TimelineCheckboxProperty"};const o=xe(e,t);return(0,b.jsx)(ie,{...o,showLabel:!1})})),fe=n.forwardRef((function(e,t){window.__c={n:"RelationCheckboxProperty"};const o=xe(e,t);return(0,b.jsx)(ie,{...o,showLabel:!1})})),he=n.forwardRef((function(e,t){window.__c={n:"RelationSectionCheckboxProperty"};const o=xe(e,t);return(0,b.jsx)(ie,{...o,showLabel:!1})})),Se=n.forwardRef((function(e,t){window.__c={n:"MiniCheckboxProperty"};const o=xe(e,t);return(0,b.jsx)(ie,{...o,showLabel:!1})}));function xe(e,t,o){const{store:n,disabled:r,collectionStore:i,property:l,enablePointerEventsForInteractiveTypes:s,onClick:a,onContextMenu:c}=e;return{ref:t,store:n,disabled:r,collectionStore:i,property:l,editButtonClickProps:(0,ne.Am)(e),enablePointerEventsForInteractiveTypes:s,onClick:a,onContextMenu:c,buttonStyle:null==o?void 0:o.buttonStyle}}var be=o(77080),ve=o(77729),ge=o(77866);const we=n.memo(n.forwardRef((function(e,t){const{onContextMenu:o,editButtonClickProps:r,property:l,store:s,buttonStyle:a,EmptyComponent:c,quickActionButtons:d=[],showIfEmpty:p}=e,{propertySchema:y,isEmpty:h,baseStyles:S}=(0,n.useContext)(f.O),v=y,g=(0,i.VK)((()=>s.getPropertyValue(l)),[l,s]),w=(0,i.VK)((()=>!(!be.default.checkGate("collections_shorten_url")||!v||"url"!==v.type)&&!v.show_full_url),[v]),C=(0,u.yK)((()=>({buttonStyle:{...S.buttonStyle,...a},buttonPressedStyle:S.buttonPressedStyle??{},buttonHoveredStyle:S.buttonHoveredStyle??{}})),[S.buttonHoveredStyle,S.buttonPressedStyle,S.buttonStyle,a]);return h&&void 0===c?null:(0,b.jsx)(m.Z,{ref:t,editButtonClickProps:r,onContextMenu:o,style:C.buttonStyle,pressedStyle:C.buttonPressedStyle,hoveredStyle:C.buttonHoveredStyle,quickActionButtons:d,children:h&&void 0!==c?(0,b.jsx)(c,{}):v?(0,b.jsx)(x.Y,{children:(0,b.jsx)(ve.t,{type:v.type,textValue:g,useShortenedUrl:w,disableLinkify:p})}):null})}))),Ce=n.forwardRef((function(e,t){window.__c={n:"TableContactProperty"};const{store:o,property:r,format:l,collectionStore:s}=e,{isMobile:a}=(0,c.Fy)(),d=(0,i.VK)((()=>s.getSchema()),[s]),p=(0,n.useMemo)((()=>{if(!a)return(0,b.jsx)(y.Z,{store:o,schema:d,property:r,format:l},"copy")}),[l,a,r,d,o]),m=Oe(e,t,(0,u.yK)((()=>({buttonStyle:{padding:S.sf[h.C.Table].text}})),[]));return(0,b.jsx)(we,{...m,EmptyComponent:ge.q8,quickActionButtons:p})})),_e=n.forwardRef((function(e,t){window.__c={n:"PageContactProperty"};const{store:o,property:r,format:l,collectionStore:s}=e,a=(0,i.VK)((()=>s.getSchema()),[s]),c=(0,n.useMemo)((()=>(0,b.jsx)(y.Z,{store:o,schema:a,property:r,format:l},"copy")),[l,r,a,o]),d=Oe(e,t,(0,u.yK)((()=>({buttonStyle:{padding:S.sf[h.C.Page].text}})),[]));return(0,b.jsx)(we,{...d,EmptyComponent:ge.T$,quickActionButtons:c})})),Pe=n.forwardRef((function(e,t){window.__c={n:"CompactContactProperty"};const o=Oe(e,t,(0,u.yK)((()=>({buttonStyle:{padding:S.sf[h.C.CompactPage].text}})),[]));return(0,b.jsx)(we,{...o,EmptyComponent:ge.T$})})),ke=n.forwardRef((function(e,t){window.__c={n:"ListContactProperty"};const{showIfEmpty:o}=e,n=Oe(e,t);return(0,b.jsx)(we,{...n,EmptyComponent:o?ge.s3:void 0})})),Re=n.forwardRef((function(e,t){window.__c={n:"BoardContactProperty"};const{showIfEmpty:o}=e,n=Oe(e,t,(0,u.yK)((()=>({buttonStyle:{padding:S.sf[h.C.Board].text}})),[]));return(0,b.jsx)(we,{...n,EmptyComponent:o?ge.s3:void 0})})),je=n.forwardRef((function(e,t){window.__c={n:"CalendarContactProperty"};const o=Oe(e,t);return(0,b.jsx)(we,{...o})})),Me=n.forwardRef((function(e,t){window.__c={n:"GalleryContactProperty"};const{showIfEmpty:o}=e,n=Oe(e,t);return(0,b.jsx)(we,{...n,EmptyComponent:o?ge.s3:void 0})})),Be=n.forwardRef((function(e,t){window.__c={n:"TimelineContactProperty"};const o=Oe(e,t);return(0,b.jsx)(we,{...o})})),Te=n.forwardRef((function(e,t){window.__c={n:"RelationContactProperty"};const o=Oe(e,t);return(0,b.jsx)(we,{...o})})),Ve=n.forwardRef((function(e,t){window.__c={n:"RelationSectionContactProperty"};const o=Oe(e,t);return(0,b.jsx)(we,{...o})})),Ae=n.forwardRef((function(e,t){window.__c={n:"MiniContactProperty"};const o=Oe(e,t);return(0,b.jsx)(we,{...o,EmptyComponent:ge.zX,showIfEmpty:!0})}));function Oe(e,t,o){const{store:n,collectionStore:r,property:i,onContextMenu:l}=e;return{ref:t,store:n,collectionStore:r,property:i,editButtonClickProps:(0,ne.Am)(e),onContextMenu:l,buttonStyle:null==o?void 0:o.buttonStyle}}var Ie=o(40506),Ee=o(53877),Fe=o(42875),Ke=o(81381),Ze=o(69582);const Le=n.memo((0,n.forwardRef)((function(e,t){const{store:o,onContextMenu:r,editButtonClickProps:l,quickActionButtons:s,EmptyComponent:a,buttonStyle:c,property:d,alwaysShowTime:y}=e,{isEmpty:h,baseStyles:S,templateVariableContext:v,propertySchema:g,collectionContextStore:w,unmappedProperty:C}=(0,n.useContext)(f.O),_=g,P=function(e,t,o){return(0,i.VK)((()=>{switch(t){case"created_time":const t=e.getCreatedTime();return t?Ee.CQ(t,(0,Fe.r)()):void 0;case"last_edited_time":const n=e.getLastEditedTime();return n?Ee.CQ(n,(0,Fe.r)()):void 0;default:const r=e.getPropertyValue(o);return(0,p.Gl)(r)}}),[o,e,t])}(o,null==_?void 0:_.type,d),k=(0,i.VK)((()=>null==w?void 0:w.getPropertyFormat(C??d)),[w,C,d]),R=(0,u.yK)((e=>({buttonStyle:{...S.buttonStyle,...c},buttonPressedStyle:S.buttonPressedStyle??{},buttonHoveredStyle:S.buttonHoveredStyle??{}})),[S.buttonHoveredStyle,S.buttonPressedStyle,S.buttonStyle,c]);if(h&&void 0===a&&void 0===v)return null;let j;if(v)j=(0,b.jsx)(Ze.P,{templateVariableType:v.templateVariable});else if(h&&void 0!==a)j=(0,b.jsx)(a,{});else{const e=(null==k?void 0:k.date_format)??(null==_?void 0:_.date_format),t=(null==k?void 0:k.time_format)??(null==_?void 0:_.time_format);j=(0,b.jsx)(x.Y,{children:(0,b.jsx)(Ke.z,{dateValue:P,dateFormat:e,timeFormat:y&&t===Ie.n3?Ie.c_:t})})}return(0,b.jsx)(m.Z,{ref:t,style:R.buttonStyle,hoveredStyle:R.buttonHoveredStyle,pressedStyle:R.buttonPressedStyle,onContextMenu:r,editButtonClickProps:l,quickActionButtons:s,children:j})})));const Ne=(0,n.forwardRef)((function(e,t){window.__c={n:"PageDateProperty"};const{store:o,collectionStore:r,property:l,format:s}=e,{isMobile:a}=(0,c.Fy)(),d=(0,i.VK)((()=>r.getSchema()),[r]),p=(0,u.yK)((()=>({buttonStyle:{padding:S.sf[h.C.Page].text}})),[]),m=(0,n.useMemo)((()=>{if(!a)return(0,b.jsx)(y.Z,{store:o,schema:d,property:l,format:s},"copy")}),[s,a,l,d,o]),f=Xe(e,t,p);return(0,b.jsx)(Le,{...f,EmptyComponent:ge.T$,quickActionButtons:m,alwaysShowTime:!0})})),He=(0,n.forwardRef)((function(e,t){window.__c={n:"TableDateProperty"};const{store:o,collectionStore:r,property:l,format:s}=e,{isMobile:a}=(0,c.Fy)(),d=(0,i.VK)((()=>r.getSchema()),[r]),p=(0,u.yK)((()=>({buttonStyle:{padding:S.sf[h.C.Table].text}})),[]),m=(0,n.useMemo)((()=>{if(!a)return(0,b.jsx)(y.Z,{store:o,schema:d,property:l,format:s},"copy")}),[s,a,l,d,o]),f=Xe(e,t,p);return(0,b.jsx)(Le,{...f,EmptyComponent:ge.q8,quickActionButtons:m})})),We=(0,n.forwardRef)((function(e,t){window.__c={n:"CompactDateProperty"};const o=Xe(e,t,(0,u.yK)((()=>({buttonStyle:{padding:S.sf[h.C.CompactPage].text}})),[]));return(0,b.jsx)(Le,{...o,EmptyComponent:ge.T$})})),De=(0,n.forwardRef)((function(e,t){window.__c={n:"ListDateProperty"};const{showIfEmpty:o}=e,n=Xe(e,t);return(0,b.jsx)(Le,{...n,EmptyComponent:o?ge.s3:void 0})})),Ue=(0,n.forwardRef)((function(e,t){window.__c={n:"BoardDateProperty"};const{showIfEmpty:o}=e,n=Xe(e,t,(0,u.yK)((()=>({buttonStyle:{padding:S.sf[h.C.Board].text}})),[]));return(0,b.jsx)(Le,{...n,EmptyComponent:o?ge.s3:void 0})})),ze=(0,n.forwardRef)((function(e,t){window.__c={n:"CalendarDateProperty"};const o=Xe(e,t);return(0,b.jsx)(Le,{...o})})),qe=(0,n.forwardRef)((function(e,t){window.__c={n:"GalleryDateProperty"};const{showIfEmpty:o}=e,n=Xe(e,t);return(0,b.jsx)(Le,{...n,EmptyComponent:o?ge.s3:void 0})})),$e=(0,n.forwardRef)((function(e,t){window.__c={n:"TimelineDateProperty"};const o=Xe(e,t);return(0,b.jsx)(Le,{...o})})),Ge=(0,n.forwardRef)((function(e,t){window.__c={n:"RelationDateProperty"};const o=Xe(e,t);return(0,b.jsx)(Le,{...o})})),Qe=(0,n.forwardRef)((function(e,t){window.__c={n:"RelationSectionDateProperty"};const o=Xe(e,t);return(0,b.jsx)(Le,{...o})})),Ye=(0,n.forwardRef)((function(e,t){window.__c={n:"MiniDateProperty"};const o=Xe(e,t);return(0,b.jsx)(Le,{...o,EmptyComponent:ge.zX})}));function Xe(e,t,o){const{store:n,collectionStore:r,property:i,onContextMenu:l}=e;return{ref:t,store:n,collectionStore:r,property:i,editButtonClickProps:(0,ne.Am)(e),onContextMenu:l,buttonStyle:null==o?void 0:o.buttonStyle}}var Je=o(79954),et=o(79074),tt=o(83559);const ot=n.memo(n.forwardRef((function(e,t){const{store:o,EmptyComponent:r,onContextMenu:l,buttonStyle:s,selectableStyle:a,property:d,editButtonClickProps:y}=e,h=(0,c.O7)(),{baseStyles:S,collectionContextStore:x,isReadOnly:v}=(0,n.useContext)(f.O),[g,w]=(0,n.useState)(void 0);(0,n.useEffect)((()=>{w(o.clone())}),[o]);const C=(0,n.useCallback)((e=>{ee.bA({environment:h,blockPropertyValueOverlayStore:y.blockPropertyValueOverlayStore,store:o,property:d,format:y.format,uploadFiles:e.files,disableHorizontalEdgeScroll:y.disableHorizontalEdgeScroll,collectionContextStore:x})}),[x,y.blockPropertyValueOverlayStore,y.disableHorizontalEdgeScroll,y.format,h,d,o]),_=(0,i.VK)((()=>{const e=o.getPropertyValue(d);return p.g(e)}),[o,d]),P=(0,u.yK)((()=>{var e;return{buttonStyle:{...S.buttonStyle,...s},buttonPressedStyle:S.buttonPressedStyle??{},buttonHoveredStyle:S.buttonHoveredStyle??{},selectableStyle:{display:"inherit",borderRadius:null===(e=S.buttonStyle)||void 0===e?void 0:e.borderRadius,...a}}}),[S.buttonHoveredStyle,S.buttonPressedStyle,S.buttonStyle,s,a]),k=!_||0===_.length,R=(0,n.useMemo)((()=>(0,b.jsx)(tt.K,{children:_.map(((e,t)=>(0,b.jsx)(et.e,{linkValue:e,permissionRecord:o.pointer},e.url+t)))})),[_,o.pointer]);return!g||k&&void 0===r?null:(0,b.jsx)(Je.Z,{store:g,canNativeDropOnto:!v,onNativeDrop:C,analyticsName:"file_property",shouldShowDropZone:!v,style:P.selectableStyle,children:(0,b.jsx)(m.Z,{ref:t,onContextMenu:l,editButtonClickProps:y,style:P.buttonStyle,pressedStyle:P.buttonPressedStyle,hoveredStyle:P.buttonHoveredStyle,children:k&&void 0!==r?(0,b.jsx)(r,{}):R})})}))),nt=n.forwardRef((function(e,t){window.__c={n:"TableFileProperty"};const o=yt(e,t,(0,u.yK)((()=>({buttonStyle:{padding:S.sf[h.C.Table].button,height:"100%"},selectableStyle:{width:"100%"}})),[]));return(0,b.jsx)(ot,{...o,EmptyComponent:ge.q8})})),rt=n.forwardRef((function(e,t){window.__c={n:"PageFileProperty"};const o=yt(e,t,(0,u.yK)((()=>({buttonStyle:{padding:S.sf[h.C.Page].button,width:"100%"},selectableStyle:{width:"100%"}})),[]));return(0,b.jsx)(ot,{...o,EmptyComponent:ge.T$})})),it=n.forwardRef((function(e,t){window.__c={n:"CompactFileProperty"};const o=yt(e,t,(0,u.yK)((()=>({buttonStyle:{padding:S.sf[h.C.CompactPage].button}})),[]));return(0,b.jsx)(ot,{...o,EmptyComponent:ge.T$})})),lt=n.forwardRef((function(e,t){window.__c={n:"ListFileProperty"};const{showIfEmpty:o}=e,n=yt(e,t);return(0,b.jsx)(ot,{...n,EmptyComponent:o?ge.s3:void 0})})),st=n.forwardRef((function(e,t){window.__c={n:"BoardFileProperty"};const{showIfEmpty:o}=e,n=yt(e,t,(0,u.yK)((()=>({buttonStyle:{padding:S.sf[h.C.Board].button,width:"100%"},selectableStyle:{width:"100%"}})),[]));return(0,b.jsx)(ot,{...n,EmptyComponent:o?ge.s3:void 0})})),at=n.forwardRef((function(e,t){window.__c={n:"CalendarFileProperty"};const o=yt(e,t);return(0,b.jsx)(ot,{...o})})),ct=n.forwardRef((function(e,t){window.__c={n:"GalleryFileProperty"};const{showIfEmpty:o}=e,n=yt(e,t);return(0,b.jsx)(ot,{...n,EmptyComponent:o?ge.s3:void 0})})),ut=n.forwardRef((function(e,t){window.__c={n:"TimelineFileProperty"};const o=yt(e,t);return(0,b.jsx)(ot,{...o})})),dt=n.forwardRef((function(e,t){window.__c={n:"RelationFileProperty"};const o=yt(e,t);return(0,b.jsx)(ot,{...o})})),pt=n.forwardRef((function(e,t){window.__c={n:"RelationSectionFileProperty"};const o=yt(e,t);return(0,b.jsx)(ot,{...o})}));function yt(e,t,o){const{store:n,onContextMenu:r,property:i}=e;return{ref:t,store:n,property:i,editButtonClickProps:(0,ne.Am)(e),onContextMenu:r,buttonStyle:null==o?void 0:o.buttonStyle,selectableStyle:null==o?void 0:o.selectableStyle}}var mt=o(30752),ft=o(30694);const ht=n.memo(n.forwardRef((function(e,t){const{store:o,EmptyComponent:r,onContextMenu:l,buttonStyle:s}=e,{baseStyles:a,collectionContextStore:c}=(0,n.useContext)(f.O),d=(0,i.VK)((()=>o.getAssociatedCollectionStore()),[o]),p=(0,u.yK)((()=>({buttonStyle:{...a.buttonStyle,minWidth:32,...s},buttonPressedStyle:a.buttonPressedStyle??{},buttonHoveredStyle:a.buttonHoveredStyle??{}})),[a.buttonHoveredStyle,a.buttonPressedStyle,a.buttonStyle,s]),y=!d||!c;return y&&void 0===r?null:(0,b.jsx)(m.Z,{ref:t,onContextMenu:l,editButtonClickProps:void 0,style:p.buttonStyle,pressedStyle:p.buttonPressedStyle,hoveredStyle:p.buttonHoveredStyle,tooltipPropertyValue:(0,b.jsx)(ft.L,{collectionForLocation:d,collectionContextStore:c}),children:y&&void 0!==r?(0,b.jsx)(r,{}):(0,b.jsx)(ft.Z,{collectionContextStore:c,collectionForLocation:d})})}))),St=n.forwardRef((function(e,t){window.__c={n:"TableLocationProperty"};const o=Rt(e,t,(0,u.yK)((()=>({buttonStyle:{padding:S.sf[h.C.Table].text}})),[]));return(0,b.jsx)(ht,{...o,EmptyComponent:ge.q8})})),xt=n.forwardRef((function(e,t){window.__c={n:"PageLocationProperty"};const o=Rt(e,t,(0,u.yK)((()=>({buttonStyle:{padding:S.sf[h.C.Page].text}})),[]));return(0,b.jsx)(ht,{...o,EmptyComponent:ge.T$})})),bt=n.forwardRef((function(e,t){window.__c={n:"CompactLocationProperty"};const o=Rt(e,t,(0,u.yK)((()=>({buttonStyle:{padding:S.sf[h.C.CompactPage].text}})),[]));return(0,b.jsx)(ht,{...o,EmptyComponent:ge.T$})})),vt=n.forwardRef((function(e,t){window.__c={n:"ListLocationProperty"};const{showIfEmpty:o}=e,n=Rt(e,t);return(0,b.jsx)(ht,{...n,EmptyComponent:o?ge.s3:void 0})})),gt=n.forwardRef((function(e,t){window.__c={n:"BoardLocationProperty"};const{showIfEmpty:o}=e,n=Rt(e,t,(0,u.yK)((()=>({buttonStyle:{padding:S.sf[h.C.Board].text}})),[]));return(0,b.jsx)(ht,{...n,EmptyComponent:o?ge.s3:void 0})})),wt=n.forwardRef((function(e,t){window.__c={n:"CalendarLocationProperty"};const o=Rt(e,t);return(0,b.jsx)(ht,{...o})})),Ct=n.forwardRef((function(e,t){window.__c={n:"GalleryLocationProperty"};const{showIfEmpty:o}=e,n=Rt(e,t);return(0,b.jsx)(ht,{...n,EmptyComponent:o?ge.s3:void 0})})),_t=n.forwardRef((function(e,t){window.__c={n:"TimelineLocationProperty"};const o=Rt(e,t);return(0,b.jsx)(ht,{...o})})),Pt=n.forwardRef((function(e,t){window.__c={n:"RelationLocationProperty"};const o=Rt(e,t);return(0,b.jsx)(ht,{...o})})),kt=n.forwardRef((function(e,t){window.__c={n:"RelationSectionLocationProperty"};const o=Rt(e,t);return(0,b.jsx)(ht,{...o})}));function Rt(e,t,o){const{store:n,onContextMenu:r}=e;return{ref:t,store:n,onContextMenu:r,buttonStyle:null==o?void 0:o.buttonStyle}}var jt=o(84619),Mt=o(4023),Bt=o(26388),Tt=o(99036),Vt=o(20669),At=o(72899),Ot=o(19124),It=o(85957),Et=o(79576),Ft=o(19671),Kt=o(13023),Zt=o(83212),Lt=o(73063);function Nt(e){const{href:t,icon:o,iconStyle:n,tooltip:r,externalLink:i,onClick:l}=e;return(0,b.jsx)(Bt.ZP,{renderTooltip:()=>r,render:e=>(0,b.jsx)(Lt.Z,{ariaLabel:r,icon:o,iconStyle:n,href:t,onClick:l,hasBackground:!0,showShadow:!0,external:i,...e})})}function Ht(e){window.__c={n:"AIAutofillButton"};const{store:t,property:o,openOverlay:r}=e,l=(0,c.O7)(),s=(0,u.Fg)(),{propertySchema:a,format:d,collectionContextStore:p,isEmpty:y,isReadOnly:m}=(0,n.useContext)(f.O),h=(0,n.useCallback)((async()=>{if(!a)return;if(r){const e=(0,It.wq)(t)?Kt.Z:Ft.Z;ee.bA({blockPropertyValueOverlayStore:e,collectionContextStore:p,format:d,environment:l,store:t,property:o,readOnly:!0})}const e=Et.W.setIsWriting({propertySchema:a,stores:[t]}),{propertyCompletionsActions:n}=await At.E0.loader();n.autofillPropertyForBlocks({environment:l,stores:[t],property:o,propertySchema:a,userEventForAnalytics:"generate_from_action_button",collectionContextStore:p,sessionIdForAnalytics:e,from:oe.Sy(d)})}),[p,l,d,r,o,a,t]);return(0,i.VK)((()=>!m&&(!l.device.isMobile||y)&&(0,Ot.RT)(Zt.Z.getMode(l,t),t)&&a&&(0,Tt.qQ)(a)&&(0,Tt.q3)(a)&&("text"===a.type||(0,Ot.KZ)())),[l,m,y,a,t])?(0,b.jsx)(Nt,{icon:Vt.y,iconStyle:{fill:s.aiPurpleColor},tooltip:F.default.formatMessage(Wt.update),onClick:h}):null}const Wt=(0,O.defineMessages)({update:{defaultMessage:"Update",id:"database.editButton.autofillWithAiTooltip"}});var Dt=o(88071),Ut=o(44731);const zt=n.memo((0,n.forwardRef)((function(e,t){const{buttonStyle:o,editButtonClickProps:r,property:l,EmptyComponent:s,onContextMenu:a,tokenLimit:c,store:d}=e,{propertySchema:y,isEmpty:h,baseStyles:S}=(0,n.useContext)(f.O),x=(null==S?void 0:S.tokenFormat)??jt.lo.Medium,v=y,g=(0,i.VK)((()=>(null==v?void 0:v.options)??[]),[v]),w=(0,i.VK)((()=>null==v?void 0:v.type),[v]),[C,_]=(0,i.VK)((()=>{const e=d.getPropertyValue(l);let t=[];if("select"===w){const o=p.P4(e,g);t=o?[o]:[]}else t=p.ib(e,g);return[c?t.slice(0,c):t,c?t.slice(c):[]]}),[d,l,w,c,g]),P=(0,u.yK)((e=>({buttonStyle:{...S.buttonStyle,...o},buttonPressedStyle:S.buttonPressedStyle??{},buttonHoveredStyle:S.buttonHoveredStyle??{},overflowIndicator:{marginRight:4,color:e.mediumTextColor},tooltip:{padding:8},remainderPropertiesContainer:{display:"flex",flexWrap:"wrap",fontWeight:"normal",width:"max-content",maxWidth:"240px",gap:4},selectToken:{margin:0},moreToken:{margin:0}})),[S.buttonHoveredStyle,S.buttonPressedStyle,S.buttonStyle,o]),k=(0,n.useMemo)((()=>(0,b.jsx)(Ht,{store:d,property:l,openOverlay:!0},"autofill")),[l,d]);return h&&void 0===s?null:(0,b.jsx)(m.Z,{ref:t,editButtonClickProps:r,onContextMenu:a,style:P.buttonStyle,hoveredStyle:P.buttonHoveredStyle,pressedStyle:P.buttonPressedStyle,quickActionButtons:k,children:h&&void 0!==s?(0,b.jsx)(s,{}):(0,b.jsx)(qt,{shownOptions:C,hiddenOptions:_,tokenLimit:c,tokenFormat:x,styles:P})})})));function qt(e){let{shownOptions:t,hiddenOptions:o,tokenLimit:n,styles:r,tokenFormat:i}=e;return(0,b.jsxs)(tt.K,{children:[t.map((e=>(0,b.jsx)(Ut.J,{type:"select",value:e.value,color:e.color,shouldShrink:!!n},e.id))),o.length>0&&(0,b.jsx)(Bt.ZP,{style:r.tooltip,renderTooltip:()=>(0,b.jsx)("div",{style:r.remainderPropertiesContainer,children:o.map((e=>(0,b.jsx)(Ut.J,{type:"select",value:e.value,color:e.color,shouldShrink:!1},e.id)))}),isLightBackground:!0,textWrap:!0,alignment:Mt.v.Center,placement:Mt.u.Bottom,render:e=>(0,b.jsx)("div",{...e,children:(0,b.jsx)(Dt.Z,{count:o.length,format:i,fixedHeight:!1,style:r.moreToken,isCompact:!0})})})]})}const $t=(0,n.forwardRef)((function(e,t){window.__c={n:"TableMultiSelectProperty"};const o=io(e,t);return(0,b.jsx)(zt,{...o,EmptyComponent:ge.q8})})),Gt=(0,n.forwardRef)((function(e,t){window.__c={n:"PageMultiSelectProperty"};const o=io(e,t);return(0,b.jsx)(zt,{...o,EmptyComponent:ge.T$})})),Qt=(0,n.forwardRef)((function(e,t){window.__c={n:"CompactMultiSelectProperty"};const o=io(e,t);return(0,b.jsx)(zt,{...o,EmptyComponent:ge.T$,tokenLimit:2})})),Yt=(0,n.forwardRef)((function(e,t){window.__c={n:"ListMultiSelectProperty"};const{showIfEmpty:o}=e,n=io(e,t);return(0,b.jsx)(zt,{...n,EmptyComponent:o?ge.s3:void 0})})),Xt=(0,n.forwardRef)((function(e,t){window.__c={n:"BoardMultiSelectProperty"};const{showIfEmpty:o}=e,n=io(e,t);return(0,b.jsx)(zt,{...n,EmptyComponent:o?ge.s3:void 0})})),Jt=(0,n.forwardRef)((function(e,t){window.__c={n:"CalendarMultiSelectProperty"};const o=io(e,t);return(0,b.jsx)(zt,{...o})})),eo=(0,n.forwardRef)((function(e,t){window.__c={n:"GalleryMultiSelectProperty"};const{showIfEmpty:o}=e,n=io(e,t);return(0,b.jsx)(zt,{...n,EmptyComponent:o?ge.s3:void 0})})),to=(0,n.forwardRef)((function(e,t){window.__c={n:"TimelineMultiSelectProperty"};const o=io(e,t);return(0,b.jsx)(zt,{...o})})),oo=(0,n.forwardRef)((function(e,t){window.__c={n:"RelationMultiSelectProperty"};const o=io(e,t);return(0,b.jsx)(zt,{...o})})),no=(0,n.forwardRef)((function(e,t){window.__c={n:"RelationSectionMultiSelectProperty"};const o=io(e,t);return(0,b.jsx)(zt,{...o})})),ro=(0,n.forwardRef)((function(e,t){window.__c={n:"MiniMultiSelectProperty"};const o=io(e,t);return(0,b.jsx)(zt,{...o,EmptyComponent:ge.zX,tokenLimit:1})}));function io(e,t,o){const{store:n,collectionStore:r,property:i,onContextMenu:l}=e;return{ref:t,store:n,collectionStore:r,property:i,editButtonClickProps:(0,ne.Am)(e),onContextMenu:l,buttonStyle:null==o?void 0:o.buttonStyle}}var lo=o(59580);const so=n.memo((0,n.forwardRef)((function(e,t){var o,r;const{store:l,buttonStyle:s,onContextMenu:a,editButtonClickProps:c,quickActionButtons:d,EmptyComponent:y,isRightAligned:h,property:S}=e,{isEmpty:v,baseStyles:g,propertySchema:w,shouldRenderTooltip:C}=(0,n.useContext)(f.O),_=w,P=(0,i.VK)((()=>{const e=l.getPropertyValue(S);return p.VY(e)}),[S,l]),k=(0,oe.X7)({numberValue:P,numberFormat:null==_?void 0:_.number_format,numberShowAs:null==_?void 0:_.show_as}),R=(0,u.yK)((()=>({buttonStyle:{...g.buttonStyle,...s},buttonPressedStyle:g.buttonPressedStyle??{},buttonHoveredStyle:g.buttonHoveredStyle??{}})),[g.buttonHoveredStyle,g.buttonPressedStyle,g.buttonStyle,s]);if(v&&void 0===y)return null;const j="bar"===(null==_||null===(o=_.show_as)||void 0===o?void 0:o.type)||"ring"===(null==_||null===(r=_.show_as)||void 0===r?void 0:r.type);return(0,b.jsx)(m.Z,{ref:t,style:R.buttonStyle,hoveredStyle:R.buttonHoveredStyle,pressedStyle:R.buttonPressedStyle,onContextMenu:a,editButtonClickProps:c,quickActionButtons:d,quickActionButtonsAlign:h?"left":void 0,tooltipPropertyValue:C?k:void 0,children:v&&void 0!==y?(0,b.jsx)(y,{}):j?(0,b.jsx)(tt.K,{isRightAligned:h,children:(0,b.jsx)(lo.A,{numberValue:P,isRightAligned:h})}):(0,b.jsx)(x.Y,{isRightAligned:h,children:(0,b.jsx)(lo.A,{numberValue:P,isRightAligned:h})})})}))),ao=(0,n.forwardRef)((function(e,t){window.__c={n:"PageNumberProperty"};const{store:o,property:r,format:l,collectionStore:s}=e,a=vo(e,t,(0,u.yK)((()=>({buttonStyle:{padding:S.sf[h.C.Page].text}})),[])),c=(0,i.VK)((()=>s.getSchema()),[s]),d=(0,n.useMemo)((()=>(0,b.jsx)(y.Z,{store:o,schema:c,property:r,format:l},"copy")),[l,r,c,o]);return(0,b.jsx)(so,{...a,EmptyComponent:ge.T$,quickActionButtons:d})})),co=(0,n.forwardRef)((function(e,t){window.__c={n:"TableNumberProperty"};const{store:o,property:r,format:l,collectionStore:s}=e,{isMobile:a}=(0,c.Fy)(),d=vo(e,t,(0,u.yK)((()=>({buttonStyle:{padding:S.sf[h.C.Table].text}})),[])),p=(0,i.VK)((()=>s.getSchema()),[s]),m=(0,n.useMemo)((()=>{if(!a)return(0,b.jsx)(y.Z,{store:o,schema:p,property:r,format:l},"copy")}),[l,a,r,p,o]);return(0,b.jsx)(so,{...d,EmptyComponent:ge.q8,quickActionButtons:m,isRightAligned:!0})})),uo=(0,n.forwardRef)((function(e,t){window.__c={n:"CompactNumberProperty"};const o=vo(e,t,(0,u.yK)((()=>({buttonStyle:{padding:S.sf[h.C.CompactPage].text}})),[]));return(0,b.jsx)(so,{...o,EmptyComponent:ge.T$})})),po=(0,n.forwardRef)((function(e,t){window.__c={n:"ListNumberProperty"};const{showIfEmpty:o}=e,n=vo(e,t);return(0,b.jsx)(so,{...n,EmptyComponent:o?ge.s3:void 0})})),yo=(0,n.forwardRef)((function(e,t){window.__c={n:"BoardNumberProperty"};const{showIfEmpty:o}=e,n=vo(e,t,(0,u.yK)((()=>({buttonStyle:{padding:S.sf[h.C.Board].text}})),[]));return(0,b.jsx)(so,{...n,EmptyComponent:o?ge.s3:void 0})})),mo=(0,n.forwardRef)((function(e,t){window.__c={n:"CalendarNumberProperty"};const o=vo(e,t);return(0,b.jsx)(so,{...o})})),fo=(0,n.forwardRef)((function(e,t){window.__c={n:"GalleryNumberProperty"};const{showIfEmpty:o}=e,n=vo(e,t);return(0,b.jsx)(so,{...n,EmptyComponent:o?ge.s3:void 0})})),ho=(0,n.forwardRef)((function(e,t){window.__c={n:"TimelineNumberProperty"};const o=vo(e,t);return(0,b.jsx)(so,{...o})})),So=(0,n.forwardRef)((function(e,t){window.__c={n:"RelationNumberProperty"};const o=vo(e,t);return(0,b.jsx)(so,{...o})})),xo=(0,n.forwardRef)((function(e,t){window.__c={n:"RelationSectionNumberProperty"};const o=vo(e,t);return(0,b.jsx)(so,{...o})})),bo=(0,n.forwardRef)((function(e,t){window.__c={n:"MiniNumberProperty"};const o=vo(e,t);return(0,b.jsx)(so,{...o,EmptyComponent:ge.zX})}));function vo(e,t,o){const{store:n,collectionStore:r,property:i,onContextMenu:l}=e;return{ref:t,store:n,collectionStore:r,property:i,editButtonClickProps:(0,ne.Am)(e),onContextMenu:l,buttonStyle:null==o?void 0:o.buttonStyle}}var go=o(66897),wo=o(70203),Co=o(97880),_o=o(77907),Po=o(93044),ko=o(11061),Ro=o(18417);const jo=n.memo(n.forwardRef((function(e,t){const{buttonStyle:o,onContextMenu:r,editButtonClickProps:i,property:l,store:s,EmptyComponent:a,tokenLimit:c}=e,{propertySchema:d,isEmpty:p,baseStyles:y,templateVariableContext:h}=(0,n.useContext)(f.O),S=(null==y?void 0:y.tokenFormat)??jt.lo.Medium,x=Bo({store:s,property:l,propertySchema:d}),v=(0,u.yK)((()=>({buttonStyle:{...y.buttonStyle,...o},buttonPressedStyle:y.buttonPressedStyle??{},buttonHoveredStyle:y.buttonHoveredStyle??{},tokensContainer:{...S===jt.lo.Inline?{gap:0}:{}},actorTokenOverlap:{...S===jt.lo.Inline?{margin:Po.wS[S].margin}:{}},moreToken:{margin:0}})),[y.buttonHoveredStyle,y.buttonPressedStyle,y.buttonStyle,o,S]);return p&&void 0===a?null:(0,b.jsx)(m.Z,{ref:t,editButtonClickProps:i,onContextMenu:r,style:v.buttonStyle,pressedStyle:v.buttonPressedStyle,hoveredStyle:v.buttonHoveredStyle,tooltipHide:S===jt.lo.Inline,children:p&&void 0!==a&&!h?(0,b.jsx)(a,{}):(0,b.jsx)(Mo,{values:x,tokenLimit:c,tokenFormat:S,styles:v})})})));function Mo(e){let{values:t,tokenLimit:o,tokenFormat:n,styles:r}=e;const i=t.slice(0,o);return(0,b.jsxs)(tt.K,{style:r.tokensContainer,children:[i.map(((e,o)=>(0,go.Wk)(e)?(0,b.jsx)(Ro.H,{actorPointer:e,style:o<t.length-1?r.actorTokenOverlap:void 0},e.id):(0,wo.D4X)(e)?(0,b.jsx)(Ze.w,{templateVariableType:e},`person-property-value-${e}`):void(0,Co.t1)(e))),o&&t.length>o&&(0,b.jsx)(Dt.Z,{count:t.length-o,format:n,style:r.moreToken,fixedHeight:!0,isCompact:!0})]})}function Bo(e){let{property:t,store:o,propertySchema:n}=e;return(0,i.VK)((()=>{const e=null==n?void 0:n.type;switch(e){case"created_by":{const e=o.getCreatedByPointer();if(e)return[e];break}case"last_edited_by":{const e=o.getLastEditedByPointer();if(e)return[e];break}case"person":return(0,p.BW)({value:o.getPropertyValue(t),isTemplatePage:o.isTemplate(),propertySchema:n,blockCreatorPointer:o.getCreatedByPointer()});case void 0:return[];default:(0,Co.t1)(e)}return[]}),[t,n,o])}const To=n.forwardRef((function(e,t){window.__c={n:"TablePersonProperty"};const o=Wo(e,t);return(0,b.jsx)(jo,{...o,EmptyComponent:ge.q8})})),Vo=n.forwardRef((function(e,t){window.__c={n:"PagePersonProperty"};const{store:o,property:n,collectionStore:r}=e,i=Wo(e,t);return(0,b.jsx)(ko.O,{store:o,property:n,collectionStore:r,children:(0,b.jsx)(jo,{...i,EmptyComponent:ge.T$})})})),Ao=n.forwardRef((function(e,t){window.__c={n:"CompactPersonProperty"};const o=Wo(e,t);return(0,b.jsx)(jo,{...o,EmptyComponent:ge.T$,tokenLimit:1})})),Oo=n.forwardRef((function(e,t){window.__c={n:"MiniPersonProperty"};const o=Wo(e,t);return(0,b.jsx)(jo,{...o,EmptyComponent:ge.zX,tokenLimit:1})})),Io=n.forwardRef((function(e,t){window.__c={n:"PropertyModulePersonProperty"};const{store:o,property:r}=Wo(e,t),{propertySchema:i}=(0,n.useContext)(f.O),l=i,s=Bo({store:o,property:r,propertySchema:l});return(0,b.jsx)(_o.LazyPropertyModulePersonProperty,{store:o,property:r,propertyValues:s,propertySchema:l})})),Eo=n.forwardRef((function(e,t){window.__c={n:"ListPersonProperty"};const{showIfEmpty:o}=e,n=Wo(e,t);return(0,b.jsx)(jo,{...n,EmptyComponent:o?ge.s3:void 0})})),Fo=n.forwardRef((function(e,t){window.__c={n:"BoardPersonProperty"};const{showIfEmpty:o}=e,n=Wo(e,t);return(0,b.jsx)(jo,{...n,EmptyComponent:o?ge.s3:void 0})})),Ko=n.forwardRef((function(e,t){window.__c={n:"CalendarPersonProperty"};const o=Wo(e,t);return(0,b.jsx)(jo,{...o})})),Zo=n.forwardRef((function(e,t){window.__c={n:"GalleryPersonProperty"};const{showIfEmpty:o}=e,n=Wo(e,t);return(0,b.jsx)(jo,{...n,EmptyComponent:o?ge.s3:void 0})})),Lo=n.forwardRef((function(e,t){window.__c={n:"TimelinePersonProperty"};const o=Wo(e,t);return(0,b.jsx)(jo,{...o})})),No=n.forwardRef((function(e,t){window.__c={n:"RelationPersonProperty"};const o=Wo(e,t);return(0,b.jsx)(jo,{...o})})),Ho=n.forwardRef((function(e,t){window.__c={n:"RelationSectionPersonProperty"};const o=Wo(e,t);return(0,b.jsx)(jo,{...o})}));function Wo(e,t,o){const{store:n,property:r,onContextMenu:i}=e;return{ref:t,store:n,property:r,editButtonClickProps:(0,ne.Am)(e),onContextMenu:i,buttonStyle:null==o?void 0:o.buttonStyle}}o(57658);var Do=o(94714),Uo=o(31869),zo=o(14473),qo=o(5971),$o=o(29798),Go=o(64921),Qo=o(32163),Yo=o(72495),Xo=o(52247),Jo=o(90692);const en=n.memo((0,n.forwardRef)((function(e,t){const{collectionStore:o,buttonStyle:r,editButtonClickProps:l,property:s,EmptyComponent:a,onContextMenu:c,blockPropertyValueOverlayStore:d,store:y,format:h,renderAs:S}=e,{propertySchema:x,isReadOnly:v,baseStyles:g}=(0,n.useContext)(f.O),w=x,C=(null==g?void 0:g.tokenFormat)??jt.lo.Medium,_=(0,i.qz)(void 0,$o.Z),P=(0,i.VK)((()=>{const e=y.getPropertyValue(s);return w?p.j$({relationValue:p.rq(e),propertySchema:w,getRecordModel:y.getRecordModel}):void 0}),[y,s,w]),k=(0,n.useMemo)((()=>{const e=w?Tt.j0(w):void 0;return e?K.NW.createChildStore(y,e):void 0}),[w,y]),R=(0,i.VK)((()=>{const e=null!=w&&w.limit&&P?P.slice(0,w.limit):P;return e?e.map((e=>{const t=K.G.createChildStore(y,e),o=t.getAssociatedCollectionStore();if(!o)return;const n=o.id;return w&&n===Tt.F0(w)?{pointer:e,pageStore:t}:void 0})).filter(Co.$K):[]}),[w,P,y]),j=0===R.length,M="rows"===S&&!j,B=(0,u.yK)((e=>({buttonStyle:{...g.buttonStyle,...r,...M&&{padding:0}},buttonPressedStyle:g.buttonPressedStyle??{},buttonHoveredStyle:g.buttonHoveredStyle??{},overflowIndicator:{marginRight:4,color:e.mediumTextColor}})),[g.buttonHoveredStyle,g.buttonPressedStyle,g.buttonStyle,r,M]),T=(0,n.useMemo)((()=>k?"rows"===S?w&&P&&(0,b.jsx)(tn,{relationItemPointers:R,relationValue:P,collectionStore:o,menuListStore:_,store:y,targetCollectionStore:k,property:s,disabled:v,buttonContainerRef:t,blockPropertyValueOverlayStore:d,format:h,propertySchema:w}):"inline"===S?(0,b.jsx)(on,{relationItemPointers:R,store:y,tokenFormat:C}):void(0,Co.t1)(S):null),[d,o,h,v,_,s,w,t,R,P,S,y,k,C]);return j&&void 0===a?null:(0,b.jsx)(m.Z,{ref:t,editButtonClickProps:M?void 0:l,onContextMenu:c,style:B.buttonStyle,hoveredStyle:B.buttonHoveredStyle,pressedStyle:B.buttonPressedStyle,children:j&&void 0!==a?(0,b.jsx)(a,{}):T})})));function tn(e){window.__c={n:"RelationRows"};const{collectionStore:t,targetCollectionStore:o,relationItemPointers:r,relationValue:s,property:a,store:d,disabled:p,menuListStore:y,buttonContainerRef:m,blockPropertyValueOverlayStore:f,format:h,propertySchema:S}=e,x=(0,l.Y$)(),v=(0,c.O7)(),g=(0,n.useCallback)(((e,t)=>{ee.bA({environment:v,blockPropertyValueOverlayStore:f,store:d,property:a,rect:null==t?void 0:t.getBoundingClientRect(),format:h,mode:e,collectionContextStore:x})}),[f,x,v,h,a,d]),w=(0,n.useCallback)(((e,t)=>{if(!x)return;const o=e.filter((e=>e.id!==t.id));te.createAndCommit({userAction:"RelationBlockPropertyValue.handleRemoveRelationClick",environment:v,perform:e=>{Uo.sf({store:d,propertyId:a,value:o,environment:v,relatedPageId:t.id,propertySchema:S,transaction:e,collectionContextStore:x,analyticsData:{isFromBulkActionsToolbar:oe.VM(f),analyticsFrom:oe.Sy(h)},isUnthrottled:!1})}})}),[f,x,v,h,a,S,d]),C=(0,i.VK)((()=>o.getFormatStore().getKeyStore("app_config_uri").getValue()===Do.p$),[o]),_=(0,u.yK)((()=>({moreMenuItem:{width:"100%",display:"flex",alignItems:"center",justifyItems:"center",borderRadius:4,fontSize:14,minHeight:32,margin:0,padding:"6px 8px"},moreMenuItemLabel:{lineHeight:"normal",margin:0}})),[]),P=(0,qo.E)("relation_menu_refactor")?_o.LazyRelationMenuRow:_o.LazyRelationMenuRowOld,k=r.slice(0,5).map(((e,n)=>{let{pageStore:r}=e;return{key:r.id,render:e=>(0,b.jsx)(P,{...e,canDrag:!1,collectionStore:t,targetCollectionStore:o,relatedPageStore:r,disabled:p,isSelected:!0,pageStore:d,property:a,rowType:"inline",onActionButtonClick:()=>{w(s,r)},onMouseLeave:()=>y.unsetFocus(),onSecondaryButtonClick:e=>{g({type:C?"view":"add",index:n+1},e)},onOpenPageButtonClick:()=>{zo.O(s,r,v,"relation_property")}}),action:()=>{}}}));return r.length>5&&k.push({key:"add",render:e=>(0,b.jsx)(Go.Z,{...e,style:_.moreMenuItem,onClick:e=>g({type:"view"},m&&"current"in m?m.current:void 0),children:(0,b.jsx)(Dt.Z,{style:_.moreMenuItemLabel,count:r.length-5,format:jt.lo.Medium,fixedHeight:!1,isCompact:!1})}),action:()=>{g({type:"add",index:s.length},void 0)}}),(0,b.jsx)(Qo.Z,{type:Qo.i.Vertical,store:y,initialFocus:void 0,disableKeyboard:!0,style:{width:"100%"},sections:[{key:"results",render:e=>(0,b.jsx)(Yo.Z,{...e,disableDesktopPadding:!0,disableMobileBorders:!0,children:e.children}),items:k}]})}function on(e){window.__c={n:"RelationInlineTokens"};const{relationItemPointers:t,store:o,tokenFormat:n}=e,r=(0,u.yK)((()=>({moreToken:{margin:0}})),[]),i=t.slice(0,10).map((e=>{let{pointer:t}=e;return(0,b.jsx)(Jo.Z,{recordPointer:t,parentStore:o},t.id)}));return t.length>10&&i.push((0,b.jsx)(Dt.Z,{style:r.moreToken,count:t.length-10,format:n,fixedHeight:!1,isCompact:!0})),(0,b.jsx)(tt.K,{children:i})}const nn=(0,n.forwardRef)((function(e,t){window.__c={n:"TableRelationProperty"};const o=Sn(e,t);return(0,b.jsx)(en,{...o,EmptyComponent:ge.q8,renderAs:"inline"})})),rn=(0,n.forwardRef)((function(e,t){window.__c={n:"PageRelationProperty"};const{store:o,property:n,collectionStore:r}=e,i=Sn(e,t);return(0,b.jsx)(ko.O,{store:o,property:n,collectionStore:r,children:(0,b.jsx)(en,{...i,EmptyComponent:ge.T$,renderAs:"rows"})})})),ln=(0,n.forwardRef)((function(e,t){window.__c={n:"CompactRelationProperty"};const o=Sn(e,t);return(0,b.jsx)(en,{...o,EmptyComponent:ge.T$,renderAs:"rows"})})),sn=(0,n.forwardRef)((function(e,t){window.__c={n:"ListRelationProperty"};const{showIfEmpty:o}=e,n=Sn(e,t);return(0,b.jsx)(en,{...n,EmptyComponent:o?ge.s3:void 0,renderAs:"inline"})})),an=(0,n.forwardRef)((function(e,t){window.__c={n:"BoardRelationProperty"};const{showIfEmpty:o}=e,n=Sn(e,t);return(0,b.jsx)(en,{...n,EmptyComponent:o?ge.s3:void 0,renderAs:"inline"})})),cn=(0,n.forwardRef)((function(e,t){window.__c={n:"CalendarRelationProperty"};const o=Sn(e,t);return(0,b.jsx)(en,{...o,renderAs:"inline"})})),un=(0,n.forwardRef)((function(e,t){window.__c={n:"GalleryRelationProperty"};const{showIfEmpty:o}=e,n=Sn(e,t);return(0,b.jsx)(en,{...n,EmptyComponent:o?ge.s3:void 0,renderAs:"inline"})})),dn=(0,n.forwardRef)((function(e,t){window.__c={n:"TimelineRelationProperty"};const o=Sn(e,t);return(0,b.jsx)(en,{...o,renderAs:"inline"})})),pn=(0,n.forwardRef)((function(e,t){window.__c={n:"RelationRelationProperty"};const o=Sn(e,t);return(0,b.jsx)(en,{...o,renderAs:"inline"})})),yn=(0,n.forwardRef)((function(e,t){window.__c={n:"RelationSectionRelationProperty"};const o=Sn(e,t);return(0,b.jsx)(en,{...o,renderAs:"inline"})})),mn=()=>{},fn=(0,n.forwardRef)((function(e,t){window.__c={n:"PropertyModuleRelationProperty"};const{store:o,collectionStore:r,property:l,blockPropertyValueOverlayStore:s,isInPeekRenderer:a}=Sn(e,t),{isReadOnly:c}=(0,n.useContext)(f.O),u=(0,i.VK)((()=>o.isLocked()),[o]),d=(0,i.VK)((()=>o.getSchema()),[o]),p=(0,i.VK)((()=>r.getFormat()),[r]);return(0,b.jsx)(Xo.Z,{store:o,collectionStore:r,disabled:c,locked:u,property:l,schema:d,handleMouseMove:mn,handleMouseLeave:mn,handleContextMenu:mn,blockPropertyValueOverlayStore:s,format:p,visibility:"section_show",isInPeekRenderer:Boolean(a),topBorder:!1,disableRowNameInteractivity:!0})})),hn=(0,n.forwardRef)((function(e,t){window.__c={n:"MiniRelationProperty"};const o=Sn(e,t);return(0,b.jsx)(en,{...o,EmptyComponent:ge.zX,renderAs:"inline"})}));function Sn(e,t,o){const{store:n,collectionStore:r,property:i,onContextMenu:l,blockPropertyValueOverlayStore:s,format:a,isInPeekRenderer:c}=e;return{ref:t,store:n,collectionStore:r,property:i,editButtonClickProps:(0,ne.Am)(e),onContextMenu:l,buttonStyle:null==o?void 0:o.buttonStyle,blockPropertyValueOverlayStore:s,format:a,isInPeekRenderer:c}}var xn=o(35011),bn=o(34299),vn=o(7057),gn=o(35102),wn=o(84682),Cn=o(72126),_n=o(82883),Pn=o(89470),kn=o(16187),Rn=o(73807),jn=o(25651),Mn=o(43664),Bn=o(28651);const Tn=(0,O.defineMessages)({rollup:{defaultMessage:"Configure rollup",id:"database.editButton.configureRollupTooltip"}});function Vn(e){window.__c={n:"EditButton"};const{type:t,editButtonClickProps:o}=e,r=(0,c.O7)(),{isMobile:l}=(0,c.Fy)(),{containerRef:s,collectionContextStore:a,isReadOnly:u}=(0,n.useContext)(f.O),d=(0,i.qz)(void 0,Bn.Z),p=(0,n.useMemo)((()=>F.default.formatMessage(Tn[t])),[t]),y=(0,n.useCallback)((async e=>{if(void 0===o)return;const{onClick:t,store:n,property:i,format:l,collectionStore:c,blockPropertyValueOverlayStore:u,disableHorizontalEdgeScroll:p}=o;await Mn.z({element:s&&"current"in s&&(null==s?void 0:s.current)||void 0,environment:r,onClick:t,store:n,property:c.getMappedProperty(i),format:l,collectionStore:c,blockPropertyValueOverlayStore:u,disableHorizontalEdgeScroll:p,collectionContextStore:a,mouseStore:d})}),[a,s,o,r,d]);return u||l?null:(0,b.jsx)(Nt,{icon:jn.R,tooltip:p,onClick:y})}var An=o(19629);const On=n.memo(n.forwardRef((function(e,t){const{store:o,property:r,EmptyComponent:l,collectionStore:s,onContextMenu:a,editButtonClickProps:d,checkboxButtonStyle:y,textButtonStyle:h,buttonButtonStyle:v,quickActionButtons:g,numberRightAlign:w}=e,{baseStyles:C,collectionContextStore:_}=(0,n.useContext)(f.O),P=(0,i.VK)((()=>{var e;return null==_||null===(e=_.collectionStore())||void 0===e?void 0:e.getSchema()}),[_]),k=(0,i.VK)((()=>o.getModel()),[o]),R=(0,Rn._)(),j=(0,i.VK)((()=>{if(void 0!==P)return(0,bn.gT)({property:r,schema:P,getRecordModel:s.getRecordModel})}),[P,r,s.getRecordModel]),{propertySchema:M,targetPropertySchema:B}=j||{},T=function(e){var t;const{block:o,schema:n,property:r,store:l,propertySchema:s,targetPropertySchema:a,numberRightAlign:c,clientFormulaTimeoutMs:u}=e,{rollupAggregationValue:d,numberFormat:p}=(0,i.VK)((()=>{if(!(null!=s&&s.aggregation&&"show_unique"!==s.aggregation&&o&&null!=a&&a.type&&n))return{rollupAggregationValue:void 0,numberFormat:void 0};const e=(0,bn.O0)({block:o,property:r,schema:n,getRecordModel:l.getRecordModel,collectionRequestContext:{userId:void 0,userTimeZone:(0,Fe.r)(),depth:0,intl:F.default.getIntl(),visitedProperties:new Set,resultCache:new Map,formulaTimeoutTimestampMs:Date.now()+u}});if(!e)return{rollupAggregationValue:void 0,numberFormat:void 0};const t=(0,kn.SD)(s.aggregation,"formula"===(null==a?void 0:a.type)||"number"===(null==a?void 0:a.type)?a.number_format:void 0);if(t){const o=void 0===(null==e?void 0:e.value)||"number"!=typeof e.value?void 0:Cn.NM(e.value,3);if(void 0!==o&&!isNaN(o))return{rollupAggregationValue:o,numberFormat:t}}const i=(0,kn.Ol)({numberFormat:void 0,dateFormat:a&&"date_format"in a?a.date_format:void 0,aggregationType:s.aggregation,value:e,userTimeZone:(0,Fe.r)(),roundDecimal:3});return void 0===i||""===i?{rollupAggregationValue:void 0,numberFormat:void 0}:{rollupAggregationValue:i,numberFormat:void 0}}),[o,r,s,n,l.getRecordModel,a,u]);return(0,i.VK)((()=>{if(void 0===d)return null;if(p){var e,t;return"bar"===(null==s||null===(e=s.show_as)||void 0===e?void 0:e.type)||"ring"===(null==s||null===(t=s.show_as)||void 0===t?void 0:t.type)?(0,b.jsx)(tt.K,{isRightAligned:c,children:(0,b.jsx)(lo.A,{numberFormat:p,numberValue:d,isRightAligned:c})}):(0,b.jsx)(x.Y,{isRightAligned:c,children:(0,b.jsx)(lo.A,{numberFormat:p,numberValue:d,isRightAligned:c})})}return(0,b.jsx)(x.Y,{children:d})}),[c,p,null==s||null===(t=s.show_as)||void 0===t?void 0:t.type,d])}({store:o,block:k,schema:P,property:r,propertySchema:M,targetPropertySchema:B,numberRightAlign:w,clientFormulaTimeoutMs:R}),V=function(e){const{block:t,store:o,rollupPropertyData:r,numberRightAlign:l,clientFormulaTimeoutMs:s}=e,{propertySchema:a,relationPropertySchema:u,targetPropertySchema:d,targetProperty:y,targetCollectionModel:m}=r||{},{collectionContextStore:h}=(0,n.useContext)(f.O),S=(0,i.VK)((()=>{if(void 0!==(null==a?void 0:a.aggregation)&&"show_unique"!==(null==a?void 0:a.aggregation)||!a||!u||!d||!m||!t||void 0===(null==a?void 0:a.relation_property))return[];return p.j$({relationValue:p.rq(p.wS(t,a.relation_property)),getRecordModel:o.getRecordModel,propertySchema:u}).map((e=>K.G.createChildStore(o,e))).filter((e=>{var t;return(null===(t=e.getAssociatedCollectionStore())||void 0===t?void 0:t.id)===m.id}))}),[a,u,d,m,t,o]),x=(0,c.O7)(),v=(0,i.VK)((()=>{if(void 0===u||void 0===d||void 0===y||void 0===a)return[];const e=null==h?void 0:h.collectionViewBlockStore(),t=u.collection_pointer;if(void 0===t||void 0===e)return[];const o=K.NW.createChildStore(e,t),n=[],r=new Map;for(const i of S){const e=i.getPropertyValue(y);if(void 0===e&&!["status","person","checkbox","formula","last_edited_time","last_edited_by","created_time","created_by","title"].includes(d.type))continue;const t=En({textValue:e,blockStore:i,targetCollectionStore:o,targetPropertySchema:d,targetProperty:y,currentUserId:x.currentUser.id,clientFormulaTimeoutMs:s,resultCache:r}).map((e=>[e,i]));n.push(...t)}return"show_unique"===a.aggregation?Cn.mN(n,(e=>{let[t,o]=e;return t.id})):n}),[S,h,u,a,y,d,x.currentUser.id,s]);return(0,i.VK)((()=>{if(null==v||!v.length||!a)return null;const e=v[0][0].type,t=(0,An.vQ)(e,a);return(0,b.jsx)(An.E1,{propertyType:e,rootPropertySchema:a,numberRightAlign:l,children:v.map(((e,o)=>{let[n,r]=e;return(0,b.jsx)(An.gZ,{token:n,targetPropertySchema:d,blockStore:r,withComma:t&&o<v.length-1,numberRightAlign:l},`${n.id}-${o}`)}))})}),[l,a,v,d])}({block:k,store:o,rollupPropertyData:j,numberRightAlign:w,clientFormulaTimeoutMs:R}),A=!T&&!V,O=(0,i.VK)((()=>A||void 0===j?"text":void 0!==(null==M?void 0:M.aggregation)&&"show_unique"!==M.aggregation?void 0!==(0,kn.SD)(M.aggregation,"number")?"number":"text":null!=j&&j.targetPropertySchema?function(e){if("formula"===e.type){if(e.formula2){const t=(0,gn.aL)(e.formula2.result_type).type;return"block"===t?"relation":"unknown"===t||"array"===t?"text":t}return"text"}return"rollup"===e.type?"text":e.type}(j.targetPropertySchema):"text"),[A,null==M?void 0:M.aggregation,j]),I=(0,u.yK)((e=>({buttonStyle:{...C.buttonStyle,..."checkbox"===O?y:{},..."title"!==O&&(0,S.A2)(O)?h:{},...(0,S.e4)(O)?v:{}},buttonPressedStyle:C.buttonPressedStyle??{},buttonHoveredStyle:C.buttonHoveredStyle??{}})),[C.buttonHoveredStyle,C.buttonPressedStyle,C.buttonStyle,v,y,O,h]);if(A&&void 0===l)return null;const E=!0===w&&"number"===O;return(0,b.jsx)(m.Z,{ref:t,onContextMenu:a,editButtonClickProps:d,style:I.buttonStyle,pressedStyle:I.buttonPressedStyle,hoveredStyle:I.buttonHoveredStyle,quickActionButtons:g?(0,b.jsx)(In,{buttons:g,editButtonClickProps:d}):void 0,quickActionButtonsAlign:E?"left":void 0,children:A?l?(0,b.jsx)(l,{}):null:T??V})}))),In=e=>{let{buttons:t,editButtonClickProps:o}=e;const n=t.map((e=>{if("edit"===e)return(0,b.jsx)(Vn,{type:"rollup",editButtonClickProps:o},e);(0,Co.t1)(e)})).filter(Co.K0);return n?(0,b.jsx)(b.Fragment,{children:n}):null};function En(e){var t;const{textValue:o,blockStore:n,targetCollectionStore:r,targetPropertySchema:i,targetProperty:l,clientFormulaTimeoutMs:s,resultCache:a}=e,{type:c}=i;switch(c){case"auto_increment_id":if(void 0===o)return[];const y=null===(t=r.getRecordKeyStore())||void 0===t?void 0:t.getRecordKey(),m=(0,d.wf)(y,p.ah(o));return m?[{id:m,type:"text",value:[[m]]}]:[];case"button":case"rollup":case"location":case"verification":return[];case"checkbox":{const e=p.Ml(o);return[{id:e,type:"checkbox",value:e}]}case"date":{const e=p.Gl(o);if(void 0===e)return[];return[{id:vn.ZV({allowRelativeDates:!1,value:e,userTimeZone:(0,Fe.r)(),intl:F.default.getIntl()}),type:"date",value:e}]}case"email":case"phone_number":case"url":return void 0===o?[]:[{id:(0,wo.Jcv)(o),type:c,value:o}];case"file":return p.g(o).map((e=>({id:e.url,type:"file",value:e})));case"formula":{const e=n.getModel();if(void 0===e)return[];const t=F.default.getIntl(),o=(0,Fe.r)();if("v2"===i.version){var u;if(null===(u=i.formula2)||void 0===u||!u.code)return[];const r=(0,xn.EC)({block:e,property:l,formulaCode:i.formula2.code,getRecordModel:n.getRecordModel,intl:t,userTimeZone:o,depth:0,visitedProperties:new Set,formulaTimeoutTimestampMs:Date.now()+s,resultCache:a});return r?(0,mt.$I)(r,n.getRecordModel,o):[]}{const r=(0,wn.AH)({property:l,schema:n.getSchema(),block:e,getRecordModel:n.getRecordModel,collectionRequestContext:{userId:void 0,userTimeZone:o,depth:0,intl:t,resultCache:a,visitedProperties:new Set,formulaTimeoutTimestampMs:Date.now()+s}});return(0,mt.tT)(r)}}case"select":{const e=p.Sj(o,i.options??[]);if(!i.options||!e)return[];return[{id:e,type:"select",value:e,color:(0,p.wI)(i.options??[],e)}]}case"multi_select":return p.uP(o,i.options??[]).map((e=>({id:e,type:"select",value:e,color:(0,p.wI)(i.options??[],e)})));case"number":{const e=p.VY(o);return void 0===e?[]:[{id:e,type:"number",value:e}]}case"person":return p.DW({textValue:o,propertySchema:i,blockCreatorPointer:n.getCreatedByPointer()}).map((e=>({id:e.id,type:"person",value:e})));case"title":if(void 0===r)return[];return[{id:(0,_n.X)({textValue:o,getRecordModel:n.getRecordModel,deterministic:!0,userTimeZone:(0,Fe.r)(),intl:F.default.getIntl()}),type:"relation",value:{id:n.id,table:"block",spaceId:r.getSpaceId()}}];case"relation":if(void 0===r)return[];return p.j$({relationValue:p.rq(o),getRecordModel:n.getRecordModel,propertySchema:i}).map((e=>({id:e.id,type:"relation",value:e})));case"status":{const e=p.ZG(o,i),{options:t,groups:n}=i,r=null==t?void 0:t.find((t=>t.value===e));if(void 0===e||void 0===r)return[];const l=null==n?void 0:n.find((e=>{var t;return null===(t=e.optionIds)||void 0===t?void 0:t.includes(r.id)}));return[{id:e,type:"select",value:e,color:r.color,groupColor:(null==l?void 0:l.color)??"default"}]}case"text":if(void 0===o)return[];const f=(0,_n.X)({textValue:o,getRecordModel:n.getRecordModel,deterministic:!0,userTimeZone:(0,Fe.r)(),intl:F.default.getIntl()});return 0===f.length?[]:[{id:f,type:"text",value:o}];case"created_by":const h=n.getCreatedByPointer();return h?[{id:h.id,type:"person",value:h}]:[];case"created_time":{const e=n.getCreatedTime();return[{id:e,type:"date",value:(0,Ee.CQ)(e,(0,Fe.r)())}]}case"last_edited_by":{const e=n.getLastEditedByPointer();return e?[{id:e.id,type:"person",value:e}]:[]}case"last_edited_time":{const e=n.getLastEditedTime();return[{id:e,type:"date",value:(0,Ee.CQ)(e,(0,Fe.r)())}]}case"last_visited_time":{const{currentUserId:t}=e;if(!t)return[];const o=(0,Pn.Pv)({parent_id:n.id,user_id:t}),r=K.H8.createChildStore(n,{table:Pn.UI,id:o,spaceId:n.getSpaceId()}).getModel(),i=null==r?void 0:r.getVisitedAt();if(!i)return[];return[{id:i,type:"date",value:(0,Ee.CQ)(i,(0,Fe.r)())}]}default:(0,Co.t1)(c)}}const Fn=["edit"],Kn=n.forwardRef((function(e,t){window.__c={n:"TableRollupProperty"};const o=Gn(e,t,(0,u.yK)((()=>({checkboxButtonStyle:{padding:S.sf[h.C.Table].checkbox},textButtonStyle:{padding:S.sf[h.C.Table].text},buttonButtonStyle:{padding:S.sf[h.C.Table].button}})),[]));return(0,b.jsx)(On,{...o,numberRightAlign:!0,EmptyComponent:ge.q8,quickActionButtons:Fn})})),Zn=["edit"],Ln=n.forwardRef((function(e,t){window.__c={n:"PageRollupProperty"};const o=Gn(e,t,(0,u.yK)((()=>({checkboxButtonStyle:{padding:S.sf[h.C.Page].checkbox},textButtonStyle:{padding:S.sf[h.C.Page].text},buttonButtonStyle:{padding:S.sf[h.C.Page].button}})),[]));return(0,b.jsx)(On,{...o,quickActionButtons:Zn,EmptyComponent:ge.T$})})),Nn=n.forwardRef((function(e,t){window.__c={n:"CompactRollupProperty"};const o=Gn(e,t,(0,u.yK)((()=>({checkboxButtonStyle:{padding:S.sf[h.C.CompactPage].checkbox},textButtonStyle:{padding:S.sf[h.C.CompactPage].text},buttonButtonStyle:{padding:S.sf[h.C.CompactPage].button}})),[]));return(0,b.jsx)(On,{...o,EmptyComponent:ge.T$})})),Hn=n.forwardRef((function(e,t){window.__c={n:"ListRollupProperty"};const o=Gn(e,t);return(0,b.jsx)(On,{...o})})),Wn=n.forwardRef((function(e,t){window.__c={n:"BoardRollupProperty"};const o=Gn(e,t,(0,u.yK)((()=>({checkboxButtonStyle:{padding:S.sf[h.C.Board].checkbox},textButtonStyle:{padding:S.sf[h.C.Board].text},buttonButtonStyle:{padding:S.sf[h.C.Board].button}})),[]));return(0,b.jsx)(On,{...o})})),Dn=n.forwardRef((function(e,t){window.__c={n:"CalendarRollupProperty"};const o=Gn(e,t);return(0,b.jsx)(On,{...o})})),Un=n.forwardRef((function(e,t){window.__c={n:"GalleryRollupProperty"};const o=Gn(e,t);return(0,b.jsx)(On,{...o})})),zn=n.forwardRef((function(e,t){window.__c={n:"TimelineRollupProperty"};const o=Gn(e,t);return(0,b.jsx)(On,{...o})})),qn=n.forwardRef((function(e,t){window.__c={n:"RelationRollupProperty"};const o=Gn(e,t);return(0,b.jsx)(On,{...o})})),$n=n.forwardRef((function(e,t){window.__c={n:"RelationSectionRollupProperty"};const o=Gn(e,t);return(0,b.jsx)(On,{...o})}));function Gn(e,t,o){const{store:n,onContextMenu:r,property:i,collectionStore:l}=e;return{ref:t,store:n,property:i,collectionStore:l,editButtonClickProps:(0,ne.Am)(e),onContextMenu:r,checkboxButtonStyle:null==o?void 0:o.checkboxButtonStyle,textButtonStyle:null==o?void 0:o.textButtonStyle,buttonButtonStyle:null==o?void 0:o.buttonButtonStyle}}const Qn=(0,n.forwardRef)((function(e,t){return(0,b.jsx)($t,{...e,ref:t})})),Yn=(0,n.forwardRef)((function(e,t){return(0,b.jsx)(Gt,{...e,ref:t})})),Xn=(0,n.forwardRef)((function(e,t){return(0,b.jsx)(Qt,{...e,ref:t})})),Jn=(0,n.forwardRef)((function(e,t){return(0,b.jsx)(Yt,{...e,ref:t})})),er=(0,n.forwardRef)((function(e,t){return(0,b.jsx)(Xt,{...e,ref:t})})),tr=(0,n.forwardRef)((function(e,t){return(0,b.jsx)(Jt,{...e,ref:t})})),or=(0,n.forwardRef)((function(e,t){return(0,b.jsx)(eo,{...e,ref:t})})),nr=(0,n.forwardRef)((function(e,t){return(0,b.jsx)(to,{...e,ref:t})})),rr=(0,n.forwardRef)((function(e,t){return(0,b.jsx)(oo,{...e,ref:t})})),ir=(0,n.forwardRef)((function(e,t){return(0,b.jsx)(no,{...e,ref:t})})),lr=(0,n.forwardRef)((function(e,t){return(0,b.jsx)(ro,{...e,ref:t})})),sr=n.memo(n.forwardRef((function(e,t){const{store:o,onContextMenu:r,property:l,disabled:s,enablePointerEventsForInteractiveTypes:a,editButtonClickProps:c,selectButtonStyle:d,checkboxButtonStyle:y,checkboxShowLabel:h,EmptyComponent:S}=e,{baseStyles:x,collectionContextStore:v,propertySchema:g,shouldRenderTooltip:w,isEmpty:C,unmappedProperty:_}=(0,n.useContext)(f.O),P=g,k=(null==x?void 0:x.tokenFormat)??jt.lo.Medium,R=(0,i.VK)((()=>o.getPropertyValue(l)),[l,o]),j=(0,n.useMemo)((()=>P?p.ZG(R,P)??"":""),[R,P]),M=(0,i.VK)((()=>{var e;return(null==v||null===(e=v.getPropertyFormat(_??l))||void 0===e?void 0:e.statusShowAs)??"select"}),[v,_,l]),B=(0,u.yK)((()=>({buttonStyle:{...x.buttonStyle,..."select"===M?d:y},buttonPressedStyle:x.buttonPressedStyle??{},buttonHoveredStyle:x.buttonHoveredStyle??{}})),[x.buttonHoveredStyle,x.buttonPressedStyle,x.buttonStyle,d,y,M]);return C&&void 0===S?null:(0,b.jsx)(m.Z,{ref:t,onContextMenu:r,editButtonClickProps:c,style:B.buttonStyle,pressedStyle:B.buttonPressedStyle,hoveredStyle:B.buttonHoveredStyle,tooltipPropertyValue:w&&"checkbox"===M?j:void 0,children:"checkbox"===M?(0,b.jsx)(cr,{enablePointerEventsForInteractiveTypes:a,showLabel:h,propertyName:null==P?void 0:P.name,propertyValue:R,statusValue:j,editButtonClickProps:c,containerRef:t,store:o,property:l,disabled:s}):C&&void 0!==S?(0,b.jsx)(S,{}):(0,b.jsx)(ar,{statusValue:j,tokenFormat:k})})})));function ar(e){window.__c={n:"StatusSelectPropertyValue"};const{statusValue:t}=e,{propertySchema:o}=(0,n.useContext)(f.O),r=o,{foundOption:i,foundGroup:l}=(0,n.useMemo)((()=>{const e=(null==r?void 0:r.options)??[],o=e.find((e=>e.value===t)),n=(null==r?void 0:r.groups)??[],i=o&&n.find((e=>{var t;return null===(t=e.optionIds)||void 0===t?void 0:t.includes(o.id)}));return{options:e,foundOption:o,foundGroup:i}}),[r,t]);return i?(0,b.jsx)(tt.K,{children:(0,b.jsx)(Ut.J,{type:"status",value:i.value,color:i.color,groupColor:null==l?void 0:l.color})}):null}function cr(e){window.__c={n:"StatusCheckboxPropertyValue"};const{propertyName:t,propertyValue:o,statusValue:r,showLabel:i,enablePointerEventsForInteractiveTypes:l,editButtonClickProps:s,containerRef:a,store:u,property:d,disabled:y}=e,{propertySchema:m,shouldRenderTooltip:h}=(0,n.useContext)(f.O),S=m,x=le(u,d,y),v=(0,c.O7)(),g=(0,n.useMemo)((()=>!!S&&p.rO(o,S,F.default.getIntl())),[o,S]),w=(0,n.useCallback)((async e=>{const t=e.altKey;await Mn.z({...s,element:a&&"current"in a?(null==a?void 0:a.current)??void 0:void 0,environment:v,statusSetCheckbox:!t})}),[a,s,v]);return(0,b.jsx)(re.n,{onClick:w,propertyLabel:i?t:void 0,checked:g,enablePointerEventsForInteractiveTypes:l,tooltip:h?void 0:r,disabled:x})}const ur=(0,n.forwardRef)((function(e,t){window.__c={n:"TableStatusProperty"};const o=gr(e,t,(0,u.yK)((()=>({checkboxButtonStyle:{padding:S.sf[h.C.Table].checkbox}})),[]));return(0,b.jsx)(sr,{...o,checkboxShowLabel:!1,EmptyComponent:ge.q8})})),dr=(0,n.forwardRef)((function(e,t){window.__c={n:"PageStatusProperty"};const{store:o,property:n,collectionStore:r}=e,i=gr(e,t,(0,u.yK)((()=>({checkboxButtonStyle:{padding:S.sf[h.C.Page].checkbox}})),[]));return(0,b.jsx)(ko.O,{store:o,property:n,collectionStore:r,children:(0,b.jsx)(sr,{...i,checkboxShowLabel:!1,EmptyComponent:ge.T$})})})),pr=(0,n.forwardRef)((function(e,t){window.__c={n:"CompactStatusProperty"};const o=gr(e,t,(0,u.yK)((()=>({checkboxButtonStyle:{padding:S.sf[h.C.CompactPage].checkbox}})),[]));return(0,b.jsx)(sr,{...o,checkboxShowLabel:!1,EmptyComponent:ge.T$})})),yr=(0,n.forwardRef)((function(e,t){window.__c={n:"ListStatusProperty"};const{showIfEmpty:o}=e,n=gr(e,t);return(0,b.jsx)(sr,{...n,checkboxShowLabel:!1,EmptyComponent:o?ge.s3:void 0})})),mr=(0,n.forwardRef)((function(e,t){window.__c={n:"BoardStatusProperty"};const{showIfEmpty:o}=e,n=gr(e,t,(0,u.yK)((()=>({checkboxButtonStyle:{padding:S.sf[h.C.Board].checkbox}})),[]));return(0,b.jsx)(sr,{...n,checkboxShowLabel:!0,EmptyComponent:o?ge.s3:void 0})})),fr=(0,n.forwardRef)((function(e,t){window.__c={n:"CalendarStatusProperty"};const o=gr(e,t);return(0,b.jsx)(sr,{...o,checkboxShowLabel:!0})})),hr=(0,n.forwardRef)((function(e,t){window.__c={n:"GalleryStatusProperty"};const o=gr(e,t);return(0,b.jsx)(sr,{...o,checkboxShowLabel:!0})})),Sr=(0,n.forwardRef)((function(e,t){window.__c={n:"TimelineStatusProperty"};const o=gr(e,t);return(0,b.jsx)(sr,{...o,checkboxShowLabel:!1})})),xr=(0,n.forwardRef)((function(e,t){window.__c={n:"RelationStatusProperty"};const o=gr(e,t);return(0,b.jsx)(sr,{...o,checkboxShowLabel:!1})})),br=(0,n.forwardRef)((function(e,t){window.__c={n:"RelationSectionStatusProperty"};const o=gr(e,t);return(0,b.jsx)(sr,{...o,checkboxShowLabel:!1})})),vr=(0,n.forwardRef)((function(e,t){window.__c={n:"MiniStatusProperty"};const o=gr(e,t);return(0,b.jsx)(sr,{...o,checkboxShowLabel:!1,EmptyComponent:ge.zX})}));function gr(e,t,o){const{store:r,disabled:l,property:s,onContextMenu:a,enablePointerEventsForInteractiveTypes:c}=e,{collectionContextStore:u,unmappedProperty:d}=(0,n.useContext)(f.O),p=(0,i.VK)((()=>{var e;return"checkbox"===((null==u||null===(e=u.getPropertyFormat(d??s))||void 0===e?void 0:e.statusShowAs)??"select")}),[u,d,s]),y=(0,ne.Am)(e,{isStatusCheckbox:p});return{ref:t,store:r,disabled:l,property:s,selectButtonStyle:null==o?void 0:o.selectButtonStyle,checkboxButtonStyle:null==o?void 0:o.checkboxButtonStyle,editButtonClickProps:y,onContextMenu:a,enablePointerEventsForInteractiveTypes:c}}var wr=o(18746);const Cr=n.memo((0,n.forwardRef)(((e,t)=>{const{store:o,buttonStyle:r,onContextMenu:l,editButtonClickProps:s,quickActionButtons:a=[],EmptyComponent:c,property:d}=e,{isEmpty:p,baseStyles:y}=(0,n.useContext)(f.O),h=(0,i.VK)((()=>o.getPropertyValue(d)),[d,o]),S=(0,u.yK)((()=>({buttonStyle:{...y.buttonStyle,...r},buttonPressedStyle:y.buttonPressedStyle??{},buttonHoveredStyle:y.buttonHoveredStyle??{}})),[y.buttonHoveredStyle,y.buttonPressedStyle,y.buttonStyle,r]);return p&&void 0===c?null:(0,b.jsx)(m.Z,{ref:t,style:S.buttonStyle,hoveredStyle:S.buttonHoveredStyle,pressedStyle:S.buttonPressedStyle,onContextMenu:l,editButtonClickProps:s,quickActionButtons:a,children:p&&void 0!==c?(0,b.jsx)(c,{}):(0,b.jsx)(x.Y,{children:(0,b.jsx)(wr.A,{textValue:h,parentStore:o})})})}))),_r=(0,n.forwardRef)((function(e,t){window.__c={n:"PageTextProperty"};const{store:o,property:r,format:l,collectionStore:s}=e,a=(0,u.yK)((()=>({buttonStyle:{padding:S.sf[h.C.Page].text}})),[]),c=(0,i.VK)((()=>s.getSchema()),[s]),d=(0,n.useMemo)((()=>(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(Ht,{store:o,property:r,openOverlay:!0},"autofill"),(0,b.jsx)(y.Z,{store:o,schema:c,property:r,format:l},"copy")]})),[l,r,c,o]),p=Ir(e,t,a);return(0,b.jsx)(Cr,{...p,EmptyComponent:ge.T$,quickActionButtons:d})})),Pr=(0,n.forwardRef)((function(e,t){window.__c={n:"TableTextProperty"};const{store:o,property:r,format:l,collectionStore:s}=e,{isMobile:a}=(0,c.Fy)(),d=(0,u.yK)((()=>({buttonStyle:{padding:S.sf[h.C.Table].text}})),[]),p=(0,i.VK)((()=>s.getSchema()),[s]),m=(0,n.useMemo)((()=>(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(Ht,{store:o,property:r,openOverlay:!0},"autofill"),a?void 0:(0,b.jsx)(y.Z,{store:o,schema:p,property:r,format:l},"copy")]})),[l,a,r,p,o]),f=Ir(e,t,d);return(0,b.jsx)(Cr,{...f,EmptyComponent:ge.q8,quickActionButtons:m})})),kr=(0,n.forwardRef)((function(e,t){window.__c={n:"CompactTextProperty"};const o=Ir(e,t,(0,u.yK)((()=>({buttonStyle:{padding:S.sf[h.C.CompactPage].text,maxWidth:"300px"}})),[]));return(0,b.jsx)(Cr,{...o,EmptyComponent:ge.T$})})),Rr=(0,n.forwardRef)((function(e,t){window.__c={n:"ListTextProperty"};const{showIfEmpty:o}=e,n=Ir(e,t);return(0,b.jsx)(Cr,{...n,EmptyComponent:o?ge.s3:void 0})})),jr=(0,n.forwardRef)((function(e,t){window.__c={n:"BoardTextProperty"};const{showIfEmpty:o}=e,n=Ir(e,t,(0,u.yK)((()=>({buttonStyle:{padding:S.sf[h.C.Board].text}})),[]));return(0,b.jsx)(Cr,{...n,EmptyComponent:o?ge.s3:void 0})})),Mr=(0,n.forwardRef)((function(e,t){window.__c={n:"CalendarTextProperty"};const o=Ir(e,t);return(0,b.jsx)(Cr,{...o})})),Br=(0,n.forwardRef)((function(e,t){window.__c={n:"GalleryTextProperty"};const{showIfEmpty:o}=e,n=Ir(e,t);return(0,b.jsx)(Cr,{...n,EmptyComponent:o?ge.s3:void 0})})),Tr=(0,n.forwardRef)((function(e,t){window.__c={n:"TimelineTextProperty"};const o=Ir(e,t);return(0,b.jsx)(Cr,{...o})})),Vr=(0,n.forwardRef)((function(e,t){window.__c={n:"RelationTextProperty"};const o=Ir(e,t);return(0,b.jsx)(Cr,{...o})})),Ar=(0,n.forwardRef)((function(e,t){window.__c={n:"RelationSectionTextProperty"};const o=Ir(e,t);return(0,b.jsx)(Cr,{...o})})),Or=(0,n.forwardRef)((function(e,t){window.__c={n:"MiniTextProperty"};const o=Ir(e,t);return(0,b.jsx)(Cr,{...o,EmptyComponent:ge.zX})}));function Ir(e,t,o){const{store:n,collectionStore:r,property:i,onContextMenu:l}=e;return{ref:t,store:n,collectionStore:r,property:i,editButtonClickProps:(0,ne.Am)(e),onContextMenu:l,buttonStyle:null==o?void 0:o.buttonStyle}}var Er=o(68626),Fr=o(95855),Kr=o(54497),Zr=o(23867),Lr=o(82990),Nr=o(64002),Hr=o(9953),Wr=o(24677),Dr=o(98104),Ur=o(75330),zr=o(60682),qr=o(28020),$r=o(14976),Gr=o(65183),Qr=o(77181),Yr=o(41232),Xr=o(65598),Jr=o(61931),ei=o(19511),ti=o(20362),oi=o(31278),ni=o(76798),ri=o(65187),ii=o(44831),li=o(41137),si=o(36610),ai=o(75079);function ci(e){window.__c={n:"TitlePropertyEditButton"};const{store:t}=e,o=(0,c.O7)(),r=(0,l.DK)(),i=(0,n.useCallback)((()=>{const e=t.getBlockTitleStore();Ur.Z5({store:t}),Wr.eP({environment:o,store:t}),Dr.NX({store:e}),si.sd(o,"list_item_edit_mode_enter",{...(0,ai.Pn)(r),block_id:t.id,from:"click",view_type:"list"})}),[t,o,r]),s=(0,u.yK)((e=>({buttonStyle:{color:e.mediumTextColor,fill:e.mediumTextColor,height:24,width:30},iconStyle:{color:e.mediumTextColor,fill:e.mediumTextColor}})),[]);return(0,b.jsx)(Bt.ZP,{renderTooltip:()=>(0,b.jsx)(O.FormattedMessage,{defaultMessage:"Edit",id:"collectionViewItem.edit.tooltip"}),render:e=>(0,b.jsx)(Lt.Z,{icon:jn.R,ariaLabel:"edit",onClick:i,hasBackground:!0,showShadow:!0,style:s.buttonStyle,iconStyle:s.iconStyle,...e})})}var ui=o(15145),di=o(8055),pi=o(10906),yi=o(84210),mi=o(12534),fi=o(80444);const hi=(0,O.defineMessages)({openAsPageTitle:{defaultMessage:"Open",id:"database.actionButton.openAsPageTitle"}});function Si(e){window.__c={n:"TitlePropertyPeekButton"};const{store:t,handleOpenPeekPage:o,showLabel:r,showIcon:s}=e,a=(0,c.O7)(),d=(0,l.DK)(),p=(0,i.VK)((()=>null==d?void 0:d.collectionViewStore()),[d]),{peekModeProps:y}=(0,i.VK)((()=>{const e=void 0!==p?pi.kr(p):"full_page";return{peekModeProps:(0,oe.X9)(e,!1)}}),[p],{useDeepEqual:!0}),m=(0,i.VK)((()=>(0,yi.ZP)({store:t,fullyQualified:!1,pageVisitSource:ui.tY.LinkInPage})),[t]),f=(0,n.useCallback)((()=>{const{mainEditorCurrentBlockStore:e}=fi.default.state;return pi.mb({store:t,mainEditorCurrentBlockStore:e,collectionContextStore:d,fullyQualified:!1})}),[t,d]),h=(0,n.useCallback)((e=>{if(e.metaKey||e.ctrlKey)di.c4({environment:a,url:m,openInNew:"tab"});else{const e=f();e&&(o&&o(),di.c4({environment:a,url:e}))}}),[a,f,m,o]),S=(0,n.useCallback)((e=>{1===e.button&&di.c4({environment:a,url:m,openInNew:"tab"})}),[a,m]),x=(0,n.useCallback)((e=>{(0,mi.ZP)({event:e,context:mi.Af.EditorMouseDown,callback:()=>{e.preventDefault()}})}),[]),v=(0,u.yK)((e=>({buttonStyle:{color:e.mediumTextColor,fill:e.mediumTextColor,...!r&&{width:30,height:24},background:e.whiteButtonBackground,boxShadow:e.lightBoxShadow,border:void 0,fontSize:12,fontWeight:Lr.Z.fontWeight.medium,textTransform:"uppercase",letterSpacing:.5},buttonHoveredStyle:{background:e.whiteButtonHoveredBackground},buttonPressedStyle:{background:e.whiteButtonPressedBackground},iconStyle:{color:e.mediumTextColor,fill:e.mediumTextColor}})),[r]);return(0,b.jsx)(Bt.ZP,{renderTooltip:()=>y.tooltip,render:e=>(0,b.jsx)("div",{onAuxClick:S,onMouseDown:x,children:(0,b.jsx)(L.Z,{onClick:h,icon:s?y.icon:void 0,ariaLabel:y.tooltip,isSmall:!0,style:v.buttonStyle,iconStyle:v.iconStyle,hoveredStyle:v.buttonHoveredStyle,pressedStyle:v.buttonPressedStyle,...e,children:r?F.default.formatMessage(hi.openAsPageTitle):void 0})})})}const xi=n.memo((0,n.forwardRef)((function(e,t){const{store:o,collectionStore:r,buttonStyle:l,textStyle:s,recordIconStyle:a,format:d,editButtonClickProps:p,onContextMenu:y,quickActionButtons:h,quickActionButtonsStyle:S,onTab:x,onUntab:v,forceMouseEntered:g,iconActionFrom:w,iconSize:C,showIcon:_,titlePropertyType:P,property:k,linkifyText:R,width:j}=e,M=(0,c.O7)(),B=(0,u.Fg)(),{baseStyles:T,collectionContextStore:V,isReadOnly:A,propertySchema:O}=(0,n.useContext)(f.O),I=(0,i.VK)((()=>(0,Gr.JI)(o)),[o],{useDeepEqual:!0}),E=(0,i.VK)((()=>{if("inlineEditable"!==P)return;const e=ei.Z.state;return Boolean(e.isActive&&e.store.id===o.id)}),[o.id,P]),{icon:K,iconStore:Z,isEmptyPage:L,recordTable:N,blockType:H,hasError:W}=(0,i.VK)((()=>{var e;return{icon:o.getIcon(),iconStore:o.getIconStore(),isEmptyPage:o.isEmptyPage(),recordTable:null===(e=o.getIconStore())||void 0===e?void 0:e.table,blockType:o.getType(),hasError:o.hasError()}}),[o],{useDeepEqual:!0}),D=(0,i.VK)((()=>Xr.Xp(o,{recursivelyLoadAllDiscussions:!1})),[o]),U=(0,Tt.us)(k),z=(0,i.VK)((()=>{if(!U)return R?oe.Hw({store:o,propertySchema:O,property:k}):void 0;const e=o.getFormatStore().getKeyStore("uri").getValue(),t=e&&Nr.Nm({str:e,allowNoProtocol:!1});return t&&(0,Yr.pI)(t,o.pointer.spaceId)}),[U,o,R,O,k]),q=(0,u.yK)((()=>({textStyle:{...T.textStyle,display:"inline",fontWeight:Lr.Z.fontWeight.medium,...s},buttonStyle:{...T.buttonStyle,...l},quickActionButtonsStyle:{...S},buttonPressedStyle:{...T.buttonPressedStyle,background:"none"},buttonHoveredStyle:{...T.buttonHoveredStyle,background:"none"},recordIconStyle:{display:"inline-flex",verticalAlign:"text-top",...a},link:{display:"inline"},parentItemIndicator:{display:"inline-flex",alignItems:"center",paddingLeft:8,paddingRight:4,verticalAlign:"text-top"},discussionIndicator:{display:"inline-flex",alignItems:"center",color:B.lightTextColor,fontSize:12,fontWeight:Lr.Z.fontWeight.medium,marginLeft:8,verticalAlign:"text-top"},subitemCountIndicatorWrapper:{display:"inline-flex",alignItems:"center",paddingLeft:8,paddingRight:4,verticalAlign:"text-top",fontWeight:Lr.Z.fontWeight.medium,color:B.lightTextColor},errorIcon:{display:"inline-block",verticalAlign:"text-top",marginLeft:1,marginRight:7,paddingBottom:4,width:16,fill:B.accentColors.orange[500]}})),[T.buttonHoveredStyle,T.buttonPressedStyle,T.buttonStyle,T.textStyle,l,S,a,s,B]),$=(0,n.useCallback)((()=>{V&&U&&J.YU({environment:M,collectionContextStore:V,block_id:o.id,property:k,from:oe.Sy(d),is_external_title_property_id:!0})}),[V,M,d,k,o.id,U]),G=(0,n.useCallback)((e=>{Z&&te.createAndCommit({userAction:"TitleProperty.handleRecordIconChange",environment:M,perform:t=>{Hr.sO({store:Z,value:e,transaction:t})}})}),[M,Z]),Q=(0,n.useCallback)((e=>{"Enter"!==(null==e?void 0:e.key)&&(V&&J.rv({environment:M,collectionContextStore:V,block_id:o.id,property:"title",property_type:"text",from:"list"}),Ur.IH({store:o}))}),[M,o,V]),Y=(0,n.useCallback)((()=>{ei.Z.setState({isActive:!1}),Dr.ZH(M),Wr.Ys({environment:M,store:o})}),[o,M]),X=(0,i.VK)((()=>{var e;switch(P){case"inlineEditable":const t=E?F.default.formatMessage(Ci.typeAName):F.default.formatMessage(Ci.untitledBlock);return(0,b.jsx)(ri.Z,{store:I,disabled:!E,disableSlashCommands:!0,disableEmojiCommands:!0,disableStyleAnnotations:!0,disableInsertedDeletedAnnotations:!0,disableEmbedMenu:!0,disableShiftEnter:!0,onEnter:Y,onEsc:Y,onTab:x,onUntab:v,onChange:Q,placeholder:t,style:q.textStyle,disableSelectAllBlocks:!0,pasteBehavior:"inline"});case"hidePlaceholderText":let n=null===(e=o.getTitleStore())||void 0===e?void 0:e.getValue();o.isType("external_object_instance_page")&&(n=o.getPropertyValue(k));const r=$r.IY({environment:M,textValue:n&&{value:n,spaceId:(0,Zr.C)(o.pointer.spaceId)},parentStore:o,disableHover:!0,disableStyleAnnotations:!0,disableInsertedDeletedAnnotations:!0,disableDateStyleAnnotations:!1,disabled:!0,theme:B,emojiType:(0,zr.e_)(M),katex:M.KatexStore.getKatex(),formulaValueTypes:[]});return(0,b.jsx)("span",{style:q.textStyle,children:r});case"showPlaceholderAsTitle":return(0,b.jsx)(ni.Z,{style:q.textStyle,store:o});default:(0,Co.t1)(P)}}),[P,E,I,Y,x,v,Q,q.textStyle,o,M,B,k]),ee=(0,n.useMemo)((()=>W?(0,Kr.t)(q.errorIcon):"never"===_||"withContent"===_&&void 0===K&&L?null:A?(0,b.jsx)(oi.Z,{disabled:!0,icon:K,isEmptyPage:L,size:C,style:q.recordIconStyle}):(0,b.jsx)(oi.Z,{disabled:!1,bucket:"secure",store:o,icon:K,isEmptyPage:L,size:C,iconLoggingData:{collection_id:r.id,recordTable:N,source:w,block_type:H},style:q.recordIconStyle,onChange:G})),[H,r.id,G,W,K,w,L,A,C,N,_,o,q.errorIcon,q.recordIconStyle]),ne=(0,i.VK)((()=>V&&(0,Qr.Cr)({collectionContextStore:V,blockId:o.id,blockStore:o})&&(0,b.jsx)("span",{style:q.parentItemIndicator,children:(0,b.jsx)(ii.O,{blockStore:o,collectionContextStore:V,columnWidth:j})})),[V,o,q.parentItemIndicator,j]),re=(0,i.VK)((()=>V&&(0,Qr.wI)({collectionContextStore:V,blockStore:o})&&(0,b.jsx)("span",{style:q.subitemCountIndicatorWrapper,children:(0,b.jsx)(li.B,{blockStore:o,collectionContextStore:V})})),[V,o,q.subitemCountIndicatorWrapper]),ie=(0,n.useMemo)((()=>D>0&&(0,b.jsxs)("span",{style:q.discussionIndicator,children:[(0,Fr.z)({width:14,height:14,marginRight:4,fill:B.mediumIconColor}),D]},"discussion-indicator")),[D,q.discussionIndicator,B.mediumIconColor]);return(0,b.jsxs)(m.Z,{ref:t,editButtonClickProps:p,onContextMenu:y,style:q.buttonStyle,pressedStyle:q.buttonPressedStyle,hoveredStyle:q.buttonHoveredStyle,quickActionButtons:h,quickActionButtonsStyle:q.quickActionButtonsStyle,quickActionButtonsForceVisible:M.device.isMobile?void 0:g,tooltipHide:!0,children:[ee,!E&&z?(0,b.jsx)(ti.Z,{href:z,external:U,onClick:$,style:q.link,children:X}):X,ne,re,ie]})}))),bi=(0,n.forwardRef)((function(e,t){window.__c={n:"TableTitleProperty"};const{store:o,handleOpenPeekPage:r,width:l}=e,{isMobile:s}=(0,c.Fy)(),{collectionContextStore:a,isReadOnly:d}=(0,n.useContext)(f.O),p=(0,u.yK)((e=>({buttonStyle:{padding:S.sf[h.C.Table].text},textStyle:{...oe.z0(e)},recordIconStyle:{height:22,width:22,margin:"-2px 3px 0px -2px"}})),[]),y=(0,i.VK)((()=>(null==a?void 0:a.shouldShowPageIcon())??!0),[a]),m=(0,n.useMemo)((()=>(0,b.jsx)(Si,{handleOpenPeekPage:r,store:o,showLabel:s||void 0===l||l>100,showIcon:!s})),[r,s,o,l]),x=wi(e,t,p);return(0,b.jsx)(xi,{...x,iconActionFrom:"collection_table_view",showIcon:y?"withContent":"never",iconSize:20,titlePropertyType:"hidePlaceholderText",quickActionButtons:m,linkifyText:d})})),vi=(0,n.forwardRef)((function(e,t){window.__c={n:"ListTitleProperty"};const{store:o}=e,{isReadOnly:r}=(0,n.useContext)(f.O),{isPhone:l,isMobile:s}=(0,c.Fy)(),a=(0,i.VK)((()=>{const e=ei.Z.state;return Boolean(e.isActive&&e.store.id===o.id)}),[o]),{collectionContextStore:d}=(0,n.useContext)(f.O),p=(0,i.VK)((()=>!!d&&(0,qr.YO)(d.isInPeekRenderer.state)),[d]),y=(0,u.yK)((e=>({buttonStyle:{marginLeft:0,marginRight:"auto",maxWidth:p?"100%":"max(75%, 400px)",minWidth:l?void 0:240,padding:0,paddingLeft:p?Jr.A5/2:void 0,flex:p?2:void 0},textStyle:{fontSize:p?14:16,whiteSpace:a?"pre":"nowrap",pointerEvents:a?void 0:"none",cursor:a?"text":void 0,borderBottom:p?"":`1px solid ${e.tableDividerColor}`,width:"auto"},recordIconStyle:{marginRight:5},actionButton:{marginLeft:10,marginRight:1,order:3}})),[a,l,p]),m=(0,i.VK)((()=>(null==d?void 0:d.shouldShowPageIcon())??!0),[d]),h=(0,n.useMemo)((()=>!s&&(!r&&!a?(0,b.jsx)(ci,{store:o}):(0,b.jsx)(Si,{store:o,showLabel:!1,showIcon:!0}))),[a,s,r,o]),S=wi(e,t,y);return(0,b.jsx)(xi,{...S,iconActionFrom:"collection_list_view",showIcon:m?"always":"never",iconSize:p?16:22,editButtonClickProps:void 0,quickActionButtonsStyle:y.actionButton,quickActionButtons:h,titlePropertyType:p?"showPlaceholderAsTitle":"inlineEditable"})})),gi=(0,n.forwardRef)((function(e,t){window.__c={n:"UnsupportedTitleProperty"},Er.log({level:"error",from:"BlockPropertyValue",type:"BlockPropertyValue.InvalidTitlePropertyFormat"});const o=wi(e,t);return(0,b.jsx)(xi,{...o,iconActionFrom:"collection_table_view",showIcon:"always",iconSize:20,titlePropertyType:"hidePlaceholderText"})}));function wi(e,t,o){const{store:n,collectionStore:r,property:i,onContextMenu:l,format:s,onTab:a,onUntab:c,forceMouseEntered:u,width:d}=e;return{ref:t,store:n,collectionStore:r,property:i,editButtonClickProps:(0,ne.Am)(e),onContextMenu:l,buttonStyle:null==o?void 0:o.buttonStyle,textStyle:null==o?void 0:o.textStyle,recordIconStyle:null==o?void 0:o.recordIconStyle,quickActionButtonsStyle:null==o?void 0:o.quickActionButtonsStyle,format:s,onTab:a,onUntab:c,forceMouseEntered:u,width:d}}const Ci=(0,O.defineMessages)({untitledBlock:{defaultMessage:"Untitled",id:"collectionViewItemTitle.untitledBlock"},typeAName:{defaultMessage:"Type a name…",id:"collectionViewItemTitle.itemName.placeholder"}});var _i=o(4308),Pi=o(11028),ki=o(58230);const Ri=n.memo(n.forwardRef((function(e,t){var o;const{property:r,collectionStore:l,store:s,buttonStyle:a,editButtonClickProps:c,EmptyComponent:d}=e,{isReadOnly:y,propertySchema:h,baseStyles:S}=(0,n.useContext)(f.O),x=h,v=(0,i.VK)((()=>l.getSchema()),[l]),g=(0,i.VK)((()=>!!x&&Gr._W(x,s,v)),[x,v,s]),w=y||!g,C=(0,u.yK)((e=>({buttonStyle:{...S.buttonStyle,...a,cursor:w?"text":"pointer"},buttonPressedStyle:S.buttonPressedStyle??{},buttonHoveredStyle:S.buttonHoveredStyle??{},secondaryTooltipText:{color:e.mediumInvertedTextColor}})),[S.buttonHoveredStyle,S.buttonPressedStyle,S.buttonStyle,a,w]),_=(0,i.VK)((()=>{const e=s.getPropertyValue(r);return(0,p._w)(e)}),[r,s]),P=(0,n.useMemo)((()=>(0,_i.WN)(_)),[_]),k=(0,n.useMemo)((()=>{if("none"!==P.type)return(0,b.jsx)(ki.Z,{verificationState:P,blockStore:s})}),[s,P]),R=(0,n.useMemo)((()=>{var e;if(!!g)return;const t=null==x?void 0:x.verifier_property,o=t?null===(e=v[t])||void 0===e?void 0:e.name:void 0;return(0,b.jsx)(ji,{verifierPropertyName:o})}),[g,v,x]),j="none"===P.type;return j&&void 0===d?null:(0,b.jsx)(m.Z,{ref:t,editButtonClickProps:w?void 0:c,style:C.buttonStyle,hoveredStyle:C.buttonHoveredStyle,pressedStyle:C.buttonPressedStyle,tooltipPropertyValue:k,tooltipPropertyCaption:R,children:j&&void 0!==d?(0,b.jsx)(d,{}):(0,b.jsx)(Pi.z,{verificationValue:_,fontSize:null===(o=S.buttonStyle)||void 0===o?void 0:o.fontSize})})})));function ji(e){const{verifierPropertyName:t}=e;return t?(0,b.jsx)(O.FormattedMessage,{defaultMessage:"Only people listed in {verifierPropertyName} can verify this page",id:"VerificationPropertyButton.tooltip.editRestrictedToVerifier",values:{verifierPropertyName:(0,b.jsx)("span",{style:{fontWeight:Lr.Z.fontWeight.bold},children:t})}}):(0,b.jsx)(O.FormattedMessage,{defaultMessage:"Only page owners can verify this page",id:"VerificationPropertyButton.tooltip.editRestrictedToOwner"})}const Mi=n.forwardRef((function(e,t){window.__c={n:"TableVerificationProperty"};const o=Zi(e,t,(0,u.yK)((()=>({buttonStyle:{padding:S.sf[h.C.Table].text}})),[]));return(0,b.jsx)(Ri,{...o,EmptyComponent:ge.q8})})),Bi=n.forwardRef((function(e,t){window.__c={n:"PageVerificationProperty"};const o=Zi(e,t,(0,u.yK)((()=>({buttonStyle:{padding:S.sf[h.C.Page].text}})),[]));return(0,b.jsx)(Ri,{...o,EmptyComponent:ge.T$})})),Ti=n.forwardRef((function(e,t){window.__c={n:"CompactVerificationProperty"};const o=Zi(e,t,(0,u.yK)((()=>({buttonStyle:{padding:S.sf[h.C.CompactPage].text}})),[]));return(0,b.jsx)(Ri,{...o,EmptyComponent:ge.T$})})),Vi=n.forwardRef((function(e,t){window.__c={n:"ListVerificationProperty"};const{collectionStore:o,store:r,showIfEmpty:l}=e,{propertySchema:s}=(0,n.useContext)(f.O),a=s,c=(0,i.VK)((()=>o.getSchema()),[o]),u=(0,i.VK)((()=>!!a&&Gr._W(a,r,c)),[a,c,r]),d=Zi(e,t);return(0,b.jsx)(Ri,{...d,EmptyComponent:l&&u?ge.s3:void 0})})),Ai=n.forwardRef((function(e,t){window.__c={n:"BoardVerificationProperty"};const{collectionStore:o,store:r,showIfEmpty:l}=e,{propertySchema:s}=(0,n.useContext)(f.O),a=s,c=(0,i.VK)((()=>o.getSchema()),[o]),d=(0,i.VK)((()=>!!a&&Gr._W(a,r,c)),[a,c,r]),p=Zi(e,t,(0,u.yK)((()=>({buttonStyle:{padding:S.sf[h.C.Board].text}})),[]));return(0,b.jsx)(Ri,{...p,EmptyComponent:l&&d?ge.s3:void 0})})),Oi=n.forwardRef((function(e,t){window.__c={n:"CalendarVerificationProperty"};const o=Zi(e,t);return(0,b.jsx)(Ri,{...o})})),Ii=n.forwardRef((function(e,t){window.__c={n:"GalleryVerificationProperty"};const o=Zi(e,t);return(0,b.jsx)(Ri,{...o})})),Ei=n.forwardRef((function(e,t){window.__c={n:"TimelineVerificationProperty"};const o=Zi(e,t);return(0,b.jsx)(Ri,{...o})})),Fi=n.forwardRef((function(e,t){window.__c={n:"RelationVerificationProperty"};const o=Zi(e,t);return(0,b.jsx)(Ri,{...o})})),Ki=n.forwardRef((function(e,t){window.__c={n:"RelationSectionVerificationProperty"};const o=Zi(e,t);return(0,b.jsx)(Ri,{...o})}));function Zi(e,t,o){const{store:n,collectionStore:r,property:i,onClick:l,onContextMenu:s}=e;return{ref:t,store:n,collectionStore:r,property:i,editButtonClickProps:(0,ne.Am)(e),onClick:l,onContextMenu:s,buttonStyle:null==o?void 0:o.buttonStyle}}function Li(e){window.__c={n:"BlockPropertyRouter"};const{property:t,collectionStore:o,format:c}=e,u=function(e,t){return(0,i.VK)((()=>e.getMappedProperty(t)),[e,t],{debugName:"useMappedProperty"})}(o,t),d=function(e,t){const o=(0,l.Y$)();return(0,i.VK)((()=>e.getSchema()[t]??o.normalizedSchemaStore.state[t]),[o,e,t],{debugName:"usePropertySchema"})}(o,u),p=(0,n.useContext)(s.Ue),y=(0,n.useRef)(null);if((0,r.c)(a.Z,(()=>({getNode:()=>{const{current:e}=y;return e?"getNode"in e?e.getNode():e:null},getProps:()=>({...e,property:u}),getContextHorizontalScroller:()=>null==p?void 0:p.horizontalScroller,getContextVerticalScroller:()=>null==p?void 0:p.verticalScroller})),[e]),null==d||!d.type)return null;const m=Wi[c][null==d?void 0:d.type];return null===m?null:(0,b.jsx)(f.Z,{...e,property:u,unmappedProperty:t,propertySchema:d,containerRef:y,children:(0,b.jsx)(m,{ref:y,...e,property:u})})}const Ni=null,Hi=null,Wi={[h.C.Table]:{checkbox:se,created_by:To,created_time:He,date:He,email:Ce,file:nt,formula:mt.n8,last_edited_by:To,last_edited_time:He,last_visited_time:He,location:St,multi_select:$t,number:co,person:To,phone_number:Ce,relation:nn,rollup:Kn,select:Qn,status:ur,text:Pr,title:bi,url:Ce,verification:Mi,auto_increment_id:C,button:H},[h.C.Board]:{checkbox:de,created_by:Fo,created_time:Ue,date:Ue,email:Re,file:st,formula:mt.mm,last_edited_by:Fo,last_edited_time:Ue,last_visited_time:Ue,location:gt,multi_select:Xt,number:yo,person:Fo,phone_number:Re,relation:an,rollup:Wn,select:er,status:mr,text:jr,title:gi,url:Re,verification:Ai,auto_increment_id:k,button:z},[h.C.Calendar]:{checkbox:pe,created_by:Ko,created_time:ze,date:ze,email:je,file:at,formula:mt.yJ,last_edited_by:Ko,last_edited_time:ze,last_visited_time:ze,location:wt,multi_select:Jt,number:mo,person:Ko,phone_number:je,relation:cn,rollup:Dn,select:tr,status:fr,text:Mr,title:gi,url:je,verification:Oi,auto_increment_id:R,button:q},[h.C.ListView]:{checkbox:ue,created_by:Eo,created_time:De,date:De,email:ke,file:lt,formula:mt.p5,last_edited_by:Eo,last_edited_time:De,last_visited_time:De,location:vt,multi_select:Yt,number:po,person:Eo,phone_number:ke,relation:sn,rollup:Hn,select:Jn,status:yr,text:Rr,title:vi,url:ke,verification:Vi,auto_increment_id:P,button:U},[h.C.GalleryView]:{checkbox:ye,created_by:Zo,created_time:qe,date:qe,email:Me,file:ct,formula:mt.tD,last_edited_by:Zo,last_edited_time:qe,last_visited_time:qe,location:Ct,multi_select:eo,number:fo,person:Zo,phone_number:Me,relation:un,rollup:Un,select:or,status:hr,text:Br,title:gi,url:Me,verification:Ii,auto_increment_id:j,button:$},[h.C.Timeline]:{checkbox:me,created_by:Lo,created_time:$e,date:$e,email:Be,file:ut,formula:mt.uS,last_edited_by:Lo,last_edited_time:$e,last_visited_time:$e,location:_t,multi_select:to,number:ho,person:Lo,phone_number:Be,relation:dn,rollup:zn,select:nr,status:Sr,text:Tr,title:gi,url:Be,verification:Ei,auto_increment_id:M,button:G},[h.C.Page]:{checkbox:ae,created_by:Vo,created_time:Ne,date:Ne,email:_e,file:rt,formula:mt.wC,last_edited_by:Vo,last_edited_time:Ne,last_visited_time:Ne,location:xt,multi_select:Gt,number:ao,person:Vo,phone_number:_e,relation:rn,rollup:Ln,select:Yn,status:dr,text:_r,title:gi,url:_e,verification:Bi,auto_increment_id:w,button:W},[h.C.CompactPage]:{checkbox:ce,created_by:Ao,created_time:We,date:We,email:Pe,file:it,formula:mt.lE,last_edited_by:Ao,last_edited_time:We,last_visited_time:We,location:bt,multi_select:Qt,number:uo,person:Ao,phone_number:Pe,relation:ln,rollup:Nn,select:Xn,status:pr,text:kr,title:gi,url:Pe,verification:Ti,auto_increment_id:_,button:D},[h.C.Relation]:{checkbox:fe,created_by:No,created_time:Ge,date:Ge,email:Te,file:dt,formula:mt.eQ,last_edited_by:No,last_edited_time:Ge,last_visited_time:Ge,location:Pt,multi_select:oo,number:So,person:No,phone_number:Te,relation:pn,rollup:qn,select:rr,status:xr,text:Vr,title:gi,url:Te,verification:Fi,auto_increment_id:B,button:Q},[h.C.RelationSection]:{checkbox:he,created_by:Ho,created_time:Qe,date:Qe,email:Ve,file:pt,formula:mt.CJ,last_edited_by:Ho,last_edited_time:Qe,last_visited_time:Qe,location:kt,multi_select:no,number:xo,person:Ho,phone_number:Ve,relation:yn,rollup:$n,select:ir,status:br,text:Ar,title:gi,url:Ve,verification:Ki,auto_increment_id:T,button:Y},[h.C.Mini]:{checkbox:Se,created_by:Ni,created_time:Ni,date:Ye,email:Ae,file:Ni,formula:Ni,last_edited_by:Ni,last_edited_time:Ni,last_visited_time:Ni,location:Ni,multi_select:ro,number:bo,person:Oo,phone_number:Ae,relation:hn,rollup:Ni,select:lr,status:vr,text:Or,title:gi,url:Ae,verification:Ni,auto_increment_id:Ni,button:Ni},[h.C.PropertyModule]:{checkbox:Hi,created_by:Io,created_time:Hi,date:Hi,email:Hi,file:Hi,formula:Hi,last_edited_by:Io,last_edited_time:Hi,last_visited_time:Hi,location:Hi,multi_select:Hi,number:Hi,person:Io,phone_number:Hi,relation:fn,rollup:Hi,select:Hi,status:Hi,text:Hi,title:gi,url:Hi,verification:Hi,auto_increment_id:Hi,button:Hi}};const Di=n.memo(Li)},96310:(e,t,o)=>{o.d(t,{Z:()=>n});const n=32},11977:(e,t,o)=>{o.d(t,{Z:()=>Ze});o(52262),o(24506);var n=o(67294),r=o(83355),i=o(1302),l=o(480),s=o(24405),a=o(92996),c=o(41432),u=o(99036),d=o(80951),p=o(40506),y=o(20669),m=o(72126),f=o(21202),h=o(6287),S=o(3791),x=o(70203),b=o(95371),v=o(97880),g=o(82990),w=o(63143),C=o(9291),_=o(36610),P=o(8406),k=o(57549),R=o(51365),j=o(26797),M=o(98834),B=o(19785),T=o(9953),V=o(79978),A=o(993),O=o(82530),I=o(44866),E=o(75330),F=o(10906),K=o(66890),Z=o(28020),L=o(49616),N=o(75079),H=o(19124),W=o(88804),D=o(77907),U=o(18245),z=o(58202),q=o(1018),$=o(79576),G=o(77080),Q=o(69454),Y=o(79797),X=o(27724),J=o(88280),ee=o(73420),te=o(56940),oe=o(3386),ne=o(91839),re=o(89728),ie=o(53437),le=o(64369),se=o(16972),ae=o(72589),ce=o(35229),ue=o(18145),de=o(40424),pe=o(56633),ye=o(56596),me=o(65187),fe=o(68750),he=o(38737),Se=o(5691),xe=o(74194),be=o(83197),ve=o(85893);class ge extends r.Z{constructor(){super(...arguments),this.state={inputValue:""},this.handleInputChange=e=>{const t=e.target.value;this.setState({inputValue:t}),this.props.onChange(this.parseInputChange(t))}}UNSAFE_willMount(e){super.UNSAFE_willMount(e);const{value:t,format:o,insertChar:n,intl:r}=e;n?(this.setState({inputValue:n}),this.props.onChange(this.parseInputChange(n))):this.setState({inputValue:he.uf(t,o,r)||""})}renderComponent(){const{disabled:e}=this.props;return(0,ve.jsx)(oe.Z,{debugName:"NumberPropertyValue",capture:!e,onDelete:m.yR,onSpace:m.yR,onBackspace:m.yR,onLeft:m.yR,onRight:m.yR,onUp:m.yR,onDown:m.yR,onSelectAll:m.yR,onRedo:m.yR,onUndo:m.yR,onCut:m.yR,onCopy:m.yR,onPaste:m.yR,onKeypress:m.yR,children:(0,ve.jsx)(xe.Z,{style:{...be.F,display:"block"},value:this.state.inputValue,format:xe.B.Transparent,onChange:this.handleInputChange,inputStyle:(t=this.props.isTable,{textAlign:t?"right":"left"}),focus:!e,disabled:e})});var t}parseInputChange(e){this.setState({inputValue:e});let t=(0,Se.m)(e,this.props.intl);return"percent"===this.props.format&&void 0!==t&&(t/=100),t}}ge.displayName="NumberPropertyValue";const we=(0,C.injectIntl)(ge);class Ce extends r.Z{constructor(){super(...arguments),this.state={inputValue:""},this.handleInputChange=e=>{const{onChange:t}=this.props,o=e.target.value;this.setState({inputValue:o}),t(o)}}UNSAFE_willMount(e){super.UNSAFE_willMount(e),this.setState({inputValue:e.value||""})}renderComponent(){const{disabled:e}=this.props;return(0,ve.jsx)(oe.Z,{debugName:"URLPropertyValue",capture:!e,onDelete:m.yR,onSpace:m.yR,onBackspace:m.yR,onLeft:m.yR,onRight:m.yR,onUp:m.yR,onDown:m.yR,onSelectAll:m.yR,onRedo:m.yR,onUndo:m.yR,onCut:m.yR,onCopy:m.yR,onPaste:m.yR,onKeypress:m.yR,children:(0,ve.jsx)(xe.Z,{type:this.props.inputType,style:{...be.F,display:"block"},value:this.state.inputValue,format:xe.B.Transparent,onChange:this.handleInputChange,focus:!e,disabled:e})})}}Ce.displayName="URLPropertyValue";const _e=Ce;var Pe=o(78030),ke=o(86628),Re=o(64964),je=o(16859),Me=o(68709),Be=o(24118);function Te(e,t){const o=(0,l.O7)(),r=(0,C.useIntl)(),[i,s]=(0,n.useState)(),[a,c]=(0,n.useState)(!1),d=(0,ke.VK)((()=>{const n=t&&u.qQ(t)?u.q3(t):void 0;return!(0,Be.bb)({store:e.store,schema:e.store.getSchema(),property:e.property,userId:o.currentUser.id})&&(null==n?void 0:n.auto_update_on_edit)&&!a}),[e.property,e.store,t,a,o]),p=(0,n.useCallback)((()=>{s(void 0)}),[]),y=(0,ke.VK)((()=>{var t;return null===(t=e.store)||void 0===t||null===(t=t.getFormat())||void 0===t||null===(t=t.ai_property_inference_map)||void 0===t||null===(t=t[e.property])||void 0===t?void 0:t.inference_id}),[e]),m=(0,n.useCallback)((e=>{I.submitFeedbackForAiAutofill({environment:o,inferenceId:y,feedbackType:e.type,userContent:e.userContent,shareWithNotion:e.shareWithNotion}),c(!0),Re.oV({label:r.formatMessage({id:"database.propertyValues.submitAIAutofillFeedbackThanks",defaultMessage:"Thank you for making Notion better!"})})}),[o,r,y]);return{feedbackState:i,setFeedbackState:s,handleFeedbackButtonDismiss:p,handleFeedbackButtonSubmit:m,shouldDisplayFeedbackButtons:Boolean(d)}}function Ve(e){let{autofillBlockPropertyValueFeedbackButtonsState:t}=e;window.__c={n:"AutofillBlockPropertyValueFeedbackButtons"};const o=(0,l.O7)(),r=(0,s.yK)((()=>({iconButtonStyles:{height:o.device.isMobile?24:28,width:o.device.isMobile?24:28}})),[o.device.isMobile]);return(0,ve.jsxs)(n.Fragment,{children:[(0,ve.jsx)(je.d,{type:"thumbsup",ariaLabel:"thumbs-up",onClick:()=>{t.setFeedbackState({type:"thumbsup",userContent:"",shareWithNotion:!0})},feedbackState:t.feedbackState,onDismiss:t.handleFeedbackButtonDismiss,onSubmit:t.handleFeedbackButtonSubmit,onUpdate:t.setFeedbackState,showShareDataPopup:!1,onDataShareSubmit:m.ZT,userOptIn:!1,iconButtonStyles:r.iconButtonStyles}),(0,ve.jsx)(je.d,{type:"thumbsdown",ariaLabel:"thumbs-down",onClick:()=>{t.setFeedbackState({type:"thumbsdown",userContent:"",shareWithNotion:!0})},feedbackState:t.feedbackState,onDismiss:t.handleFeedbackButtonDismiss,onSubmit:t.handleFeedbackButtonSubmit,onUpdate:t.setFeedbackState,showShareDataPopup:!1,onDataShareSubmit:m.ZT,userOptIn:!1,iconButtonStyles:r.iconButtonStyles})]})}function Ae(e){let{overlayState:t,theme:o,propertySchema:n}=e;window.__c={n:"AutofillUpdateButtonSection"};const r=(0,ke.VK)((()=>$.W.isWriting()),[]),i=(0,l.O7)(),s=Te(t,n);return i.device.isMobile||r?null:(0,ve.jsx)(Me.p,{allowSelectionWithin:!1,children:(0,ve.jsxs)("div",{style:{position:"absolute",top:-36,right:0,borderRadius:5,fontSize:14,lineHeight:1.2,display:"flex",whiteSpace:"nowrap",background:o.popoverBackground,boxShadow:o.mediumBoxShadow,zIndex:-1,padding:2},children:[(0,ve.jsx)(Oe,{overlayState:t,propertySchema:n}),s.shouldDisplayFeedbackButtons&&(0,ve.jsx)(Ve,{autofillBlockPropertyValueFeedbackButtonsState:s})]})})}function Oe(e){let{overlayState:t,propertySchema:o}=e;window.__c={n:"AutofillUpdateButton"};const n=(0,l.O7)(),r=(0,s.yK)((e=>({buttonStyle:{display:"flex",height:28},iconStyle:{height:16,width:16,fill:e.aiPurpleColor},updateTextStyle:{fontWeight:500,color:e.aiPurpleColor}})),[]);return(0,ve.jsx)(re.Z,{style:r.buttonStyle,onClick:()=>{o&&I.autofillPropertyForBlocks({environment:n,stores:[t.store],property:t.property,propertySchema:o,userEventForAnalytics:"generate_from_overlay_button",collectionContextStore:t.collectionContextStore,from:L.Sy(t.format)})},children:(0,ve.jsxs)(ee.X2,{gap:4,children:[(0,y.y)(r.iconStyle),(0,ve.jsx)("span",{style:r.updateTextStyle,children:(0,ve.jsx)(C.FormattedMessage,{defaultMessage:"Update",id:"database.propertyValues.reGenerateAiAutofill"})})]})})}function Ie(e){let{overlayState:t,propertySchema:o,showSeparator:n}=e;window.__c={n:"AutofillBlockPropertyValueOverlayFeedbackButtonsMobile"};const r=Te(t,o),i=(0,s.yK)((e=>({dot:{color:e.lightTextColor}})),[]);return r.shouldDisplayFeedbackButtons?(0,ve.jsxs)(ve.Fragment,{children:[n?(0,ve.jsx)("div",{style:i.dot,children:"•"}):null,(0,ve.jsx)(Ve,{autofillBlockPropertyValueFeedbackButtonsState:r})]}):null}const Ee={...be.F,fontWeight:g.Z.fontWeight.medium};class Fe extends r.Z{constructor(){super(...arguments),this.previousPopupProps=void 0,this.renderOverlay=()=>{const e=this.props.store.state;if(e.isOpen)return(0,ve.jsx)(oe.Z,{debugName:"BlockPropertyValueOverlay",capture:!0,onTab:e=>et(e,this.props.store,this.environment),onUntab:e=>tt(e,this.props.store,this.environment),onEnter:()=>ot(this.props.store,this.environment),onDelete:m.yR,onBackspace:m.yR,children:(0,ve.jsxs)(K.L1,{value:e.collectionContextStore,children:[this.renderAutofillUpdateButton(e),(0,ve.jsx)("div",{style:{display:"flex",flexDirection:"column",overflowY:"auto",flexGrow:1,height:"100%"},children:this.renderOverlayContent(e)})]})},`${e.store.id}${e.property}`)},this.renderTitle=(e,t)=>{const{clonedStore:o}=e;return(0,ve.jsx)(te.Z,{capture:!0,ignoreBlockSelection:!0,restoreSelection:!0,render:()=>(0,ve.jsx)("div",{style:Ee,children:(0,ve.jsx)(me.Z,{store:o.getTitleStore()||o.getPropertyStore(e.property),disableSlashCommands:!0,onEnter:()=>ot(this.props.store,this.environment),onEsc:()=>Je(this.props.store,this.environment),onTab:e=>et(e,this.props.store,this.environment),onUntab:e=>tt(e,this.props.store,this.environment),disableSelectAllBlocks:!0,disableSelectionDrag:!0,disableStyleAnnotations:!0,disableInsertedDeletedAnnotations:!0,disableShiftEnter:!0,onChange:()=>lt(e,t,this.environment,this.props.store),disabled:Ye(e,this.environment),pasteBehavior:"inline"})})})},this.aiAutofillExplanationTextIfAIProperty=e=>{var t;const o=Ue(e),n=o&&u.qQ(o)&&("text"===o.type||(0,H.KZ)())?(0,u.q3)(o):void 0;if(!(0,H.Zt)(this.environment))return!1;if($.W.isWriting())return(0,ve.jsxs)(le.Z,{isSecondaryColor:!0,style:{fontSize:12,color:this.theme.aiPurpleColor,display:"flex",alignItems:"inline",fontWeight:500,marginTop:6,marginBottom:2},isSmall:!0,isMultiline:!0,children:[(0,ve.jsx)(C.FormattedMessage,{defaultMessage:"AI is writing",id:"BlockPropertyValueOverlay.AIActionText.overlay"}),(0,ve.jsx)("div",{style:{marginLeft:4},children:(0,ve.jsx)(ne.Z,{})})]});const r=(0,H.RT)(null===(t=this.pageContext)||void 0===t?void 0:t.publicEditModeStore.state,e.store);return null!=n&&n.auto_update_on_edit?(0,ve.jsxs)("div",{style:{display:"flex",alignItems:"center",marginTop:6,marginBottom:2},children:[(0,ve.jsx)(le.Z,{isSecondaryColor:!0,style:{fontSize:12},isSmall:!0,isMultiline:!0,children:(0,ve.jsx)(C.FormattedMessage,{defaultMessage:"Auto-updated by AI",id:"BlockPropertyValueOverlay.helpText.overlay"})}),this.environment.device.isMobile&&r&&(0,ve.jsxs)("div",{style:{paddingLeft:2,display:"flex",alignItems:"center"},children:[(0,ve.jsx)("div",{style:{color:this.theme.lightTextColor},children:"•"}),(0,ve.jsx)(Ke,{overlayState:e,propertySchema:o,style:{paddingLeft:2,paddingRight:2}}),(0,ve.jsx)(Ie,{overlayState:e,propertySchema:o,showSeparator:!0})]})]}):this.environment.device.isMobile&&n&&r?(0,ve.jsx)(Ke,{overlayState:e,propertySchema:o,style:{marginTop:6,marginBottom:2}}):void 0},this.bulkAutofillButton=e=>{var t;const{store:o}=e,n=Ue(e),r=null==n?void 0:n.name;if(n&&(0,H.RT)(null===(t=this.pageContext)||void 0===t?void 0:t.publicEditModeStore.state,o)&&u.qQ(n)&&(0,u.q3)(n)){var i,l;const t=Math.max((null===(i=e.collectionsBulkActionsToolbarStore)||void 0===i?void 0:i.getNumberOfTextStoresBeingEdited())??0,X.default.state.stores.filter((e=>z.R.findBlockFromStore(e))).length);if(0===t)return;const o=(null===(l=J.subscriptionDataStoreInstance.state)||void 0===l?void 0:l.addOns)??[],n=(0,S.de)(o)||t<=5;return(0,ve.jsx)(re.Z,{style:{width:"100%",height:"auto",borderTop:`1px solid ${this.theme.regularDividerColor}`},onClick:()=>function(e,t,o){const{collectionsBulkActionsToolbarStore:n}=e;if(!n)return;if(t){let t=n.state.textStoresBeingEdited;if(0===t.length&&(t=X.default.state.stores.filter((e=>z.R.findBlockFromStore(e)))),!(0,v.Of)(t))return;const r=Ue(e);if(!r)return;I.autofillPropertyForBlocks({environment:o,stores:t,property:e.property,propertySchema:r,userEventForAnalytics:"generate_from_overlay_button",isBulkAction:!0,from:L.Sy(e.format),collectionContextStore:e.collectionContextStore})}else I.triggerAiAutofillUpsell({environment:o,from:"ai_autofill_bulk_fill"})}(e,n,this.environment),children:(0,ve.jsxs)(ee.X2,{gap:8,padding:8,alignItems:"start",children:[(0,y.y)({width:18,fill:this.theme.aiPurpleColor}),(0,ve.jsxs)(ee.sg,{gap:4,children:[(0,ve.jsx)("div",{style:{fontSize:14,whiteSpace:"normal"},children:r?(0,ve.jsx)(C.FormattedMessage,{defaultMessage:'Update "{propertyName}" with AI',id:"BlockPropertyValueOverlay.bulkAiAutofillButton.titleWithPropertyName",values:{propertyName:r}}):(0,ve.jsx)(C.FormattedMessage,{defaultMessage:"Update with AI",id:"BlockPropertyValueOverlay.bulkAiAutofillButton.title"})}),(0,ve.jsx)("div",{style:{fontSize:12,color:this.theme.mediumTextColor,whiteSpace:"normal",lineHeight:"1.4em"},children:n?(0,ve.jsx)(C.FormattedMessage,{defaultMessage:"{numPages, select, 1 {Update {numPages} page} other {Update {numPages} pages}}",id:"BlockPropertyValueOverlay.bulkAiAutofillButton.countAndDescription",values:{numPages:t}}):(0,ve.jsx)(C.FormattedMessage,{defaultMessage:"Get the AI add-on to update more than {maxItems} pages at once",id:"BlockPropertyValueOverlay.bulkAiAutofillButton.largeBulkFillUpsellMessage",values:{maxItems:5}})})]})]})})}},this.renderText=(e,t)=>{var o;const{clonedStore:n}=e,r=Ue(e);let i;return"text"===(null==r?void 0:r.type)&&null!==(o=r.ai_inference)&&void 0!==o&&o.auto_update_on_edit&&(i="Empty"),(0,ve.jsx)(te.Z,{capture:!0,ignoreBlockSelection:!0,restoreSelection:!0,render:()=>(0,ve.jsxs)(ve.Fragment,{children:[(0,ve.jsxs)("div",{style:be.F,children:[(0,ve.jsx)(me.Z,{store:n.getPropertyStore(e.property),disableSlashCommands:!0,onEnter:()=>ot(this.props.store,this.environment),onEsc:()=>Je(this.props.store,this.environment),onTab:e=>et(e,this.props.store,this.environment),onUntab:e=>tt(e,this.props.store,this.environment),disableSelectAllBlocks:!0,disableSelectionDrag:!0,onChange:()=>lt(e,t,this.environment,this.props.store),disabled:Ye(e,this.environment),pasteBehavior:"inline",placeholder:i}),this.aiAutofillExplanationTextIfAIProperty(e)]}),this.bulkAutofillButton(e)]})})},this.renderURL=(e,t)=>{const o=d.zB(He(e));let n="url";return"phone_number"===t?n="tel":"email"===t&&(n="email"),(0,ve.jsx)(_e,{value:o,inputType:n,disabled:Ye(e,this.environment),onChange:this.CLASS_COMPONENT_CONVERSION_DO_NOT_TOUCH_handleURLValueChange,onDismiss:()=>Xe(this.props.store,this.environment)})},this.renderNumber=e=>{const t=e.format===Pe.C.Table,o=d.VY(He(e)),n=Ue(e);if(n&&"number"===n.type)return(0,ve.jsx)(we,{value:o,isTable:t,format:n.number_format||"number",disabled:Ye(e,this.environment),insertChar:e.insertChar,onChange:this.CLASS_COMPONENT_CONVERSION_DO_NOT_TOUCH_handleNumberValueChange})},this.renderSelect=e=>{const t=Le(e),o=Ne(e),n=Ue(e);if(!o||!n||"select"!==n.type)return;const r=n.options||[],i=d.Sj(He(e),r);return(0,ve.jsx)(de.Z,{allowMultiple:!1,value:i?[i]:[],property:e.property,collectionId:o.id,schema:t,disabled:Ye(e,this.environment),canConfigureCollection:qe(e),onChange:this.CLASS_COMPONENT_CONVERSION_DO_NOT_TOUCH_handleSelectPropertyMenuUpdate,analyticsFrom:We(e),insertChar:e.insertChar,onAccept:e=>nt(e,this.props.store,this.environment),onDismiss:()=>Xe(this.props.store,this.environment),blockStore:e.store,autofillExplanation:this.renderAutofillExplanation(e),bulkAutofillButton:this.bulkAutofillButton(e)})},this.renderAutofillExplanation=e=>{const t=this.aiAutofillExplanationTextIfAIProperty(e);return t?(0,ve.jsx)("div",{style:{paddingLeft:9,paddingBottom:6},children:t}):null},this.renderMultiSelect=e=>{const t=Le(e),o=Ne(e),n=Ue(e);if(!o||!n||"multi_select"!==n.type)return;const r=n.options||[],i=d.uP(He(e),r);return(0,ve.jsx)(de.Z,{allowMultiple:!0,value:i,property:e.property,collectionId:o.id,schema:t,disabled:Ye(e,this.environment),canConfigureCollection:qe(e),onChange:this.CLASS_COMPONENT_CONVERSION_DO_NOT_TOUCH_handleSelectPropertyMenuUpdate,analyticsFrom:We(e),insertChar:e.insertChar,onAccept:e=>nt(e,this.props.store,this.environment),onDismiss:()=>Xe(this.props.store,this.environment),blockStore:e.store,autofillExplanation:this.renderAutofillExplanation(e),bulkAutofillButton:this.bulkAutofillButton(e)})},this.renderStatus=e=>{const t=Ue(e);if(!t||"status"!==t.type)return;const o={initialValue:d.ZG(He(e),t),property:e.property,propertySchema:t,disabled:Ye(e,this.environment),onDismiss:()=>Xe(this.props.store,this.environment),onChange:(e,o)=>{e?it({value:[e]},this.environment,this.props.store):t.defaultOption?it({value:[t.defaultOption]},this.environment,this.props.store):o?function(e,t,o){const n=o.state;if(!n.isOpen)return;O.createAndCommit({userAction:"BlockPropertyValueOverlay.handleStatusGroupPropertyMenuUpdate",environment:t,perform:r=>{if(e.groupType){for(const t of De(n)){var i;const o=t.getAssociatedCollectionStore();if(!o)continue;const l=o.getSchema(),s=o.getMappedProperty(n.property),a=l[s];if("status"!==(null==a?void 0:a.type))continue;const c=(a.groups??[]).find((t=>{var o;return t.name.toLowerCase()===(null===(o=e.groupType)||void 0===o?void 0:o.toLowerCase())})),u=null==c||null===(i=c.optionIds)||void 0===i?void 0:i.at(0);if(!u)continue;const d=(a.options??[]).find((e=>e.id===u));if(!d)continue;const p=t.getPropertyStore(s);T.sO({store:p,value:[[d.value]],transaction:r})}rt(n,t,o)}}})}({groupType:o},this.environment,this.props.store):it({value:[]},this.environment,this.props.store)},onAccept:e=>nt(e,this.props.store,this.environment),blockPropertyValueOverlayStore:this.props.store};return e.property===a.b0.StatusV2?(0,ve.jsx)(pe.G,{...o}):(0,ve.jsx)(ye.x,{...o})},this.renderPerson=e=>{const t=Le(e),o=Ue(e);if(!o||"person"!==o.type)return;const n=e.store.isTemplate(),r=d.BW({value:He(e),isTemplatePage:n,propertySchema:o,blockCreatorPointer:e.store.getCreatedByPointer()});return(0,ve.jsx)(ce.Z,{value:r,property:e.property,schema:t,disabled:Ye(e,this.environment),onChange:this.CLASS_COMPONENT_CONVERSION_DO_NOT_TOUCH_handlePersonPropertyMenuUpdate,insertChar:e.insertChar,onDismiss:()=>Xe(this.props.store,this.environment),parentStore:e.store,isTemplatePage:n})},this.renderRelation=e=>{const t=Le(e),o=d.rq(He(e)),n=Ne(e);if(n){return G.default.checkGate("relation_menu_refactor")?(0,ve.jsx)(q.ev,{value:o,property:e.property,collectionStore:n,schema:t,disabled:Ye(e,this.environment),canConfigureCollection:qe(e),onChange:this.CLASS_COMPONENT_CONVERSION_DO_NOT_TOUCH_handleRelationPropertyMenuUpdate,analyticsFrom:We(e),insertChar:e.insertChar,onDismiss:()=>Xe(this.props.store,this.environment),blockStore:e.store,blockPropertyValueOverlayStore:this.props.store,overlayMode:e.mode}):(0,ve.jsx)(q.pG,{value:o,property:e.property,collectionStore:n,schema:t,disabled:Ye(e,this.environment),canConfigureCollection:qe(e),onChange:this.CLASS_COMPONENT_CONVERSION_DO_NOT_TOUCH_handleRelationPropertyMenuUpdate,analyticsFrom:We(e),insertChar:e.insertChar,onDismiss:()=>Xe(this.props.store,this.environment),blockStore:e.store,blockPropertyValueOverlayStore:this.props.store,overlayMode:e.mode})}},this.renderRollup=e=>{const t=Le(e);return(0,ve.jsx)(ue.Z,{context:ue.t.BlockPropertyOverlay,property:e.property,schema:t,disabled:Ye(e,this.environment)||!qe(e)||this.isTypedPropertyStore.state,onChange:e=>function(e,t,o){const n=t.state;if(!n.isOpen)return;O.createAndCommit({userAction:"BlockPropertyValueOverlay.handleRollupPropertyMenuUpdate",environment:o,perform:r=>{!function(e,t,o,n){const r=o.state;if(!r.isOpen)return;if(r.isOpen){const o=Ne(r);o&&E.xO({environment:n,collectionStore:o,update:e,transaction:t})}}({[n.property]:e.propertySchema},r,t,o)}})}(e,this.props.store,this.environment),parentStore:e.store,analyticsFrom:We(e),onDismiss:()=>Xe(this.props.store,this.environment)})},this.renderDate=e=>{const t=Ue(e);if(!t||"date"!==t.type)return;const o=d.Gl(He(e));return(0,ve.jsx)(D.DependencyConsumer,{dependency:D.deps.menus,children:n=>{let{DatePropertyMenu:r}=n;return(0,ve.jsx)(r,{firstDayOfWeek:Z.AK.state,value:o,onChangeValue:this.CLASS_COMPONENT_CONVERSION_DO_NOT_TOUCH_handleDatePropertyValueChange,dateFormat:t.date_format,onChangeDateFormat:e=>function(e,t,o){const n=t.state;if(!n.isOpen)return;const r=Ue(n);if(!r||"date"!==r.type)return;const i=Le(n),l={...r,date_format:e},s={...i,[n.property]:l};if(O.createAndCommit({userAction:"BlockPropertyValueOverlay.handleDatePropertyDateFormatChange",environment:o,perform:e=>{Qe(s,e,t,o)}}),l){var a;We(n),_.$q(o,{property_type:l.type,action:"date_change_format",from:We(n),collection_id:null===(a=Ne(n))||void 0===a?void 0:a.id})}}(e,this.props.store,this.environment),timeFormat:t.time_format,disabled:Ye(e,this.environment),canConfigureCollection:qe(e),onChangeTimeFormat:e=>function(e,t,o){const n=t.state;if(!n.isOpen)return;const r=Ue(n);if(!r||"date"!==r.type)return;const i=Le(n),l={...r,time_format:e},s={...i,[n.property]:l};if(O.createAndCommit({userAction:"BlockPropertyValueOverlay.handleDatePropertyTimeFormatChange",environment:o,perform:e=>{Qe(s,e,t,o)}}),l){var a;We(n),_.$q(o,{property_type:l.type,action:"date_change_format",from:We(n),collection_id:null===(a=Ne(n))||void 0===a?void 0:a.id})}}(e,this.props.store,this.environment),onDismiss:()=>Xe(this.props.store,this.environment),shouldShowReminder:!0,isTemplatePage:e.store.isTemplate()})}})},this.renderFile=e=>{const t=Le(e),o=d.g(He(e));return(0,ve.jsx)(se.Z,{store:e.store,value:o,property:e.property,schema:t,onDismiss:()=>Xe(this.props.store,this.environment),uploadFiles:e.uploadFiles,disabled:Ye(e,this.environment),onChange:t=>{O.createAndCommit({userAction:"BlockPropertyValueOverlay.renderFile",environment:this.environment,perform:o=>{if(w.z4(t.schema)||Qe(t.schema,o,this.props.store,this.environment),!w.z4(t.value)){const n=d.CC(t.value);for(const t of ze(e))T.sO({store:t,value:n,transaction:o});rt(e,this.environment,this.props.store)}}})}})},this.renderFormula=e=>{const{store:t}=e,o=t.getModel(),n=Ne(e),r=Ue(e),i=Ye(e,this.environment)||!qe(e)||this.isTypedPropertyStore.state;if(o&&n&&r&&"formula"===r.type)return(0,ve.jsx)(D.DependencyConsumer,{dependency:D.deps.formulas,children:o=>(0,ve.jsx)(ae.Z,{handleClose:()=>Xe(this.props.store,this.environment),property:e.property,getRecordModel:t.getRecordModel,propertySchema:r,collectionStore:n,handleSave:e=>function(e,t){const{newValue:o,newType:n,propertySchema:r,property:i,collectionStore:l}=e,s=o?{...r,formula2:{code:o,result_type:n},version:"v2"}:{...r,formula2:void 0,version:"v2"};O.createAndCommit({userAction:"CollectionSettingsFormulaOptions.handleFormulaChange",environment:t,perform:e=>{E.xO({environment:t,collectionStore:l,update:{[i]:s},transaction:e})}})}(e,this.environment),formulas:o,disabled:i,blockStore:t,analyticsFrom:We(e)})})},this.renderVerificationOverlay=e=>{const t=Ue(e);if("verification"!==(null==t?void 0:t.type))return;const o=d._w(He(e));return(0,ve.jsx)(fe.O,{propertyName:t.name,onChange:t=>{O.createAndCommit({userAction:"BlockPropertyValueOverlay.verification",environment:this.environment,perform:o=>{const n=d.Tp(t.value);for(const t of ze(e))T.sO({store:t,value:n,transaction:o});rt(e,this.environment,this.props.store)}}),Xe(this.props.store,this.environment)},verificationValue:o,getRecordModel:e.store.getRecordModel,blockId:e.store.id,onClose:()=>Xe(this.props.store,this.environment)})},this.isTypedPropertyStore=this.createComputedStore((()=>{var e;const t=this.props.store.state;if(!t.isOpen)return!1;const o=null===(e=t.collectionContextStore)||void 0===e?void 0:e.collectionStore();if(!o)return!1;const n=t.property;return Boolean(o.getDatabaseType()&&o.isTypedProperty(n))})),this.renderFunctions={title:this.renderTitle,text:this.renderText,relation:this.renderRelation,rollup:this.renderRollup,select:this.renderSelect,multi_select:this.renderMultiSelect,status:this.renderStatus,person:this.renderPerson,number:this.renderNumber,date:this.renderDate,file:this.renderFile,url:this.renderURL,phone_number:this.renderURL,email:this.renderURL,formula:this.renderFormula,checkbox:void 0,created_by:void 0,created_time:void 0,last_edited_by:void 0,last_edited_time:void 0,last_visited_time:void 0,button:void 0,auto_increment_id:void 0,location:void 0,verification:this.renderVerificationOverlay},this.CLASS_COMPONENT_CONVERSION_DO_NOT_TOUCH_handleSelectPropertyMenuUpdate=e=>it(e,this.environment,this.props.store),this.CLASS_COMPONENT_CONVERSION_DO_NOT_TOUCH_handlePersonPropertyMenuUpdate=e=>function(e,t,o){const n=o.state;if(!n.isOpen)return;O.createAndCommit({userAction:"BlockPropertyValueOverlay.handlePersonPropertyMenuUpdate",environment:t,perform:r=>{if(w.z4(e.schema)||Qe(e.schema,r,o,t),!w.z4(e.value)){const i=d.BY(e.value);for(const e of ze(n))T.sO({store:e,value:i,transaction:r});rt(n,t,o)}}})}(e,this.environment,this.props.store),this.CLASS_COMPONENT_CONVERSION_DO_NOT_TOUCH_handleRelationPropertyMenuUpdate=e=>async function(e,t,o){const n=o.state;if(!n.isOpen)return;const r=Ue(n);if(!r||"relation"!==r.type)return;const l="relation"===r.type&&u.F0(r),s=l&&new Y.NW(t,{table:h.v,id:l});s&&await s.load();const a=Le(n);O.createAndCommit({userAction:"BlockPropertyValueOverlay.handleRelationPropertyMenuUpdate",environment:t,perform:r=>{if(e.newPage&&l&&s){const o=x.TPx(e.newPage.name),i=s.getRootPagePointer(),l=i??s.pointer,a={id:e.newPage.id,version:0,type:c.Ti.page,parent_id:l.id,parent_table:l.table,properties:{title:o},alive:!0,collection_id:void 0,space_id:e.newPage.spaceId},u=T.ae({environment:t,table:f.iU,value:a,inMemoryRecordCache:n.store.inMemoryRecordCache,transaction:r});if(i){const e=new Y.G(t,{table:i.table,id:i.id}),o=new Y.G(t,{table:f.iU,id:a.id});B.jG({parentStore:e,childStore:o,transaction:r})}const d=s.getDefaultTemplatePageStore();d&&M.ob({title:{text:o},environment:t,store:Y.G.createChildStore(s,u.pointer),templateStore:d,isKeyboard:!1,isCreateIn:!1,transaction:r,from:"relation_property_menu_update"})}if(e.value){for(const o of De(n))V.tG({environment:t,store:o,pointers:e.value,propertyId:n.property,transaction:r});rt(n,t,o)}if(e.rollupPropertyId&&e.rollupPropertySchema){Qe({...a,[e.rollupPropertyId]:e.rollupPropertySchema},r,o,t)}}}),e.rollupPropertyId&&(await i.default.afterNextFlush(),R.mm({environment:t,blockPropertyValueOverlayStore:o,openProperty:e.rollupPropertyId}))}(e,this.environment,this.props.store),this.CLASS_COMPONENT_CONVERSION_DO_NOT_TOUCH_handleDatePropertyValueChange=e=>function(e,t,o){const n=o.state;if(!n.isOpen)return;O.createAndCommit({userAction:"BlockPropertyValueOverlay.handleDatePropertyValueChange",environment:t,perform:r=>{for(const i of De(n))!e||p.U3(e)?(j.xD({environment:t,store:i,type:"dateValue",dateValue:e,propertyId:n.property,transaction:r}),e||Xe(o,t)):(T.sW({store:i.getPropertiesStore(),transaction:r,data:{[n.property]:[x.YCD(x.WBu({type:e}))]}}),Xe(o,t)),rt(n,t,o)}})}(e,this.environment,this.props.store),this.CLASS_COMPONENT_CONVERSION_DO_NOT_TOUCH_handleNumberValueChange=e=>function(e,t,o){const n=o.state;if(!n.isOpen)return;const r=d.eP(e);O.createAndCommit({userAction:"BlockPropertyValueOverlay.handleNumberValueChange",environment:t,perform:e=>{for(const t of ze(n))T.sO({store:t,value:r,transaction:e})}}),rt(n,t,o)}(e,this.environment,this.props.store),this.CLASS_COMPONENT_CONVERSION_DO_NOT_TOUCH_handleURLValueChange=e=>function(e,t,o){const n=o.state;if(!n.isOpen)return;const r=d.iD(e);O.createAndCommit({userAction:"BlockPropertyValueOverlay.handleURLValueChange",environment:t,perform:e=>{for(const t of ze(n))T.sO({store:t,value:r,transaction:e})}}),rt(n,t,o),k.bO(t,{pastedText:e,source:"url_property"})}(e,this.environment,this.props.store)}UNSAFE_willMount(e){super.UNSAFE_willMount(e),Ge({isFirstRender:!0},this.props.store,this.environment)}UNSAFE_willUpdate(e){super.UNSAFE_willUpdate(e),Ge({isFirstRender:!1},this.props.store,this.environment)}renderComponent(){const{device:e}=this.environment,t=this.props.store.state;let o,n,r;if(t.isOpen){const s=t.format===Pe.C.Page,a=Ue(t),c=a&&a.type,d=t.store.canEdit();let p=t.rect.top,y=t.rect.left,f=t.rect.width,h=t.rect.height;if(s?(y-=1,f+=1):(p-=1,y-=1,f+=1,h+=2),"number"===c)n={width:f};else if("date"===c)p+=h-1,n={};else if("relation"===c){const e=q.NW;n={width:Math.max(e,f),minHeight:d?65:void 0,overflow:"hidden"}}else if("person"===c)n={width:Math.max(240,f),minHeight:d?100:void 0};else if("formula"===c)p+=h-1,n={borderRadius:12};else if("select"===c||"multi_select"===c)n={width:Math.max(300,f),overflow:"visible"};else if("rollup"===c)p+=h-1,n={};else if("text"!==c&&"title"!==c||!e.isMobile)if("file"===c)n={minWidth:Math.max(240,f)};else if("verification"===c)n={width:m.uZ(f,265,365)};else{const e=24+(this.shouldShowAutofillUpdateButton(t)?28:0);n={width:Math.max(240,f),minHeight:Math.min(h,window.innerHeight-e),maxHeight:window.innerHeight-e,overflow:"visible",display:"flex",flexDirection:"column"},"status"===c&&L.aJ({store:t.store,additionalStores:t.additionalStores,collectionContextStore:t.collectionContextStore})&&(p+=h-1)}else{const e=Q.Z.estimatedNativeWebBottomOverlap()+24;r={overflowY:"auto",WebkitOverflowScrolling:"touch",width:Math.max(240,f),maxHeight:`calc(100vh - ${e}px)`}}const S=t.collectionContextStore;if(S){var i,l;const e=S.subitemTreeStore.state,o=(0,b.DY)(e.children,(e=>e.value.store===t.store)),r=null==o?void 0:o.length,s=null===(i=S.formatStore())||void 0===i||null===(i=i.getFormat())||void 0===i||null===(i=i.table_properties)||void 0===i?void 0:i.filter((e=>e.visible)),a=s&&(null===(l=s[0])||void 0===l?void 0:l.property)===t.property;r&&a&&(n={...n,...c&&u.Yl(c)&&{width:Math.max(90,f)}})}o=new DOMRect(y,p,f,0)}if(t.isOpen||!this.previousPopupProps){const i=function(e,t){const{device:o}=t;if(o.isMobile){const t=e.state;if(!t.isOpen)return ie.kQ.SlideUp;const o=Ue(t);return o?be.m[o.type]:ie.kQ.SlideUp}return ie.kQ.Popup}(this.props.store,this.environment),l=!e.isMobile||i===ie.ZP.PopupType.Popup,s={key:$e(this.props.store),popupType:i,open:t.isOpen,originRect:o,style:e.isMobile?{width:n?n.width:void 0,...r}:n,alignmentToOrigin:ie.ZP.Alignment.Start,placementToOrigin:ie.ZP.Placement.Bottom,preventScaleTransition:l,preventOpacityTransition:l,render:this.renderOverlay,onDismiss:()=>{return e=this.props.store,t=this.environment,void R.fG({environment:t,blockPropertyValueOverlayStore:e});var e,t}};return this.previousPopupProps=s,(0,ve.jsx)(ie.ZP,{...s})}{const e={...this.previousPopupProps,open:!1};return(0,ve.jsx)(ie.ZP,{...e})}}shouldShowAutofillUpdateButton(e){var t;const{store:o}=e,n=Ue(e);return n&&(0,H.RT)(null===(t=this.pageContext)||void 0===t?void 0:t.publicEditModeStore.state,o)&&u.qQ(n)&&u.q3(n)&&("text"===n.type||(0,H.KZ)())&&!e.collectionsBulkActionsToolbarStore}renderAutofillUpdateButton(e){if(this.shouldShowAutofillUpdateButton(e))return(0,ve.jsx)(Ae,{theme:this.theme,propertySchema:Ue(e),overlayState:e})}renderOverlayContent(e){const t=Ue(e);if(!t)return;const o=this.renderFunctions[t.type];return o?o(e,t.type):void 0}}function Ke(e){let{overlayState:t,propertySchema:o,style:n}=e;window.__c={n:"AutofillUpdateMobileLink"};const r=(0,l.O7)(),i=(0,s.yK)((e=>({linkStyle:{color:e.aiPurpleColor,fontSize:12,...n}})),[n]);return(0,ve.jsx)("div",{style:i.linkStyle,onClick:()=>{o&&I.autofillPropertyForBlocks({environment:r,stores:[t.store],property:t.property,propertySchema:o,userEventForAnalytics:"generate_from_overlay_button",collectionContextStore:t.collectionContextStore,from:L.Sy(t.format)})},children:(0,ve.jsx)(C.FormattedMessage,{defaultMessage:"Update",id:"database.propertyValues.reGenerateAiAutofill"})})}Fe.displayName="BlockPropertyValueOverlay";const Ze=Fe;function Le(e){const{store:t,additionalStores:o,collectionContextStore:n}=e;return n&&L.aJ({store:t,additionalStores:o,collectionContextStore:n})?n.normalizedSchemaStore.state:t.getSchema()||{}}function Ne(e){if(!L.aJ({store:e.store,additionalStores:e.additionalStores,collectionContextStore:e.collectionContextStore}))return e.store.getAssociatedCollectionStore()}function He(e){return e.store.getPropertyValue(e.property)}function We(e){return L.Sy(e.format)}function De(e){return[e.store,...e.additionalStores]}function Ue(e){const t=Ne(e),o=t?t.getMappedProperty(e.property):e.property;return Le(e)[o]}function ze(e){return De(e).map((t=>{const o=t.getAssociatedCollectionStore(),n=o?o.getMappedProperty(e.property):e.property;return t.getPropertyStore(n)}))}function qe(e){const t=Ne(e),o=null==t?void 0:t.getParentBlockStore();return F.eD({collectionStore:t,collectionViewBlockStore:o,checkNavigableAncestorLocked:!1})}function $e(e){const t=e.state;if(!t.isOpen)return"ignore";const o=Ue(t);return o?o.type:"ignore"}function Ge(e,t,o){let{isFirstRender:n}=e;const r=t.state;if(!r.isOpen||!r.collectionContextStore)return;const i=U.default.mark("collections.block_property_value_overlay_render");U.default.measureAfterNextFlush(i,{environment:o,getData:()=>{var e;return{...N.vS(r.collectionContextStore),is_first_render:n,property_type:null===(e=Ue(r))||void 0===e?void 0:e.type,from:L.Sy(r.format)}}})}function Qe(e,t,o,n){const r=o.state;if(r.isOpen&&r.isOpen){const o=Ne(r);o&&E.Rm({environment:n,collectionStore:o,update:{schema:e},transaction:t})}}function Ye(e,t){const o=Ue(e),n=o&&u.qQ(o)&&("text"===o.type||(0,H.KZ)())&&(0,u.q3)(o);return!!(n&&n.auto_update_on_edit&&(0,H.Zt)(t))||(e.readOnly||(0,W.N)(t,e.store)||d.wl(e.property))}function Xe(e,t){R.xv({environment:t,blockPropertyValueOverlayStore:e})}function Je(e,t){R.i2({environment:t,blockPropertyValueOverlayStore:e})}function et(e,t,o){e.preventDefault(),R.$o({environment:o,blockPropertyValueOverlayStore:t})}function tt(e,t,o){e.preventDefault(),R.RX({environment:o,blockPropertyValueOverlayStore:t})}function ot(e,t){R.gT({environment:t,blockPropertyValueOverlayStore:e})}function nt(e,t,o){const n=t.state;if(!n.isOpen)return;const r=Ue(n);!r||"select"!==r.type&&"status"!==r.type||i.default.afterNextFlush((()=>{e?R.gT({environment:o,blockPropertyValueOverlayStore:t}):R.i2({environment:o,blockPropertyValueOverlayStore:t})}))}function rt(e,t,o){const n=e.store.getType(),r=e.store.getAssociatedCollectionId(),i=Ue(e),{collectionContextStore:l}=e;if(n&&i&&l){const n=We(e);P.rv({environment:t,collectionContextStore:l,block_id:e.store.id,property:e.property,property_type:i.type,from:n,collection_id:r,isFromBulkActionsToolbar:L.VM(o)})}}function it(e,t,o){const n=o.state;n.isOpen&&O.createAndCommit({userAction:"BlockPropertyValueOverlay.handleSelectPropertyMenuUpdate",environment:t,perform:r=>{if(w.z4(e.operations)||function(e,t,o,n){const r=o.state;if(r.isOpen&&r.isOpen){const o=Ne(r);if(o){const r=o.getSchema();for(const n of e)O.applyOperation({store:(0,Y.Kv)(o,n.pointer),operation:n,transaction:t});const i=o.getSchema();E.C_({environment:n,collectionStore:o,oldSchema:r,newSchema:i,transaction:t})}}}(e.operations,r,o,t),!w.z4(e.value)){const i=d.zq(e.value);for(const e of ze(n))T.sO({store:e,value:i,transaction:r});rt(n,t,o)}}})}function lt(e,t,o,n){!function(e,t,o){const n=U.default.mark("collections.property_overlay_typing_lag");U.default.measureAfterNextFlush(n,{environment:o,getData:()=>({...N.vS(e.collectionContextStore),property_type:t,from:L.Sy(e.format)})})}(e,t,o);const{store:r,property:i,additionalStores:l}=e,s=r.getNormalizedPropertyStore(i).getValue();O.createAndCommit({userAction:"BlockPropertyValueOverlay.handleTextChange",environment:o,perform:e=>{for(const t of l)A.sO({environment:o,store:t.getNormalizedPropertyStore(i),value:s,transaction:e})}}),rt(e,o,n)}},83197:(e,t,o)=>{o.d(t,{F:()=>i,m:()=>r});var n=o(53437);const r={title:n.kQ.Popup,text:n.kQ.Popup,number:n.kQ.Popup,url:n.kQ.Popup,phone_number:n.kQ.Popup,email:n.kQ.Popup,relation:n.kQ.SlideUp,rollup:n.kQ.SlideUp,select:n.kQ.SlideUp,multi_select:n.kQ.SlideUp,status:n.kQ.SlideUp,person:n.kQ.SlideUp,date:n.kQ.SlideUp,file:n.kQ.SlideUp,formula:n.kQ.SlideUp,checkbox:n.kQ.SlideUp,created_by:n.kQ.SlideUp,created_time:n.kQ.SlideUp,last_edited_by:n.kQ.SlideUp,last_edited_time:n.kQ.SlideUp,last_visited_time:n.kQ.SlideUp,button:n.kQ.SlideUp,auto_increment_id:n.kQ.Popup,location:n.kQ.Popup,verification:n.kQ.SlideUp},i=Object.freeze({paddingLeft:9,paddingRight:9,paddingTop:6,paddingBottom:6,fontSize:14,minHeight:34,display:"flex",height:"100%",flexDirection:"column",justifyContent:"space-between",flexGrow:1})},77866:(e,t,o)=>{o.d(t,{T$:()=>y,q8:()=>m,s3:()=>f,zX:()=>h});var n=o(67294),r=o(86628),i=o(24405),l=o(10070),s=o(12396),a=o(9291),c=o(8606),u=o(77722),d=o(85893);const p="20px";function y(){return(0,d.jsx)(u.Y,{fontColor:"light",style:{lineHeight:p},children:(0,d.jsx)(a.FormattedMessage,{defaultMessage:"Empty",id:"database.pageProperty.emptyTitle"})})}function m(){return null}function f(){window.__c={n:"QuickEditEmptyPropertyText"};const e=(0,i.Fg)(),{store:t,property:o,collectionContextStore:p}=(0,n.useContext)(c.O),y=(0,r.VK)((()=>{const e=null==p?void 0:p.normalizedSchemaStore.state,n=null==t?void 0:t.getAssociatedCollectionStore();if(!e||!n||!o)return;return e[l.aQ.deriveTypeUri(o,n.getPropertyMapping())??o]}),[p,o,t]),m=(0,i.yK)((()=>({textContainer:{display:"inline-flex",alignItems:"center"},propertyIcon:{marginRight:6}})),[]);return y?(0,d.jsxs)(u.Y,{fontColor:"light",style:m.textContainer,children:[(0,d.jsx)(s.ZP,{type:y.type,icon:y.icon,size:14,theme:e,style:m.propertyIcon}),(0,d.jsx)(a.FormattedMessage,{defaultMessage:"Add {propertyName}",id:"database.boardProperty.fillProperty",values:{propertyName:y.name}})]}):null}function h(){window.__c={n:"MiniEmptyPropertyText"};const e=(0,i.Fg)(),{propertySchema:t,baseStyles:o}=(0,n.useContext)(c.O),r=(0,i.yK)((e=>({container:{...null==o?void 0:o.textStyle,display:"inline-flex",alignItems:"center",overflow:"hidden",color:e.lightTextColor},text:{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},icon:{marginRight:6}})),[o]);return t?(0,d.jsxs)("div",{style:r.container,children:[(0,d.jsx)(s.ZP,{type:t.type,icon:t.icon,size:14,theme:e,style:r.icon}),(0,d.jsx)("div",{style:r.text,children:t.name})]}):null}},30752:(e,t,o)=>{o.d(t,{$I:()=>q,CJ:()=>D,eQ:()=>W,lE:()=>F,mm:()=>Z,n8:()=>O,p5:()=>K,tD:()=>N,tT:()=>z,uS:()=>H,wC:()=>E,yJ:()=>L});o(21703);var n=o(67294),r=o(480),i=o(86628),l=o(24405),s=o(14577),a=o(35011),c=o(40506),u=o(7057),d=o(72158),p=o(84682),y=o(42875),m=o(72126),f=o(82883),h=o(149),S=o(97880),x=o(9291),b=o(33929),v=o(73807),g=o(77907),w=o(39694),C=o(65473),_=o(8606),P=o(78030),k=o(24118),R=o(53876),j=o(19629),M=o(77866),B=o(85893);const T=n.memo(n.forwardRef((function(e,t){var o,r;const{store:c,property:u,EmptyComponent:m,collectionStore:f,onContextMenu:S,editButtonClickProps:b,checkboxButtonStyle:w,textButtonStyle:P,quickActionButtons:k,checkboxShowLabel:R}=e,{baseStyles:M,propertySchema:T,format:A}=(0,n.useContext)(_.O),O=T,I=(0,i.VK)((()=>"v2"===(null==O?void 0:O.version)),[null==O?void 0:O.version])?null==O||null===(o=O.formula2)||void 0===o?void 0:o.result_type.type:null==O||null===(r=O.formula)||void 0===r?void 0:r.result_type,E=!0===e.numberRightAlign&&"number"===(0,a.r9)(O),F=function(e){const{store:t,collectionStore:o,property:r,formulas:l,checkboxShowLabel:c,numberRightAlign:u}=e,m=(0,x.useIntl)(),f=(0,i.VK)((()=>o.getSchema()),[o]),{propertySchema:S}=(0,n.useContext)(_.O),b=S,g=(0,v._)(),w=(0,i.VK)((()=>{var e;const n=t.getModel(),i=o.getModel();if(!i)return;const c=i.getNormalizedSchema()[r],u=null==c||null===(e=c.formula2)||void 0===e?void 0:e.code;if(!(n&&l&&i&&u))return;const p=(0,a.cO)(n,i,r);if(p)return p;const f=new s.Z((()=>{const e=(0,a.NM)({block:n,property:r,formulaCode:u,getRecordModel:t.getRecordModel,intl:m,userTimeZone:(0,y.r)(),depth:0,visitedProperties:new Set,formulaTimeoutTimestampMs:Date.now()+g,resultCache:new Map});return!e||h.x.isFail(e)?{error:{type:d.FY.UnexpectedError,error:new Error("Something went wrong in formula evaluation.")}}:{value:e.value}}),{debugName:`${Math.random()}`});return(0,a.HU)(n,i,r,(()=>f.getState())),f.getState()}),[o,l,m,r,t,g]),C=(0,i.VK)((()=>{const e=w;return!e||h.x.isFail(e)?{type:"undefined"}:e.value}),[w]),P=null==b?void 0:b.formula,k=(0,i.VK)((()=>{if("v2"===(null==b?void 0:b.version)){var e;if(void 0===C)return[[],"formula"];const o=q(C,t.getRecordModel,(0,y.r)());return[o,(null===(e=o[0])||void 0===e?void 0:e.type)??"text"]}if(!t.isDefined())return[[],"formula"];return[z((0,p.AH)({property:r,schema:f,block:t.getModel(),getRecordModel:t.getRecordModel,collectionRequestContext:{userId:void 0,userTimeZone:(0,y.r)(),depth:0,intl:m,resultCache:new Map,visitedProperties:new Set,formulaTimeoutTimestampMs:Date.now()+g}})),(null==P?void 0:P.result_type)??"text"]}),[null==P?void 0:P.result_type,C,null==b?void 0:b.version,m,r,f,t,g]);return(0,i.VK)((()=>{const[e,o]=k;if(0===e.length)return null;const n=c&&"checkbox"===(0,a.mm)(b)&&1===e.length?null==b?void 0:b.name:void 0,r=!!b&&(0,j.vQ)(o,b);return b&&(0,B.jsx)(j.E1,{propertyType:o,rootPropertySchema:b,numberRightAlign:u,children:e.map(((o,i)=>(0,B.jsx)(j.gZ,{token:o,targetPropertySchema:b,blockStore:t,checkboxPropertyLabel:n,withComma:r&&i<e.length-1,numberRightAlign:u},`${o.id}-${i}`)))})}),[c,b,k,u,t])}({store:c,collectionStore:f,property:u,numberRightAlign:E,checkboxShowLabel:R,formulas:(0,g.useDependency)(g.deps.formulas)}),K=(0,l.yK)((e=>({buttonStyle:{...M.buttonStyle,..."checkbox"===I?w:{},..."number"===I||"date"===I||"text"===I?P:{}},buttonPressedStyle:M.buttonPressedStyle??{},buttonHoveredStyle:M.buttonHoveredStyle??{}})),[M.buttonHoveredStyle,M.buttonPressedStyle,M.buttonStyle,w,I,P]),Z=null===F;return Z&&void 0===m?null:(0,B.jsx)(C.Z,{ref:t,onContextMenu:S,editButtonClickProps:b,style:K.buttonStyle,pressedStyle:K.buttonPressedStyle,hoveredStyle:K.buttonHoveredStyle,quickActionButtons:k?(0,B.jsx)(V,{buttons:k,store:c,collectionStore:f,property:u,format:A,isEmpty:Z}):void 0,quickActionButtonsAlign:E?"left":void 0,children:Z?m?(0,B.jsx)(m,{}):null:F})})));function V(e){window.__c={n:"FormulaQuickActionButtons"};const{buttons:t,store:o,collectionStore:n,property:r,format:l,isEmpty:s}=e,a=(0,i.VK)((()=>n.getSchema()),[n]);if(s)return null;const c=t.map((e=>{if("copy"===e)return(0,B.jsx)(w.Z,{store:o,schema:a,property:r,format:l},"copy");(0,S.t1)(e)})).filter(S.K0);return c?(0,B.jsx)(B.Fragment,{children:c}):null}const A=["copy"],O=n.forwardRef((function(e,t){window.__c={n:"TableFormulaProperty"};const{isMobile:o}=(0,r.Fy)(),n=U(e,t,(0,l.yK)((()=>({checkboxButtonStyle:{padding:R.sf[P.C.Table].checkbox},textButtonStyle:{padding:R.sf[P.C.Table].text}})),[]));return(0,B.jsx)(T,{...n,numberRightAlign:!0,EmptyComponent:M.q8,quickActionButtons:o?void 0:A})})),I=["copy"],E=n.forwardRef((function(e,t){window.__c={n:"PageFormulaProperty"};const o=U(e,t,(0,l.yK)((()=>({checkboxButtonStyle:{padding:R.sf[P.C.Page].checkbox},textButtonStyle:{padding:R.sf[P.C.Page].text}})),[]));return(0,B.jsx)(T,{...o,EmptyComponent:M.T$,quickActionButtons:I})})),F=n.forwardRef((function(e,t){window.__c={n:"CompactFormulaProperty"};const o=U(e,t,(0,l.yK)((()=>({checkboxButtonStyle:{padding:R.sf[P.C.CompactPage].checkbox},textButtonStyle:{padding:R.sf[P.C.CompactPage].text}})),[]));return(0,B.jsx)(T,{...o,EmptyComponent:M.T$})})),K=n.forwardRef((function(e,t){window.__c={n:"ListFormulaProperty"};const o=U(e,t);return(0,B.jsx)(T,{...o})})),Z=n.forwardRef((function(e,t){window.__c={n:"BoardFormulaProperty"};const o=U(e,t,(0,l.yK)((()=>({checkboxButtonStyle:{padding:R.sf[P.C.Board].checkbox},textButtonStyle:{padding:R.sf[P.C.Board].text}})),[]));return(0,B.jsx)(T,{...o,checkboxShowLabel:!0})})),L=n.forwardRef((function(e,t){window.__c={n:"CalendarFormulaProperty"};const o=U(e,t);return(0,B.jsx)(T,{...o,checkboxShowLabel:!0})})),N=n.forwardRef((function(e,t){window.__c={n:"GalleryFormulaProperty"};const o=U(e,t);return(0,B.jsx)(T,{...o,checkboxShowLabel:!0})})),H=n.forwardRef((function(e,t){window.__c={n:"TimelineFormulaProperty"};const o=U(e,t);return(0,B.jsx)(T,{...o})})),W=n.forwardRef((function(e,t){window.__c={n:"RelationFormulaProperty"};const o=U(e,t);return(0,B.jsx)(T,{...o})})),D=n.forwardRef((function(e,t){window.__c={n:"RelationSectionFormulaProperty"};const o=U(e,t);return(0,B.jsx)(T,{...o})}));function U(e,t,o){const{store:n,onContextMenu:r,property:i,collectionStore:l}=e;return{ref:t,store:n,property:i,collectionStore:l,editButtonClickProps:(0,k.Am)(e),onContextMenu:r,checkboxButtonStyle:null==o?void 0:o.checkboxButtonStyle,textButtonStyle:null==o?void 0:o.textButtonStyle}}function z(e){if(void 0===e)return[];if("string"==typeof e)return 0===e.length?[]:[{id:e,type:"text",value:[[e]]}];if("number"==typeof e)return[{id:e,type:"number",value:e}];if((0,c.U3)(e)){return[{id:u.ZV({allowRelativeDates:!1,value:e,userTimeZone:(0,y.r)(),intl:b.default.getIntl()}),type:"date",value:e}]}if("boolean"==typeof e)return[{id:e,type:"checkbox",value:e}];(0,S.t1)(e)}function q(e,t,o){switch(e.type){case"text":const n=(0,f.X)({textValue:e.value,getRecordModel:t,userTimeZone:o,intl:b.default.getIntl(),deterministic:!0});return 0===n.length?[]:[{id:n,type:"text",value:e.value}];case"block":return[{id:e.value.id,type:"relation",value:e.value}];case"date":return[{id:u.ZV({allowRelativeDates:!1,value:e.value,userTimeZone:(0,y.r)(),intl:b.default.getIntl()}),type:"date",value:e.value}];case"checkbox":return[{id:e.value,type:"checkbox",value:e.value}];case"number":return[{id:e.value,type:"number",value:e.value}];case"person":return[{id:e.value.id,type:"person",value:e.value}];case"array":return m.Ar(e.values.map((e=>q(e,t,o))));case"undefined":return[];default:(0,S.t1)(e)}}},69823:(e,t,o)=>{o.d(t,{n:()=>a});var n=o(67294),r=o(24405),i=o(60458),l=o(8606),s=o(85893);const a=n.memo((e=>{window.__c={n:"CheckboxPropertyValue"};const{propertyLabel:t,checked:o,enablePointerEventsForInteractiveTypes:a,onClick:c,disabled:u,tooltip:d}=e,{baseStyles:p}=(0,n.useContext)(l.O),y=(null==p?void 0:p.sizing)??"default",m=(0,r.yK)((()=>({cardCheckboxWrapStyle:{display:"flex",alignItems:"center"},cardCheckboxNameStyle:{marginLeft:"small"===y?5:6,marginRight:2}})),[y]),f={checked:o,disabled:u,style:{...a&&{pointerEvents:"auto"}},onClick:c,..."small"===y?{size:14,checkSize:10}:{size:16,checkSize:12},tooltipHeader:d};return t?(0,s.jsxs)("div",{style:m.cardCheckboxWrapStyle,children:[(0,s.jsx)(i.Z,{...f}),(0,s.jsx)("div",{style:m.cardCheckboxNameStyle,children:t})]}):(0,s.jsx)(i.Z,{...f})}))},77729:(e,t,o)=>{o.d(t,{t:()=>p});var n=o(67294),r=o(86628),i=o(24405),l=o(80951),s=o(49616),a=o(77080),c=o(84076),u=o(8606),d=o(85893);const p=n.memo((e=>{window.__c={n:"ContactPropertyValue"};const{textValue:t,type:o,useShortenedUrl:p,disableLinkify:m,withComma:f}=e,h=(0,i.yK)((e=>({linkBoxStyle:{pointerEvents:"all",display:"inline",background:void 0,...(0,s.z0)(e)},hoveredLinkBoxStyle:{background:void 0,...(0,s.z0)(e)},pressedLinkBoxStyle:{background:void 0,...(0,s.z0)(e)}})),[]),{collectionContextStore:S}=(0,n.useContext)(u.O),x=(0,r.VK)((()=>null==S?void 0:S.searchQuery.state),[null==S?void 0:S.searchQuery]),b=(0,r.VK)((()=>a.default.checkGate("collections_shorten_url")),[]),v=(0,r.VK)((()=>{if(!x||!t)return!1;const e=(0,l.zB)(t);return null==e?void 0:e.toLowerCase().includes(x.toLowerCase())}),[x,t]),g=(0,l.Hw)(o,t);let w;return w=b&&t&&"url"===o&&(p||v)?(0,d.jsx)(y,{textValue:t,searchQuery:x}):(0,l.zB)(t),!g||m?(0,d.jsx)(d.Fragment,{children:w}):(0,d.jsxs)(c.Z,{href:g,onClick:e=>{(e.metaKey||e.ctrlKey)&&window.open(g,"_blank")},style:h.linkBoxStyle,hoveredStyle:h.hoveredLinkBoxStyle,pressedStyle:h.pressedLinkBoxStyle,external:!0,children:[w,f?", ":null]})}));function y(e){let{textValue:t,searchQuery:o}=e;window.__c={n:"ShortenedUrlText"};const n=(0,i.yK)((e=>({restOfUrl:{color:e.lightTextColor}})),[]),{domain:r,restOfUrl:a}=(0,s.AF)(t);if(!r)return(0,d.jsx)(d.Fragment,{children:(0,l.zB)(t)});const c=function(e,t,o){if(!t)return;let n=t,r=!1;if(t&&o){const i=null==t?void 0:t.toLowerCase().indexOf(o.toLowerCase()),l=`${e}${t}`.toLowerCase().indexOf(o.toLowerCase());if(i>=0){let e="";i>0&&(e=`${t.slice(0,1)}`),i>1&&(e+="…");let l="";i+o.length<t.length&&(l="…"),n=`${e}${t.slice(i,i+o.length)}${l}`,r=!0}else if(l>=0&&l+o.length>e.length){const i=l+o.length-e.length;n=t.slice(0,i),i<t.length&&(n+="…"),r=!0}}!r&&t&&t.length>12&&(n=`${t.slice(0,4)}…${t.slice(-6)}`);return n}(r,a,o);return(0,d.jsxs)(d.Fragment,{children:[r,c?(0,d.jsx)("span",{style:n.restOfUrl,children:c}):null]})}},81381:(e,t,o)=>{o.d(t,{z:()=>c});var n=o(67294),r=o(24405),i=o(40506),l=o(89845),s=o(8606),a=o(85893);const c=n.memo((e=>{window.__c={n:"DatePropertyValue"};const{dateValue:t,dateFormat:o,timeFormat:c,withComma:u}=e,{baseStyles:d,shouldRenderTooltip:p}=(0,n.useContext)(s.O),y=(0,r.yK)((()=>({dateBox:{...d.textStyle,display:"inline"}})),[d.textStyle]);return(0,a.jsx)(l.Z,{value:t,dateFormat:o??i.sF,timeFormat:c??i.c_,style:y.dateBox,disableTooltip:p||"relative"!==o,withComma:u,displayInUserTimezone:!0})}))},79074:(e,t,o)=>{o.d(t,{e:()=>y});var n=o(67294),r=o(480),i=o(24405),l=o(95538),s=o(82990),a=o(99813),c=o(54604),u=o(81865),d=o(8606),p=o(85893);const y=n.memo((e=>{window.__c={n:"FilePropertyValue"};const{linkValue:t,permissionRecord:o}=e,{url:y,name:m}=t,{baseStyles:f}=(0,n.useContext)(d.O),h=(0,r.O7)(),S=n.createRef(),x=(null==f?void 0:f.sizing)??"default",b=(0,i.yK)((e=>({fileTextStyle:{display:"inline-block",height:"small"===x?20:24,lineHeight:"small"===x?"20px":"24px",borderRadius:4,background:e.legacyDefaultSelectColor,padding:"0px 6px",maxWidth:120,cursor:"zoom-in",...s.Z.textOverflowStyle},fileImageStyle:{maxHeight:"small"===x?20:24,borderRadius:4,cursor:"zoom-in"}})),[x]),v=(0,n.useCallback)(((e,t)=>{if(t){const e=e=>{e.stopPropagation(),e.preventDefault(),c.ui({environment:h,renderFullScreenNode:()=>(0,p.jsx)(u.Z,{url:y,isAuthenticated:!0,permissionRecord:o,width:300,render:(e,t)=>(0,p.jsx)("img",{src:t,style:{position:"relative",maxHeight:"100%",maxWidth:"100%",margin:0,alignSelf:"center",width:"100%"}})}),fullScreenNodeRect:S.current.getBoundingClientRect(),imageUrl:y})};return(0,p.jsx)("img",{ref:S,src:t,style:b.fileImageStyle,onClick:e},y)}}),[h,S,o,b.fileImageStyle,y]);if((0,l.SR)({url:y}))return(0,p.jsx)(u.Z,{url:y,isAuthenticated:!0,permissionRecord:o,width:20,render:v},y);return(0,p.jsx)("span",{style:b.fileTextStyle,onClick:e=>{e.stopPropagation(),a.Wl(h,{url:y,type:"file",from:"view_original",downloadName:m,permissionRecord:o})},children:m},y)}))},90692:(e,t,o)=>{o.d(t,{Z:()=>c});var n=o(67294),r=o(24405),i=o(84619),l=o(25845),s=o(8606),a=o(85893);const c=n.memo((e=>{window.__c={n:"InlineRelationPropertyValue"};const{recordPointer:t,parentStore:o,linkify:c}=e,{isReadOnly:u,shouldWrap:d,baseStyles:p,containerRef:y}=(0,n.useContext)(s.O),m=(null==p?void 0:p.tokenFormat)??i.lo.Medium,f=(0,r.yK)((()=>({relationToken:{margin:0}})),[]);return(0,a.jsx)(l.Z,{blockId:t.id,isSingle:!1,parentStore:o,shouldWrap:d,format:m,style:f.relationToken,containingParentRef:y,clickTitleBehavior:c||u?"peek":void 0},t.id)}))},59580:(e,t,o)=>{o.d(t,{A:()=>c});var n=o(67294),r=o(24405),i=o(38737),l=o(56247),s=o(8606),a=o(85893);function c(e){var t;window.__c={n:"NumberPropertyValue"};const{numberValue:o,numberFormat:c,withComma:u,isRightAligned:d}=e,{baseStyles:p,propertySchema:y,shouldRenderTooltip:m,shouldWrap:f}=(0,n.useContext)(s.O),h=y,S=(0,r.yK)((()=>{var e,t,o;const n="bar"===(null==h||null===(e=h.show_as)||void 0===e?void 0:e.type)||"ring"===(null==h||null===(t=h.show_as)||void 0===t?void 0:t.type);return{style:{...!n&&{display:void 0},..."bar"===(null==h||null===(o=h.show_as)||void 0===o?void 0:o.type)?{flex:"1 0 auto",justifyContent:d?"flex-end":void 0}:{},...!f&&{display:n?"inline-flex":"inline",textWrap:"nowrap"}},barStyle:"small"===(null==p?void 0:p.sizing)?{flexGrow:1,minWidth:48,maxWidth:120}:{flexGrow:1,minWidth:48,maxWidth:160}}}),[null==p?void 0:p.sizing,d,null==h||null===(t=h.show_as)||void 0===t?void 0:t.type,f]);return(0,a.jsx)(l.b,{style:S.style,barStyle:S.barStyle,progressSize:p.textLineHeight,numberValue:o,numberFormat:c||"number"===(null==h?void 0:h.type)&&(null==h?void 0:h.number_format)||i.dk,numberShowAs:null==h?void 0:h.show_as,shouldRenderTooltip:!m,withComma:u})}},18417:(e,t,o)=>{o.d(t,{H:()=>d});var n=o(67294),r=o(86628),i=o(24405),l=o(66897),s=o(84619),a=o(92864),c=o(8606),u=o(85893);const d=n.memo((e=>{var t;window.__c={n:"PersonPropertyValue"};const{actorPointer:o,style:d,shouldShrink:p}=e,{store:y,baseStyles:m,shouldRenderTooltip:f,propertySchema:h}=(0,n.useContext)(c.O),S=(null==m?void 0:m.tokenFormat)??s.lo.Medium,x=(0,i.yK)((()=>({actorStyle:{margin:0,...d,...(null==m?void 0:m.tokenFormat)===s.lo.Inline&&{pointerEvents:"auto"}}})),[null==m?void 0:m.tokenFormat,d]),b=(0,r.VK)((()=>{const e=null==y?void 0:y.getRecordModel;if(e)return(0,l.Hl)({pointer:o,getRecordModel:e})}),[o,null==y?void 0:y.getRecordModel]);return void 0===b?null:(0,u.jsx)(a.ZP,{actor:b,showRemoveButton:!1,format:S,isSingle:!1,shouldShrink:p,style:x.actorStyle,hasTooltip:!f||S===s.lo.Inline,tooltipHeader:null==h?void 0:h.name},null===(t=b.asActor)||void 0===t?void 0:t.id)}))},19629:(e,t,o)=>{o.d(t,{E1:()=>g,gZ:()=>v,vQ:()=>w});var n=o(67294),r=o(38737),i=o(97880),l=o(8606),s=o(53876),a=o(69823),c=o(77729),u=o(81381),d=o(79074),p=o(90692),y=o(59580),m=o(18417),f=o(44731),h=o(77722),S=o(18746),x=o(83559),b=o(85893);function v(e){const{token:t,targetPropertySchema:o,blockStore:n,checkboxPropertyLabel:l,withComma:s,numberRightAlign:h}=e,{type:x,value:v}=t;switch(x){case"url":case"email":case"phone_number":return(0,b.jsx)(c.t,{textValue:v,type:x,useShortenedUrl:!1,withComma:s});case"checkbox":return(0,b.jsx)(a.n,{checked:v,propertyLabel:l,disabled:!0});case"number":return(0,b.jsx)(y.A,{numberValue:v,numberFormat:o&&"number_format"in o?null==o?void 0:o.number_format:r.dk,withComma:s,isRightAligned:h});case"date":return(0,b.jsx)(u.z,{dateValue:v,dateFormat:o&&"date_format"in o?o.date_format:void 0,timeFormat:o&&"time_format"in o?o.time_format:void 0,withComma:s});case"file":return(0,b.jsx)(d.e,{linkValue:v,permissionRecord:n.pointer});case"person":return(0,b.jsx)(m.H,{actorPointer:v,shouldShrink:!1});case"relation":return(0,b.jsx)(p.Z,{recordPointer:v,parentStore:n,linkify:!0});case"select":return(0,b.jsx)(f.J,{type:t.groupColor?"status":"select",value:v,groupColor:t.groupColor,color:t.color});case"text":return(0,b.jsx)(S.A,{textValue:v,parentStore:n,withComma:s,linkifyUrls:!0});default:return(0,i.t1)(x)}}const g=e=>{let{children:t,propertyType:o,rootPropertySchema:r,numberRightAlign:i}=e;window.__c={n:"PropertyValueTokensWrapper"};const{shouldWrap:s}=(0,n.useContext)(l.O),a="number"===o&&i;return w(o,r)?(0,b.jsx)(h.Y,{style:s?{display:"flex",flexWrap:"wrap"}:void 0,isRightAligned:a,children:t}):(0,b.jsx)(x.K,{isRightAligned:a,children:t})},w=(e,t)=>{var o,n;return void 0!==e&&"title"!==e&&(!!(0,s.A2)(e)&&("number"!==e||"bar"!==(null==t||null===(o=t.show_as)||void 0===o?void 0:o.type)&&"ring"!==(null==t||null===(n=t.show_as)||void 0===n?void 0:n.type)))}},44731:(e,t,o)=>{o.d(t,{J:()=>p});var n=o(67294),r=o(24405),i=o(8848),l=o(84619),s=o(82990),a=o(62896),c=o(85567),u=o(8606),d=o(85893);const p=n.memo((e=>{window.__c={n:"SelectPropertyValue"};const{value:t,color:o,shouldShrink:p,type:y}=e,m="status"===y?e.groupColor??"default":void 0,f=(0,r.Fg)(),{baseStyles:h}=(0,n.useContext)(u.O),S=(null==h?void 0:h.tokenFormat)??l.lo.Medium,x=(0,r.yK)((()=>({token:{margin:0,...s.Z.textOverflowStyle}})),[]);if(!t)return null;const{textColor:b,backgroundColor:v}=(0,i.KR)(f,o??m),g="status"===y?o&&"default"!==o?o:m??"gray":void 0;return(0,d.jsx)(c.Z,{format:S,value:(0,d.jsx)(a.Z,{children:t}),color:b,backgroundColor:v,showRemoveButton:!1,shouldShrink:p,isRound:"status"===y,isSingle:!1,showColoredDot:g,style:x.token,showFullValueTooltip:!1})}))},69582:(e,t,o)=>{o.d(t,{P:()=>f,w:()=>h});o(67294);var n=o(24405),r=o(84619),i=o(69651),l=o(22686),s=o(70203),a=o(97880),c=o(9291),u=o(93044),d=o(77722),p=o(85893);const y="20px",m=(0,c.defineMessages)({me:{id:"templateVariablePropertyValueComponent.templateVariables.text.me",defaultMessage:"Person who duplicated page"},now:s.olT.nowText,today:s.olT.todayText});function f(e){window.__c={n:"TemplateVariablePropertyValueText"};const t=(0,n.yK)((e=>({textWrapper:{lineHeight:y}})),[]);return(0,p.jsx)(d.Y,{fontColor:"light",style:t.textWrapper,children:(0,p.jsx)(h,{templateVariableType:e.templateVariableType})})}function h(e){window.__c={n:"TemplateVariableUIToken"};const{templateVariableType:t,showRemoveButton:o,onRemove:d,style:y}=e,m=(0,c.useIntl)(),f=(0,n.yK)((e=>({uiToken:{background:e.outlineBlueButtonPressedBackground,color:e.blueColor,padding:"2px 4px",width:"max-content",...y||{}}})),[y]);return(0,p.jsx)(u.ZP,{format:r.lo.Medium,isSingle:!0,title:S(t,m),renderAvatar:()=>function(e){let t;(0,s.pJX)(e)?t=l.f:(0,s.tXA)(e)?t=i.C:(0,a.t1)(e);return t}(t)({width:12,height:12,marginRight:4}),shouldShrink:!0,onClickRemove:d,showRemoveButton:Boolean(o),style:f.uiToken})}function S(e,t){let o;return"me"===e?o=t.formatMessage(m.me):"now"===e?o=t.formatMessage(m.now):"today"===e?o=t.formatMessage(m.today):(0,a.t1)(e),o}},18746:(e,t,o)=>{o.d(t,{A:()=>h});var n=o(67294),r=o(480),i=o(86628),l=o(24405),s=o(80951),a=o(12549),c=o(23867),u=o(70203),d=o(60682),p=o(49616),y=o(14976),m=o(16354),f=o(85893);const h=n.memo((e=>{window.__c={n:"TextPropertyValue"};const{textValue:t,parentStore:o,withComma:h,linkifyUrls:S}=e,x=(0,r.O7)(),b=(0,l.Fg)(),v=(0,d.kw)();(0,n.useEffect)((()=>{void 0!==t&&x.KatexStore.loadIfNeeded((()=>t))}),[x.KatexStore,t]);const g=(0,i.VK)((()=>x.KatexStore.getKatex()),[x.KatexStore]),w=(0,i.VK)((()=>void 0===t?null:y.IY({environment:x,textValue:t&&{value:t,spaceId:(0,c.C)(o.pointer.spaceId)},parentStore:o,disableHover:!1,disableStyleAnnotations:!1,disableInsertedDeletedAnnotations:!1,disableDateStyleAnnotations:!1,disabled:!0,theme:b,emojiType:v,katex:g,formulaValueTypes:[],stopLinkPropagation:!0,linkTargetBlank:!0})),[v,x,g,o,t,b]),C=(0,n.useMemo)((()=>{if(!S||void 0===t)return null;const e=(0,u.Jcv)(t);return(0,a.Z)(e)?(0,s.zB)(t):null}),[S,t]);return(0,f.jsxs)("span",{children:[C?(0,f.jsx)(m.Z,{href:C,style:{display:"inline",pointerEvents:"auto",...(0,p.z0)(b)},external:!0,onClick:e=>e.stopPropagation(),children:w}):w,h?", ":null]})}))},77722:(e,t,o)=>{o.d(t,{Y:()=>s});var n=o(67294),r=o(24405),i=o(8606),l=o(85893);const s=n.forwardRef(((e,t)=>{let{children:o,fontColor:s,style:a,isRightAligned:c}=e;window.__c={n:"TextlikePropertyValueWrapper"};const{baseStyles:u}=(0,n.useContext)(i.O),d=(0,r.yK)((e=>({textStyle:{...u.textStyle,...a,...c?{justifyContent:"right",textAlign:"right"}:{},..."light"===s?{color:e.lightTextColor}:{}}})),[u.textStyle,a,c,s]);return(0,l.jsx)("div",{ref:t,style:d.textStyle,children:o})}))},83559:(e,t,o)=>{o.d(t,{K:()=>s});var n=o(67294),r=o(24405),i=o(8606),l=o(85893);const s=n.forwardRef(((e,t)=>{let{children:o,style:s,isRightAligned:a}=e;window.__c={n:"TokenPropertyValueWrapper"};const{baseStyles:c}=(0,n.useContext)(i.O),u=(0,r.yK)((()=>({tokenWrapStyle:{...c.tokenWrapStyle,...a?{justifyContent:"end"}:void 0,...s}})),[c.tokenWrapStyle,s,a]);return(0,l.jsx)("div",{ref:t,style:u.tokenWrapStyle,children:o})}))},14633:(e,t,o)=>{o.r(t),o.d(t,{PersonPropertyModule:()=>$});o(57658);var n=o(67294),r=o(480),i=o(86628),l=o(24405),s=o(66897),a=o(80951),c=o(59054),u=o(13148),d=o(22686),p=o(47453),y=o(72126),m=o(19889),f=o(70203),h=o(97880),S=o(82990),x=o(63143),b=o(9291),v=o(8406),g=o(9953),w=o(82530),C=o(87279),_=o(35314),P=o(77907),k=o(35948),R=o(4023),j=o(61766),M=o(49068),B=o(64921),T=o(52275),V=o(31945),A=o(73063),O=o(68894),I=o(68785),E=o(78140),F=o(32163),K=o(43765),Z=o(72495),L=o(70301),N=o(64369),H=o(45653),W=o(61679),D=o(97680),U=o(8606),z=o(69582),q=o(85893);const $=n.memo((function(e){let{property:t,store:o,propertyValues:r,propertySchema:i}=e;window.__c={n:"PersonPropertyModule"};const[s,a]=(0,_.e)(),c=Math.floor((a+8)/208),u="person"===(null==i?void 0:i.type)&&((0,h.$K)(i.limit)&&0===r.length||(0,x.z4)(i.limit)),[d,p]=(0,n.useState)(!1),y=5*c-(u?1:0),m=(0,l.yK)((e=>({showAllFewerButton:{borderRadius:6,padding:"2px 8px",marginTop:10,display:"inline-flex",flexWrap:"nowrap",gap:8,color:e.mediumTextColor,fontWeight:S.Z.fontWeight.medium,fontSize:14,alignItems:"center",justifyContent:"start"}})),[]),f=(0,q.jsx)(B.Z,{onClick:()=>p(!d),style:m.showAllFewerButton,children:d?(0,q.jsx)(b.FormattedMessage,{id:"PersonPropertySectionValues.showMoreButton.text",defaultMessage:"Show fewer"}):(0,q.jsx)(b.FormattedMessage,{id:"PersonPropertySectionValues.showFewerButton.text",defaultMessage:"Show more"})});return(0,q.jsxs)("div",{ref:s,children:[(0,q.jsx)(W.rO,{minWidth:200,style:{gridGap:8},children:(0,q.jsx)(G,{values:r,blockStore:o,propertyId:t,propertySchema:i,itemsShownPerRow:c,showAddButton:u,limit:d?void 0:y,setShowingAllValues:p})}),r.length>y&&f]})}));function G(e){let{values:t,blockStore:o,propertyId:l,propertySchema:c,itemsShownPerRow:u,showAddButton:d,limit:p,setShowingAllValues:m}=e;window.__c={n:"PersonPropertySectionValues"};const S=(0,r.O7)(),b=(0,r.Fy)(),{collectionContextStore:C}=(0,n.useContext)(U.O),_=(0,n.useCallback)((function(e){w.createAndCommit({userAction:"PersonPropertyModule.updateValue",environment:S,perform:t=>{const n=a.BY(e);g.sO({store:o.getPropertyStore(l),value:n,transaction:t})}});const t=o.getAssociatedCollectionStore();C&&c&&t&&v.rv({environment:S,collectionContextStore:C,block_id:o.id,property:l,property_type:null==c?void 0:c.type,from:"property_module",collection_id:t.id,isFromBulkActionsToolbar:!1})}),[o,C,S,l,c]),P=(0,n.useCallback)((function(e){_(t.filter((t=>(0,s.Wk)(e)?(0,f.D4X)(t)||e.id!==t.id:e!==t)))}),[_,t]),k=(0,n.useCallback)((function(e){_([...t,e])}),[_,t]),M=(0,n.useCallback)((function(e){_([e])}),[_]),[T,A]=(0,n.useState)(""),O=(0,n.useMemo)((()=>new j.Z),[]),I=t.length<=u-1?(0,y.w6)(u-t.length).map((e=>(0,q.jsx)("div",{},e))):[],E=(0,i.VK)((()=>o.isTemplate()),[o]),F=(0,i.VK)((()=>o.canEdit()),[o]);if((0,x.z4)(c))return null;if("created_by"===(null==c?void 0:c.type)||"last_edited_by"===(null==c?void 0:c.type))return(0,q.jsx)(X,{personValues:t,disabled:!0,onRemove:y.ZT});const K=p?t.slice(0,p):t;return F?(0,q.jsxs)(q.Fragment,{children:[d?(0,q.jsx)(Q,{menu:(0,q.jsx)(Y,{query:T,setQuery:A,current:t,onAdd:k,inTemplate:E,limit:c.limit}),onClose:()=>{A(""),m(!1)},onClick:()=>{(0,h.$K)(p)&&m(!0)}}):null,(0,h.$K)(c.limit)?(0,q.jsx)(q.Fragment,{children:(0,q.jsx)(V.ZP,{buttonPopupStore:O,alignmentToOrigin:R.v.Start,onClose:()=>{A("")},popupType:b.isMobile?V.Z4.SlideUp:V.Z4.Popup,renderOrigin:e=>(0,q.jsx)(B.Z,{...e,children:(0,q.jsx)(X,{personValues:t,onRemove:P,disabled:!F})}),render:()=>(0,q.jsx)(Y,{query:T,setQuery:A,current:t,onAdd:e=>{M(e),O.setState({open:!1})},inTemplate:E,limit:c.limit})})}):(0,q.jsx)(X,{personValues:K,onRemove:P,disabled:!F}),I]}):(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(X,{personValues:K,disabled:!0,onRemove:y.ZT}),I]})}const Q=n.memo((function(e){let{menu:t,onClick:o,onClose:n}=e;window.__c={n:"AddPersonButton"};const i=(0,r.Fy)(),s=(0,l.yK)((e=>({button:{borderRadius:6,padding:"5px 0 5px 4px",display:"flex",flexWrap:"nowrap",gap:8,color:e.mediumTextColor,fontSize:14,alignItems:"center"},buttonBorder:{padding:8,borderRadius:9999,border:`1px dashed ${e.mediumTextColor}`}})),[]);return(0,q.jsx)(V.ZP,{alignmentToOrigin:R.v.Start,onClick:o,onClose:n,popupType:i.isMobile?V.Z4.SlideUp:V.Z4.Popup,renderOrigin:e=>(0,q.jsxs)(B.Z,{...e,style:s.button,children:[(0,q.jsx)("div",{style:s.buttonBorder,children:(0,p.R)({width:14})}),(0,q.jsx)(b.FormattedMessage,{id:"personProperty.addPersonButtonText",defaultMessage:"Add person"})]}),render:()=>t})}));function Y(e){let{query:t,setQuery:o,onAdd:i,current:l,inTemplate:a,limit:u}=e;window.__c={n:"PersonSelectMenu"};const d=(0,r.Fy)(),p=(0,b.useIntl)(),S=function(e){let{query:t}=e;const o=(0,r.O7)(),[n]=(0,c.r5)((async()=>{const e=await P.deps.searchActions.loader(),{users:n}=await e.searchSpaceActors({environment:o,query:t,membersOnly:!1});return n.map((e=>(0,s.LU)({table:m.KJ,value:e})))}),[o,t]);return n}({query:t}),x=(0,n.useMemo)((()=>new Set(l.map((e=>{if((0,s.Wk)(e))return e.id})).filter(h.$K))),[l]),v=(0,n.useCallback)((e=>e.filter((e=>!x.has(e.id)))),[x]),g=(0,q.jsx)(Z.Z,{isInput:!0,style:{padding:8},children:(0,q.jsx)(O.ZP,{textWrapperStyle:{margin:0},focus:!d.isMobile||void 0,focusAfterAnimation:!0,value:t||"",onChange:e=>o(e.target.value),placeholder:p.formatMessage({id:"personPropertySectionValues.search.placeholder",defaultMessage:"Search for a person..."})})}),w=f.s8k.filter((e=>!l.includes(e))),_={key:"shortcuts",items:w.length>0?w.map((e=>({key:`relative_person_shortcut_${e}`,action:()=>{},render:t=>(0,q.jsx)(T.Z,{...t,title:(0,q.jsx)(z.w,{templateVariableType:e}),inline:!0,onClick:()=>{i(e)}})}))):[{key:"no_template_variables",action:()=>{},render:e=>(0,q.jsx)(K.Z,{...e,style:{margin:"2px 0px 2px 6px",fontSize:12},title:(0,q.jsx)(b.FormattedMessage,{id:"database.personPropertyMenu.noShorcuts.message",defaultMessage:"No shortcuts"})})}],render:e=>(0,q.jsx)(Z.Z,{...e,title:"Shortcuts"})},[k,R]=(0,n.useMemo)((()=>{const e=[];let t;if("pending"===S.status||"idle"===S.status)e.push({key:"loading",action:()=>{},render:e=>(0,q.jsx)(K.Z,{...e,title:(0,q.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:(0,q.jsx)(I.Z,{})})})});else if("resolved"===S.status){const n=v(S.value??[]);t=n.length>0?0:void 0,0===n.length?e.push({key:"no_results",action:()=>{},render:e=>(0,q.jsx)(K.Z,{...e,title:(0,q.jsx)(b.FormattedMessage,{id:"PersonPropertySectionValues.searchMenu.noResults",defaultMessage:"No results."})})}):e.push(...n.map((e=>({key:e.id,action:()=>{i(e.pointer),o("")},render:t=>(0,q.jsx)(D.Z,{...t,actor:(0,s.dp)(e)})}))))}else"rejected"===S.status?e.push({key:"no_results",action:()=>{},render:e=>(0,q.jsx)(K.Z,{...e,title:(0,q.jsx)(b.FormattedMessage,{id:"PersonPropertySectionValues.searchMenu.somethingWentWrong",defaultMessage:"Something went wrong."})})}):(0,h.t1)(S);return[e,t]}),[i,v,o,S]);return(0,q.jsx)(E.Z,{menuType:d.isMobile?C.og.ActionSheet:C.og.Popup,header:g,width:275,maxHeight:400,minWidth:275,children:(0,q.jsx)(F.Z,{type:F.i.Vertical,sections:(0,y.oA)([a?_:void 0,{key:"results",items:k.slice(0,20),render:e=>(0,q.jsx)(Z.Z,{...e,title:(0,M.$)(u)})}]),initialFocus:R})})}const X=n.memo((function(e){let{personValues:t,onRemove:o,disabled:n}=e;return(0,q.jsx)(q.Fragment,{children:t.map((e=>(0,s.Wk)(e)?(0,q.jsx)(ee,{actorPointer:e,handleRemove:o,disabled:n},e.id):(0,f.D4X)(e)?(0,q.jsx)(J,{value:e,handleRemove:o,disabled:n},`template_variable_${e}`):void(0,h.t1)(e)))})})),J=n.memo((e=>{let{value:t,handleRemove:o,disabled:n}=e;window.__c={n:"PropertyModulePersonTemplateVariableValue"};const[r,i]=(0,k.C)(),s=(0,l.yK)((e=>({actorName:{fontWeight:S.Z.fontWeight.regular,color:e.blueColor,lineHeight:1.1},uiToken:{display:"flex",gap:10,alignItems:"center",background:i&&!n?e.outlineBlueButtonPressedBackground:e.outlineBlueButtonHoveredBackground,color:e.blueColor,justifyContent:"space-between",position:"relative",padding:"5px 28px 5px 5px",borderRadius:4},avatar:{borderRadius:6,display:"flex",flexWrap:"nowrap",gap:8,fontSize:14,alignItems:"center"},avatarBorder:{padding:8,borderRadius:9999,background:e.accentColors.uiBlue[i&&!n?100:200],color:e.accentColors.uiBlue[600]}})),[n,i]);return(0,q.jsx)(q.Fragment,{children:(0,q.jsxs)("div",{ref:r,style:s.uiToken,children:[(0,q.jsx)("div",{style:s.avatar,children:(0,q.jsx)("div",{style:s.avatarBorder,children:(0,d.f)({width:14})})}),(0,q.jsx)("div",{style:{display:"flex",gap:4,flexGrow:1},children:(0,q.jsx)(N.Z,{className:"notranslate",style:s.actorName,isMultiline:!0,children:(0,q.jsx)(b.FormattedMessage,{id:"PropertyModulePersonTemplateVariableValue.templateVariables.text.me",defaultMessage:"Person who{br}duplicated page",values:{br:(0,q.jsx)("br",{})}})})}),i&&!n?(0,q.jsx)(A.Z,{icon:u.U,ariaLabel:"Close",style:{position:"absolute",right:4,top:"50%",transform:"translateY(-50%)",width:20,height:20},iconStyle:{width:11},onClick:()=>o(t)}):null]})})})),ee=n.memo((e=>{let{actorPointer:t,handleRemove:o,disabled:r}=e;window.__c={n:"PropertyModulePersonValue"};const a=(0,b.useIntl)(),{store:c}=(0,n.useContext)(U.O),d=(0,i.VK)((()=>{const e=null==c?void 0:c.getRecordModel;if(e)return(0,s.Hl)({pointer:t,getRecordModel:e})}),[t,null==c?void 0:c.getRecordModel]),p=null==d?void 0:d.asActor,y=(0,i.VK)((()=>null==p?void 0:p.getDisplayName(a)),[p,a]),m=(0,l.yK)((()=>({actorName:{fontWeight:S.Z.fontWeight.medium}})),[]),f=(0,i.VK)((()=>null!=p&&p.isUser()?(0,q.jsx)(H.Z,{userValue:p,size:32}):null!=p&&p.isBot()?(0,q.jsx)(L.Z,{botValue:p,size:32}):null),[p]),[h,x]=(0,k.C)();return(0,q.jsx)(q.Fragment,{children:(0,q.jsxs)("div",{ref:h,style:{display:"flex",gap:10,alignItems:"center",justifyContent:"space-between",position:"relative",padding:"5px 28px 5px 5px",borderRadius:4,background:x&&!r?"rgba(0,0,0,0.05)":void 0},children:[f,(0,q.jsx)("div",{style:{display:"flex",gap:4,flexGrow:1,...S.Z.textOverflowStyle},children:(0,q.jsx)(N.Z,{className:"notranslate",style:m.actorName,showTooltipWhenTruncated:!0,children:y})}),x&&!r?(0,q.jsx)(A.Z,{icon:u.U,ariaLabel:"Close",style:{position:"absolute",right:4,top:"50%",transform:"translateY(-50%)",width:20,height:20},iconStyle:{width:11},onClick:()=>o(t)}):null]})})}))},65473:(e,t,o)=>{o.d(t,{Z:()=>O});var n=o(67294),r=o(480),i=o(86628),l=o(24405),s=o(43664),a=o(91851),c=o(28651),u=o(12534),d=o(80444),p=o(64921),y=o(36596),m=o(85893);function f(){window.__c={n:"PropertyValueShimmer"};const e=(0,l.yK)((e=>({outer:{display:"inline-flex",overflow:"hidden",position:"relative",width:"100%"},inner:{width:"60%",height:10,borderRadius:12,backgroundColor:e.lightDividerColor}})),[]);return(0,m.jsx)("div",{style:e.outer,children:(0,m.jsx)(y.Z,{style:{...e.inner}})})}var h=o(22491),S=o(51454),x=o(8606),b=o(78030);const v=6;function g(e){window.__c={n:"QuickActionButtonsBase"};const{style:t,children:o,align:n,sticky:r}=e,i=(0,l.yK)((()=>({buttonWrapperStyle:{display:"flex",justifyContent:"right"===n?"end":"start",position:"absolute",top:4,right:0,left:0,zIndex:S.XP,margin:`0 ${v}px`,pointerEvents:"none",...t},innerWrapperStyle:{display:"flex",gap:"4px",pointerEvents:"auto"},stickyStyle:{position:"sticky",right:v}})),[n,t]);return o?(0,m.jsx)("div",{style:i.buttonWrapperStyle,children:(0,m.jsx)("div",{...(0,h.iv)(i.innerWrapperStyle,r&&i.stickyStyle),children:o})}):null}function w(e){const{format:t,align:o}=e;switch(t){case b.C.Table:return(0,m.jsx)(R,{...e,align:o??"right"});case b.C.Page:return(0,m.jsx)(_,{...e,align:o??"right"});case b.C.Board:return(0,m.jsx)(C,{...e,align:o??"right"});case b.C.GalleryView:return(0,m.jsx)(P,{...e,align:o??"right"});case b.C.ListView:return(0,m.jsx)(k,{...e,align:o??"right"});default:return(0,m.jsx)(g,{...e,align:o??"right"})}}function C(e){window.__c={n:"BoardQuickActionButtons"};const t=(0,l.yK)((()=>({buttonWrapperStyle:{top:0,...e.style}})),[e.style]);return(0,m.jsx)(g,{...e,style:t.buttonWrapperStyle})}function _(e){window.__c={n:"PageQuickActionButtons"};const t=(0,l.yK)((()=>({buttonWrapperStyle:{top:5,...e.style}})),[e.style]);return(0,m.jsx)(g,{...e,style:t.buttonWrapperStyle})}function P(e){window.__c={n:"GalleryQuickActionButtons"};const t=(0,l.yK)((()=>({buttonWrapperStyle:{top:-1,...e.style}})),[e.style]);return(0,m.jsx)(g,{...e,style:t.buttonWrapperStyle})}function k(e){window.__c={n:"ListQuickActionButtons"};const t=(0,l.yK)((()=>({buttonWrapperStyle:{position:void 0,...e.style}})),[e.style]);return(0,m.jsx)(g,{...e,style:t.buttonWrapperStyle})}function R(e){window.__c={n:"TableQuickActionButtons"};const{align:t="right"}=e,{isMobile:o}=(0,r.Fy)(),{shouldWrap:i}=(0,n.useContext)(x.O),s=(0,l.yK)((()=>({buttonWrapperStyle:{...e.style,...o&&i?{position:"sticky",float:t,marginRight:0,marginLeft:2,right:v}:{}}})),[t,o,e.style,i]);return(0,m.jsx)(g,{...e,style:s.buttonWrapperStyle,sticky:!0})}var j=o(26388);function M(e){window.__c={n:"BlockPropertyButtonTooltip"};const{propertyValue:t,propertyCaption:o,render:r}=e,{propertySchema:i,format:s,shouldRenderTooltip:a}=(0,n.useContext)(x.O),c=null==i?void 0:i.name,u=!a,d=s===b.C.Board||s===b.C.GalleryView,p=(null==c?void 0:c.length)&&!u,y=void 0!==t,f=void 0!==o,h=p||y||f,S=(0,l.yK)((e=>({value:{color:p?e.mediumInvertedTextColor:void 0},caption:{color:p||y?e.mediumInvertedTextColor:void 0}})),[p,y]),v=(0,n.useCallback)((()=>(0,m.jsxs)(m.Fragment,{children:[p&&(0,m.jsx)("div",{children:c}),y&&(0,m.jsx)("div",{style:S.value,children:t}),f&&(0,m.jsx)("span",{style:S.caption,children:o})]})),[f,p,y,o,c,t,S.caption,S.value]);return h?(0,m.jsx)(j.ZP,{renderTooltip:v,render:e=>r(e),placement:d?j.ug.Left:j.ug.Bottom}):r()}var B=o(11061);const T=n.memo((0,n.forwardRef)((function(e,t){const{tooltipPropertyValue:o,tooltipPropertyCaption:n,tooltipHide:r}=e,i=o=>(0,m.jsx)(A,{ref:t,...e,tooltipEvents:o});return r?i():(0,m.jsx)(M,{propertyValue:o,propertyCaption:n,render:i})})));function V(e){if(null==e||!e.padding)return;if("number"==typeof e.padding)return`${e.padding}px ${e.padding}px ${e.padding}px 0`;const t=e.padding.split(" ");if(1===t.length){const e=t[0].replace("px","");return`${e}px ${e}px ${e}px 0`}if(2===t.length){const e=t[0].replace("px","");return`${e}px ${t[1].replace("px","")}px ${e}px 0`}if(3===t.length){return`${t[0].replace("px","")}px ${t[1].replace("px","")}px ${t[2].replace("px","")}px 0`}if(4===t.length){return`${t[0].replace("px","")}px ${t[1].replace("px","")}px ${t[2].replace("px","")}px 0`}return e.padding}const A=(0,n.forwardRef)((function(e,t){window.__c={n:"BlockPropertyButtonInner"};const o=(0,r.O7)(),{device:y}=o,h=(0,i.qz)(void 0,c.Z),{style:S,quickActionButtons:b,quickActionButtonsAlign:v,quickActionButtonsForceVisible:g,editButtonClickProps:C}=e,{collectionContextStore:_,format:P,isReadOnly:k,store:R,propertyIndex:j,shouldShowMultiSelectCheckbox:M}=(0,n.useContext)(x.O),{tooltipPhase:T,nextTooltipPhase:A}=(0,n.useContext)(B.J),O=(0,i.VK)((()=>{var e,t;const o=null==_?void 0:_.collectionStore(),n=null==o?void 0:o.isSyncedCollection();return Boolean(n&&!(null!=R&&null!==(e=R.getFormat())&&void 0!==e&&null!==(e=e.attributes)&&void 0!==e&&e.length)&&!(null!=R&&null!==(t=R.getFormat())&&void 0!==t&&t.error))}),[_,R]),I=(0,l.yK)((()=>({buttonStyle:{position:"relative",...S,...0===j&&M?{padding:V(S)}:{}}})),[S,j,M]),E=(0,i.VK)((()=>h.state.mouseEntered),[h]),F=(0,n.useCallback)((()=>{h.setState({...h.state,mouseEntered:!0})}),[h]),K=(0,n.useCallback)((()=>{h.setState({...h.state,mouseEntered:!1})}),[h]),Z=(0,n.useRef)(null),L=e=>{Z.current=e,"function"==typeof t?t(e):t&&(t.current=e)},N=(0,i.VK)((()=>({...e.quickActionButtonsStyle,..."list"===(null==_?void 0:_.getViewType())?{margin:0}:{}})),[e.quickActionButtonsStyle,_]),H=(0,n.useMemo)((()=>{if(!b)return null;return(void 0!==g?g:E||y.isMobile)?(0,m.jsx)(w,{align:v,style:N,format:P,containerRef:Z,children:b}):void 0}),[b,g,E,y.isMobile,v,N,P]);return O?(0,m.jsx)("div",{style:I.buttonStyle,children:(0,m.jsx)(f,{})}):k||void 0===C?(0,m.jsxs)("div",{ref:L,style:I.buttonStyle,onMouseMove:F,onMouseLeave:K,...e.tooltipEvents,children:[H,e.children]}):(0,m.jsxs)(p.Z,{ref:L,hoveredStyle:e.hoveredStyle,pressedStyle:e.pressedStyle,style:I.buttonStyle,onMouseMove:F,onMouseLeave:K,onContextMenu:t=>{const{onContextMenu:o}=e;y.isAndroid&&y.isPhone?t.preventDefault():o&&(0,u.ZP)({event:t,context:u.Af.EditorContextMenu,callback:()=>{o(t)}})},onClick:async e=>{if(void 0===C)return;const{onClick:t,store:n,property:r,format:i,collectionStore:l,blockPropertyValueOverlayStore:c,disableHorizontalEdgeScroll:u,isStatusCheckbox:p}=C;await s.z({element:Z.current??void 0,environment:o,onClick:t,store:n,property:l.getMappedProperty(r),format:i,collectionStore:l,blockPropertyValueOverlayStore:c,disableHorizontalEdgeScroll:u,collectionContextStore:_,mouseStore:h,statusSetCheckbox:p?!e.altKey:void 0});const{currentUserSettingsStore:y,currentSpaceStore:m}=d.default.state;void 0!==y&&void 0!==m&&void 0!==T&&void 0!==A&&a.uR({environment:o,requiredCurrPhase:T,nextPhase:A,currentUserSettingsStore:y,currentSpaceStore:m})},testId:"property-value",...e.tooltipEvents,children:[H,e.children]})})),O=T},11061:(e,t,o)=>{o.d(t,{J:()=>m,O:()=>y});var n=o(67294),r=o(480),i=o(86628),l=o(92996),s=o(40663),a=o(80444),c=o(91007),u=o(8606),d=o(85893);const p={[l.Es.Assign]:"assign_to_someone",[l.Es.Status]:"change_task_status",[l.Es.TaskToProjectRelation]:"select_a_project"};function y(e){window.__c={n:"BlockPropertyIntroTourTooltipWrapper"};const{store:t,collectionStore:o,property:y,children:m}=e,{isReadOnly:h}=(0,n.useContext)(u.O),S=(0,r.O7)(),x=(0,i.VK)((()=>{if(S.device.isMobile||t.pathIsDead()||h||o.getFormatStore().getKeyStore("app_config_uri").getValue()!==l.iS)return;const e=(0,s.jH)(a.default.state.currentUserSettingsStore,a.default.state.currentSpaceStore);return void 0===p[y]||p[y]!==e||t.getFormat().app_config_uri?void 0:e}),[S.device.isMobile,t,h,o,y]);return void 0!==x?(0,d.jsx)(f,{tooltipPhase:x,collectionStore:o,children:(0,d.jsx)(c.Z,{store:t,origin:m,isFirstTooltip:!1,phase:x})}):m}const m=(0,n.createContext)({tooltipPhase:void 0,nextTooltipPhase:void 0});function f(e){window.__c={n:"BlockPropertyIntroTourTooltipContextProvider"};const{tooltipPhase:t,collectionStore:o,children:n}=e,r=(0,i.VK)((()=>{var e;const n=null===(e=o.getFormat().app_uri_map)||void 0===e?void 0:e[l.Es.TaskToProjectRelation],r=Boolean(n&&!o.getDeletedSchema()[n]);return(0,s.$j)(t,r)}),[o,t]);return(0,d.jsx)(m.Provider,{value:{tooltipPhase:t,nextTooltipPhase:r},children:n})}},8606:(e,t,o)=>{o.d(t,{O:()=>x,Z:()=>b});var n=o(67294),r=o(480),i=o(86628),l=o(99036),s=o(80951),a=o(42875),c=o(72126),u=o(70203),d=o(66890),p=o(28020),y=o(33929),m=o(78030),f=o(24118),h=o(53876),S=o(85893);const x=(0,n.createContext)({collectionContextStore:void 0,propertySchema:void 0,property:void 0,unmappedProperty:void 0,isEmpty:!1,isReadOnly:!0,shouldRenderTooltip:!1,shouldWrap:!1,baseStyles:{},format:0,containerRef:null,store:void 0,templateVariableContext:void 0,shouldShowMultiSelectCheckbox:void 0,propertyIndex:void 0});function b(e){window.__c={n:"BlockPropertyValueContextProvider"};const{format:t,children:o,disabled:b,store:g,tableWrap:w,collectionStore:C,property:_,unmappedProperty:P,propertySchema:k,shouldSetCellHeight:R,isLast:j,locked:M,containerRef:B,showIfEmpty:T,shouldShowMultiSelectCheckbox:V,propertyIndex:A}=e,O=(0,d.Y$)(),I=(0,i.VK)((()=>!!O&&(0,p.YO)(O.isInPeekRenderer.state)),[O]),E=function(e,t,o,n){const l=(0,r.O7)();return(0,i.VK)((()=>{if(!e.isDefined())return!1;const r=t.getSchema(),i=null==n?void 0:n.type;return"checkbox"!==i&&"button"!==i&&"created_time"!==i&&"created_by"!==i&&"last_edited_time"!==i&&"last_edited_by"!==i&&"formula"!==i&&"rollup"!==i&&"auto_increment_id"!==i&&(0,s.wV)({block:e.getModel(),property:o,schema:r,getRecordModel:e.getRecordModel,userTimeZone:(0,a.r)(),intl:y.default.getIntl(),userId:l.currentUser.id})}),[t,l.currentUser.id,o,null==n?void 0:n.type,e],{debugName:"BlockPropertyValueContext.useIsEmpty"})}(g,C,_,k),F=function(e,t,o,n,r,l){return(0,i.VK)((()=>n||!e.canEdit()||(0,s.wl)(o)||(0,f.Sm)(l)||(0,f.M$)({collectionStore:t,property:o,propertySchema:l})||e.isLocked()||r===m.C.Calendar||r===m.C.Timeline||(0,s.f0)(e.getModel(),o,e.getRecordModel)||(0,s.A0)(l)),[n,r,o,l,e,t],{debugName:"BlockPropertyValueContext.useIsReadOnly"})}(g,C,_,b,t,k),K=function(e,t){return e===m.C.Page||e===m.C.CompactPage||e===m.C.Table&&t||e===m.C.Board&&t||e===m.C.GalleryView&&t}(t,w),Z=(0,h.uo)({shouldSetCellHeight:R,format:t,shouldWrap:K,isLast:j,locked:M,disabled:b,showIfEmpty:T,isInHomeWidget:I}),L=function(e,t,o){return(0,i.VK)((()=>{if(!e.isDefined())return;if(!e.isTemplate())return;const n=null==o?void 0:o.type;if((0,l.fc)(n)){const o=e.getPropertyValue(t),n=c.Ps(o);if(n&&u.km_(n)){const e=u.QGY(u.hn0(n)),t=e&&u.fsE(e);return t&&{templateVariable:t.type}}}}),[t,o,e],{debugName:"BlockPropertyValueContext.useTemplateVariableContext"})}(g,_,k),N=(0,n.useMemo)((()=>({store:g,collectionContextStore:O,property:_,unmappedProperty:P,propertySchema:k,isEmpty:E,isReadOnly:F,shouldRenderTooltip:v(t,E),shouldWrap:K,baseStyles:Z,format:t,containerRef:B,templateVariableContext:L,shouldShowMultiSelectCheckbox:V,propertyIndex:A})),[g,O,_,P,k,E,F,K,Z,t,B,L,V,A]);return(0,S.jsx)(x.Provider,{value:N,children:o})}function v(e,t){return!![m.C.Board,m.C.GalleryView,m.C.ListView,m.C.Relation,m.C.RelationSection].includes(e)||e===m.C.Mini&&!t}},78030:(e,t,o)=>{o.d(t,{C:()=>n});let n=function(e){return e[e.Table=0]="Table",e[e.Board=1]="Board",e[e.Calendar=2]="Calendar",e[e.ListView=3]="ListView",e[e.GalleryView=4]="GalleryView",e[e.Timeline=5]="Timeline",e[e.Page=6]="Page",e[e.CompactPage=7]="CompactPage",e[e.Relation=8]="Relation",e[e.RelationSection=9]="RelationSection",e[e.Mini=10]="Mini",e[e.PropertyModule=11]="PropertyModule",e}({})},88071:(e,t,o)=>{o.d(t,{Z:()=>a});o(67294);var n=o(24405),r=o(84619),i=o(9291),l=o(85893);const s={[r.lo.ExtraSmall]:{height:14,fontSize:12,margin:"0 4px 0 0"},[r.lo.Small]:{height:18,fontSize:12,margin:"0 6px 6px 0"},[r.lo.Medium]:{height:21,fontSize:14,margin:"0 12px 6px 0"},[r.lo.Inline]:{height:21,fontSize:14,margin:"0 12px 0 0"},[r.lo.Large]:{height:24,fontSize:16,margin:"0 8px 8px 0"}};const a=function(e){window.__c={n:"BlockPropertyValueTokenMore"};const{count:t,format:o,fixedHeight:r,style:a,isCompact:c}=e,{margin:u,height:d,fontSize:p}=s[o],y=(0,n.yK)((e=>({wrapper:{display:"flex",alignItems:"center",lineHeight:1.2,borderRadius:4,fontSize:p,margin:u,color:e.mediumTextColor,...r&&{height:d},...a},compact:{whiteSpace:"nowrap"}})),[p,d,r,u,a]);return(0,l.jsx)("div",{style:y.wrapper,children:c?(0,l.jsx)("span",{style:y.compact,children:(0,l.jsx)(i.FormattedMessage,{defaultMessage:"+{thinSpace}{moreItemsCount}",id:"database.tokens.moreItems.message",values:{moreItemsCount:t,thinSpace:(0,l.jsx)("span",{children:" "})}})}):(0,l.jsx)("span",{children:(0,l.jsx)(i.FormattedMessage,{defaultMessage:"{relationMoreItemsCount} more…",id:"database.relationPropertyValue.moreItems.message",values:{relationMoreItemsCount:t}})})})}},39694:(e,t,o)=>{o.d(t,{Z:()=>b});var n=o(67294),r=o(480),i=o(24405),l=o(18955),s=o(75553),a=o(9291),c=o(43664),u=o(80402),d=o(59183),p=o(66890),y=o(33929),m=o(73063),f=o(26388),h=o(8606),S=o(78030),x=o(85893);function b(e){window.__c={n:"CopyButton"};const{store:t,schema:o,property:a,style:b,format:g}=e,w=(0,r.O7)(),C=(0,i.Fg)(),_=(0,p.DK)(),{isEmpty:P,propertySchema:k,isReadOnly:R}=(0,n.useContext)(h.O);if(void 0===k||P||w.device.isMobile&&!1===R||"checkbox"===(0,l.z6)(k))return null;const j=g===S.C.Table,M=y.default.formatMessage(v.copy);return(0,x.jsx)(f.ZP,{renderTooltip:()=>M,render:e=>(0,x.jsx)("div",{onClick:()=>{let e;j&&(e=d.Z.getState(),u.MO()),c.r({environment:w,theme:C,store:t,schema:o,property:a,collectionContextStore:_}),j&&e&&d.Z.setState(e)},style:b,...e,children:(0,x.jsx)(m.Z,{ariaLabel:M,hasBackground:!0,icon:s.U,showShadow:!0})})})}const v=(0,a.defineMessages)({copy:{defaultMessage:"Copy to Clipboard",id:"database.copyButton.copyToClipboard"}})},24118:(e,t,o)=>{o.d(t,{Ae:()=>u,Am:()=>h,M$:()=>m,Sm:()=>d,bb:()=>f});var n=o(67294),r=o(92996),i=o(35011),l=o(80951),s=o(42875),a=o(33929),c=o(77080);const u=["last_edited_by","created_by","last_edited_time","created_time","auto_increment_id","location"],d=e=>!e||u.includes(e.type),p=(r.b0.Dates,{[r.b0.Dates]:{propertyId:r.b0.Dates,gateCheck:()=>c.default.checkGate("recurring_sprints"),validationCheck:e=>{const{collectionStore:t}=e,o=t.getPropertyMapping(),n=null==o?void 0:o[r.b0.StatusV2];return Boolean(n)}}}),y={date:[r.b0.Dates]},m=e=>{const{collectionStore:t,property:o,propertySchema:n}=e;if(!n)return!0;const r=y[n.type]??[];for(const i of r){const e=p[i];if(e.gateCheck&&!e.gateCheck()||!e.validationCheck({collectionStore:t}))continue;const n=t.getPropertyMapping(),r=null==n?void 0:n[e.propertyId];if(o===e.propertyId||o===r)return!0}return!1};function f(e){const{store:t,schema:o,property:n,userId:r}=e,c=o[n],u=null==c?void 0:c.type;return"checkbox"!==u&&"button"!==u&&"checkbox"!==(0,i.mm)(c)&&(!t.isDefined()||l.wV({block:t.getModel(),property:n,schema:o,getRecordModel:t.getRecordModel,userId:r,userTimeZone:(0,s.r)(),intl:a.default.getIntl()}))}function h(e,t){let{store:o,property:r,format:i,onClick:l,collectionStore:s,blockPropertyValueOverlayStore:a,disableHorizontalEdgeScroll:c}=e;return(0,n.useMemo)((()=>({store:o,property:r,format:i,onClick:l,collectionStore:s,blockPropertyValueOverlayStore:a,disableHorizontalEdgeScroll:c,isStatusCheckbox:null==t?void 0:t.isStatusCheckbox})),[a,s,c,i,null==t?void 0:t.isStatusCheckbox,l,r,o])}},53876:(e,t,o)=>{o.d(t,{A2:()=>P,Ac:()=>u,RQ:()=>j,ch:()=>g,e4:()=>R,sf:()=>C,uo:()=>M,z6:()=>a});var n=o(67294),r=o(480),i=o(84619),l=o(97880),s=o(78030);const a="14px",c="12px",u=1.5,d=21,p=18,y=32,m=34,f=30,h=28,S=30,x=32,b=24,v=24,g=24,w=30,C={[s.C.Table]:{default:"6px 8px",text:"5px 8px",checkbox:"8px",button:"4px 8px"},[s.C.Page]:{default:"7px 8px",text:"6px 8px",checkbox:"9px 8px",button:"5px 8px"},[s.C.CompactPage]:{default:"5px 6px",text:"4px 8px",token:"5px 6px",checkbox:"7px 6px",button:"3px 6px"},[s.C.Board]:{default:"5px",text:"5px",checkbox:"5px",button:"4px"}},_=["title","text","email","phone_number","number","url","date","created_time","last_edited_time","auto_increment_id"];function P(e){return _.includes(e)}const k=["button","file"];function R(e){return k.includes(e)}const j={[i.lo.Small]:{columnGap:6,rowGap:4},[i.lo.Medium]:{columnGap:8,rowGap:6},[i.lo.Inline]:{columnGap:6,rowGap:4}};function M(e){let{shouldSetCellHeight:t,format:o,shouldWrap:_,isLast:P,disabled:k,locked:R,showIfEmpty:M,isInHomeWidget:B}=e;const{isPhone:T}=(0,r.Fy)();return(0,n.useMemo)((()=>{switch(o){case s.C.Table:return{buttonStyle:{display:"block",fontSize:a,overflow:"clip",width:"100%",whiteSpace:_?"normal":"nowrap",height:t?y:void 0,minHeight:y,cursor:k||R?"default":"pointer",padding:C[s.C.Table].default},buttonHoveredStyle:{background:"unset"},buttonPressedStyle:{background:"unset"},textStyle:{lineHeight:u,whiteSpace:_?"pre-wrap":"nowrap",wordBreak:_?"break-word":"normal"},tokenWrapStyle:{display:"flex",flexWrap:_?"wrap":"nowrap",...j[i.lo.Medium]},textLineHeight:d,sizing:"default",tokenFormat:i.lo.Medium};case s.C.GalleryView:return{buttonStyle:{display:"flex",overflow:"hidden",alignItems:"center",borderRadius:5,margin:"0 6px 2px 6px",padding:"0 5px",fontSize:T?a:c,minHeight:v,whiteSpace:_?"normal":"nowrap",minWidth:M?"auto":"fit-content",width:M?"auto":"fit-content"},textStyle:{lineHeight:u,whiteSpace:_?"pre-wrap":"nowrap",wordBreak:_?"break-word":"normal",overflow:"hidden"},tokenWrapStyle:{display:"flex",minWidth:0,flexShrink:0,flexWrap:_?"wrap":"nowrap",width:_?"100%":void 0,...j[T?i.lo.Medium:i.lo.Small]},textLineHeight:T?d:p,sizing:T?"default":"small",tokenFormat:T?i.lo.Medium:i.lo.Small};case s.C.Board:return{buttonStyle:{display:"flex",overflow:"hidden",alignItems:"center",borderRadius:5,fontSize:c,margin:"0 6px 2px 6px",padding:C[s.C.Board].default,minHeight:h,whiteSpace:_?"normal":"nowrap",width:M?"auto":"fit-content"},textStyle:{lineHeight:u,whiteSpace:_?"pre-wrap":"nowrap",wordBreak:_?"break-word":"normal"},tokenWrapStyle:{display:"flex",flexWrap:_?"wrap":"nowrap",...j[i.lo.Small]},textLineHeight:p,sizing:"small",tokenFormat:i.lo.Small};case s.C.RelationSection:return{buttonStyle:{display:"inline-flex",fontSize:c,overflow:"hidden",alignItems:"center",marginLeft:0,minHeight:x,padding:"0 8px",borderRadius:5},tokenWrapStyle:{display:"flex",minWidth:0,...j[i.lo.Small]},textLineHeight:p,sizing:"small",tokenFormat:i.lo.Small};case s.C.Relation:return{buttonStyle:{fontSize:c,overflow:"hidden",alignItems:"center",padding:"0 4px",borderRadius:5,display:"flex",marginLeft:T?0:8,marginRight:T?8:0,height:b,minWidth:20},textStyle:{lineHeight:u,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},tokenWrapStyle:{display:"flex",minWidth:0,...j[i.lo.Small]},textLineHeight:p,sizing:"small",tokenFormat:i.lo.Small};case s.C.ListView:return{buttonStyle:{fontSize:c,overflow:"hidden",alignItems:"center",padding:"0 6px 0 8px",borderRadius:5,display:"flex",marginLeft:T?0:2,marginRight:T?8:0,minHeight:S,minWidth:20,...B?{maxWidth:"fit-content",flex:1}:{}},textStyle:{lineHeight:u,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},tokenWrapStyle:{display:"flex",minWidth:0,...j[i.lo.Inline]},textLineHeight:p,sizing:"small",tokenFormat:i.lo.Inline};case s.C.Page:return{buttonStyle:{fontSize:a,overflow:"hidden",display:"inline-block",borderRadius:4,width:"100%",minHeight:m,padding:C[s.C.Page].default},textStyle:{lineHeight:u,wordBreak:"break-word",whiteSpace:"pre-wrap"},tokenWrapStyle:{display:"flex",flexWrap:"wrap",...j[i.lo.Medium]},textLineHeight:d,sizing:"default",tokenFormat:i.lo.Medium};case s.C.Timeline:return{buttonStyle:{display:"flex",alignItems:"center",fontSize:c,marginRight:P?0:10},buttonHoveredStyle:{background:"unset"},buttonPressedStyle:{background:"unset"},textStyle:{lineHeight:u,wordBreak:"break-word",whiteSpace:"nowrap"},tokenWrapStyle:{display:"flex",minWidth:0,...j[i.lo.Small]},textLineHeight:p,sizing:"small",tokenFormat:i.lo.Inline};case s.C.Calendar:return{buttonStyle:{fontSize:c,display:"flex",alignItems:"center",height:g,whiteSpace:"nowrap",width:"100%"},textStyle:{lineHeight:u,whiteSpace:"nowrap",overflow:"hidden"},tokenWrapStyle:{display:"flex",flexShrink:0,flexWrap:"nowrap",...j[i.lo.Small]},textLineHeight:p,sizing:"small",tokenFormat:i.lo.Small};case s.C.CompactPage:return{buttonStyle:{fontSize:a,overflow:"hidden",alignItems:"center",borderRadius:4,display:"flex",width:"100%",minHeight:f,padding:C[s.C.CompactPage].default},textStyle:{lineHeight:u,wordBreak:"break-word",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},tokenWrapStyle:{display:"flex",flexWrap:"nowrap",overflow:"hidden",alignItems:"center",...j[i.lo.Medium]},textLineHeight:d,sizing:"default",tokenFormat:i.lo.Medium};case s.C.Mini:return{buttonStyle:{fontSize:a,overflow:"hidden",alignItems:"center",borderRadius:4,display:"flex",padding:"0 6px",minWidth:0,height:w},textStyle:{lineHeight:u,wordBreak:"break-word",whiteSpace:"nowrap",textOverflow:"ellipsis"},tokenWrapStyle:{display:"flex",flexWrap:"nowrap",overflow:"hidden",alignItems:"center",...j[i.lo.Medium]},textLineHeight:d,sizing:"default",tokenFormat:i.lo.Medium};case s.C.PropertyModule:return{};default:(0,l.t1)(o)}}),[k,o,B,P,T,R,t,_,M])}}}]);