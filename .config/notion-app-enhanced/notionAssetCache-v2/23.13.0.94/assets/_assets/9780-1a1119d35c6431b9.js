"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[9780],{66957:(e,t,a)=>{a.d(t,{Z:()=>u});var s=a(67294),n=a(480),r=a(86628),o=a(24405),i=a(87279),d=a(89728),l=a(85893);function c(e){let{tabs:t,selectedIndex:a,onChange:c,separatorIndexes:u,right:g,style:m,rightStyle:p,tabStyle:h,tabTitleStyle:f,tabBorderStyle:x,selectedTabStyle:b,readOnly:v,hideTabBorder:S}=e;window.__c={n:"TabBarMenuItem"};const w=(0,s.useContext)(i.Xp),{device:y,WindowSizeStore:C}=(0,n.O7)(),{safePaddingLeft:j,safePaddingRight:I}=(0,r.VK)((()=>({safePaddingLeft:C.getSafePaddingLeftCSS(16),safePaddingRight:C.getSafePaddingRightCSS(16)})),[C]),M=(0,o.yK)((e=>{const t={paddingTop:6,paddingBottom:6,whiteSpace:"nowrap",minWidth:0,flexShrink:0,color:e.mediumTextColor,...h},a=`inset 0 -1px 0 ${e.regularDividerColor}`,s=w.menuType===i.og.Popup,n={fontSize:16,paddingTop:2,paddingLeft:s?16:j,paddingRight:s?16:I,zIndex:2,height:44,background:e.popoverBackground};return{container:{overflowY:"visible",overflowX:"auto",display:"flex",width:"100%",position:"relative",boxShadow:S?void 0:a,...y.isMobile?n:{fontSize:14,paddingLeft:8,paddingRight:8,zIndex:1},...m},separator:{display:"inline-flex",alignItems:"center",margin:"0 4px",paddingBottom:4,whiteSpace:"nowrap",minWidth:0,flexShrink:0,color:e.regularDividerColor},mobile:{},tab:t,selectedTab:{...t,position:"relative",color:e.regularTextColor,...b},border:{borderBottom:`2px solid ${e.regularTextColor}`,position:"absolute",bottom:0,left:8,right:8,...x},rightContainer:{flexGrow:1,display:"flex",alignItems:"center",justifyContent:"flex-end",color:e.mediumTextColor,...p}}}),[w.menuType,y.isMobile,p,j,I,b,m,x,h,S]);return(0,l.jsxs)("div",{className:"hide-scrollbar",style:M.container,children:[t.map(((e,t)=>{const n=t===a;return(0,l.jsxs)(s.Fragment,{children:[(0,l.jsxs)("div",{style:n?M.selectedTab:M.tab,children:[(0,l.jsx)(d.Z,{style:f,onClick:()=>c(t),disabled:v,mobileFeedback:y.isMobile,children:e}),n&&(0,l.jsx)("div",{style:M.border})]},`tabButton-${t}`),u&&u.includes(t)&&(0,l.jsx)("div",{style:M.separator,className:"notranslate",children:"|"},`${t}-separator`)]},t)})),g&&(0,l.jsx)("div",{style:M.rightContainer,children:g})]})}const u=s.memo(c)},79921:(e,t,a)=>{a.d(t,{v:()=>r});a(67294);var s=a(24405),n=a(85893);function r(e){let{left:t,right:a}=e;window.__c={n:"ConsoleContainer"};const r=(0,s.yK)((e=>({grid:{display:"grid",gridTemplateColumns:"250px 1fr"},leftColumnFixed:{position:"relative",boxSizing:"border-box",maxHeight:"100vh",overflow:"auto"},rightColumn:{position:"relative",background:e.contentBackground,boxSizing:"border-box",maxHeight:"100vh",overflow:"auto"}})),[]);return(0,n.jsxs)("div",{style:r.grid,children:[(0,n.jsx)("div",{style:r.leftColumnFixed,children:t}),(0,n.jsx)("div",{style:r.rightColumn,children:a})]})}},84880:(e,t,a)=>{a.d(t,{g:()=>l,n:()=>c});var s=a(67294),n=a(480),r=a(84747),o=a(54642),i=a(68117),d=a(85893);const l=(0,s.createContext)({spaceIds:[]});function c(e){let{children:t,organizationId:a}=e;window.__c={n:"OrganizationDataProvider"};const c=(0,n.O7)(),[u,g]=(0,s.useState)([]),{updateCacheWithRecordMap:m}=(0,s.useContext)(i.V);return(0,r.Z)((async()=>{const e=await o.getSpacesInOrganization(c,{organizationId:a});"success"===e.type&&(g(e.data.spaceIds),m({data:e.data}))})),(0,d.jsx)(l.Provider,{value:{spaceIds:u},children:t})}},86631:(e,t,a)=>{a.d(t,{Z:()=>f});a(67294);var s=a(86628),n=a(24405),r=a(82990),o=a(9291),i=a(50659),d=a(80444),l=a(11066),c=a(61519),u=a(69219),g=a(45653),m=a(82162),p=a(14694),h=a(85893);function f(e){let{items:t}=e;window.__c={n:"BaseSidebar"};const a=(0,n.yK)((e=>({container:{background:e.sidebarBackground,boxShadow:e.sidebarBoxShadow,paddingBlock:4,width:"100%",height:"100vh",display:"flex",flexDirection:"column",gap:2},itemButton:{fontWeight:r.Z.fontWeight.medium,color:e.regularTextColor,...(0,i.G$)({isMobile:!1})},itemIcon:{fill:e.mediumIconColor,width:18},selectedItemIcon:{fill:e.regularIconColor,width:18},selectedItemButton:{background:e.buttonHoveredBackground},sidebarItemContainer:{display:"flex",alignItems:"center",justifyContent:"flex-start",flexDirection:"row"},divider:{color:e.lightDividerColor}})),[]);return(0,h.jsxs)("div",{style:a.container,children:[(0,h.jsx)(x,{}),(0,h.jsx)(c.Z,{size:1,dividerColor:a.divider.color}),t.map((e=>{const t=e.isSelected?{...a.itemButton,...a.selectedItemButton}:a.itemButton,s=e.isSelected?a.selectedItemIcon:a.itemIcon;return(0,h.jsx)(l.Z,{style:t,children:(0,h.jsx)(p.Z,{style:a.sidebarItemContainer,left:e.icon(s),onClick:e.onClick,children:e.name})},e.id)}))]})}function x(){window.__c={n:"UserLoggedInSection"};const e=(0,o.useIntl)(),t=(0,n.yK)((e=>({container:{padding:"8px 16px 4px"},iconStyle:{color:e.lightTextColor,fontWeight:500},preamble:{display:"block",fontSize:12,fontWeight:500,color:e.lightTextColor}})),[]),a=(0,s.VK)((()=>d.default.state.currentUserStore),[]),r=(0,s.VK)((()=>{const t=d.default.state.currentUserStore;if(t)return{userName:t.getFullName(e),userEmail:t.getEmail()}}),[e]);return(0,h.jsxs)("div",{style:t.container,children:[(0,h.jsx)("div",{style:t.preamble,children:"Logged in as"}),a&&r?(0,h.jsx)(u.i,{useThinTitle:!0,title:r.userName,byline:r.userEmail,iconSize:40,icon:(0,h.jsx)(g.Z,{size:40,userStore:a,iconStyle:t.iconStyle})}):(0,h.jsx)(m.L,{iconSize:40})]})}},82909:(e,t,a)=>{a.d(t,{eT:()=>ss,ow:()=>ns,QV:()=>rs,GF:()=>os});var s=a(67294),n=a(83176),r=a(82114),o=a(69628),i=a(93108),d=a(47409),l=a(18442),c=a(62397),u=a(56996),g=a(16001),m=a(26774),p=a(9291),h=a(480),f=a(61149),x=a(12066),b=a(97880),v=a(8055),S=(a(57658),a(86628)),w=a(24405),y=a(15047),C=a(82990),j=a(33929),I=a(79797),M=a(66994),k=a(33602),z=a(28608),U=a(68117),T=a(84880),F=a(19981),A=a(66466),L=a(25651),O=a(29851),R=a(2356),_=a(37612),P=a(97608),Z=a(81918),N=a(54642),B=a(47307),E=a(64964),V=a(33954),K=a(64369),D=a(7406),H=a(72126);const W={managedUsers:[],filters:{query:"",multiFactorStatus:void 0,workspaceId:void 0},numPagesLoaded:0,hasNextPage:!0,paginationToken:void 0,loading:!1,error:void 0};function q(e){let{organizationStore:t,userStatus:a}=e;const n=(0,h.O7)(),[r,o]=(0,s.useState)(W),i=(0,s.useRef)(r.filters),d=(0,S.VK)((()=>t.getEmailDomains()),[t]),l=(0,s.useCallback)((async e=>{let t=r.loading,s=r.error,l=r.hasNextPage,c=r.paginationToken;if(e.restartSearch&&(o((e=>({...W,filters:e.filters}))),t=W.loading,s=W.error,l=W.hasNextPage,c=W.paginationToken),l&&!t&&!s){o((e=>({...e,loading:!0}))),i.current=r.filters;try{var u;const e=await N.getManagedUsers(n,{query:r.filters.query,multiFactorStatus:r.filters.multiFactorStatus,workspaceId:r.filters.workspaceId,paginationToken:c,userStatus:a,emailDomains:d});if(Z.HH(n,{filters:{multiFactorStatus:r.filters.multiFactorStatus,workspaceId:r.filters.workspaceId},query_length:(null===(u=r.filters.query)||void 0===u?void 0:u.length)??0,current_page:c,user_status:a}),"failed"===e.type)throw e.error;const t=e.data.nextPaginationToken,s=e.data.results;o((e=>{const a=[...e.managedUsers],n=new Set(e.managedUsers.map((e=>e.userId)));for(const t of s)n.has(t.userId)||a.push(t);return{...e,managedUsers:a,loading:!1,error:void 0,numPagesLoaded:e.numPagesLoaded+1,paginationToken:t,hasNextPage:Boolean(t)}}))}catch(g){const e=(0,D.tg)(g);o((t=>({...t,loading:!1,error:e})))}}}),[n,r.loading,r.error,r.hasNextPage,r.paginationToken,r.filters,a,d]);(0,s.useEffect)((()=>{H.Xy(i.current,r.filters)||l({restartSearch:!0})}),[r.filters,l]);const c=(0,s.useCallback)((()=>l({restartSearch:!1})),[l]),u=(0,s.useCallback)((e=>{o((t=>({...t,filters:{...t.filters,...e}})))}),[]),g=(0,s.useCallback)(((e,t)=>{o((a=>({...a,managedUsers:a.managedUsers.map((a=>a.userId===e?{...a,workspaces:a.workspaces.filter((e=>e.id!==t))}:a))})))}),[]),m=(0,s.useCallback)((e=>{o((t=>({...t,managedUsers:[...t.managedUsers,e]})))}),[]),p=(0,s.useCallback)((e=>{o((t=>({...t,managedUsers:t.managedUsers.filter((t=>t.userId!==e))})))}),[]);return{managedUsers:r.managedUsers,filters:r.filters,loading:r.loading,error:r.error,removeWorkspaceFromUser:g,addUserToManagedUsers:m,removeUserFromManagedUsers:p,setFilters:u,hasNextPage:r.hasNextPage,loadNextPage:c}}var $=a(85893);let G=function(e){return e[e.NotSuspended=0]="NotSuspended",e[e.Suspended=1]="Suspended",e}({});function Q(e){switch(e){case G.Suspended:return"suspended";case G.NotSuspended:return"notSuspended";default:(0,b.t1)(e)}}var J=a(22686),X=a(93667);function Y(e){let{selectedAccountStatus:t,setSelectedAccountStatus:a}=e;return(0,$.jsx)(X.u,{pillTitle:(0,$.jsx)(p.FormattedMessage,{id:"managedAccounts.table.filters.accountStatus.title",defaultMessage:"Account status"}),pillIcon:J.f,selectedItem:t,setSelectedItem:a,items:ee})}const ee=[{key:"active",value:"active",title:(0,$.jsx)(p.FormattedMessage,{id:"managedAccounts.table.filters.accountStatus.active",defaultMessage:"Active"}),wrapCaption:!0},{key:"suspended",value:"suspended",title:(0,$.jsx)(p.FormattedMessage,{id:"managedAccounts.table.filters.accountStatus.suspended",defaultMessage:"Suspended"}),wrapCaption:!0}];var te=a(44495),ae=a(40394),se=a(71291),ne=a(53695),re=a(26388),oe=a(55255),ie=a(58720),de=a(52498),le=a(82162),ce=a(19889),ue=a(20454),ge=a(69219),me=a(45653);const pe=28;function he(e){let{userId:t}=e;window.__c={n:"UserSummary"};const a=(0,p.useIntl)(),s=(0,h.O7)(),n=(0,w.yK)((e=>({iconStyle:{color:e.lightTextColor,fontWeight:C.Z.fontWeight.medium}})),[]),r=(0,S.VK)((()=>{const e=new ue.U(s,{table:ce.KJ,id:t});return{userStore:e,isReady:e.isReady(),userName:e.getDisplayName(a),userEmail:e.getEmail()}}),[s,t,a]);return null!=r&&r.isReady?(0,$.jsx)(ge.i,{useThinTitle:!0,title:r.userName,byline:r.userEmail,icon:(0,$.jsx)(me.Z,{size:pe,userStore:r.userStore,iconStyle:n.iconStyle})}):(0,$.jsx)(fe,{})}function fe(e){window.__c={n:"LoadingUserSummary"};const t=(0,w.yK)((()=>({icon:{borderRadius:"100%",height:e.iconSize??pe,width:e.iconSize??pe,marginLeft:-4}})),[e.iconSize]);return(0,$.jsx)(ge.H,{includeByline:!0,includeIcon:!0,iconStyles:t.icon})}var xe=function(e){return e.ManagedUser="managed-user",e.Loading="loading",e}(xe||{});const be={paddingInline:8},ve={marginLeft:4,height:14,width:14,opacity:.5},Se={id:"user",headerTitle:(0,$.jsx)(p.FormattedMessage,{id:"managedAccounts.table.user",defaultMessage:"Users"}),renderCell:e=>e.type===xe.ManagedUser?(0,$.jsx)(he,{userId:e.managedUser.userId}):(0,$.jsx)(le.L,{}),widthData:{width:70},sortable:!1},we={id:"access",headerTitle:(0,$.jsx)("span",{style:be,children:(0,$.jsx)(p.FormattedMessage,{id:"managedAccounts.table.access",defaultMessage:"Workspaces"})}),renderCell:e=>e.type===xe.ManagedUser?(0,$.jsx)(ie.m,{workspaceSummaries:e.managedUser.workspaces}):(0,$.jsx)(ne.z,{}),widthData:{width:60},sortable:!1},ye={id:"lastActive",headerTitle:(0,$.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start"},children:[(0,$.jsx)(p.FormattedMessage,{id:"managedAccounts.table.lastActive",defaultMessage:"Last active"}),(0,$.jsx)(re.ZP,{render:e=>(0,$.jsx)("div",{...e,children:(0,te.D)(ve)}),renderTooltip:()=>(0,$.jsx)(p.FormattedMessage,{id:"managedAccounts.table.lastActive.tooltip",defaultMessage:"This may be delayed by several hours."})})]}),renderCell:e=>e.type===xe.ManagedUser?(0,$.jsx)(oe.B,{lastActiveAt:e.managedUser.lastActiveAt}):(0,$.jsx)(se.I,{}),widthData:{width:60},sortable:!1},Ce={id:"menu",headerTitle:null,renderCell:e=>e.type===xe.ManagedUser?(0,$.jsx)(de.G,{managedUser:e.managedUser,managedUserActionSections:e.managedUserActionSections}):null,widthData:{width:15},sortable:!1,hasClickableContents:!0},je=[Se,{id:"accountStatus",headerTitle:(0,$.jsx)("span",{style:be,children:(0,$.jsx)(p.FormattedMessage,{id:"organization.managedAccounts.table.accountStatus",defaultMessage:"Account status"})}),renderCell:e=>null,widthData:{width:60},sortable:!1,hasClickableContents:!0},we,ye,Ce],Ie=[{id:"1",isClickable:!1,type:xe.Loading},{id:"2",isClickable:!1,type:xe.Loading},{id:"3",isClickable:!1,type:xe.Loading}];function Me(e){let{managedUsers:t,loadMoreManagedUsers:a,onEditDetails:s,loading:n,managedUserActionSections:r}=e;window.__c={n:"ManagedAccountsTable"};const o=t.map((e=>({id:e.userId,type:xe.ManagedUser,managedUser:e,isClickable:!0,managedUserActionSections:r}))),i=(0,w.yK)((e=>(0,ae.b)({columnRenderInfo:je,theme:e,containerMarginTop:0})),[]);const d=n?[...o,...Ie]:o;return(0,$.jsx)($.Fragment,{children:(0,$.jsx)(ae.D,{hideHeaderRowPadding:!0,showRowBorders:!0,columnRenderInfo:je,rows:d,onRowClick:function(e){e.type===xe.ManagedUser&&s(e.managedUser)},renderNoRowsComponent:()=>(0,$.jsx)(ke,{loading:n}),styles:i,onLoadMore:a})})}function ke(e){window.__c={n:"EmptyState"};const t=(0,w.yK)((()=>({text:{marginTop:15,marginBottom:40,textAlign:"center"}})),[]);return(0,$.jsx)(K.Z,{isSmall:!0,style:t.text,children:!e.loading&&(0,$.jsx)(p.FormattedMessage,{id:"managedAccounts.table.empty",defaultMessage:"No users found."})})}const ze=(0,p.defineMessages)({placeholder:{id:"identityProvisioningSettings.managedUsers.searchInput.placeholder",defaultMessage:"Search name, email, or user ID"}});function Ue(e){let{organizationStore:t}=e;window.__c={n:"ManagedAccountsTableSubTab"};const a=(0,h.O7)(),n=(0,w.yK)((e=>({link:{fontSize:14,fontWeight:400,color:e.mediumTextColor,textDecoration:"none"},title:{marginTop:21,fontWeight:C.Z.fontWeight.semibold,fontSize:17,display:"flex",justifyContent:"flex-start",alignItems:"center"},byline:{fontSize:14,fontWeight:C.Z.fontWeight.regular,color:e.mediumTextColor,paddingBottom:20},count:{marginLeft:4,opacity:.5,fontWeight:400},tabBarMenu:{margin:"12px 0 0",boxShadow:"none"},filters:{display:"flex",justifyContent:"flex-start",alignItems:"center",width:"100%",margin:"0 auto 12px"}})),[]),{managedUsers:r,filters:o,loadNextPage:i,setFilters:d,loading:l,selectedTab:c,onOpenDetailsModal:u,managedUserActionSections:g}=function(e){let{organizationStore:t}=e;const a=(0,h.O7)(),n=(0,p.useIntl)(),[r,o]=(0,s.useState)(),[i,d]=(0,s.useState)(G.NotSuspended),l=(0,S.VK)((()=>a.currentUser.id),[a]),c=(0,s.useCallback)(((e,t)=>{Z.JX(a,{user_status:Q(i),from:t}),o(e.userId)}),[a,i]),u=q({userStatus:"notSuspended",organizationStore:t}),g=q({userStatus:"suspended",organizationStore:t});let m;m=i===G.NotSuspended?u:g;const f=(0,s.useCallback)((async e=>{Z.rZ(a);const{accept:t}=await B.confirmUserActionV2({message:(0,$.jsx)(K.Z,{style:B.dialogStyles.title,children:(0,$.jsx)(p.FormattedMessage,{defaultMessage:"Suspend this user?",id:"identityAndProvisioning.managedUsers.table.menu.action.suspendUser.dialog.title"})}),acceptLabel:(0,$.jsx)(p.FormattedMessage,{defaultMessage:"Yes",id:"identityAndProvisioning.managedUsers.table.menu.action.suspendUser.dialog.acceptLabel"}),description:(0,$.jsx)(K.Z,{isMultiline:!0,isSecondaryColor:!0,children:(0,$.jsx)(p.FormattedMessage,{defaultMessage:"This user will not be able to log into Notion and their Notion integrations will stop working. They can be unsuspended at any time from the Managed Users dashboard.",id:"identityAndProvisioning.managedUsers.table.menu.action.suspendUser.dialog.description"})})});if(!t)return;const s=await N.updateUserSuspension(a,{userId:e.userId,suspend:!0});Z.rv(a),"failed"===s.type&&B.showErrorMessage((0,V.wf)(j.default.getIntl(),s)),g.addUserToManagedUsers(e),u.removeUserFromManagedUsers(e.userId)}),[a,g,u]),x=(0,s.useCallback)((async e=>{Z.NF(a);const{accept:s}=await B.confirmUserActionV2({message:(0,$.jsx)(K.Z,{style:B.dialogStyles.title,children:(0,$.jsx)(p.FormattedMessage,{defaultMessage:"Log out this user?",id:"identityAndProvisioning.managedUsers.table.menu.action.logoutUser.dialog.title"})}),acceptLabel:(0,$.jsx)(p.FormattedMessage,{defaultMessage:"Log out user",id:"identityAndProvisioning.managedUsers.table.menu.action.logoutUser.dialog.acceptLabel"}),description:(0,$.jsx)(K.Z,{isMultiline:!0,isSecondaryColor:!0,children:(0,$.jsx)(p.FormattedMessage,{id:"identityAndProvisioning.managedUsers.table.menu.action.logoutUser.dialog.description",defaultMessage:"You are about to log out this user from their current session. They will need to re-authenticate to log back into Notion."})})});if(!s)return;const n=await N.logoutManagedUsers(a,{organizationId:t.id,target:{type:P.J.User,userId:e.userId}});if(Z._m(a),"failed"===n.type)return B.showErrorMessage((0,V.wf)(j.default.getIntl(),n)),void E.oV({label:(0,$.jsx)(p.FormattedMessage,{id:"managedUsers.toastMessage.logout.failed",defaultMessage:"Failed to logged out user"})});E.oV({label:(0,$.jsx)(p.FormattedMessage,{id:"managedUsers.toastMessage.logout.success",defaultMessage:"Successfully logged out user"})})}),[a,t.id]),v=(0,s.useCallback)((async e=>{Z.Zm(a);const{accept:s}=await B.confirmUserActionV2({message:(0,$.jsx)(K.Z,{style:B.dialogStyles.title,children:(0,$.jsx)(p.FormattedMessage,{defaultMessage:"Reset password for this user?",id:"identityAndProvisioning.managedUsers.table.menu.action.forcePasswordReset.dialog.title"})}),acceptLabel:(0,$.jsx)(p.FormattedMessage,{id:"identityAndProvisioning.managedUsers.table.menu.action.forcePasswordReset.dialog.acceptLabel",defaultMessage:"Reset passwords for user"}),description:(0,$.jsx)(K.Z,{isMultiline:!0,isSecondaryColor:!0,children:(0,$.jsx)(p.FormattedMessage,{id:"identityAndProvisioning.managedUsers.table.menu.action.forcePasswordReset.dialog.description",defaultMessage:"You are about to reset the password for this user. This will also remove any 2-step verification settings they might have and they will be logged out of of their current session.{br}{br}This user will need to re-authenticate via their email the next time they attempt to log back into Notion, and they will be prompted to set a new password upon logging in.",values:{br:(0,$.jsx)("br",{})}})})});if(!s)return;const r=await N.resetPasswordsForManagedUsers(a,{organizationId:t.id,target:{type:P.J.User,userId:e.userId}});if(Z.vC(a),"failed"===r.type)return B.showErrorMessage((0,V.wf)(n,r)),void E.oV({label:(0,$.jsx)(p.FormattedMessage,{id:"managedUsers.toastMessage.forcePasswordReset.fail",defaultMessage:"Failed to reset password for user"})});E.oV({label:(0,$.jsx)(p.FormattedMessage,{id:"managedUsers.toastMessage.forcePasswordReset.success",defaultMessage:"Successfully reset password for user"})})}),[a,n,t.id]),w=(0,s.useCallback)((async e=>{const t=await N.updateUserSuspension(a,{userId:e.userId,suspend:!1});Z.Ci(a),"failed"===t.type&&B.deprecatedShowErrorMessage(t.error.message),g.removeUserFromManagedUsers(e.userId),u.addUserToManagedUsers(e)}),[a,g,u]),y=(0,s.useCallback)((async e=>{Z.P1(a,{user_status:Q(i)});const{accept:t}=await B.confirmUserActionV2({message:(0,$.jsx)(K.Z,{style:B.dialogStyles.title,children:(0,$.jsx)(p.FormattedMessage,{defaultMessage:"Delete this user?",id:"identityAndProvisioning.managedUsers.table.menu.action.deleteUser.dialog.title"})}),acceptLabel:(0,$.jsx)(p.FormattedMessage,{defaultMessage:"Yes",id:"identityAndProvisioning.managedUsers.table.menu.action.deleteUser.dialog.acceptLabel"}),description:(0,$.jsx)(K.Z,{isMultiline:!0,isSecondaryColor:!0,children:(0,$.jsx)(p.FormattedMessage,{defaultMessage:"This action cannot be undone. This will permanently delete the user's entire account. All private workspaces will be deleted, and they will be removed from all shared workspaces.",id:"identityAndProvisioning.managedUsers.table.menu.action.deleteUser.dialog.description"})})});if(!t)return;const s=await N.deleteManagedUser(a,{userId:e.userId});Z.j7(a,{user_status:Q(i)}),"failed"===s.type&&B.deprecatedShowErrorMessage(s.error.message),g.removeUserFromManagedUsers(e.userId),u.removeUserFromManagedUsers(e.userId)}),[a,i,g,u]),C=(0,s.useMemo)((()=>m.managedUsers.find((e=>{let{userId:t}=e;return t===r}))),[r,m.managedUsers]),I=(0,s.useMemo)((()=>{let e;const t={onClick:e=>c(e,"dropdown_menu"),icon:L.R,title:(0,$.jsx)(p.FormattedMessage,{id:"identityAndProvisioning.managedUsers.table.menu.action.userDetails",defaultMessage:"Edit details"})},a={onClick:e=>y(e),icon:_.y,title:(0,$.jsx)(p.FormattedMessage,{id:"identityAndProvisioning.managedUsers.table.menu.action.deleteUser",defaultMessage:"Delete user"}),isDestructive:!0};switch(i){case G.NotSuspended:e=[[t,{onClick:x,icon:A.S,title:(0,$.jsx)(p.FormattedMessage,{id:"identityAndProvisioning.managedUsers.table.menu.action.logout",defaultMessage:"Log out"})},{onClick:v,icon:O.z,title:(0,$.jsx)(p.FormattedMessage,{id:"identityAndProvisioning.managedUsers.table.menu.action.passwordReset",defaultMessage:"Reset password"})}],[{onClick:f,icon:F.V,title:(0,$.jsx)(p.FormattedMessage,{id:"identityAndProvisioning.managedUsers.table.menu.action.suspendUser",defaultMessage:"Suspend user"}),getDisabledState:e=>e.userId===l},a]];break;case G.Suspended:e=[[t],[{onClick:e=>w(e),icon:R.u,title:(0,$.jsx)(p.FormattedMessage,{id:"identityAndProvisioning.managedUsers.table.menu.action.unSuspendUser",defaultMessage:"Reactivate user"})},a]];break;default:(0,b.t1)(i)}return e.filter((e=>e.length>0))}),[c,l,i,y,f,w,x,v]);return{...m,selectedTab:i,setSelectedTab:d,selectedUser:C,managedUserActionSections:I,onOpenDetailsModal:c,onCloseDetailsModal:function(){o(void 0)}}}({organizationStore:t}),m=(0,s.useCallback)((e=>u(e,"row_click")),[u]),{organizationOwnerRecordCache:f}=(0,s.useContext)(U.V),{spaceIds:x}=(0,s.useContext)(T.g),v=(0,S.VK)((()=>{const e=[];for(const t in x)e.push(new I.H2(a,{id:t,table:y.bx},{inMemoryRecordCache:f}));return e.map((e=>{var t;return{id:e.id,name:e.getName(),createdTime:e.getCreatedTime(),memberCount:e.getUserMemberCount(),icon:null===(t=e.getIcon())||void 0===t?void 0:t.icon,subscriptionTier:e.getSubscriptionTier()}}))}),[a,f,x]);return(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(M.O,{mode:M.p.Button,query:o.query,setQueryFilter:e=>{d({query:e})},placeholderText:j.default.formatMessage(ze.placeholder)}),(0,$.jsxs)("div",{style:n.filters,children:[(0,$.jsx)(z.O,{selectedSpaceId:o.workspaceId,setSelectedSpaceId:e=>{d({workspaceId:e})},spaceData:v}),(0,$.jsx)(k.V,{selectedMfaMethod:o.multiFactorStatus,setSelectedMfaMethod:e=>{d({multiFactorStatus:e})}}),(0,$.jsx)(Y,{selectedAccountStatus:void 0,setSelectedAccountStatus:e=>{}})]}),(0,$.jsx)(Me,{managedUsers:r,loading:l,loadMoreManagedUsers:i,onEditDetails:m,managedUserActionSections:g},c)]})}var Te=a(27386);function Fe(e){let{children:t}=e;return(0,$.jsx)(Te.ZP,{getPaddingTopBottom:()=>36,contentPaddingLeftRight:24,children:t})}var Ae=a(23189),Le=a(66957);function Oe(e){let{children:t,title:a,headerRight:s}=e;window.__c={n:"SettingsConsoleHeader"};const n=_e(),r=t?{marginBottom:0,borderBottom:"none"}:{},o={...n.headingStyle,...r};return(0,$.jsxs)($.Fragment,{children:[(0,$.jsxs)(Ae.Z,{large:!0,style:o,children:[(0,$.jsx)("h1",{style:n.title,children:a}),s]}),t]})}function Re(e){let{tabConfig:t}=e;window.__c={n:"SettingsConsoleHeaderTabs"};const a=_e(),{tabs:s,currentTabName:n,updateTab:r}=t;return(0,$.jsx)(Le.Z,{tabs:s.map((e=>e.tab)),selectedIndex:s.findIndex((e=>e.name===n)),onChange:e=>{r(s[e].name)},style:a.tabsStyle})}function _e(){return(0,w.yK)((e=>({headingStyle:{marginBottom:16,paddingBottom:8,display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:`1px solid ${e.stroke.deemphasized}`},title:{fontSize:20,fontWeight:C.Z.fontWeight.medium,lineHeight:"150%",display:"flex",alignItems:"center",gap:0,margin:0},tabsStyle:{paddingLeft:0,paddingRight:0,marginTop:-6,marginBottom:14}})),[])}var Pe=a(61220);function Ze(e){let{organizationId:t}=e;const a=(0,h.O7)(),{organizationOwnerRecordCache:n}=(0,s.useContext)(U.V);return(0,S.VK)((()=>{if(t)return new I.Om(a,{table:Pe.V7,id:t},{inMemoryRecordCache:n})}),[a,t,n])}var Ne=function(e){return e.Settings="settings",e.ManagedAccounts="managed-accounts",e}(Ne||{});const Be=[{name:Ne.Settings,tab:(0,$.jsx)(p.FormattedMessage,{id:"settingsConsole.accounts.subTab.settings.title",defaultMessage:"Settings"})},{name:Ne.ManagedAccounts,tab:(0,$.jsx)(p.FormattedMessage,{id:"settingsConsole.accounts.subTab.table.title",defaultMessage:"Managed accounts"})}];function Ee(e){let{organizationId:t,subtab:a,queryParams:n}=e;window.__c={n:"OrganizationAccountsScene"};const r=(0,h.O7)(),o=(0,s.useMemo)((()=>function(e){switch(e){case Ne.Settings:return Ne.Settings;case Ne.ManagedAccounts:return Ne.ManagedAccounts;default:return Ne.Settings}}(a)),[a]),i=Ze({organizationId:t});if(!i)return null;return(0,$.jsx)(Fe,{children:(0,$.jsxs)(Oe,{title:(0,$.jsx)(p.FormattedMessage,{id:"settingsConsole.accounts.title",defaultMessage:"Accounts"}),children:[(0,$.jsx)(Re,{tabConfig:{tabs:Be,currentTabName:o,updateTab:function(e){v.c4({environment:r,url:(0,f.a5)({organizationId:t,tabRoute:x.C$,properties:{subtab:e},queryParams:n})})}}}),(0,$.jsx)(Ve,{currentTab:o,organizationStore:i})]})})}function Ve(e){switch(e.currentTab){case Ne.Settings:return(0,$.jsx)("div",{children:"accounts"});case Ne.ManagedAccounts:return(0,$.jsx)(Ue,{organizationStore:e.organizationStore});default:(0,b.t1)(e.currentTab)}}var Ke=a(24026),De=a(36591),He=a(73039);var We=a(80444),qe=a(34583),$e=a(52275),Ge=a(88359),Qe=a(31278),Je=a(14871);const Xe="";function Ye(e){let{organizationId:t,currentTabRoute:a,currentTabProperties:n,shouldShowOrganizationOption:r,selectedSpaceStore:o}=e;window.__c={n:"OrganizationSpaceFilter"};const i=(0,h.O7)(),{spaceIds:d}=(0,s.useContext)(T.g),{itemIcon:l,itemName:c}=function(e){const t=at(),{itemIcon:a,itemName:s}=(0,S.VK)((()=>{const a="Organization";return e?{itemIcon:(0,$.jsx)(Qe.Z,{disabled:!0,icon:e.getIcon(),isEmptyPage:!1,title:e.getName(),size:24,isLarge:!0}),itemName:e.getName()}:{itemIcon:(0,$.jsx)("div",{style:t.organizationIconContainer,children:(0,He.K)(t.organizationIcon)}),itemName:a}}),[e,t]);return{itemIcon:a,itemName:s}}(o),u=null==o?void 0:o.id,g=(0,w.yK)((()=>({container:{display:"inline-flex",width:"fit-content"}})),[]);(0,s.useEffect)((()=>{o&&(We.default.setState({...We.default.state,currentSpaceStore:o}),(0,qe.OR)({environment:i,spaceId:o.id}))}),[o,i]);const m=(0,s.useCallback)((e=>{if(!e)return void function(e,t,a){v.c4({environment:e,url:(0,f.a5)({organizationId:t,tabRoute:a})})}(i,t,a);const s=(0,f.a5)({organizationId:t,tabRoute:a,properties:n,queryParams:{"space-id":e}});v.c4({environment:i,url:s})}),[a,n,i,t]),p=(0,s.useMemo)((()=>r?[Xe,...d]:d),[d,r]);return(0,$.jsx)("div",{style:g.container,children:(0,$.jsx)(Je.Z,{items:p,getKey:H.yR,selectedItem:u,onSelect:m,renderItem:e=>{const t=e.value;return t===Xe?(0,$.jsx)(tt,{isSelected:!u,...e}):(0,$.jsx)(et,{spaceId:t,isSelected:u===t,...e})},renderOrigin:e=>(0,$.jsx)(Ge.Z,{focused:!1,icon:l,title:c,style:{fontSize:"inherit"},desktopIconStyle:{marginLeft:4,marginRight:0},...e})})})}function et(e){let{spaceId:t,isSelected:a,...n}=e;window.__c={n:"SpaceMenuItem"};const r=(0,h.O7)(),{organizationOwnerRecordCache:o}=(0,s.useContext)(U.V),i=at(),{icon:d,name:l}=(0,S.VK)((()=>{const e=new I.H2(r,{id:t,table:y.bx},{inMemoryRecordCache:o});return{icon:e.getIcon(),name:e.getName()}}),[t,o,r]);return(0,$.jsx)($e.Z,{title:l,right:a?(0,De.e)(i.checkIcon):null,icon:(0,$.jsx)(Qe.Z,{disabled:!0,icon:d,isEmptyPage:!1,title:l,size:24,isLarge:!0}),...n})}function tt(e){let{isSelected:t,...a}=e;window.__c={n:"OrganizationMenuItem"};const s=at();return(0,$.jsx)($e.Z,{title:"Organization",right:t?(0,De.e)(s.checkIcon):null,icon:(0,$.jsx)("div",{style:s.organizationIconContainer,children:(0,He.K)(s.organizationIcon)}),...a})}function at(){return(0,w.yK)((e=>({checkIcon:{width:14,height:14},organizationIconContainer:{width:23,height:23,display:"flex",alignItems:"center",justifyContent:"center"},organizationIcon:{width:18,height:18}})),[])}var st=a(84169),nt=a(24697),rt=a(12714),ot=a(18514),it=a(63296),dt=a(74523),lt=a(88149),ct=a(21697),ut=a(93502),gt=a(35238);function mt(e){let{spaceStore:t}=e;window.__c={n:"SpaceAnalyticsContent"};const a=(0,ut.U)({spaceId:t.id}),s=(0,ct.x)({spaceStore:t});return(0,$.jsx)(gt.Z,{spaceStore:t,teamStores:s,contentEngagement:a})}var pt=a(31303),ht=a(89426);function ft(e){let{spaceStore:t,isOrganizationOwner:a}=e;window.__c={n:"SpaceAnalyticsOverview"};const s=(0,S.VK)((()=>{var e;return null===(e=We.default.state.currentUserStore)||void 0===e?void 0:e.id}),[]),n=(0,pt.i)({spaceStore:t,userId:s,isOrganizationOwner:a}),r=(0,ut.U)({spaceId:t.id});return(0,$.jsx)(ht.Z,{spaceStore:t,contentEngagement:r,userEngagement:n,onUserTabFilterChange:()=>!1})}var xt=a(66673),bt=a(83726),vt=a(65552);function St(e){let{spaceStore:t,isOrganizationOwner:a}=e;window.__c={n:"SpaceAnalyticsUsers"};const n=(0,S.VK)((()=>{var e;return null===(e=We.default.state.currentUserStore)||void 0===e?void 0:e.id}),[]),{usersTabData:r,setFilters:o}=function(e){const t=(0,h.O7)(),[a,n]=(0,s.useState)(),{spaceStore:r}=e,o=(0,s.useRef)(!1),i=(0,xt.D9)(r.id),d=(0,s.useMemo)((()=>void 0!==i&&r.id!==i),[r.id,i]),l=(0,s.useCallback)((async e=>{const{currentSpaceStore:a,nextGraphFilter:s,nextTableFilter:r,nextSort:o}=e,i=await bt.qA({environment:t,spaceStore:a,nextGraphFilter:s,nextTableFilter:r,nextSort:o});n(i)}),[t]);(0,s.useEffect)((()=>{o.current&&!d||(o.current=!0,l({currentSpaceStore:r,nextGraphFilter:null==a?void 0:a.graphFilter,nextTableFilter:null==a?void 0:a.tableFilter,nextSort:null==a?void 0:a.userTableSort}))}),[l,d,r,a]);const c=(0,s.useCallback)((e=>{const{tableFilter:t,graphFilter:s}=e;l({currentSpaceStore:r,nextGraphFilter:s??(null==a?void 0:a.graphFilter),nextTableFilter:t??(null==a?void 0:a.tableFilter),nextSort:null==a?void 0:a.userTableSort})}),[l,a,r]);return{usersTabData:a,setFilters:c}}({spaceStore:t}),i=(0,ct.x)({spaceStore:t}),d=(0,pt.i)({spaceStore:t,userId:n,isOrganizationOwner:a});return(0,$.jsx)(vt.Z,{spaceStore:t,teamStores:i,usersTabData:r,userEngagement:d,onUserTabFilterChange:o})}const wt=[{name:Ke.x.Overview,tab:(0,$.jsx)(p.FormattedMessage,{id:"workspaceAnalyticsTabs.overview.title",defaultMessage:"Overview"})},{name:Ke.x.Users,tab:(0,$.jsx)(p.FormattedMessage,{id:"workspaceAnalyticsTabs.members.title",defaultMessage:"Members"})},{name:Ke.x.Content,tab:(0,$.jsx)(p.FormattedMessage,{id:"workspaceAnalyticsTabs.content.title",defaultMessage:"Content"})},{name:Ke.x.Search,tab:(0,$.jsx)(p.FormattedMessage,{id:"workspaceAnalyticsTabs.search.title",defaultMessage:"Search"})}];function yt(e){let{spaceStore:t,spacePicker:a,navigateToTab:n,currentTab:r,isOrganizationOwner:o}=e;window.__c={n:"SpaceAnalytics"};const i=(0,h.O7)(),d=(0,s.useCallback)((e=>{nt.nK(i,{tab:e}),n(e)}),[i,n]),l=(0,S.VK)((()=>o||Boolean(null==t?void 0:t.canAdmin())),[t,o]),c=wt.filter((e=>!(!l&&e.name!==Ke.x.Content)));return(0,$.jsxs)(Fe,{children:[(0,$.jsx)(Oe,{title:(0,$.jsx)(Mt,{spaceStore:t,spacePicker:a}),headerRight:(0,$.jsx)(It,{}),children:(0,$.jsx)(Re,{tabConfig:{tabs:c,currentTabName:r,updateTab:d}})}),(0,$.jsx)(Ct,{currentTab:r,spaceStore:t,isOrganizationOwner:o})]})}function Ct(e){const{currentTab:t,isOrganizationOwner:a,spaceStore:s}=e;switch(t){case Ke.x.Content:return(0,$.jsx)(mt,{spaceStore:s});case Ke.x.Overview:return(0,$.jsx)(ft,{spaceStore:s,isOrganizationOwner:a});case Ke.x.Users:return(0,$.jsx)(St,{spaceStore:s,isOrganizationOwner:a});case Ke.x.Search:return(0,$.jsx)(lt.Z,{spaceStore:s});default:(0,b.t1)(t)}}function jt(){window.__c={n:"DisclaimerTooltip"};const e=(0,w.yK)((()=>({helpInfo:{marginLeft:4}})),[]);return(0,$.jsx)(re.ZP,{placement:re.ug.Right,render:t=>(0,$.jsx)(dt.Z,{...t,href:(0,ot.UY)("guides.workspaceAnalytics"),analyticsFrom:"workspace_analytics_faq",style:e.helpInfo}),renderTooltip:()=>(0,$.jsx)(p.FormattedMessage,{id:"settings.workspaceAnalytics.dataDisclaimerTooltip",defaultMessage:"Data available from August 1, 2022 onwards"})})}function It(){window.__c={n:"HelpButton"};const e=(0,h.O7)(),t=(0,s.useCallback)((()=>{rt.D({environment:e,url:(0,ot.UY)("guides.workspaceAnalytics")})}),[e]);return(0,$.jsx)(it.Z,{isSmall:!0,onClick:t,icon:st.m,children:(0,$.jsx)(p.FormattedMessage,{id:"workspaceAnalytics.title.helpButton",defaultMessage:"Learn more"})})}function Mt(e){let{spaceStore:t,spacePicker:a}=e;window.__c={n:"Title"};const s=(0,S.VK)((()=>t.getCreatedTime()<16593264e5),[t]);return(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(p.FormattedMessage,{id:"settingsConsole.workspaceAnalytics.title",defaultMessage:"Workspace analytics for "}),a,s&&(0,$.jsx)(jt,{})]})}function kt(e){let{spaceId:t,organizationId:a,subtab:n,queryParams:r,tabRoute:o}=e;const i=(0,h.O7)(),{spaceIds:d}=(0,s.useContext)(T.g);(0,s.useEffect)((()=>{!t&&d.length>0&&v.c4({environment:i,url:(0,f.a5)({organizationId:a,tabRoute:o,properties:{subtab:n},queryParams:{...r,"space-id":d[0]}})})}),[i,t,a,d,n,r,o])}function zt(e){let{spaceId:t}=e;const a=(0,h.O7)(),{organizationOwnerRecordCache:n}=(0,s.useContext)(U.V),{spaceIds:r}=(0,s.useContext)(T.g);return(0,S.VK)((()=>{if(t&&r.includes(t))return new I.H2(a,{id:t,table:y.bx},{inMemoryRecordCache:n})}),[t,r,n,a])}function Ut(e){let{spaceId:t,organizationId:a,subtab:s,queryParams:n,tabRoute:r}=e;window.__c={n:"OrganizationAnalyticsScene"};const o=(0,h.O7)(),i=zt({spaceId:t});if(kt({spaceId:t,organizationId:a,subtab:s,queryParams:n,tabRoute:r}),!i||!t||!a)return null;return(0,$.jsx)(yt,{spaceStore:i,spacePicker:(0,$.jsx)(Ye,{organizationId:a,currentTabRoute:x.Zq,currentTabProperties:{subtab:s},selectedSpaceStore:i}),navigateToTab:e=>{v.c4({environment:o,url:(0,f.a5)({organizationId:a,tabRoute:x.Zq,properties:{subtab:e},queryParams:n})})},currentTab:Tt(s),isOrganizationOwner:!0})}function Tt(e){switch(e){case"content":return Ke.x.Content;case"search":return Ke.x.Search;case"users":return Ke.x.Users;default:return Ke.x.Overview}}var Ft=a(23399),At=a(81549),Lt=a(22326),Ot=a(53877),Rt=a(59730),_t=a(80085),Pt=a(77420),Zt=a(77907),Nt=a(49085);class Bt extends Nt.default{getInitialState(){return{auditLogPointer:void 0,allUserIds:new Set,allBotIds:new Set,removedUserIds:new Set,removedBotIds:new Set}}isUserOrBotRemoved(e){return Boolean(e&&(this.state.removedUserIds.has(e)||this.state.removedBotIds.has(e)))}}const Et=new Bt;class Vt extends Nt.default{getInitialState(){return{cachedResponses:{}}}getCursor(e,t,a){if(a<=1||!H.Xy(this.state.pointer,e))return;const s=(0,Lt.r)(t);if(this.state.filterStr!==s)return;const n=this.state.cachedResponses[a-1];return"success"===n.status?null==n?void 0:n.nextCursor:void 0}startLoading(e,t){this.updateResultHelper(e,t,{status:"loading"})}updateLoadedResult(e,t,a){this.updateResultHelper(e,t,{...a,status:"success",loadedAt:Date.now()})}updateError(e,t){this.updateResultHelper(e,t,{status:"error"})}updateResultHelper(e,t,a){const s=(0,Lt.r)(t);1!==t.pageNum&&H.Xy(this.state.pointer,e)&&this.state.filterStr===s?this.setState({pointer:e,filterStr:s,cachedResponses:{...this.state.cachedResponses,[t.pageNum]:{...a}}}):this.setState({pointer:e,filterStr:s,cachedResponses:{[t.pageNum||1]:{...a}}})}}const Kt=new Vt,Dt=(0,p.defineMessages)({loadCurrentAuditLogError:{id:"auditlog.error.loadCurrentAuditLogError",defaultMessage:"Failed to load audit logs"}}),Ht=async e=>{var t,a;const{environment:s,auditLogPointer:n}=e,r=Lt.Z.getState();Kt.startLoading(n,r);const{sortOrder:o,pageSize:i,pageNum:d}=r,l={limit:i,cursor:Kt.getCursor(n,r,d),filters:{timeRange:{starting:r.timeRange.starting?Ot.OQ.toUnixMs(r.timeRange.starting):void 0,ending:r.timeRange.ending?Ot.OQ.toUnixMs(r.timeRange.ending):void 0},...(null===(t=r.actors)||void 0===t?void 0:t.length)>0?{actors:r.actors}:void 0,...(null===(a=r.actions)||void 0===a?void 0:a.length)>0?{actions:r.actions}:void 0},sort:o||_t.NQ.CreatedNewest};n.table===y.bx?await Wt({environment:s,request:{...l,spaceId:n.id},auditLogPointer:n,filters:r}):n.table===Pe.V7?await Wt({environment:s,request:{...l,organizationId:n.id},auditLogPointer:n,filters:r}):(0,b.t1)(n.table)};async function Wt(e){const{environment:t,request:a,auditLogPointer:s,filters:n}=e,r=await N.searchAuditLog(t,a);if("success"===r.type)Kt.updateLoadedResult(s,n,r.data);else if(Kt.updateError(s,n),(0,Rt.Jx)(r.body)){const e=(0,V.wf)(j.default.getIntl(),r);B.showErrorMessage(e)}else B.showErrorMessage(j.default.formatMessage(Dt.loadCurrentAuditLogError))}const qt=async e=>{const{environment:t,parentStore:a}=e;if(!a)return void Et.reset();const s=Et.getState(),n={id:a.id,table:a.table};if(H.Xy(s.auditLogPointer,n)||Et.reset(),!n)return;let r;if(a.table===y.bx){const e=await Zt.deps.searchActions.loader();r=await e.searchSpaceActorIds({environment:t,membersOnly:!1})}else if(a.table===Pe.V7){var o;r={userIds:(null===(o=a.getModel())||void 0===o?void 0:o.getOwnerIds())||[],botIds:[]}}else(0,b.t1)(a);const i=await(async e=>{const{environment:t,auditLogPointer:a}=e;if(a.table===y.bx){const e=await N.getHistoricalAuditLogUsers(t,{spaceId:a.id});return"success"!==e.type?[]:e.data.results}if(a.table===Pe.V7){const e=await N.getHistoricalAuditLogUsers(t,{organizationId:a.id});return"success"!==e.type?[]:e.data.results}(0,b.t1)(a.table)})({environment:t,auditLogPointer:n}),d={auditLogPointer:n,allUserIds:new Set,allBotIds:new Set,removedUserIds:new Set,removedBotIds:new Set};for(const c of r.userIds)d.allUserIds.add(c);for(const c of r.botIds)d.allBotIds.add(c);for(const c of i)(l=c.actorId)!==Pt._H.id&&l!==ce.s$.id&&l!==ce.el.id||d.allUserIds.has(c.actorId)?c.actorType!==ce.KJ||d.allUserIds.has(c.actorId)?c.actorType!==Pt.cZ||d.allBotIds.has(c.actorId)||(d.allBotIds.add(c.actorId),d.removedBotIds.add(c.actorId)):(d.allUserIds.add(c.actorId),d.removedUserIds.add(c.actorId)):d.allUserIds.add(c.actorId);var l;Et.setState(d)};var $t=a(69651),Gt=a(86100),Qt=a(23096),Jt=a(8319),Xt=a(66897),Yt=a(27617),ea=a(74136),ta=a(97680);const aa=(0,p.injectIntl)((function(e){window.__c={n:"AuditLogActorFilter"};const{parentStore:t,auditLogHistoricalUserStore:a,selectedActors:n,onChange:r,intl:o}=e,i=(0,h.O7)(),[d,l]=s.useState(new Set(n.map(Yt.eW))),c=(0,$.jsx)(p.FormattedMessage,{id:"auditlogActorFilter.title",defaultMessage:"User"}),u={title:c,tokenInputPlaceholder:o.formatMessage({defaultMessage:"Search user...",id:"auditlogActorFilter.searchActor.placeholder"}),resultSectionTitle:o.formatMessage({defaultMessage:"Select users",id:"auditlogActorFilter.searchActor.resultsTitle"}),componentDebugName:"SearchActorFilter"};return(0,$.jsx)(Jt.Z,{mode:Jt.z.Pill,title:c,icon:J.f,iconStyles:{marginRight:2},items:Array.from(d),hasItemsSelected:(null==n?void 0:n.length)>0,onChange:e=>{l(new Set(e))},renderFooter:!0,allowApplyBatchSelection:!0,keepInputOnItemConfirm:!0,onMenuDismiss:function(e){"applyButton"!==e?function(){const e=n.map(Yt.eW);l(new Set(e))}():function(){const e=Array.from(d).map(Yt.Ij).filter((e=>Boolean(e)));r(e)}()},labelText:u,performRequest:e=>async function(e){let{args:t,auditLogHistoricalUserStore:a,selectedActors:s,environment:n,parentStore:r}=e;const{query:o}=t,{allUserIds:i,allBotIds:d}=a.getState(),l=100,c=await Zt.deps.searchActions.loader(),u=await c.searchActorsById({environment:n,query:o,userIds:[...i],botIds:[...d],store:r}),g=[...u.users.map((e=>`notion_user:${e.id}`)),...u.bots.map((e=>`bot:${e.id}`))];if(o.length>0)return g.slice(0,l);const m=s.map(Yt.eW),p=new Set(m),h=g.filter((e=>!p.has(e)));return[...m,...h].slice(0,Math.max(m.length,l))}({args:e,auditLogHistoricalUserStore:a,selectedActors:n,environment:i,parentStore:t}),renderResultMenuItem:(e,s)=>{var n;const r=function(e,t){const a=(0,Yt.Ij)(e);if(!a)return(0,Xt.m3)(void 0);if("notion_user"===a.actorType)return(0,Xt.m3)(function(e,t){const a=I.U6.createChildStore(t,{table:ce.KJ,id:e});return a.getModel()}(a.actorId,t));return(0,Xt.ON)(function(e,t){const a=I.Qx.createChildStore(t,{table:Pt.cZ,id:e});return a.getModel()}(a.actorId,t))}(e,t);return(0,$.jsx)(sa,{...s,item:e,tempActorSelections:d,showRemovedBadge:a.isUserOrBotRemoved(null===(n=r.asActor)||void 0===n?void 0:n.id),actor:r,intl:o})},renderToken:()=>null,renderFilter:()=>null,renderItemForSummary:()=>null,addItemLabel:null,focused:!1})}));function sa(e){const{item:t,intl:a,tempActorSelections:n,showRemovedBadge:r,actor:o}=e;return(0,s.createElement)(ta.Z,{...e,key:t,actor:o,useEmailAsTooltip:!0,checkState:n.has(t),userTitle:(0,$.jsxs)("div",{style:{display:"flex",gap:4},children:[(0,Xt.$4)(a,o),r&&(0,$.jsx)(ea.Z,{children:(0,$.jsx)(p.FormattedMessage,{id:"auditlogActorFilter.removed_user",defaultMessage:"Removed"})})]})})}const na=(0,p.injectIntl)((function(e){window.__c={n:"AuditLogFilterContainer"};const{parentStore:t}=e,[a,s]=(0,S.AF)(Lt.Z),[n,r,o]=(0,S.AF)(Et);return(0,$.jsxs)("div",{style:{display:"flex",flexDirection:"row",gap:4},children:[(0,$.jsx)(Qt.Z,{mode:Jt.z.Pill,focused:!1,title:(0,$.jsx)(p.FormattedMessage,{id:"auditlogDateFilter.title",defaultMessage:"Date"}),icon:$t.C,value:a.timeRange,showButtons:"footer",onChange:e=>{s({...a,timeRange:e,pageNum:1})}}),(0,$.jsx)(aa,{parentStore:t,auditLogHistoricalUserStore:o,selectedActors:a.actors,onChange:e=>{s({...a,actors:e,pageNum:1})}}),(0,$.jsx)(Gt.Z,{parentStore:t,selectedEvents:a.actions,onChange:e=>{s({...a,actions:e,pageNum:1})}})]})}));var ra=a(61275),oa=a(75553),ia=a(893),da=a(19044),la=a(33581),ca=a(58015),ua=a(64921),ga=a(4708),ma=a(77080),pa=a(21752);function ha(e){window.__c={n:"AuditLogColumnActor"};const{auditLogEntry:t,parentStore:a,id:n}=e,r=(0,p.useIntl)(),o=(0,S.VK)((()=>{if(t.actor.actorType===ce.KJ){const e=I.U6.createChildStore(a,{id:t.actor.actorId,table:ce.KJ});if(e.isDefined()&&!e.getIsDeleted())return{actorStore:e};if(t.actor.email)return{avatar:{name:t.actor.name,email:t.actor.email}}}else if(t.actor.actorType===Pt.cZ){const e=I.Qx.createChildStore(a,{id:t.actor.actorId,table:Pt.cZ});return e.isDefined()?{actorStore:e}:{avatar:{name:t.actor.name,email:t.actor.actorId}}}return{actorStore:void 0}}),[a,t]),i=(0,S.VK)((()=>{var e,t;if(o)return(null===(e=o.actorStore)||void 0===e?void 0:e.getDisplayName(r))??(null===(t=o.avatar)||void 0===t?void 0:t.name)}),[o,r]),d=(0,S.VK)((()=>{var e,t;if(o)return(null===(e=o.actorStore)||void 0===e?void 0:e.getDetail())??(null===(t=o.avatar)||void 0===t?void 0:t.email)}),[o]),l=(0,s.useMemo)((()=>{var e;if(t.actor.actorType===ce.KJ)return(0,pa.K)(null===(e=t.actor.meta)||void 0===e?void 0:e.spaceRole)}),[t]),c=(0,w.yK)((()=>({container:{display:"block",width:"100%",paddingBlock:6}})),[]),u=(0,s.createRef)();return(0,$.jsx)(re.ZP,{disableTooltip:fa(u.current),renderTooltip:()=>(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)("div",{children:i}),(0,$.jsx)("div",{children:d})]}),placement:re.ug.Bottom,render:e=>(0,$.jsx)("div",{...e,style:c.container,children:(0,$.jsx)(pa.Z,{id:n,...o,spaceRole:l})})})}function fa(e){return!!e&&(e.scrollHeight>e.clientHeight||e.scrollWidth>e.clientWidth)}const xa={id:"actor",headerTitle:(0,$.jsx)(p.FormattedMessage,{id:"auditlog.logTable.userColumn.header",defaultMessage:"User"}),renderCell:e=>{const t=`actor-${e.auditLogEntry.actionName}-${e.id}`;return(0,$.jsx)(ha,{parentStore:e.parentStore,auditLogEntry:e.auditLogEntry,id:t})},widthData:{width:30},sortable:!1},ba={id:"event",headerTitle:(0,$.jsx)(p.FormattedMessage,{id:"auditlog.logTable.eventColumn.header",defaultMessage:"Event"}),renderCell:e=>{const t=`event-${e.auditLogEntry.actionName}-${e.id}`;return(0,$.jsx)(la.p,{auditLogEntry:e.auditLogEntry,id:t})},widthData:{width:40},sortable:!1},va={id:"dateTimeAndMenu",headerTitle:(0,$.jsx)(p.FormattedMessage,{id:"auditlog.logTable.dateColumn.header",defaultMessage:"Date"}),renderCell:e=>{const t=`actor-${e.auditLogEntry.actionName}-${e.id}`,a=`event-${e.auditLogEntry.actionName}-${e.id}`,s=`datetime-${e.auditLogEntry.actionName}-${e.id}`;return(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(da.t,{auditLogEntry:e.auditLogEntry,id:s}),(0,$.jsx)(ya,{auditLogEntry:e.auditLogEntry,ids:{actorColumnId:t,eventColumnId:a,dateTimeColumnId:s}})]})},widthData:{width:25},sortable:!0},Sa=[xa,ba,va];function wa(){return(0,$.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"40vh",flexDirection:"column"},children:[(0,$.jsx)("div",{children:(0,$.jsx)(K.Z,{isSecondaryColor:!0,style:{fontWeight:500},children:(0,$.jsx)(p.FormattedMessage,{id:"auditlog.logTable.noResults",defaultMessage:"No results"})})}),(0,$.jsx)(K.Z,{isSecondaryColor:!0,children:(0,$.jsx)(p.FormattedMessage,{id:"auditlog.logTable.noResultsHelpText",defaultMessage:"Try different filters. Logs may take some time to show up."})})]})}function ya(e){window.__c={n:"AuditLogColumnMenu"};const{auditLogEntry:t,ids:a}=e,s=(0,S.VK)((()=>(0,ga.F$)()),[]),n=(0,S.VK)((()=>ma.default.checkGate("audit_log_event_name_column")?ra.pz:ra.C9),[]),r=(0,p.useIntl)(),o=(0,h.O7)(),i=(0,w.Fg)(),d=(0,w.yK)((e=>({container:{display:"flex",alignItems:"center",justifyContent:"flex-end",width:"100%"},button:{display:"flex",alignItems:"center",justifyContent:"center",width:32,height:28,borderRadius:4}})),[]);return(0,$.jsx)(re.ZP,{delayThreshold:80,placement:re.ug.Bottom,render:e=>(0,$.jsx)("div",{style:d.container,...e,children:(0,$.jsx)(ua.Z,{style:d.button,onClick:()=>{var e;ia.RD({environment:o,stringValue:(0,ra.eA)({auditLogEntry:t,intl:r,getAuditLogEventText:(e=a.eventColumnId,t=>{var a;return null===(a=document.getElementById(e))||void 0===a?void 0:a.textContent}),isTeamGuestsEnabled:s,csvColumnNames:n}),copiedMessage:ia.tq.copiedToClipboard})},children:(0,oa.U)({width:16,height:16,fill:i.mediumIconColor})})}),renderTooltip:()=>(0,$.jsx)(p.FormattedMessage,{id:"AuditLogSettings.copyAuditLogEvent",defaultMessage:"Copy row"})})}const Ca=(0,p.injectIntl)((function(e){window.__c={n:"AuditLogPaginatedTable"};const{searchResponse:t,parentStore:a}=e,[n,r]=(0,S.AF)(Lt.Z),o=t.results||[],i=t.hasMoreResults,d=Boolean(o.length),l=e=>{const t={...n,pageNum:e};r(t)},c=(0,w.yK)((e=>(0,ae.b)({columnRenderInfo:Sa,theme:e,containerMarginTop:0})),[]),u=o.map(((e,t)=>({id:t.toString(),auditLogEntry:e,parentStore:a,isClickable:!1}))),g=(0,s.useCallback)((()=>{const e=n.sortOrder===_t.NQ.CreatedOldest?_t.NQ.CreatedNewest:_t.NQ.CreatedOldest;r({...n,sortOrder:e,pageNum:1})}),[n,r]),m=(0,s.useMemo)((()=>({column:va,sortAscending:n.sortOrder===_t.NQ.CreatedOldest})),[n]);return(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(ae.D,{hideHeaderRowPadding:!0,showRowBorders:!0,columnRenderInfo:Sa,rows:u,sortState:m,onSortStateChanged:g,renderNoRowsComponent:wa,styles:c}),d?(0,$.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:10},children:[(0,$.jsx)(ca.v,{onClick:()=>{l(n.pageNum-1)},disabled:1===n.pageNum,children:(0,$.jsx)(p.FormattedMessage,{id:"auditlog.logTable.previousPage",defaultMessage:"Previous"})}),(0,$.jsx)(ca.v,{disabled:!i,onClick:()=>{l(n.pageNum+1)},children:(0,$.jsx)(p.FormattedMessage,{id:"auditlog.logTable.nextPage",defaultMessage:"Next"})})]}):null]})}));function ja(e){let{parentStore:t,spacePicker:a}=e;window.__c={n:"AuditLogSettings"};const n=(0,h.O7)(),[r]=(0,S.AF)(Kt),[o]=(0,S.AF)(Lt.Z),i=(0,Lt.r)(o)!==r.filterStr?void 0:r.cachedResponses[o.pageNum];return(0,s.useEffect)((()=>{t.id&&Ht({environment:n,auditLogPointer:{id:t.id,table:t.table}})}),[n,t,o]),(0,s.useEffect)((()=>{qt({environment:n,parentStore:t})}),[n,t]),(0,$.jsxs)(Fe,{children:[(0,$.jsx)(Oe,{title:(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(p.FormattedMessage,{id:"settingsConsole.auditLog.title",defaultMessage:"Audit log for"}),a]})}),(0,$.jsxs)("div",{style:{justifyContent:"space-between",display:"flex",paddingTop:4,paddingBottom:12},children:[(0,$.jsx)(na,{parentStore:t}),(0,$.jsx)(Ft.Z,{})]}),"loading"===(null==i?void 0:i.status)&&(0,$.jsx)(At.Z,{}),"success"===(null==i?void 0:i.status)&&(0,$.jsx)(Ca,{searchResponse:i,parentStore:t})]})}function Ia(e){window.__c={n:"OrganizationAuditLogScene"};const{organizationId:t,spaceId:a}=e,s=zt({spaceId:a}),n=Ze({organizationId:t}),r=s||n;return r&&t?(0,$.jsx)(ja,{spacePicker:(0,$.jsx)(Ye,{shouldShowOrganizationOption:!0,organizationId:t,currentTabRoute:x.FW,selectedSpaceStore:s}),parentStore:r}):null}var Ma=a(85579);function ka(e){let{spaceStore:t,userStore:a,spacePicker:s,isOrganizationOwner:n}=e;window.__c={n:"SpaceContentSearch"};const r=(0,w.yK)((()=>({headingStyle:{marginBottom:14,paddingBottom:0,fontSize:20,fontWeight:C.Z.fontWeight.medium,display:"flex",justifyContent:"space-between",alignItems:"center"},title:{display:"flex",alignItems:"center",gap:0}})),[]);return(0,$.jsxs)(Fe,{children:[(0,$.jsx)(Oe,{title:(0,$.jsxs)("div",{style:r.title,children:[(0,$.jsx)(p.FormattedMessage,{id:"settingsConsole.spaceContentSearch.title",defaultMessage:"Content search for "}),s]})}),(0,$.jsx)(Ma.a,{spaceStore:t,userStore:a,isOrganizationOwner:n},t.id)]})}function za(e){let{organizationId:t,spaceId:a,tabRoute:s,queryParams:n}=e;window.__c={n:"OrganizationContentSearchScene"};const r=(0,S.VK)((()=>We.default.state.currentUserStore),[]),o=zt({spaceId:a});return kt({organizationId:t,spaceId:a,tabRoute:s,queryParams:n}),o&&r&&t?(0,$.jsx)(ka,{spaceStore:o,userStore:r,spacePicker:(0,$.jsx)(Ye,{organizationId:t,currentTabRoute:s,selectedSpaceStore:o}),isOrganizationOwner:!0}):null}var Ua=a(4615);function Ta(e){window.__c={n:"OrganizationHomeScene"};const t=(0,h.O7)();return(0,$.jsxs)("div",{children:["Home",(0,$.jsx)("button",{onClick:()=>{v.c4({environment:t,url:(0,f.zh)({workspaceId:(0,Ua.ZP)(),tabRoute:x.Gu})})},children:"Go to workspace"})]})}var Fa=a(73420),Aa=a(72141),La=a(29302),Oa=a(89728);function Ra(e){let{onClick:t,children:a}=e;window.__c={n:"PencilEditButton"};const s=(0,w.yK)((e=>({icon:{width:18,height:18,fill:e.lightIconColor,marginLeft:6},button:{marginLeft:-6,maxWidth:"max-content"}})),[]);return(0,$.jsxs)(Oa.Z,{isSmall:!0,onClick:t,shouldShrink:!0,style:s.button,children:[a,(0,L.R)(s.icon)]})}var _a=a(21213),Pa=a(42922),Za=a(74194),Na=a(68785),Ba=a(50506),Ea=a(7124);function Va(e){let{isOpen:t,handleClose:a,currentOrganizationName:s,organizationId:n}=e;return(0,$.jsx)(Ba.Z,{open:t,onDismiss:a,showCloseIcon:!0,render:()=>(0,$.jsx)(Ka,{currentOrganizationName:s,handleClose:a,organizationId:n})})}function Ka(e){let{currentOrganizationName:t,handleClose:a,organizationId:n}=e;window.__c={n:"ModalBody"};const r=(0,w.yK)((e=>({modalBody:{padding:20,minWidth:300,display:"flex",alignItems:"center",flexDirection:"column"},nameInput:{marginTop:24,marginBottom:24},icon:{height:36,width:36,fill:e.mediumIconColor,marginBottom:8},submitButton:{marginBottom:8,width:"100%"}})),[]),o=(0,h.O7)(),{updateCacheWithRecordMap:i}=(0,s.useContext)(U.V),[d,l]=(0,s.useState)(t),[c,u]=(0,s.useState)(!1),g=(0,s.useCallback)((e=>{l(e.target.value)}),[]),m=(0,s.useCallback)((async e=>{if(!e)return;u(!0);const t=await N.updateOrganization(o,{organizationId:n,name:e});"success"===t.type?i({data:t.data}):B.showErrorMessage((0,V.wf)(j.default.getIntl(),t)),u(!1),a()}),[a,o,n,i]);return(0,$.jsxs)("div",{style:r.modalBody,children:[(0,_a.T)(r.icon),(0,$.jsx)(Ea.q,{styleName:"Heading-17px/Medium",colorName:"primary",children:(0,$.jsx)(p.FormattedMessage,{id:"updateOrganizationNameModal.title",defaultMessage:"Change organization name"})}),(0,$.jsx)(Za.Z,{value:d,onChange:g,style:r.nameInput}),(0,$.jsx)(Pa.Z,{onClick:()=>m(d),isLarge:!0,disabled:!d,style:r.submitButton,children:c?(0,$.jsx)(Na.Z,{}):(0,$.jsx)(p.FormattedMessage,{id:"updateOrganizationNameModal.changeName",defaultMessage:"Change name"})}),(0,$.jsx)(Oa.Z,{onClick:a,isGray:!0,children:(0,$.jsx)(p.FormattedMessage,{id:"updateOrganizationNameModal.cancel",defaultMessage:"Cancel"})})]})}function Da(e){let{organizationId:t}=e;window.__c={n:"OrganizationSettings"};const a=Ze({organizationId:t}),{organizationName:n,organizationMembership:r}=(0,S.VK)((()=>({organizationName:null==a?void 0:a.getName(),organizationMembership:null==a?void 0:a.getMembership()})),[a]),[o,i]=(0,s.useState)(!1),d=null==r?void 0:r.filter((e=>(0,Aa.zz)(e.role)));return(0,$.jsxs)(Fa.sg,{gap:12,children:[(0,$.jsxs)(Fa.sg,{gap:4,children:[(0,$.jsx)(K.Z,{isSmall:!0,children:(0,$.jsx)(p.FormattedMessage,{id:"organizationSettings.organizationName",defaultMessage:"Organization name"})}),(0,$.jsx)(Ra,{onClick:()=>i(!0),children:n}),(0,$.jsx)(Va,{currentOrganizationName:n,organizationId:t,isOpen:o,handleClose:()=>i(!1)})]}),(0,$.jsxs)(Fa.sg,{gap:4,children:[(0,$.jsx)(K.Z,{isSmall:!0,children:(0,$.jsx)(p.FormattedMessage,{id:"organizationSettings.organizationOwners",defaultMessage:"Organization owners"})}),(0,$.jsx)(Fa.X2,{children:null==d?void 0:d.map((e=>{let{user_id:t}=e;return(0,$.jsx)(Ha,{userId:t},t)}))})]})]})}function Ha(e){let{userId:t}=e;window.__c={n:"UserTag"};const a=(0,h.O7)(),s=(0,w.yK)((e=>({userTag:{border:`1px solid ${e.stroke.deemphasized}`,borderRadius:3,padding:"2px 6px",marginRight:8,marginTop:4,marginBottom:4,background:e.contentBackground,fontSize:14,lineHeight:1.2}})),[]),n=new I.U6(a,{table:ce.KJ,id:t},{userId:t});return(0,$.jsx)(La.Z,{userStore:n,style:s.userTag})}var Wa=a(23124),qa=a(66661);const $a=5,Ga=23,Qa=5,Ja=3;function Xa(e){let{organizationId:t}=e;window.__c={n:"OrganizationSettingsWorkspacesOverview"};const a=ts(),n=(0,w.yK)((e=>({linkButton:{fontWeight:C.Z.fontWeight.medium,fontSize:C.Z.fontSize.UIRegular.desktop,color:e.mediumTextColor}})),[]),r=(0,h.O7)(),{spaceIds:o}=(0,s.useContext)(T.g),[i,d]=(0,s.useState)(Ja),l=o.slice(0,i),c=o.length-l.length;return(0,$.jsxs)("div",{children:[(0,$.jsxs)(Fa.X2,{alignItems:"center",justifyContent:"space-between",children:[(0,$.jsx)(Ea.q,{styleName:"Heading-17px/Semibold",as:"h2",children:(0,$.jsx)(p.FormattedMessage,{id:"organizationSettingsWorkspacesOverview.workspaces",defaultMessage:"Workspaces"})}),(0,$.jsx)(Oa.Z,{onClick:()=>v.c4({environment:r,url:(0,f.a5)({organizationId:t,tabRoute:x.J7})}),style:n.linkButton,children:(0,$.jsx)(p.FormattedMessage,{id:"organizationSettingsWorkspacesOverview.workspaces.viewAll",defaultMessage:"View all "})})]}),(0,$.jsxs)("div",{style:a.workpacesBox,children:[l.map(((e,t)=>(0,$.jsx)(Ya,{spaceId:e,rowIndex:t},`workspaceRow-${e}`))),c>0&&(0,$.jsx)("div",{style:{...a.workspaceRow,paddingTop:6,paddingBottom:6},children:(0,$.jsx)(Oa.Z,{onClick:()=>d(i+Ja),style:n.linkButton,children:(0,$.jsx)(p.FormattedMessage,{id:"organizationSettingsWorkspacesOverview.moreWorkspaces",defaultMessage:"{count, plural, one {+{count} more workspace} other {+{count} more workspaces}}",values:{count:c}})})})]})]})}function Ya(e){let{spaceId:t,rowIndex:a}=e;window.__c={n:"WorkspaceRow"};const s=zt({spaceId:t}),n=ts(),{name:r,icon:o,adminCount:i,memberCount:d}=(0,S.VK)((()=>({name:null==s?void 0:s.getName(),icon:null==s?void 0:s.getIcon(),adminCount:(null==s?void 0:s.getAdminCount())||0,memberCount:(null==s?void 0:s.getUserMemberCount())||0})),[s]),l=0!==a?n.workspaceRow:{...n.workspaceRow,borderTop:"none"};return(0,$.jsx)("div",{style:l,children:(0,$.jsxs)(Wa.rj,{children:[(0,$.jsx)(Wa.r8,{row:1,col:1,colEnd:4,children:(0,$.jsxs)(Fa.X2,{gap:12,alignItems:"center",grow:1,children:[(0,$.jsx)(Qe.Z,{disabled:!0,icon:o,isEmptyPage:!1,title:r,size:48,isLarge:!0}),(0,$.jsx)(Ea.q,{styleName:"Heading-17px/Regular",children:r})]})}),(0,$.jsx)(Wa.r8,{row:1,col:4,colEnd:6,children:(0,$.jsxs)(Fa.sg,{gap:8,children:[(0,$.jsx)(K.Z,{isSmall:!0,children:(0,$.jsx)(p.FormattedMessage,{id:"organizationSettingsWorkspacesOverview.workspaceOwners",defaultMessage:"Workspace owners"})}),(0,$.jsxs)(Fa.X2,{children:[(0,$.jsx)(qa.e,{num:i,abbreviateNumber:!1}),(0,$.jsx)(es,{spaceStore:s})]})]})}),(0,$.jsx)(Wa.r8,{row:1,col:6,children:(0,$.jsxs)(Fa.sg,{gap:8,children:[(0,$.jsx)(K.Z,{isSmall:!0,children:(0,$.jsx)(p.FormattedMessage,{id:"organizationSettingsWorkspacesOverview.members",defaultMessage:"Members"})}),(0,$.jsx)(qa.e,{num:d,abbreviateNumber:!1})]})}),(0,$.jsx)(Wa.r8,{row:1,col:7,children:(0,$.jsxs)(Fa.sg,{gap:8,children:[(0,$.jsx)(K.Z,{isSmall:!0,children:(0,$.jsx)(p.FormattedMessage,{id:"organizationSettingsWorkspacesOverview.guests",defaultMessage:"Guests"})}),(0,$.jsx)(qa.e,{num:5e3,abbreviateNumber:!1})]})}),(0,$.jsx)(Wa.r8,{row:1,col:8,children:(0,$.jsxs)(Fa.sg,{gap:8,children:[(0,$.jsx)(K.Z,{isSmall:!0,children:(0,$.jsx)(p.FormattedMessage,{id:"organizationSettingsWorkspacesOverview.teamspaces",defaultMessage:"Teamspaces"})}),(0,$.jsx)(qa.e,{num:30,abbreviateNumber:!1})]})})]})})}function es(e){let{spaceStore:t}=e;window.__c={n:"OwnerAvatars"};const a=ts(),s=(0,h.O7)(),n=((0,S.VK)((()=>null==t?void 0:t.getAdminIds()),[t])??[]).slice(0,Qa),r=(0,S.VK)((()=>n.map((e=>new I.U6(s,{table:ce.KJ,id:e},{userId:e})))),[n,s]);return t?(0,$.jsx)("div",{style:a.ownerAvatars,children:r.map((e=>(0,$.jsx)(me.Z,{userStore:e,style:a.avatar,size:Ga,avatarShouldShowShadow:!0,hasTooltip:!0},e.id)))}):null}function ts(){return(0,w.yK)((e=>({workpacesBox:{marginTop:6,borderRadius:6,border:`1px solid ${e.stroke.deemphasized}`},workspaceRow:{padding:"12px 16px",borderTop:`1px solid ${e.stroke.deemphasized}`},avatar:{width:Ga,height:Ga,borderRadius:Ga,marginRight:-$a,position:"relative"},ownerAvatars:{display:"flex",alignItems:"center",position:"relative",flexDirection:"row-reverse",marginLeft:4+$a,marginTop:-2,transform:"translateZ(0)"}})),[])}function as(e){let{organizationId:t}=e;return t?(0,$.jsxs)(Fe,{children:[(0,$.jsx)(Oe,{title:(0,$.jsx)(p.FormattedMessage,{id:"organizationSettings.title",defaultMessage:"Organization settings"})}),(0,$.jsxs)(Fa.sg,{gap:16,children:[(0,$.jsx)(Da,{organizationId:t}),(0,$.jsx)(Xa,{organizationId:t})]})]}):null}const ss={home:e=>{let{environment:t,currentUserStore:a,organizationId:s}=e;return!0},security:e=>{let{environment:t,currentUserStore:a,organizationId:s}=e;return!0},people:e=>{let{environment:t,currentUserStore:a,organizationId:s}=e;return!0},accounts:e=>{let{environment:t,currentUserStore:a,organizationId:s}=e;return!0},audit_log:e=>{let{environment:t,currentUserStore:a,organizationId:s}=e;return!0},analytics:e=>{let{environment:t,currentUserStore:a,organizationId:s}=e;return!0},organization_settings:e=>{let{environment:t,currentUserStore:a,organizationId:s}=e;return!0},content_search:e=>{let{environment:t,currentUserStore:a,organizationId:s}=e;return!0},workspaces:e=>{let{environment:t,currentUserStore:a,organizationId:s}=e;return!0}},ns={home:{tab:{icon:u.z,name:(0,$.jsx)(p.FormattedMessage,{id:"settingsConsole.organization.tabNames.home",defaultMessage:"Home"})},scene:e=>(0,$.jsx)(Ta,{...e})},security:{tab:{icon:c.I,name:(0,$.jsx)(p.FormattedMessage,{id:"settingsConsole.organization.tabNames.security",defaultMessage:"Security"})},scene:e=>(0,$.jsx)("div",{children:"security"})},people:{tab:{icon:m.O,name:(0,$.jsx)(p.FormattedMessage,{id:"settingsConsole.organization.tabNames.people",defaultMessage:"People"})},scene:e=>(0,$.jsx)("div",{children:"people"})},accounts:{tab:{icon:r.p,name:(0,$.jsx)(p.FormattedMessage,{id:"settingsConsole.organization.tabNames.accounts",defaultMessage:"Accounts"})},scene:e=>(0,$.jsx)(Ee,{subtab:e.properties.subtab,...e})},audit_log:{tab:{icon:d.N,name:(0,$.jsx)(p.FormattedMessage,{id:"settingsConsole.organization.tabNames.audit_log",defaultMessage:"Audit log"})},scene:e=>(0,$.jsx)(Ia,{...e,spaceId:e.queryParams["space-id"]})},content_search:{tab:{icon:i.p,name:(0,$.jsx)(p.FormattedMessage,{id:"settingsConsole.organization.tabNames.contentSearch",defaultMessage:"Content Search"})},scene:e=>(0,$.jsx)(za,{spaceId:e.queryParams["space-id"],...e})},analytics:{tab:{icon:n.z,name:(0,$.jsx)(p.FormattedMessage,{id:"settingsConsole.organization.tabNames.contentAnalytics",defaultMessage:"Analytics"})},scene:e=>(0,$.jsx)(Ut,{spaceId:e.queryParams["space-id"],subtab:e.properties.subtab,...e})},organization_settings:{tab:{icon:g.r,name:(0,$.jsx)(p.FormattedMessage,{id:"settingsConsole.organization.tabNames.organization_settings",defaultMessage:"Organization"})},scene:e=>(0,$.jsx)(as,{...e})},workspaces:{tab:{icon:o.n,name:(0,$.jsx)(p.FormattedMessage,{id:"settingsConsole.organization.tabNames.workspaces",defaultMessage:"Workspaces"})},scene:e=>(0,$.jsx)("div",{children:"workspaces"})}},rs={members:e=>{let{environment:t,currentUserStore:a,workspaceId:s}=e;return!0},security:e=>{let{environment:t,currentUserStore:a,workspaceId:s}=e;return!0}},os={members:{tab:{icon:m.O,name:(0,$.jsx)(p.FormattedMessage,{id:"settingsConsole.workspace.tabNames.members",defaultMessage:"Members"})},scene:e=>(0,$.jsx)("div",{children:"members"})},security:{tab:{icon:l.H,name:(0,$.jsx)(p.FormattedMessage,{id:"settingsConsole.workspace.tabNames.security",defaultMessage:"Settings"})},scene:e=>(0,$.jsx)("div",{children:"security"})}}},73150:(e,t,a)=>{a.d(t,{b:()=>c});var s=a(67294),n=a(480),r=a(86628),o=a(89101),i=a(8055),d=a(77080),l=a(85893);function c(e){return t=>{const a=(0,n.O7)(),c=(0,r.VK)((()=>d.default.checkGate("admin_console_enabled")),[]);return(0,s.useEffect)((()=>{c||i.c4({environment:a,url:o._j.root})}),[a,c]),c?(0,l.jsx)(e,{...t}):null}}},35314:(e,t,a)=>{a.d(t,{e:()=>o});var s=a(67294),n=a(86628),r=a(77794);function o(){const[e,t]=(0,s.useState)(0),[a]=(0,s.useState)((()=>new r.E)),o=(0,s.createRef)();return(0,s.useEffect)((()=>{if(o.current)return a.observe(o.current),()=>{a.destroy()}}),[o,a]),(0,n.VK)((()=>{e!==a.rect.state.width&&t(a.rect.state.width)}),[e,a.rect]),[o,e]}},55899:(e,t,a)=>{a.d(t,{KU:()=>r,ZP:()=>i,fZ:()=>n});var s=a(49085);function n(e){return"existingUser"===e.type}function r(e){return"newUser"===e.type&&"email"!==e.source}class o extends s.default{getInitialState(){return{tokenQuery:"",inviteTargets:[]}}}const i=o},8675:(e,t,a)=>{a.d(t,{Z:()=>d});var s=a(49085),n=a(80444),r=a(77080),o=a(79797);class i extends s.default{getInitialState(){return{changePermissionsEnabled:!1,privatePageStore:void 0,loading:!1,error:void 0}}shouldSaveTransactionWithSudoMode(e){const t=e===this.state.privatePageStore,a=r.default.checkGate("enable_get_private_page_info_endpoint"),s=this.doesUserAlreadyHaveEditorAccessOnBlock(e.id);return t&&a&&this.state.changePermissionsEnabled&&!s}shouldUserHaveAccessToPrivatePageBlock(){var e,t;const a=null===(e=n.default.state.currentSpaceStore)||void 0===e?void 0:e.canAdmin(),s="enterprise"===(null===(t=n.default.state.currentSpaceStore)||void 0===t?void 0:t.getSubscriptionTier());return this.state.privatePageStore&&a&&s}doesUserAlreadyHaveEditorAccessOnBlock(e){const t=n.default.state.currentSpaceStore;if(!t)return!1;return o.G.createChildStore(t,{table:"block",id:e}).canAdmin()}}const d=i},40745:(e,t,a)=>{a.d(t,{M:()=>r});a(67294);var s=a(45238),n=a(85893);const r=(0,s.I)("arrowDown",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M8 1.57715C7.5625 1.57715 7.25488 1.88477 7.25488 2.33594V10.8262L7.30957 12.3027L5.50488 10.2861L3.95312 8.75488C3.82324 8.625 3.63184 8.53613 3.42676 8.53613C3.0166 8.53613 2.70898 8.85059 2.70898 9.26758C2.70898 9.46582 2.78418 9.64355 2.94141 9.80762L7.44629 14.3193C7.59668 14.4697 7.79492 14.5586 8 14.5586C8.20508 14.5586 8.40332 14.4697 8.55371 14.3193L13.0586 9.80762C13.2158 9.64355 13.291 9.46582 13.291 9.26758C13.291 8.85059 12.9902 8.53613 12.5801 8.53613C12.3682 8.53613 12.1836 8.625 12.0469 8.75488L10.4951 10.2861L8.69043 12.2959L8.74512 10.8262V2.33594C8.74512 1.88477 8.44434 1.57715 8 1.57715Z"})})},80721:(e,t,a)=>{a.d(t,{W:()=>r});a(67294);var s=a(45238),n=a(85893);const r=(0,s.I)("arrowLeftThick",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M1.54004 8.05762C1.54004 8.2627 1.62891 8.46094 1.78613 8.61133L6.29102 13.1162C6.45508 13.2734 6.63965 13.3486 6.82422 13.3486C7.25488 13.3486 7.5625 13.041 7.5625 12.6309C7.5625 12.4189 7.48047 12.2344 7.34375 12.1045L5.8125 10.5527L3.78906 8.70703L5.38867 8.80273H13.7012C14.1455 8.80273 14.46 8.49512 14.46 8.05762C14.46 7.61328 14.1455 7.3125 13.7012 7.3125H5.38867L3.7959 7.4082L5.8125 5.5625L7.34375 4.01074C7.48047 3.87402 7.5625 3.68945 7.5625 3.47754C7.5625 3.06738 7.25488 2.7666 6.82422 2.7666C6.63965 2.7666 6.45508 2.83496 6.27734 3.00586L1.78613 7.50391C1.62891 7.64746 1.54004 7.85254 1.54004 8.05762Z"})})},82114:(e,t,a)=>{a.d(t,{Q:()=>n,p:()=>r});a(67294);var s=a(45238);const n=(0,a(85893).jsx)("path",{d:"M.911 8.034c0 4.505 3.049 7.24 7.246 7.24 1.135 0 2.215-.158 2.885-.376.472-.15.622-.397.622-.65a.44.44 0 00-.451-.444 1.3 1.3 0 00-.321.048c-.834.205-1.552.341-2.516.341-3.74 0-6.29-2.255-6.29-6.118 0-3.698 2.407-6.275 6.03-6.275 3.206 0 5.886 1.975 5.886 5.523 0 2.072-.697 3.466-1.825 3.466-.752 0-1.176-.437-1.176-1.183V4.972c0-.37-.205-.595-.554-.595-.341 0-.553.226-.553.595v.779h-.062c-.349-.84-1.203-1.374-2.222-1.374-1.77 0-3.014 1.51-3.014 3.678 0 2.187 1.237 3.712 3.042 3.712 1.06 0 1.88-.575 2.276-1.545h.062c.13.963.943 1.551 2.023 1.551 1.907 0 3.09-1.873 3.09-4.498 0-3.971-2.92-6.548-6.96-6.548C3.886.727.912 3.632.912 8.034zm6.911 2.652c-1.223 0-2.003-1.018-2.003-2.638 0-1.593.786-2.611 2.01-2.611 1.258 0 2.05.998 2.05 2.584 0 1.62-.813 2.665-2.057 2.665z"}),r=(0,s.I)("at",{viewBox:"0 0 16 16",svg:n})},50780:(e,t,a)=>{a.d(t,{E:()=>r});a(67294);var s=a(45238),n=a(85893);const r=(0,s.I)("editPropertyType",{viewBox:"0 0 16 16 ",svg:(0,n.jsx)("path",{d:"M11.5615 4.84473L12.2998 4.11328C12.6689 3.74414 12.6826 3.34082 12.3545 3.00586L12.0879 2.73926C11.7529 2.4043 11.3428 2.43848 10.9736 2.79395L10.2354 3.52539L11.5615 4.84473ZM3.22168 13.1641L10.9053 5.4873L9.59277 4.16797L1.90918 11.8516L1.23926 13.4512C1.16406 13.6562 1.37598 13.875 1.57422 13.7998L3.22168 13.1641ZM3.92578 13.8066H14.1045C14.4736 13.8066 14.7744 13.499 14.7744 13.1367C14.7744 12.7676 14.4736 12.4668 14.1045 12.4668H5.27246L3.92578 13.8066Z"})})},55964:(e,t,a)=>{a.d(t,{N:()=>r});a(67294);var s=a(45238),n=a(85893);const r=(0,s.I)("eyePadded",{viewBox:"0 0 24 24",svg:(0,n.jsx)("path",{d:"M12 17.9912C17.6055 17.9912 21.3857 13.4727 21.3857 12.0713C21.3857 10.6699 17.5986 6.1582 12 6.1582C6.47656 6.1582 2.60742 10.6699 2.60742 12.0713C2.60742 13.4727 6.46973 17.9912 12 17.9912ZM12 16.6787C7.63184 16.6787 4.15918 13.0283 4.15918 12.0713C4.15918 11.2715 7.63184 7.4707 12 7.4707C16.3613 7.4707 19.8408 11.2715 19.8408 12.0713C19.8408 13.0283 16.3613 16.6787 12 16.6787ZM12 15.7559C14.0508 15.7559 15.6914 14.0811 15.6914 12.0713C15.6914 10.0137 14.0508 8.39355 12 8.39355C9.94238 8.39355 8.29492 10.0137 8.30176 12.0713C8.31543 14.0811 9.94238 15.7559 12 15.7559ZM12 13.2607C11.3369 13.2607 10.7969 12.7275 10.7969 12.0713C10.7969 11.415 11.3369 10.8818 12 10.8818C12.6631 10.8818 13.1963 11.415 13.1963 12.0713C13.1963 12.7275 12.6631 13.2607 12 13.2607Z"})})},27714:(e,t,a)=>{a.d(t,{N:()=>r});a(67294);var s=a(45238),n=a(85893);const r=(0,s.I)("link",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M7.69922 10.8945L8.73828 9.84863C7.91797 9.77344 7.34375 9.51367 6.91992 9.08984C5.76465 7.93457 5.76465 6.29395 6.91309 5.14551L9.18262 2.87598C10.3379 1.7207 11.9717 1.7207 13.127 2.87598C14.2891 4.04492 14.2822 5.67188 13.1338 6.82031L11.958 7.99609C12.1768 8.49512 12.2451 9.10352 12.1289 9.62988L14.0908 7.6748C15.7725 6 15.7793 3.62109 14.084 1.92578C12.3887 0.223633 10.0098 0.237305 8.33496 1.91211L5.95605 4.29785C4.28125 5.97266 4.26758 8.35156 5.96289 10.0469C6.36621 10.4434 6.90625 10.7441 7.69922 10.8945ZM8.30078 5.13184L7.26855 6.17773C8.08203 6.25293 8.66309 6.51953 9.08008 6.93652C10.2422 8.09863 10.2422 9.73242 9.08691 10.8809L6.81738 13.1504C5.66211 14.3057 4.03516 14.3057 2.87305 13.1504C1.71094 11.9883 1.71777 10.3545 2.87305 9.20605L4.04199 8.03027C3.83008 7.53125 3.75488 6.92969 3.87109 6.39648L1.91602 8.35156C0.234375 10.0264 0.227539 12.4121 1.92285 14.1074C3.61816 15.8027 5.99707 15.7891 7.67188 14.1143L10.0439 11.7354C11.7256 10.0537 11.7324 7.6748 10.0371 5.98633C9.64062 5.58301 9.10059 5.28223 8.30078 5.13184Z"})})},16184:(e,t,a)=>{a.d(t,{Q:()=>r});a(67294);var s=a(45238),n=a(85893);const r=(0,s.I)("lockedFilled",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M4.69141 14.6338H11.3018C12.2178 14.6338 12.6689 14.1826 12.6689 13.1914V8.08496C12.6689 7.18945 12.293 6.72461 11.541 6.64941V4.96094C11.541 2.36328 9.81152 1.1123 7.99316 1.1123C6.18164 1.1123 4.45215 2.36328 4.45215 4.96094V6.67676C3.74805 6.78613 3.32422 7.2373 3.32422 8.08496V13.1914C3.32422 14.1826 3.77539 14.6338 4.69141 14.6338ZM5.75098 4.83105C5.75098 3.22461 6.76953 2.35645 7.99316 2.35645C9.2168 2.35645 10.2422 3.22461 10.2422 4.83105V6.64258L5.75098 6.64941V4.83105Z"})})},22686:(e,t,a)=>{a.d(t,{f:()=>r});a(67294);var s=a(45238),n=a(85893);const r=(0,s.I)("person",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M7.7832 8.00195C9.27344 8.00195 10.5381 6.67578 10.5381 4.95996C10.5381 3.28516 9.2666 2 7.7832 2C6.29297 2 5.01465 3.30566 5.02148 4.97363C5.02148 6.67578 6.28613 8.00195 7.7832 8.00195ZM3.51758 14.3594H12.0352C13.1631 14.3594 13.5527 14.0176 13.5527 13.3887C13.5527 11.6318 11.3242 9.21191 7.77637 9.21191C4.23535 9.21191 2 11.6318 2 13.3887C2 14.0176 2.38965 14.3594 3.51758 14.3594Z"})})},14734:(e,t,a)=>{a.d(t,{X:()=>r});a(67294);var s=a(45238),n=a(85893);const r=(0,s.I)("personCrossedOut",{viewBox:"0 0 44 44",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M5.4857 44H0L44 8.56549V13.0061L5.4857 44Z"}),(0,n.jsx)("path",{d:"M39.8048 44H8.66491L25.6448 30.4378C26.9394 30.6489 28.1581 30.9719 29.3009 31.4067C31.5362 32.2374 33.4346 33.326 34.9964 34.6723C36.5725 36.0044 37.7761 37.4367 38.6071 38.9692C39.4525 40.5018 39.8752 41.9555 39.8752 43.3305C39.8752 43.5675 39.8517 43.7906 39.8048 44Z"}),(0,n.jsx)("path",{d:"M30.3971 16.7973C30.3971 16.8668 30.3965 16.9359 30.3952 17.0048L19.3828 25.9192C18.7467 25.7134 18.1339 25.4228 17.5446 25.0473C16.2408 24.2023 15.1876 23.0708 14.3853 21.6528C13.5972 20.2205 13.2032 18.6163 13.2032 16.8403C13.2032 15.0929 13.5972 13.5174 14.3853 12.1137C15.1876 10.7101 16.2408 9.60007 17.5446 8.78366C18.8485 7.96725 20.267 7.55905 21.8001 7.55905C23.3332 7.55905 24.7517 7.96009 26.0556 8.76218C27.3595 9.56426 28.4054 10.6671 29.1935 12.0708C29.9959 13.4601 30.3971 15.0356 30.3971 16.7973Z"})]})})},56996:(e,t,a)=>{a.d(t,{z:()=>r});a(67294);var s=a(45238),n=a(85893);const r=(0,s.I)("sidebarHome",{viewBox:"0 0 20 20",svg:(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.54446 3.06854C9.8066 2.84385 10.1934 2.84385 10.4556 3.06854L15.7064 7.56922C16.0832 7.89219 16.3 8.36369 16.3 8.85996V14.6C16.3 15.5389 15.5389 16.3 14.6 16.3H11.75C11.3634 16.3 11.05 15.9866 11.05 15.6V11.7H8.95001V15.6C8.95001 15.9866 8.63661 16.3 8.25001 16.3H5.40001C4.46113 16.3 3.70001 15.5389 3.70001 14.6V8.85996C3.70001 8.36369 3.91687 7.89219 4.29367 7.56922L9.54446 3.06854ZM10 4.52198L5.20477 8.63218C5.13828 8.68918 5.10001 8.77238 5.10001 8.85996V14.6C5.10001 14.7657 5.23433 14.9 5.40001 14.9H7.55001V11.5C7.55001 10.8373 8.08727 10.3 8.75001 10.3H11.25C11.9128 10.3 12.45 10.8373 12.45 11.5V14.9H14.6C14.7657 14.9 14.9 14.7657 14.9 14.6V8.85996C14.9 8.77238 14.8617 8.68918 14.7952 8.63218L10 4.52198Z"})})}}]);