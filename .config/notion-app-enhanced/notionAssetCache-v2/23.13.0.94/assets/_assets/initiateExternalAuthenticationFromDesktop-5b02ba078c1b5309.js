"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[3871],{94810:(e,t,n)=>{n.r(t),n.d(t,{default:()=>g});var i=n(67294),o=n(480),r=n(86628),s=n(19889),a=n(98275),l=n(97880),d=n(64002),c=n(95477),u=n(77907),h=n(80444),p=n(68785),f=n(85893);function g(e){window.__c={n:"InitiateExternalAuthenticationFromDesktop"};const{redirectUri:t}=e,[n,g]=(0,i.useState)(!0),[v,x]=(0,i.useState)(!1),m=(0,o.O7)(),y=(0,r.VK)((()=>m.currentUser.loggedInUserIds),[m]),w=(0,r.VK)((()=>h.default.state.currentUserStore),[]),k=(0,r.VK)((()=>w?y.map((e=>w.getRecordModel({table:s.KJ,id:e}))).filter(l.$K):[]),[w,y]),I=(0,i.useCallback)((()=>{y.length!==k.length||v||g(!1)}),[y,k,v]);return(0,i.useEffect)((()=>{var e;if(!t)return void g(!1);const n=decodeURIComponent(t),i=d.gy(n)&&d.Qc(n);if(!i||(o=i,r=c.default,!o.host||"local"!==r.env&&!r.domainBaseUrl.includes(o.host)&&!a.S3[r.env].includes(o.host)))return void g(!1);var o,r;let s;if(null!==(e=i.path)&&void 0!==e&&e.includes("/eap/app")){const e=decodeURIComponent(n),t=d.Qc(e).query.notion_state,i=t&&JSON.parse(t);s=i?i.userId:void 0}else s=i.query.notion_user_id;k.some((e=>e.id===s))?(x(!0),window.location.href=n):I()}),[t,k,I]),(0,f.jsx)("div",{style:{height:"100%"},children:n?(0,f.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",flexWrap:"wrap",height:"100%"},children:(0,f.jsx)(p.Z,{style:{height:20,width:20}})}):(0,f.jsx)(u.LazyPageError,{route:{name:"initiateExternalAuthenticationFromDesktop"},publicPageData:void 0})})}}}]);