"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[6215],{60442:(e,t,i)=>{i.d(t,{Z:()=>n});i(67294);var o=i(82990),s=i(47853),r=i(85893);const n=function(e){let{imageURL:t,imageWidth:i,imageHeight:o,caption:n,title:d}=e;if(t){const e=(0,s.D)(t);return(0,r.jsxs)("div",{style:{width:i||200,marginTop:4,marginBottom:4},children:[(0,r.jsx)("div",{style:{width:"100%",height:o||100,borderRadius:4,backgroundImage:`url(${e})`,backgroundSize:"cover",marginBottom:6}}),(0,r.jsx)(a,{caption:n,title:d})]})}return(0,r.jsx)(a,{caption:n,title:d,style:{width:i}})};function a(e){let{style:t,caption:i,title:s}=e;return(0,r.jsxs)("div",{style:{whiteSpace:"normal",lineHeight:1.4,...t},children:[s&&(0,r.jsx)("header",{style:{fontWeight:o.Z.fontWeight.bold,marginBottom:4},children:s}),i]})}},53489:(e,t,i)=>{i.r(t),i.d(t,{default:()=>ro});var o=i(67294),s=i(83355),r=i(40902),n=i(68626),a=i(33709),d=i(97880),c=i(50770),l=i(90060),u=i(480),g=i(86628),m=i(24405);function h(e){return e.isGuestInviteRequest()?"guest_invite_request":e.isPageAccessRequest()?"page_access_request":e.isSpaceMembershipRequest()?"space_membership_request":e.isTeamMembershipRequest()?"team_membership_request":void(0,d.t1)(e)}var p=i(58129),v=i(21202),f=i(15047),y=i(29369),b=i(19889),x=i(82990),S=i(9291),A=i(48298),M=i(4708),j=i(33929),C=i(41549),w=i(79797),I=i(7057),R=i(24211),_=i(62385),k=i(64369),B=i(49204),V=i(85893);const T=function(e){window.__c={n:"ApproveTeamMembershipActivityButton"};const{accessRequestStore:t,teamStore:i,useInboxRedesign:o}=e,s=(0,u.O7)(),r=(0,S.useIntl)(),{isRequestResolved:n,resolvedStatus:a,resolvedTime:d}=(0,g.VK)((()=>({isRequestResolved:t.isResolvedTeamMembershipRequest(),resolvedStatus:t.getStatus(),resolvedTime:t.getResolvedTime()})),[t]),c=(0,g.VK)((()=>{const e=t.getResolvedById();if(!e)return;const i=w.U6.createChildStore(t,{table:b.KJ,id:e});return i?i.getDisplayName(r):void 0}),[t,r]),l=async e=>{await B.ow({environment:s,teamStore:i,accessRequestStore:t,status:e})},h=(0,m.yK)((e=>({container:{display:"flex",alignItems:"center"},redesignedContainer:{display:"flex",alignItems:"center",fontSize:14,color:e.mediumTextColor},approveButton:{height:26,paddingLeft:8,paddingRight:8,fontSize:12,marginRight:10,fontWeight:500,boxShadow:e.plainButtonBoxShadow,color:e.regularTextColor},declineButton:{height:26,paddingLeft:8,paddingRight:8,color:e.regularTextColor}})),[]);return(0,V.jsx)("div",{style:h.container,children:n?e.useInboxRedesign?(0,V.jsx)("div",{style:h.redesignedContainer,children:"approved"===a?(0,V.jsx)(S.FormattedMessage,{defaultMessage:"Approved by {grantedBy} on {resolvedTime}",id:"approveTeamMembershipActivityButton.requestApprovedWithTime.title",values:{grantedBy:c,resolvedTime:(0,I.Yx)(Math.min(d??0,Date.now()),"medium_with_time",(0,R.E2)(r))}}):(0,V.jsx)(S.FormattedMessage,{defaultMessage:"Denied by {grantedBy} on {resolvedTime}",id:"approveTeamMembershipActivityButton.requestDeniedWithTime.title",values:{grantedBy:c,resolvedTime:(0,I.Yx)(Math.min(d??0,Date.now()),"medium_with_time",(0,R.E2)(r))}})}):(0,V.jsxs)("div",{children:[(0,V.jsx)(k.Z,{isSecondaryColor:!0,children:"approved"===a?(0,V.jsx)(S.FormattedMessage,{defaultMessage:"Approved by {grantedBy}",id:"approveTeamMembershipActivityButton.requestApproved.title",values:{grantedBy:c}}):o?(0,V.jsx)(S.FormattedMessage,{defaultMessage:"Denied by {grantedBy}",id:"approveTeamMembershipActivityButton.requestDenied.title",values:{grantedBy:c}}):(0,V.jsx)(S.FormattedMessage,{defaultMessage:"Declined by {grantedBy}",id:"approveTeamMembershipActivityButton.requestDeclined.title",values:{grantedBy:c}})}),(0,V.jsx)(k.Z,{isSmall:!0,isSecondaryColor:!0,children:(0,I.Yx)(Math.min(d??0,Date.now()),"medium_with_time",(0,R.E2)(r))})]}):(0,V.jsxs)("div",{children:[(0,V.jsx)(_.Z,{style:h.approveButton,onClick:()=>l("approved"),children:(0,V.jsx)(S.FormattedMessage,{defaultMessage:"Approve",id:"approveTeamMembershipActivityButton.approveButton.label"})}),(0,V.jsx)(_.Z,{style:o?h.approveButton:h.declineButton,onClick:()=>l("rejected"),children:e.useInboxRedesign?(0,V.jsx)(S.FormattedMessage,{defaultMessage:"Deny",id:"approveTeamMembershipActivityButton.denyButton.label"}):(0,V.jsx)(S.FormattedMessage,{defaultMessage:"Decline",id:"approveTeamMembershipActivityButton.declineButton.label"})})]})})};var K=i(49085),O=i(66897),F=i(72126),P=i(77420),L=i(91536),z=i(91376),D=i(64404),Z=i(61519);class q extends s.Z{constructor(){super(...arguments),this.storeTypes={role:K.default.createClass(void 0)}}renderComponent(){const{accessRequestStore:e,onApprove:t,onReject:i,spaceStore:o}=this.props;if(!e.isDefined())return;const s=e.getModel();return s.isResolved()?this.renderResolvedSpaceMembershipRequest():s.isGuestInviteRequest()&&!o.canAdmin()||s.isSpaceMembershipRequest()&&!o.canEditMembership()?null:(0,V.jsxs)("div",{style:{display:"flex",alignItems:"center",...this.props.useInboxRedesign&&{gap:10}},children:[(0,V.jsx)(_.Z,{onClick:t,style:(r=this.props.useInboxRedesign,n=this.theme,{height:r?28:26,paddingLeft:8,paddingRight:8,boxShadow:n.plainButtonBoxShadow,fontSize:12,...!r&&{marginRight:10},color:n.regularTextColor,fontWeight:500}),children:(0,V.jsx)(S.FormattedMessage,{defaultMessage:"Approve",id:"approveSpaceMembershipActivityAction.approveButton.label"})}),(0,V.jsx)(_.Z,{onClick:i,style:{height:this.props.useInboxRedesign?28:26,paddingLeft:8,paddingRight:8},children:this.props.useInboxRedesign?(0,V.jsx)(S.FormattedMessage,{defaultMessage:"Deny",id:"approveSpaceMembershipActivityAction.denyButton.label"}):(0,V.jsx)(S.FormattedMessage,{defaultMessage:"Decline",id:"approveSpaceMembershipActivityAction.declineButton.label"})}),!this.environment.device.isMobile&&(0,V.jsxs)(V.Fragment,{children:[!this.props.useInboxRedesign&&(0,V.jsx)(Z.Z,{size:1,vertical:!0,style:{height:26,paddingLeft:8,paddingRight:8}}),(0,V.jsx)(_.Z,{onClick:()=>{L.E5(this.environment,{disable_membership_requests:this.props.spaceStore.getDisableMembershipRequests()}),z.r$({currentTab:"members",subtab:D.Q.Requests})},style:{height:26,paddingLeft:8,paddingRight:8},children:(0,V.jsx)(S.FormattedMessage,{defaultMessage:"View all requests",id:"approveSpaceMembershipActivityAction.viewAllRequests.label"})})]})]});var r,n}renderResolvedSpaceMembershipRequest(){const{accessRequestStore:e,spaceStore:t,useInboxRedesign:i}=this.props,o=e.getModel();if(!o)return;const s=o.getResolvedByPointer(t.id),r=o.isResolved()&&s&&this.renderActor(s);return i?(0,V.jsx)("div",{style:{fontSize:14,color:this.theme.mediumTextColor},children:"approved"===e.getStatus()?(0,V.jsx)(S.FormattedMessage,{defaultMessage:"Approved by {grantedBy} on {resolvedTime}",id:"approveSpaceMembershipActivityAction.requestApprovedWithTime.title",values:{grantedBy:r,resolvedTime:(0,I.Yx)(Math.min(e.getResolvedTime()??1/0,Date.now()),"medium_with_time",(0,R.E2)(this.props.intl))}}):(0,V.jsx)(S.FormattedMessage,{defaultMessage:"Denied by {grantedBy} on {resolvedTime}",id:"approveSpaceMembershipActivityAction.requestDenied.title",values:{grantedBy:r,resolvedTime:(0,I.Yx)(Math.min(e.getResolvedTime()??1/0,Date.now()),"medium_with_time",(0,R.E2)(this.props.intl))}})}):(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(k.Z,{isSecondaryColor:!0,children:"approved"===e.getStatus()?(0,V.jsx)(S.FormattedMessage,{defaultMessage:"Approved by {grantedBy}",id:"approveSpaceMembershipActivityAction.requestApproved.title",values:{grantedBy:r}}):(0,V.jsx)(S.FormattedMessage,{defaultMessage:"Declined by {grantedBy}",id:"approveSpaceMembershipActivityAction.requestDeclined.title",values:{grantedBy:r}})}),(0,V.jsx)(k.Z,{isSmall:!0,isSecondaryColor:!0,children:(0,I.Yx)(Math.min(e.getResolvedTime()??1/0,Date.now()),"medium_with_time",(0,R.E2)(this.props.intl))})]})}renderActor(e){const{table:t,id:i}=e,o=F.oA([this.getActor(t,i)]);return(0,l.XW)(o,{...(0,C.h_)({useInboxRedesign:this.props.useInboxRedesign})})}getActor(e,t){if(e===b.KJ){const i=this.rootStore.getRecordValue({table:e,id:t});if(i)return(0,O.dp)(i)}if(e===P.cZ){const i=this.rootStore.getRecordValue({table:e,id:t});if(i)return(0,O.D$)(i)}}get rootStore(){return this.props.accessRequestStore}}q.displayName="ApproveSpaceMembershipActivityAction";const E=(0,S.injectIntl)(q);var U=i(72141),H=i(54368),N=i(19719),G=i(17659),W=i(76464),Y=i(9953),J=i(82530),X=i(88893),$=i(88280),Q=i(7567);class ee extends s.Z{constructor(){super(...arguments),this.storeTypes={roleStore:K.default.createClass(void 0)},this.handleGrantPageAccess=async()=>{const{targetBlockStore:e,accessRequestStore:t}=this.props,i=this.getInviteTargetWithNewPermissionItem();if(!("permissionItem"in i))return;const o=this.environment.currentUser.id;if(!o)return;if("type"in i){let t;if("existingUser"===i.type){t=(await W.n_({environment:this.environment,store:e,inviteTargets:[i],inviteRole:i.permissionItem.role,isOnboarding:!1,invite:{inviteOrigin:"page_request_access"}})).success}else if("bot"===i.type){t=(await W.n_({environment:this.environment,store:e,inviteTargets:[i],inviteRole:void 0,isOnboarding:!1,invite:{inviteOrigin:"page_request_access"}})).success}else(0,d.t1)(i);if(!t)return}J.createAndCommit({userAction:"GrantPageAccessActivityAction.handleGrantPageAccess",environment:this.environment,perform:s=>{"type"in i||W.ep({environment:this.environment,transaction:s,store:e,permissionItems:[i.permissionItem]}),Y.sW({store:t,transaction:s,data:{granted_time:Date.now(),granted_by_table:b.KJ,granted_by_id:o,resolved_time:Date.now(),resolved_by_table:b.KJ,resolved_by_id:o,status:"approved"}})}});const s=t.getValue(),r=s&&s.created_time&&s.granted_time?s.granted_time-s.created_time:void 0;L.nC(this.environment,{requestId:s&&s.id,timeElapsedSinceRequest:r,newAccessLevel:i.permissionItem.role,...oe(this.props.notification)})},this.CLASS_COMPONENT_CONVERSION_DO_NOT_TOUCH_handleRoleChange=e=>function(e,t,i,o,s){const r=i.id,n=o.state;o.setState(e),L.If(t,{requestId:r,previousAccessLevel:n,newAccessLevel:e,...oe(s)})}(e,this.environment,this.props.accessRequestStore,this.stores.roleStore,this.props.notification)}renderComponent(){const e=this.props.accessRequestStore.getValue();if(!e)return;if((0,p.Kc)(e))return this.renderGrantedAccessRequest(e);if(!this.props.targetBlockStore.canAdmin())return;const t=e.parent_table===f.bx,i=ie(this.props.accessRequestStore,this.props.targetBlockStore);if(i&&!t){const t=this.renderActor(e.for_actor_table,e.for_actor_id),o=i.role===ne(this.props.accessRequestStore,this.props.targetBlockStore,this.props.initialRole,this.stores.roleStore);return(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(k.Z,{isSecondaryColor:!0,style:{marginBottom:6},children:(0,V.jsx)(S.FormattedMessage,{defaultMessage:"{requestingUser} already has access.",id:"grantPageAccessActivityAction.alreadyHasAccess.label",values:{requestingUser:t}})}),(0,V.jsx)(Q.ZP,{upgradeButtonName:"user_permission_item",role:ne(this.props.accessRequestStore,this.props.targetBlockStore,this.props.initialRole,this.stores.roleStore),table:v.iU,blockType:this.props.targetBlockStore.getType(),type:e.for_actor_table===b.KJ?"user_permission":"bot_permission",onChange:this.CLASS_COMPONENT_CONVERSION_DO_NOT_TOUCH_handleRoleChange,isInvite:!0,buttonStyle:se(!0,this.theme)}),(0,V.jsx)(_.Z,{onClick:this.handleGrantPageAccess,style:se(o,this.theme),children:(0,V.jsx)(S.FormattedMessage,{defaultMessage:"Change",id:"grantPageAccessActivityAction.changePermissionButton.label"})}),(0,V.jsx)(re,{notification:this.props.notification,accessRequestStore:this.props.accessRequestStore,useInboxRedesign:this.props.useInboxRedesign})]})}return(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(Q.ZP,{upgradeButtonName:"user_permission_item",role:ne(this.props.accessRequestStore,this.props.targetBlockStore,this.props.initialRole,this.stores.roleStore),table:v.iU,blockType:this.props.targetBlockStore.getType(),type:e.for_actor_table===b.KJ?"user_permission":"bot_permission",onChange:this.CLASS_COMPONENT_CONVERSION_DO_NOT_TOUCH_handleRoleChange,isInvite:!0,buttonStyle:se(!1,this.theme)}),(0,V.jsx)(_.Z,{onClick:this.handleGrantPageAccess,style:se(!1,this.theme),children:this.props.useInboxRedesign?(0,V.jsx)(S.FormattedMessage,{defaultMessage:"Approve",id:"grantPageAccessActivityAction.grantAccessButton.label.approve"}):(0,V.jsx)(S.FormattedMessage,{defaultMessage:"Grant access",id:"grantPageAccessActivityAction.grantAccessButton.label"})}),(0,V.jsx)(re,{notification:this.props.notification,accessRequestStore:this.props.accessRequestStore,useInboxRedesign:this.props.useInboxRedesign})]})}renderGrantedAccessRequest(e){const t=this.renderActor(e.granted_by_table,e.granted_by_id),i=(0,I.Yx)(Math.min(e.granted_time,Date.now()),"medium_with_time",(0,R.E2)(j.default.getIntl()));return this.props.useInboxRedesign?(0,V.jsx)("div",{style:{fontSize:14,color:this.theme.mediumTextColor},children:(0,V.jsx)(S.FormattedMessage,{defaultMessage:"Approved by {grantedBy} on {time}",id:"grantPageAccessActivityAction.accessGrantedWithTime.title",values:{grantedBy:t,time:i}})}):(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(k.Z,{isSecondaryColor:!0,children:(0,V.jsx)(S.FormattedMessage,{defaultMessage:"Approved by {grantedBy}",id:"grantPageAccessActivityAction.accessGranted.title",values:{grantedBy:t,time:i}})}),(0,V.jsx)(k.Z,{isSmall:!0,isSecondaryColor:!0,children:i})]})}getInviteTargetWithNewPermissionItem(){const e=function(e,t,i,o){const s=e.getValue();if(!s)return;if(s.for_actor_table===b.KJ)return{type:"user_permission",user_id:s.for_actor_id,role:ne(e,t,i,o)};if(s.for_actor_table===P.cZ)return{type:"bot_permission",bot_id:s.for_actor_id,role:ne(e,t,i,o)};if(s.for_actor_table===H.y)return;(0,d.t1)(s.for_actor_table)}(this.props.accessRequestStore,this.props.targetBlockStore,this.props.initialRole,this.stores.roleStore);if(!e)return{};if(ie(this.props.accessRequestStore,this.props.targetBlockStore))return{permissionItem:e};const t=$.subscriptionDataStoreInstance.state;if("user_permission"===e.type){const i=this.rootStore.getRecordValue({table:b.KJ,id:e.user_id}),o=t?X.CM(t):[],s=o&&o.some((t=>t.userId===e.user_id));return i&&!s?{type:"existingUser",value:i,permissionItem:e}:{permissionItem:e}}if("bot_permission"===e.type){const i=this.rootStore.getRecordValue({table:P.cZ,id:e.bot_id}),o=(t?X.NM(t):[]).some((t=>t.botId===e.bot_id));return i&&!o?{type:"bot",value:i,permissionItem:e}:{permissionItem:e}}(0,d.t1)(e)}renderActor(e,t){const i=F.oA([this.getActor(e,t)]);return(0,l.XW)(i,{...(0,C.h_)({useInboxRedesign:this.props.useInboxRedesign})})}getActor(e,t){if(e===b.KJ){const i=this.rootStore.getRecordValue({table:e,id:t});if(i)return(0,O.dp)(i)}if(e===P.cZ){const i=this.rootStore.getRecordValue({table:e,id:t});if(i)return(0,O.D$)(i)}}get rootStore(){return this.props.accessRequestStore}}ee.displayName="GrantPageAccessActivityAction";const te=ee;function ie(e,t){const i=e.getValue();if(!i)return;const o=t.getPermissionItems();for(const s of o){if(i.for_actor_table===b.KJ&&(0,U.jg)(s)&&s.user_id===i.for_actor_id)return s;if(i.for_actor_table===P.cZ&&(0,U.FB)(s)&&s.bot_id===i.for_actor_id)return s}}function oe(e){return{tab:N.Jn(),activityId:null==e?void 0:e.activity_id,notificationId:null==e?void 0:e.id}}function se(e,t){const i={height:26,paddingLeft:8,paddingRight:8,boxShadow:t.plainButtonBoxShadow,fontSize:12,marginRight:10};return e?i:{...i,color:t.regularTextColor,fontWeight:500}}function re(e){let{notification:t,accessRequestStore:i,useInboxRedesign:o}=e;window.__c={n:"ArchiveButtonComponent"};const s=(0,u.O7)();return t?t.visited?null:(0,V.jsx)(_.Z,{onClick:()=>function(e,t,i){i&&(J.createAndCommit({userAction:"GrantPageAccessActivityAction.handleArchive",environment:t,perform:t=>{G.aZ({notification:i,rootStore:e,transaction:t})}}),L.cO(t,oe(i)))}(i,s,t),style:{height:26,paddingLeft:8,paddingRight:8},children:o?(0,V.jsx)(S.FormattedMessage,{defaultMessage:"Deny",id:"grantPageAccessActivityAction.ignoreButton.label.deny"}):(0,V.jsx)(S.FormattedMessage,{defaultMessage:"Ignore",id:"grantPageAccessActivityAction.ignoreButton.label"})}):null}function ne(e,t,i,o){const s=ie(e,t),r=s&&s.role;return o.state||r||i}var ae=i(74970),de=i(17022),ce=i(12472),le=i(22649),ue=i(78976),ge=i(69651),me=i(8504),he=i(37834),pe=i(43250),ve=i(12534),fe=i(16402),ye=i(4761),be=i(73063),xe=i(86176),Se=i(26388),Ae=i(67706),Me=i(30573),je=i(32469),Ce=i(93963);const we=16,Ie=12;function Re(e){window.__c={n:"ActivityNotificationSection"};const[t,i]=(0,o.useState)(!1),[s,r]=(0,o.useState)(!1),{notification:n,prominentTitleLink:a,children:d,rootStore:c,icon:l,isPrivate:h,isLast:p,onBacklinkClicked:v,onArchiveClicked:f,onUnarchiveClicked:y,onNotificationFrameClicked:b,onMarkAsReadClicked:x,onMarkAsUnreadClicked:S,showRecordPath:A,navigableBlockId:M,showSnapshotButton:j,timestamp:C,header:w}=e,I=(0,u.O7)(),R=(0,g.VK)((()=>"mentions"===ye.ZP.state.currentTab),[]),_=!n||n.read,k=I.device.isMobile,B=Boolean(_&&R&&!j&&n),T=(0,g.VK)((()=>{const e=I.WindowSizeStore.state;return{left:e.paddingLeftCSS,right:e.paddingRightCSS}}),[I.WindowSizeStore]),K=(0,m.yK)((e=>({container:{paddingTop:Ie,paddingBottom:d?12:8,paddingLeft:k?T.left:0,paddingRight:k?T.right:0,...B&&{opacity:.7}},headerAndAvatar:{display:"flex",paddingLeft:we,paddingRight:we},avatarAndStatusDot:{display:"flex",alignItems:"flex-start",position:"relative"},statusDot:{position:"absolute",opacity:1,left:-7,top:10},statusDotWrapper:{marginRight:k?3:2},privatePageBadge:{marginTop:1,marginBottom:4,marginLeft:8},divider:{borderBottom:`1px solid ${e.regularDividerColor}`}})),[d,T,k,B]),O=(0,o.useCallback)((e=>{n&&!n.read&&(s||(0,ve.ZP)({event:e,context:ve.Af.NotificationClick,callback:()=>{b(),J.createAndCommit({userAction:"ActivityNotificationSection.handleMarkAsRead",environment:I,perform:e=>{G.$h({notification:n,rootStore:c,transaction:e,read:!0})}})}}))}),[I,s,n,b,c]),F=(0,o.useCallback)((()=>i(!0)),[]),P=(0,o.useCallback)((()=>i(!1)),[]),L=(0,o.useId)();return(0,V.jsxs)("article",{onMouseOver:F,onMouseLeave:P,onClick:O,"aria-labelledby":L,tabIndex:0,children:[(0,V.jsx)(_e,{notification:n,rootStore:c,isMobile:k,isHovered:t,isMentionsTab:R,onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),onArchiveClicked:f,onUnarchiveClicked:y,onMarkAsReadClicked:x,onMarkAsUnreadClicked:S}),(0,V.jsxs)("div",{style:K.container,children:[(0,V.jsxs)("div",{style:K.headerAndAvatar,children:[(0,V.jsxs)("div",{className:pe.FoE,style:K.avatarAndStatusDot,children:[(0,V.jsx)("div",{style:{marginRight:4},children:R&&(0,V.jsx)("div",{style:K.statusDotWrapper,children:!_&&(0,V.jsx)(Ce.z,{style:K.statusDot})})}),l]}),(0,V.jsx)(ke,{timestamp:C,header:w,prominentTitleLink:a,hasChildren:Boolean(d),navigableBlockId:M,rootStore:c,onBacklinkClick:v,showRecordPath:A,titleAriaId:L}),j&&M&&(0,V.jsx)(Be,{timestamp:C,navigableBlockId:M,rootStore:c}),h&&!n&&(0,V.jsx)(je.Z,{style:K.privatePageBadge})]}),d&&(0,V.jsx)("div",{className:pe.nU_,children:d})]}),!p&&(0,V.jsx)("div",{style:K.divider})]})}function _e(e){window.__c={n:"InboxActions"};const{notification:t,rootStore:i,isMobile:o,isHovered:s,isMentionsTab:r,onArchiveClicked:n,onUnarchiveClicked:a,onMarkAsReadClicked:d,onMarkAsUnreadClicked:c,onMouseEnter:l,onMouseLeave:u}=e,g=(0,m.yK)((()=>({container:{display:"flex",alignItems:"flex-start",position:"relative"},body:{transition:"opacity 100ms ease-out",opacity:o||s?1:0,position:"absolute",right:we,top:Ie,zIndex:1}})),[o,s]);return r&&t?t.visited?null:(0,V.jsx)("div",{style:g.container,onMouseEnter:l,onMouseLeave:u,children:(0,V.jsx)("div",{style:g.body,children:(0,V.jsx)(Me.Z,{notification:t,rootStore:i,onArchiveClicked:n,onUnarchiveClicked:a,onMarkAsReadClicked:d,onMarkAsUnreadClicked:c,useInboxRedesign:!1})})}):null}function ke(e){window.__c={n:"Header"};const{timestamp:t,prominentTitleLink:i,header:o,hasChildren:s,navigableBlockId:r,rootStore:n,showRecordPath:a,onBacklinkClick:d,titleAriaId:c}=e,l=(0,fe.IS)(t,{useCompactFormat:!0}),g=(0,u.O7)().device.isMobile,h=(0,fe.uy)(t),p=(0,m.yK)((e=>({container:{width:"100%"},header:{width:g?"calc(100% - 98px)":"calc(100% - 90px)",fontSize:14,lineHeight:1.4,minWidth:0,minHeight:g?28:void 0,display:"flex",alignItems:"baseline"},flatIndentHeader:{width:g?"calc(100% - 98px)":"100%",fontSize:14,lineHeight:1.4,minWidth:0,minHeight:g?28:void 0,display:"flex",justifyContent:"space-between",alignItems:"baseline"},title:{fontSize:14,marginTop:4,marginBottom:s?8:4},time:{fontSize:12,color:e.lightTextColor,whiteSpace:"nowrap",display:"inline",paddingLeft:6},path:{marginTop:4,marginBottom:4},separatorDot:{fontSize:12,color:e.lightTextColor,marginLeft:4,marginRight:4}})),[s,g]);return(0,V.jsxs)("div",{style:p.container,children:[(0,V.jsx)("div",{style:p.header,children:(0,V.jsxs)("div",{className:pe.NFf,children:[(0,V.jsx)("span",{id:c,children:o}),(0,V.jsx)("div",{style:p.time,className:pe.CZG,children:(0,V.jsx)(Ae.Z,{text:l,tooltipText:h,icon:ge.C})})]})}),a&&r&&n&&(0,V.jsx)("div",{style:p.path,children:(0,V.jsx)(xe.Z,{isLink:!0,store:w.G.createChildStore(n,{table:v.iU,id:r}),onClick:d})}),i&&(0,V.jsx)("div",{style:p.title,children:i})]})}function Be(e){window.__c={n:"SnapshotButton"};const{timestamp:t,navigableBlockId:i,rootStore:o}=e,s=(0,u.O7)();if(t<new Date("2018-10-26").getTime())return null;const r=j.default.getIntl().formatMessage({defaultMessage:"View version for this update",id:"activitySection.viewVersionForUpdate.tooltip"}),n=()=>{const e=w.G.createChildStore(o,{table:v.iU,id:i});he.jN({environment:s,blockStore:e,openSnapshotNearTimestamp:t.toString(),from:"activity"})};return(0,V.jsx)(Se.ZP,{renderTooltip:()=>r,render:e=>(0,V.jsx)(be.Z,{ariaLabel:r,onClick:n,icon:me.J,...e})})}const Ve=o.memo(Re);var Te=i(37444);function Ke(e){window.__c={n:"AccessRequestedActivity"};const{activity:t,rootStore:i,tabArgs:o,isFirst:s,isLast:r,useInboxRedesign:n}=e,{notification:a,tab:d,source:c}=o,h=(0,u.O7)(),f=(0,u.Fy)(),y=(0,g.VK)((()=>t.getEdits()),[t]),b=y[0],x=f.isMobile,A=(0,m.yK)((()=>({message:{paddingLeft:n?void 0:(0,le.c3)({source:c,isMobile:x}),paddingRight:n?0:16,marginTop:n?0:8,marginBottom:8},messageLabel:{whiteSpace:"pre-wrap"},titleStyle:{fontSize:14,display:"flex"}})),[c,x,n]),j=(0,g.VK)((()=>w.oK.createChildStore(i,{table:p.J8,id:t.access_request_id})),[t,i]),I=(0,g.VK)((()=>j.getModel()),[j]),R=(0,g.VK)((()=>(null==I?void 0:I.isSpaceMembershipRequest())&&!(0,M.p1)()),[I]),_=I&&(0,V.jsx)(Oe,{activity:t,accessRequest:I,rootStore:i,tabArgs:o,useInboxRedesign:n}),B=b.message,T=(0,g.VK)((()=>(0,l.P6)({edits:y,rootStore:i})),[y,i]),K=(0,g.VK)((()=>(0,l.XW)(T,{...(0,C.h_)({useInboxRedesign:n})})),[T,n]),O=(0,g.VK)((()=>parseInt(t.end_time)),[t]),F=(0,g.VK)((()=>{if(null!=I&&I.isGuestInviteRequest()){const e=I.getAttributes().permission_records_and_roles[0],s=e&&w.G.createChildStore(i,{table:v.iU,id:e.id}),r=e.role;if(n&&s.isDefined())return;return(0,V.jsx)(ue.Z,{titledRecordStore:s,activity:t,tabArgs:o,getRecordModel:i.getRecordModel,permissionRole:r,shouldRenderEmpty:!0})}}),[o,I,t,i,n]);return R||!_?null:n?(0,V.jsxs)(Te.ZP,{timestamp:O,header:(0,V.jsx)("span",{children:_}),isFirst:s,isLast:r,isPrivate:!1,rootStore:i,notification:a,icon:(0,V.jsx)(ae.BE,{authors:T,size:Te.IX,style:{marginTop:0,marginRight:0},showAvatarShadow:!1}),showSnapshotButton:!1,url:void 0,...(0,de.JJ)({notification:a,activity:t,environment:h,tab:d}),children:[B&&(0,V.jsx)("div",{style:A.message,children:(0,V.jsx)(k.Z,{isMultiline:!0,style:A.messageLabel,children:B})}),F&&(0,V.jsx)("div",{style:A.titleStyle,children:F}),(0,V.jsx)(De,{activity:t,accessRequestStore:j,rootStore:i,source:c,notification:a,useInboxRedesign:!0})]}):(0,V.jsxs)(Ve,{timestamp:O,header:(0,V.jsx)("span",{children:_}),isLast:r,isPrivate:!1,rootStore:i,showRecordPath:!1,notification:a,icon:(0,V.jsx)(ae.BE,{authors:T,size:24}),showSnapshotButton:!1,prominentTitleLink:F,...(0,de.h9)({notification:a,activity:t,environment:h,tab:d}),children:[B&&(0,V.jsxs)("div",{style:A.message,children:[(0,V.jsx)(k.Z,{isSmall:!0,children:(0,V.jsx)(S.FormattedMessage,{id:"activity.accessRequested.messageLabel",defaultMessage:"Message from {author}",values:{author:K}})}),(0,V.jsx)(k.Z,{isMultiline:!0,style:A.messageLabel,children:B})]}),(0,V.jsx)(De,{activity:t,accessRequestStore:j,rootStore:i,source:c,notification:a,useInboxRedesign:!1}),(0,V.jsx)(ce.Z,{tabArgs:o,activity:t,isMobile:h.device.isMobile,environment:h,rootStore:i})]})}function Oe(e){window.__c={n:"AccessRequestHeader"};const{activity:t,accessRequest:i,rootStore:o,tabArgs:s,useInboxRedesign:r}=e,n=(0,g.VK)((()=>h(i)),[i]);switch(n){case"guest_invite_request":return(0,V.jsx)(Le,{activity:t,accessRequest:i,rootStore:o,useInboxRedesign:r});case"space_membership_request":return(0,V.jsx)(Pe,{activity:t,accessRequest:i,rootStore:o,useInboxRedesign:r});case"team_membership_request":return(0,V.jsx)(ze,{activity:t,rootStore:o,tabArgs:s,useInboxRedesign:r});case"page_access_request":return(0,V.jsx)(Fe,{activity:t,tabArgs:s,rootStore:o,useInboxRedesign:r});default:(0,d.t1)(n)}}function Fe(e){window.__c={n:"BlockAccessRequestHeader"};const{activity:t,rootStore:i,tabArgs:o,useInboxRedesign:s}=e,r=(0,g.VK)((()=>t.getEdits()),[t]),n=(0,g.VK)((()=>(0,l.P6)({edits:r,rootStore:i})),[r,i]),a=(0,g.VK)((()=>(0,l.XW)(n,{...(0,C.h_)({useInboxRedesign:s})})),[n,s]),d=(0,g.VK)((()=>{if(t.navigable_block_id)return w.G.createChildStore(i,{table:v.iU,id:t.navigable_block_id})}),[t,i]);return d?s?(0,V.jsx)(S.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} requested access} other {{authorOrAuthors} requested access}}",values:{numberOfAuthors:n.length,authorOrAuthors:a},id:"activity.accessRequested.header.short"}):(0,V.jsx)(S.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} requested access to {pageName}} other {{authorOrAuthors} requested access to {pageName}}}",values:{numberOfAuthors:n.length,authorOrAuthors:a,pageName:(0,V.jsx)(ue.Z,{titledRecordStore:d,activity:t,tabArgs:o,getRecordModel:i.getRecordModel})},id:"activity.accessRequested.header"}):null}function Pe(e){window.__c={n:"MembershipRequestHeader"};const{activity:t,accessRequest:i,rootStore:o,useInboxRedesign:s}=e,r=(0,g.VK)((()=>t.getEdits()),[t]),n=(0,m.yK)((()=>({inviteePhrase:{fontWeight:x.Z.fontWeight.semibold}})),[]),a=(0,g.VK)((()=>i.getForActorPointer(o.id)),[i,o.id]),d=a.table===b.KJ?w.U6.createChildStore(o,a):void 0,c=(0,g.VK)((()=>null==d?void 0:d.getModel()),[d]),u=(0,g.VK)((()=>null==c?void 0:c.getEmail()),[c]),h=(0,g.VK)((()=>i.getForActorId()===i.getCreatedById()),[i]),p=(0,g.VK)((()=>(0,l.P6)({edits:r,rootStore:o})),[r,o]),v=(0,g.VK)((()=>(0,l.XW)(p,{...(0,C.h_)({useInboxRedesign:s})})),[p,s]),f=(0,g.VK)((()=>{if(!h)return u;const e=null==c?void 0:c.getFullName(j.default.getIntl());return e?`${e} (${u})`:u}),[h,c,u]);return c&&a.table===b.KJ?h?(0,V.jsx)(S.FormattedMessage,{defaultMessage:"{invitee} requested to become a workspace member",values:{invitee:(0,V.jsx)("span",{style:n.inviteePhrase,children:f})},id:"activity.accessRequestedMembershipFromGuest.header"}):s?(0,V.jsx)(S.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} requested to add {invitee} as a workspace member} other {{authorOrAuthors} requested to add {invitee} as a workspace member}}",values:{numberOfAuthors:p.length,authorOrAuthors:v,invitee:(0,V.jsx)("span",{style:n.inviteePhrase,children:f})},id:"activity.accessRequestedMembership.header.short"}):(0,V.jsx)(S.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} requested {invitee} to become a workspace member} other {{authorOrAuthors} requested {invitee} to become a workspace member}}",values:{numberOfAuthors:p.length,authorOrAuthors:v,invitee:(0,V.jsx)("span",{style:n.inviteePhrase,children:f})},id:"activity.accessRequestedMembership.header"}):null}function Le(e){window.__c={n:"GuestInviteRequestHeader"};const{activity:t,accessRequest:i,rootStore:o,useInboxRedesign:s}=e,r=(0,g.VK)((()=>t.getEdits()),[t]),n=(0,m.yK)((()=>({inviteePhrase:{fontWeight:x.Z.fontWeight.semibold}})),[]),a=(0,g.VK)((()=>i.getForActorPointer(o.id)),[i,o.id]),d=a.table===b.KJ?w.U6.createChildStore(o,a):void 0,c=(0,g.VK)((()=>null==d?void 0:d.getModel()),[d]),u=(0,g.VK)((()=>null==c?void 0:c.getEmail()),[c]),h=(0,g.VK)((()=>(0,l.P6)({edits:r,rootStore:o})),[r,o]),p=(0,g.VK)((()=>(0,l.XW)(h,{...(0,C.h_)({useInboxRedesign:s})})),[h,s]);return(0,g.VK)((()=>i.isGuestInviteRequest()),[i])&&c&&a.table===b.KJ?(0,V.jsx)(S.FormattedMessage,{defaultMessage:"{requestorsPhrase} requested inviting {guestEmail} as a guest",values:{requestorsPhrase:p,guestEmail:(0,V.jsx)("span",{style:n.inviteePhrase,children:u})},id:"activity.guestInviteRequest.header.short"}):null}function ze(e){window.__c={n:"TeamMembershipRequestHeader"};const{activity:t,rootStore:i,tabArgs:o,useInboxRedesign:s}=e,r=(0,g.VK)((()=>t.getEdits()),[t]),n=(0,g.VK)((()=>(0,l.P6)({edits:r,rootStore:i})),[r,i]),a=(0,g.VK)((()=>(0,l.XW)(n,{...(0,C.h_)({useInboxRedesign:s})})),[n,s]),d=(0,g.VK)((()=>{if(t.team_id)return w.zX.createChildStore(i,{table:y.e0,id:t.team_id})}),[t,i]);return r&&d?s?(0,V.jsx)(S.FormattedMessage,{defaultMessage:"{user} requested to join {teamName}",values:{user:(0,V.jsx)("span",{style:{fontWeight:x.Z.fontWeight.semibold},children:a}),teamName:(0,V.jsx)(ue.Z,{titledRecordStore:d,getRecordModel:i.getRecordModel,activity:t,tabArgs:o})},id:"activity.teamAccessRequest.header.short"}):(0,V.jsx)(S.FormattedMessage,{defaultMessage:"{user} requested to become a member of {teamName}",values:{user:(0,V.jsx)("span",{style:{fontWeight:x.Z.fontWeight.semibold},children:a}),teamName:(0,V.jsx)(ue.Z,{titledRecordStore:d,getRecordModel:i.getRecordModel,activity:t,tabArgs:o})},id:"activity.teamAccessRequest.header"}):null}function De(e){window.__c={n:"AccessRequestedActions"};const{activity:t,accessRequestStore:i,rootStore:s,source:r,notification:n,useInboxRedesign:a}=e,c=(0,g.VK)((()=>t.getEdits()),[t])[0],l=(0,g.VK)((()=>i.getParentTable()),[i]),p=(0,g.VK)((()=>i.getParentId()),[i]),b=(0,g.VK)((()=>i.getModel()),[i]),x=(0,g.VK)((()=>b&&h(b)),[b]),S=(0,u.O7)(),A=(0,o.useCallback)((async()=>{if(x&&b)if("space_membership_request"===x)await qe("approved",S,i,s);else if("guest_invite_request"===x)await Ze("approved",S,b,s);else{if("team_membership_request"===x||"page_access_request"===x)return;(0,d.t1)(x)}}),[S,i,s,x,b]),M=(0,o.useCallback)((async()=>{if(x&&b)if("space_membership_request"===x)await qe("rejected",S,i,s);else if("guest_invite_request"===x)await Ze("rejected",S,b,s);else{if("team_membership_request"===x||"page_access_request"===x)return;(0,d.t1)(x)}}),[S,i,s,x,b]),j=S.device.isMobile,C=(0,m.yK)((e=>({actionPrimaryContainer:{paddingLeft:a?void 0:(0,le.c3)({source:r,isMobile:j}),paddingTop:a?4:12,paddingBottom:8},actionButton:(0,le.b9)(e)})),[r,j,a]),I=p?w.G.createChildStore(s,{table:v.iU,id:p}):void 0,R=(0,g.VK)((()=>l===v.iU&&Boolean(null==I?void 0:I.canAdmin())),[l,I]);if(!(l&&p&&x&&c))return null;if("page_access_request"===x)return R&&I?(0,V.jsx)("div",{style:C.actionPrimaryContainer,children:(0,V.jsx)(te,{accessRequestStore:i,targetBlockStore:I,initialRole:"reader",buttonStyle:C.actionButton,notification:n,useInboxRedesign:a})}):null;if("space_membership_request"===x||"guest_invite_request"===x){const e=w.H2.createChildStore(s,{table:f.bx,id:p});return(0,V.jsx)("div",{style:C.actionPrimaryContainer,children:(0,V.jsx)(E,{accessRequestStore:i,spaceStore:e,initialRole:"reader",buttonStyle:C.actionButton,notification:n,useInboxRedesign:a,onApprove:A,onReject:M})})}if("team_membership_request"===x){const e=w.zX.createChildStore(s,{table:y.e0,id:p});return(0,V.jsx)("div",{style:C.actionPrimaryContainer,children:(0,V.jsx)(T,{accessRequestStore:i,teamStore:e,useInboxRedesign:a})})}(0,d.t1)(x)}async function Ze(e,t,i,o){if(!i.isGuestInviteRequest())return;const s=o.getRecordModel({id:i.getForActorId(),table:i.getForActorTable()});s&&await A.yW({environment:t,status:e,accessRequest:i,forActor:s,from:"notification"})}async function qe(e,t,i,o){if(!o.canEditMembership())return;if(!i.isDefined())return;const s=o.getRecordModel({id:i.getForActorId(),table:i.getForActorTable()});s&&s.table===b.KJ&&await A.kn({environment:t,store:o,accessRequestStore:i,forActor:s.__IM_SORRY__getValue(),status:e,from:"notification"})}const Ee=o.memo(Ke);function Ue(e){window.__c={n:"AccessRequestResolvedActivity"};const{activity:t,rootStore:i,tabArgs:o,isFirst:s,isLast:r,useInboxRedesign:n}=e,{notification:a,tab:d}=o,c=(0,u.O7)(),m=(0,g.VK)((()=>t.getEdits()),[t]),h=(0,g.VK)((()=>w.oK.createChildStore(i,{table:p.J8,id:t.access_request_id})),[t,i]),f=(0,g.VK)((()=>{const e=h.getModel();if(e&&e.isGuestInviteRequest()&&e.isResolved())return e}),[h]),y=(0,g.VK)((()=>{var e;if(!f)return;return null===(e=f.getAttributes().permission_records_and_roles[0])||void 0===e?void 0:e.role}),[f]),b=(0,g.VK)((()=>(0,l.P6)({edits:m,rootStore:i})),[m,i]),x=(0,g.VK)((()=>{if(t.navigable_block_id)return w.G.createChildStore(i,{table:v.iU,id:t.navigable_block_id})}),[t,i]),S=f&&(0,V.jsx)(He,{activity:t,accessRequest:f,rootStore:i,useInboxRedesign:n}),A=x&&(0,V.jsx)(ue.Z,{titledRecordStore:x,activity:t,tabArgs:o,getRecordModel:i.getRecordModel,permissionRole:y,shouldRenderEmpty:!0}),M=(0,g.VK)((()=>parseInt(t.end_time)),[t]);return S&&x?n?(0,V.jsx)(Te.ZP,{timestamp:M,header:(0,V.jsx)("span",{children:S}),isFirst:s,isLast:r,isPrivate:!1,rootStore:i,notification:a,icon:(0,V.jsx)(ae.BE,{authors:b,size:Te.IX,style:{marginTop:0,marginRight:0},showAvatarShadow:!1}),showSnapshotButton:!1,url:void 0,...(0,de.JJ)({notification:a,activity:t,environment:c,tab:d})}):(0,V.jsx)(Ve,{timestamp:M,header:(0,V.jsx)("span",{children:S}),isLast:r,isPrivate:!1,rootStore:i,showRecordPath:!1,notification:a,icon:(0,V.jsx)(ae.BE,{authors:b,size:24}),showSnapshotButton:!1,prominentTitleLink:A,...(0,de.h9)({notification:a,activity:t,environment:c,tab:d}),children:(0,V.jsx)(ce.Z,{tabArgs:o,activity:t,isMobile:c.device.isMobile,environment:c,rootStore:i})}):null}function He(e){window.__c={n:"AccessRequestHeader"};const{accessRequest:t,rootStore:i,useInboxRedesign:o}=e,s=(0,m.yK)((()=>({inviteePhrase:{fontWeight:x.Z.fontWeight.semibold}})),[]),r=(0,g.VK)((()=>i.getRecordModel({id:t.getForActorId(),table:t.getForActorTable()})),[t,i]),n=(0,g.VK)((()=>null==r?void 0:r.getEmail()),[r]),a=(0,g.VK)((()=>{const e=(null==r?void 0:r.isUser())&&(null==r?void 0:r.getFullName(j.default.getIntl()));return e?`${e} (${n})`:n}),[r,n]),c=(0,g.VK)((()=>i.getRecordModel({id:t.getResolvedById(),table:t.getResolvedByTable()})),[t,i]),u=(0,g.VK)((()=>c&&(0,l.XW)([c])),[c]),h=(0,g.VK)((()=>t.getStatus()),[t]);return u&&a?"approved"===h?o?(0,V.jsx)(S.FormattedMessage,{defaultMessage:"{resolverPhrase} approved your request to invite {invitee} as a guest",values:{resolverPhrase:u,invitee:(0,V.jsx)("span",{style:s.inviteePhrase,children:a})},id:"activity.AccessRequestResolvedMembership.approved.header.short"}):(0,V.jsx)(S.FormattedMessage,{defaultMessage:"{resolverName} approved your request to invite {invitee} as a guest",values:{resolverName:u,invitee:(0,V.jsx)("span",{style:s.inviteePhrase,children:a})},id:"activity.AccessRequestResolvedMembership.approved.header.long"}):"rejected"===h?o?(0,V.jsx)(S.FormattedMessage,{defaultMessage:"{resolverPhrase} denied your request to invite {invitee} as a guest",values:{resolverPhrase:u,invitee:(0,V.jsx)("span",{style:s.inviteePhrase,children:a})},id:"activity.AccessRequestResolvedMembership.rejected.header.short"}):(0,V.jsx)(S.FormattedMessage,{defaultMessage:"{resolverName} rejected your request to invite {invitee} as a guest",values:{resolverName:u,invitee:(0,V.jsx)("span",{style:s.inviteePhrase,children:a})},id:"activity.AccessRequestResolvedMembership.rejected.header.long"}):void(0,d.t1)(h):null}const Ne=o.memo(Ue);var Ge=i(15145),We=i(41432),Ye=i(89101),Je=i(99108),Xe=i(84076),$e=i(63381),Qe=i(13658);function et(e){window.__c={n:"BlockPropertyEditedActivity"};const{activity:t,rootStore:i,tabArgs:o,isFirst:s,isLast:r,useInboxRedesign:n}=e,{tab:a,notification:d,source:c}=o,m=(0,g.VK)((()=>(0,Je.hI)(t.getEdits())),[t]),h=m.length>0,p=(0,g.VK)((()=>w.G.createChildStore(i,{table:v.iU,id:m[0].navigable_block_id})),[i,m]),f=(0,g.VK)((()=>{const e=p.getModel();if(e)return e.getRenderUrl({getRecordModel:i.getRecordModel,pageVisitSource:Ge.tY.Notification})}),[p,i]),y=(0,g.VK)((()=>(0,l.P6)({edits:m,rootStore:i})),[m,i]),b=(0,g.VK)((()=>(0,l.XW)(y,{...(0,C.h_)({useInboxRedesign:n})})),[y,n]),x=(0,u.O7)(),A=(0,g.VK)((()=>(0,l.jC)({recordId:p.id,recordType:"block",tab:a,rootStore:i,environment:x})),[p,a,i,x]),M=(0,g.VK)((()=>p.isDefined()),[p]),j=(0,g.VK)((()=>parseInt(t.end_time)),[t]);if(!M||!h)return null;const I=(0,V.jsx)(ue.Z,{titledRecordStore:p,getRecordModel:i.getRecordModel,activity:t,tabArgs:o}),R="pageUpdatesSidebar"===a,_=new Set;return m.forEach((e=>{Object.keys(e.property_updates).forEach((e=>{_.add(e)}))})),n?(0,V.jsx)(Te.ZP,{timestamp:j,header:_.size>1?(0,V.jsx)("span",{children:(0,V.jsx)(S.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} updated properties} other {{authorOrAuthors} updated properties}}",id:"activity.blockEdited.standardizedHeader.multiple",values:{numberOfAuthors:y.length,authorOrAuthors:b}})}):(0,V.jsx)("span",{children:(0,V.jsx)(S.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} updated a property} other {{authorOrAuthors} updated a property}}",id:"activity.blockEdited.standardizedHeader.single",values:{numberOfAuthors:y.length,authorOrAuthors:b}})}),isFirst:s,isLast:r,isPrivate:A,rootStore:i,navigableBlockId:p.id,notification:d,icon:(0,V.jsx)(ae.BE,{authors:y,size:Te.IX,style:{marginTop:0,marginRight:0},showAvatarShadow:!1}),showSnapshotButton:R,url:f,...(0,de.JJ)({notification:d,activity:t,environment:x,tab:a}),children:(0,V.jsx)(Qe.Z,{visible:5,items:m.map(((e,t)=>(0,V.jsx)($e.Z,{edit:e,rootStore:i},t)))})}):(0,V.jsxs)(Ve,{timestamp:j,header:(0,V.jsx)("span",{children:(0,V.jsx)(S.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} updated {pageTitle}} other {{authorOrAuthors} updated {pageTitle}}}",id:"activity.blockEdited.standardizedHeader",values:{numberOfAuthors:y.length,authorOrAuthors:b,pageTitle:I}})}),isLast:r,isPrivate:A,rootStore:i,navigableBlockId:p.id,notification:d,icon:(0,V.jsx)(ae.BE,{authors:y,size:24}),showSnapshotButton:R,showRecordPath:!0,...(0,de.h9)({notification:d,activity:t,environment:x,tab:a}),children:[(0,V.jsx)(Qe.Z,{visible:5,items:m.map(((e,s)=>(0,V.jsx)(tt,{edit:e,rootStore:i,onClick:()=>(0,de.dG)({environment:x,activity:t,...o}),source:c,isMobile:x.device.isMobile},s)))}),(0,V.jsx)(ce.Z,{tabArgs:o,activity:t,isMobile:x.device.isMobile,environment:x,rootStore:i})]})}function tt(e){window.__c={n:"BlockPropertyEditComponent"};const{rootStore:t,edit:i,onClick:o,source:s,isMobile:r}=e,n=(0,g.VK)((()=>function(e,t){const i=t.getRecordModel({table:v.iU,id:e.block_id}),o=(null==i?void 0:i.getType())===We.Ti.tableRow?t.getRecordModel({table:v.iU,id:i.getParentId()}):i;return null==o?void 0:o.getRenderUrl({getRecordModel:t.getRecordModel,pageVisitSource:Ge.tY.Notification})}(i,t)||Ye._j.root),[i,t]);return(0,V.jsx)(Xe.Z,{href:n,onClick:o,innerStyle:(0,le.OD)({source:s,isMobile:r}),children:(0,V.jsx)($e.Z,{edit:i,rootStore:t})})}var it=i(92996),ot=i(23867),st=i(70203),rt=i(95306),nt=i(60682),at=i(14976),dt=i(98165),ct=i(92559);function lt(e){let{activity:t,tabArgs:i,rootStore:s,isLast:r}=e;window.__c={n:"CommentActivityNotification"};const n=(0,g.VK)((()=>t.getEdits()),[t]),{source:c,tab:h,notification:p}=i;let f=n.filter((e=>{switch(e.type){case"comment-changed":return!1;case"comment-created":case"comment-deleted":return!0;default:(0,d.t1)(e)}}));0===f.length&&0!==n.length&&"updates_sidebar"!==c&&(f=n);const y=f.length>0,b=(0,u.O7)(),x=(0,g.VK)((()=>{const e=s.getRecordStore(s,{table:a.qF,id:t.discussion_id,spaceId:t.space_id});if(e.isDefined())return e}),[t,s]),A=(0,g.VK)((()=>{const e=null==x?void 0:x.getParentPointer();if(e)return w.G.createChildStore(s,e)}),[x,s]),M=(0,g.VK)((()=>Boolean(A&&A.isDefined())),[A]),j=(0,g.VK)((()=>{const e=null==A?void 0:A.getNavigableBlockStore();return(null==e?void 0:e.id)||t.navigable_block_id}),[t,A]),C=w.G.createChildStore(s,{table:v.iU,id:j}),I=(0,g.VK)((()=>C.isDefined()),[C]),R=(0,g.VK)((()=>Boolean(A&&(0,dt.fl)((0,dt.qA)(A)))),[A]),_=(0,g.VK)((()=>{if(!R||!A)return;const e=A.getModel();return e?e.getRenderUrl({getRecordModel:s.getRecordModel,discussionId:t.discussion_id,pageVisitSource:Ge.tY.Notification}):void 0}),[R,A,s,t]),k=(0,g.VK)((()=>(0,l.P6)({edits:f,rootStore:s})),[f,s]),B=(0,g.VK)((()=>(0,l.XW)(k)),[k]),T=R,K=(0,m.yK)((()=>({flex:{display:"flex"}})),[]),O=(0,o.useCallback)((e=>{if((0,de.dG)({...i,environment:b,activity:t,mightCloseTab:T}),!R&&A&&x){var o;const s=e.target;rt.oK({environment:b,discussionStore:x,rect:s.getBoundingClientRect(),blockStore:A,discussionLocation:ht({forReplyMenu:!0,source:i.source}),activityId:t.id,notificationId:null===(o=i.notification)||void 0===o?void 0:o.id})}}),[t,R,A,x,b,i,T]),F=(0,o.useCallback)((()=>{(0,de.BE)({...i,environment:b,activity:t,mightCloseTab:T})}),[i,b,t,T]),P=(0,V.jsx)(ue.Z,{titledRecordStore:C,getRecordModel:s.getRecordModel,activity:t,tabArgs:i}),L=(0,g.VK)((()=>(0,l.jC)({recordId:j,recordType:v.iU,tab:h,rootStore:s,environment:b})),[j,h,s,b]),z=b.device.isMobile,D=(0,g.VK)((()=>ht({source:c,forReplyMenu:!1})),[c]),Z=(0,g.VK)((()=>(0,l.cr)({activity:t,rootStore:s})),[t,s]),q=null==Z?void 0:Z.id,E=null==Z?void 0:Z.context,U=(0,g.VK)((()=>{const e=C.getAssociatedCollectionStore();return null==e?void 0:e.getDatabaseType()}),[C]),H=(0,g.VK)((()=>parseInt(t.end_time)),[t]);if(!(y&&I&&M&&x))return null;const N=!E,G=(0,V.jsxs)("div",{style:K.flex,children:[N&&(0,V.jsx)(ct.Z,{}),P]}),W=function(e){let{databaseType:t,authorCount:i,authorPhrase:o}=e;switch(t){case it.iS:return(0,V.jsx)(S.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} commented on a task} other {{authorOrAuthors} commented on a task}}",values:{numberOfAuthors:i,authorOrAuthors:o},id:"activity.commentTaskActivity.standardizedHeader"});case it.wW:return(0,V.jsx)(S.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} commented on a project} other {{authorOrAuthors} commented on a project}}",values:{numberOfAuthors:i,authorOrAuthors:o},id:"activity.commentProjectActivity.standardizedHeader"});case it.zU:return(0,V.jsx)(S.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} commented on a document} other {{authorOrAuthors} commented on a document}}",values:{numberOfAuthors:i,authorOrAuthors:o},id:"activity.commentDocActivity.standardizedHeader"});case it.GZ:return(0,V.jsx)(S.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} commented on a wiki page} other {{authorOrAuthors} commented on a wiki page}}",values:{numberOfAuthors:i,authorOrAuthors:o},id:"activity.commentWikiActivity.standardizedHeader"});case it.Fi:return(0,V.jsx)(S.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} commented on a meeting note} other {{authorOrAuthors} commented on a meeting note}}",values:{numberOfAuthors:i,authorOrAuthors:o},id:"activity.commentMeetingActivity.standardizedHeader"});case it.nG:case it.Be:case it.p$:case void 0:return(0,V.jsx)(S.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} commented on a page} other {{authorOrAuthors} commented on a page}}",values:{numberOfAuthors:i,authorOrAuthors:o},id:"activity.commentActivity.standardizedHeader"});default:(0,d.t1)(t)}}({authorCount:k.length,authorPhrase:B,databaseType:U});return(0,V.jsxs)(Ve,{timestamp:H,header:(0,V.jsx)("span",{children:W}),isLast:r,isPrivate:L,rootStore:s,prominentTitleLink:G,navigableBlockId:j,notification:p,icon:(0,V.jsx)(ae.BE,{authors:k,size:24}),showSnapshotButton:!1,showRecordPath:!0,...(0,de.h9)({notification:p,environment:b,tab:h,activity:t}),children:[(0,V.jsx)(ut,{discussionId:q,discussionContext:E,alwaysHighlightWithBlockBar:!0,url:_,onClick:O,rootStore:s,source:c}),(0,V.jsx)(Qe.Z,{visible:5,items:f.map(((e,t,i)=>(0,V.jsx)(Xe.Z,{onClick:O,href:_,innerStyle:(0,le.OD)({source:c,isMobile:z}),children:(0,V.jsx)($e.Z,{edit:e,rootStore:s,type:"comment-edit",discussionLocation:D,highlightCurrentUser:!0,onReactionClick:F,hideAuthorName:1===f.length})},t)))}),(0,V.jsx)(gt,{activity:t,rootStore:s,tabArgs:i})]})}function ut(e){window.__c={n:"CommentContext"};const{url:t,onClick:i,rootStore:o,source:s,discussionId:r,alwaysHighlightWithBlockBar:n,discussionContext:a}=e,d=0===(0,st.llS)(a).length||n,c=(0,u.O7)(),l=c.device.isMobile,h=(0,m.Fg)(),p=(0,m.yK)((e=>({linkbox:{...(0,le.OD)({source:s,isMobile:l}),display:"flex",alignItems:"center",fontSize:14,...d&&{color:e.mediumTextColor},paddingTop:2,paddingBottom:6,marginBottom:0}})),[l,s,d]),v=(0,g.VK)((()=>(0,at.IY)({environment:c,textValue:a?{value:a,spaceId:o.id}:void 0,parentStore:o,disableHover:!0,disableStyleAnnotations:d,disableInsertedDeletedAnnotations:d,disableDateStyleAnnotations:!1,disabled:!0,highlightDiscussionId:r,theme:h,emojiType:(0,nt.e_)(c),katex:c.KatexStore.getKatex(),formulaValueTypes:[]})),[o,c,a,r,h,d]);return a?(0,V.jsxs)(Xe.Z,{href:t,onClick:i,innerStyle:p.linkbox,children:[d&&(0,V.jsx)(ct.Z,{}),(0,V.jsx)("div",{style:x.Z.textOverflowStyle,children:v})]}):null}function gt(e){window.__c={n:"CommentActions"};const{activity:t,rootStore:i,tabArgs:s}=e,{source:r,notification:n,tab:d}=s,c=(0,g.VK)((()=>{const e=i.getRecordStore(i,{table:a.qF,id:t.discussion_id,spaceId:t.space_id});if(e.isDefined())return e}),[t,i]),l=(0,u.O7)(),h=l.device.isMobile,p=(0,g.VK)((()=>w.t1.createChildStore(i,{table:a.qF,id:t.discussion_id,spaceId:(0,ot.C)(i.pointer.spaceId)})),[t,i]),f=(0,g.VK)((()=>null==c?void 0:c.getParentId()),[c]),y=(0,o.useCallback)((e=>{if(!f)return;const o=w.G.createChildStore(i,{table:v.iU,id:f}),s=e.target,a=null==n?void 0:n.id;rt.oK({environment:l,discussionStore:p,rect:s.getBoundingClientRect(),blockStore:o,discussionLocation:ht({forReplyMenu:!0,source:r}),activityId:t.id,notificationId:a}),"notifications_tab"===r&&N.gY({environment:l,notificationId:a,alreadyRead:Boolean(null==n?void 0:n.read),activity:t,tab:d})}),[t,p,l,n,f,i,r,d]),b=(0,m.yK)((e=>({container:{paddingLeft:(0,le.c3)({source:r,isMobile:h}),paddingTop:12,paddingBottom:4},actionButton:(0,le.b9)(e)})),[h,r]),x=Boolean(null==n?void 0:n.visited);return c?(0,V.jsxs)("div",{style:b.container,children:[(0,V.jsx)(_.Z,{onClick:y,style:b.actionButton,children:(0,V.jsx)(S.FormattedMessage,{defaultMessage:"Reply",id:"activity.replyButton.label"})}),x&&(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(mt,{}),(0,V.jsx)(ce.D,{tabArgs:s,environment:l,rootStore:i,activity:t})]})]}):null}function mt(){return(0,V.jsx)("div",{style:{width:5,display:"inline-block"}})}function ht(e){const{forReplyMenu:t,source:i}=e;if("updates_sidebar"===i)return t?"reply_menu_updates_sidebar":"updates_sidebar";return`${t?"reply_menu_":"updates_menu_"}${N.Jn()}`}const pt=o.memo(lt);var vt=i(8848),ft=i(41219),yt=i(44805),bt=i(65598),xt=i(75024),St=i(77907),At=i(80444),Mt=i(45325),jt=i(2456),Ct=i(64921),wt=i(31278),It=i(76798);function Rt(e){window.__c={n:"CommentActivityWithIndentedGroupingIA"};const{activity:t,isFirst:i,isLast:s,tabArgs:r,rootStore:n}=e,{source:c,tab:h,notification:p}=r,f=(0,g.VK)((()=>t.getEdits()),[t]);let y=f.filter((e=>{switch(e.type){case"comment-changed":return!1;case"comment-created":case"comment-deleted":return!0;default:(0,d.t1)(e)}}));0===y.length&&0!==f.length&&"updates_sidebar"!==c&&(y=f);const b=y.length>0,x=(0,u.O7)(),A=(0,g.VK)((()=>n.getRecordStore(n,{table:a.qF,id:t.discussion_id,spaceId:t.space_id})),[n,t]),M=(0,g.VK)((()=>A.isDefined()),[A]),j=(0,g.VK)((()=>{const e=A.getParentPointer();if(e)return w.G.createChildStore(n,e)}),[A,n]),I=(0,g.VK)((()=>Boolean(j&&j.isDefined())),[j]),R=(0,g.VK)((()=>{const e=null==j?void 0:j.getNavigableBlockStore();return(null==e?void 0:e.id)||t.navigable_block_id}),[t,j]),_=w.G.createChildStore(n,{table:v.iU,id:R}),k=(0,g.VK)((()=>_.isDefined()),[_]),B=(0,g.VK)((()=>{if(!j)return;const e=j.getModel();return e?e.getRenderUrl({getRecordModel:n.getRecordModel,discussionId:t.discussion_id,pageVisitSource:Ge.tY.Notification}):void 0}),[j,n,t]),T=(0,g.VK)((()=>ht({source:c,forReplyMenu:!1})),[c]),K=(0,g.VK)((()=>(0,l.cr)({activity:t,rootStore:n})),[t,n]),O=(0,g.VK)((()=>t.getDiscussionId()),[t]),P=Lt(A),L=(0,g.VK)((()=>{var e;const t=null===(e=At.default.state.currentUserStore)||void 0===e?void 0:e.id,i=P.map((e=>e.getCreatedByPointer())).filter(d.$K).map((e=>w.t1.createChildStore(A,e).getModel())).filter(d.$K).filter((e=>e.id!==t));return(0,F.mN)(i,(e=>e.id))}),[P,A]),z=(0,g.VK)((()=>(0,l.XW)(L,{...(0,C.h_)({useInboxRedesign:!0})})),[L]),D=(0,g.VK)((()=>(0,l.jC)({recordId:R,recordType:v.iU,tab:h,rootStore:n,environment:x})),[R,h,n,x]),Z=null==K?void 0:K.context,q=(0,g.VK)((()=>{const e=_.getAssociatedCollectionStore();return null==e?void 0:e.getDatabaseType()}),[_]),E=(0,g.VK)((()=>parseInt(t.end_time)),[t]),U=!(0,g.VK)((()=>1===P.length),[P]),H=(0,o.useCallback)((()=>{(0,de.BE)({...r,environment:x,activity:t})}),[r,x,t]),N=(0,m.yK)((e=>({flex:{display:"flex"},discussionThreadContainer:{display:"flex",flexDirection:"column",marginTop:Bt},commentContextContainer:{marginTop:2},commentContextText:{color:e.regularTextColor}})),[]);if(!(b&&k&&I&&M))return null;const G=Z?U?(0,V.jsx)(S.FormattedMessage,{id:"CommentGroupingActivity.discussionThread.title",defaultMessage:"New comments on a thread"}):(0,V.jsx)(Ft,{authorPhrase:z,databaseType:q}):U?(0,V.jsx)(S.FormattedMessage,{id:"CommentGroupingActivity.discussionThreadPageLevel.title",defaultMessage:"New page comments"}):(0,V.jsx)(S.FormattedMessage,{defaultMessage:"{author} commented on the page",values:{author:z},id:"activity.commentActivity.standardizedGroupedHeaderPageLevel.single"});return(0,V.jsxs)(Te.ZP,{timestamp:E,header:G,isFirst:i,isLast:s,isPrivate:D,rootStore:n,prominentTitleLink:void 0,navigableBlockId:R,notification:p,icon:U?(0,V.jsx)(Pt,{}):(0,V.jsx)(ae.BE,{authors:L,size:Te.IX,style:{marginTop:0,marginRight:0},showAvatarShadow:!1}),showSnapshotButton:!1,url:B,...(0,de.JJ)({notification:p,environment:x,tab:h,activity:t}),children:[Z&&(0,V.jsx)("div",{style:N.commentContextContainer,children:(0,V.jsx)(Ot,{navigableBlockStore:_,discussionId:O,discussionContext:Z,rootStore:n})}),(0,V.jsx)("div",{style:N.discussionThreadContainer,children:O&&(0,V.jsx)(kt,{rootStore:n,discussionId:O,discussionLocation:T,onReactionClick:H})})]})}const _t=2;function kt(e){window.__c={n:"DiscussionThread"};const{rootStore:t,discussionId:i,discussionLocation:s,onReactionClick:r}=e,n=(0,u.O7)(),[d,c]=(0,o.useState)(!1),l=(0,g.VK)((()=>w.t1.createChildStore(t,{table:a.qF,id:i,spaceId:t.id})),[t,i]),h=Lt(l),p=(0,o.useCallback)((e=>{c(!d),N.EH(n,{expand:!d,comments_count:h.length,discussion_id:i}),e.stopPropagation(),e.preventDefault()}),[d,h.length,i,n]),v=h.length-_t,f=v>0,y=1===h.length,b=(0,m.yK)((e=>({discussion:{display:"flex",flexDirection:"column",gap:Bt},truncateRepliesButton:{display:"flex",gap:8,padding:4,marginLeft:-4,borderRadius:4},avatars:{display:"flex"},truncationText:{display:"flex",alignItems:"center",color:e.lightTextColor,fontSize:12},expandButtonBase:{display:"flex",justifyContent:"start",alignItems:"center",gap:14,borderRadius:3,paddingTop:4,paddingBotton:4,fontSize:12,color:e.lightTextColor},expandButtonHovered:{color:e.regularTextColor,background:void 0},expandButtonPressed:{color:e.regularTextColor,background:void 0},divider:{width:20,flexGrow:2,color:e.stroke.deemphasized}})),[]);if(y){const e=h[0];return(0,V.jsx)("div",{style:b.discussion,children:(0,V.jsx)(Vt,{commentStore:e,discussionStore:l,discussionLocation:s,onReactionClick:r,useCommentView:!0},e.id)})}return(0,V.jsx)("div",{style:b.discussion,children:d?(0,V.jsxs)(V.Fragment,{children:[(0,V.jsxs)(Ct.Z,{style:b.expandButtonBase,hoveredStyle:b.expandButtonHovered,pressedStyle:b.expandButtonPressed,onClick:p,children:[(0,V.jsx)(S.FormattedMessage,{id:"CommentGroupingActivity.discussionThread.hidePreviousRepliesCount",defaultMessage:"Hide {previousRepliesCount} {previousRepliesCount, plural, one {previous} other {previous}}",values:{previousRepliesCount:v}}),(0,V.jsx)(Z.Z,{size:1,style:b.divider,dividerColor:b.divider.color})]}),h.map((e=>(0,V.jsx)(Vt,{commentStore:e,discussionStore:l,discussionLocation:s,onReactionClick:r,useCommentView:!1},e.id)))]}):(0,V.jsxs)(V.Fragment,{children:[f&&(0,V.jsxs)(Ct.Z,{style:b.expandButtonBase,hoveredStyle:b.expandButtonHovered,pressedStyle:b.expandButtonPressed,onClick:p,children:[(0,V.jsx)(S.FormattedMessage,{id:"CommentGroupingActivity.discussionThread.showPreviousRepliesCount",defaultMessage:"Show {previousRepliesCount} {previousRepliesCount, plural, one {previous} other {previous}}",values:{previousRepliesCount:v}}),(0,V.jsx)(Z.Z,{size:1,style:b.divider})]}),h.slice(-2).map((e=>(0,V.jsx)(Vt,{commentStore:e,discussionStore:l,discussionLocation:s,onReactionClick:r,useCommentView:!1},e.id)))]})})}const Bt=4;function Vt(e){window.__c={n:"DiscussionThreadComment"};const{commentStore:t,discussionStore:i,discussionLocation:s,onReactionClick:r,useCommentView:n}=e,a=(0,u.Fy)(),c=(0,S.useIntl)(),[l,h]=(0,o.useState)(!1),p=(0,g.VK)((()=>{const e=t.getCreatedByPointer();if(e)return w.t1.createChildStore(t,e)}),[t]),f=(0,g.VK)((()=>p?p.getDisplayName(c):(0,V.jsx)(S.FormattedMessage,{id:"CommentGroupingActivity.discussionThreadComment.unknownAuthorLabel",defaultMessage:"Unknown author"})),[p,c]),y=(0,g.VK)((()=>{const e=t.getContent(),i=0===e.length;if(e||!i)return e.map((e=>{const i=w.t1.createChildStore(t,{table:v.iU,id:e,spaceId:t.getSpaceId()}).getValue();if(i)return(0,V.jsx)(jt.ZP,{blockValue:i,rootStore:t},e)})).filter(d.$K)}),[t]),b=(0,g.VK)((()=>t.getUserVisibleReactions().length>0),[t]),A=(0,g.VK)((()=>t.getLastEditedTime()>t.getCreatedTime()+100),[t]),M=!b&&a.isMobile,j=l||b,C=(0,o.useCallback)((e=>{a.isMobile?e.preventDefault():h(!0)}),[a.isMobile]),I=(0,o.useCallback)((e=>{a.isMobile?e.preventDefault():h(!1)}),[a.isMobile]),R=(0,m.yK)((e=>({avatarCommentReactionBarContainer:{...!b&&!a.isMobile&&{position:"relative"}},avatarAndCommentContainer:{display:"flex",gap:Bt},commentContainer:{display:"flex",justifyContent:"space-between",gap:6,overflow:"hidden",flexGrow:1},commentClampContainer:{display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:2,verticalAlign:"top",textAlign:"left",lineHeight:x.Z.lineHeight.UIRegular.desktop,...x.Z.textOverflowStyle,color:e.accentColors.gray[500]},fullName:{fontWeight:x.Z.fontWeight.medium,fontSize:13,lineHeight:x.Z.lineHeight.UIRegular.desktop,marginRight:8,color:e.regularTextColor},editedBadge:{fontSize:13,color:e.mediumTextColor,paddingLeft:4},reactionBarMobile:{...(!b||n)&&{}},reactionBar:{...!b&&{position:"absolute",top:-8,right:0}}})),[a,n,b]);return(0,V.jsx)("div",{children:(0,V.jsxs)("div",{style:R.avatarCommentReactionBarContainer,onMouseEnter:C,onMouseLeave:I,children:[(0,V.jsx)("div",{style:R.avatarAndCommentContainer,children:(0,V.jsxs)("div",{style:R.commentContainer,children:[(0,V.jsxs)("span",{style:R.commentClampContainer,children:[!n&&(0,V.jsx)("span",{style:R.fullName,children:f}),(0,V.jsx)(Kt,{discussionStore:i,commentStore:t}),y,A&&(0,V.jsx)("span",{style:R.editedBadge,children:(0,V.jsx)(S.FormattedMessage,{id:"CommentGroupingActivity.discussionThreadComment.editedBadge",defaultMessage:"(edited)"})})]}),M&&(0,V.jsx)("div",{onClick:e=>{e.stopPropagation(),e.preventDefault()},style:a.isMobile?R.reactionBarMobile:R.reactionBar,children:(0,V.jsx)(St.LazyReactionBar,{parentStore:t,discussionLocation:s,onClick:r,disableDropShadow:!0})})]})}),j&&(0,V.jsx)("div",{onClick:e=>{e.stopPropagation(),e.preventDefault()},style:a.isMobile?R.reactionBarMobile:R.reactionBar,children:(0,V.jsx)(St.LazyReactionBar,{parentStore:t,discussionLocation:s,onClick:r,disableDropShadow:!0})})]})})}function Tt(e){window.__c={n:"PageTitle"};const{store:t}=e,i=(0,g.VK)((()=>t.getIcon()),[t]),o=(0,g.VK)((()=>t.isEmptyPage()),[t]),s=(0,m.yK)((()=>({container:{display:"inline-grid",gridAutoFlow:"column",gap:4,alignItems:"center"},recordTitle:{display:"inline",...x.Z.textOverflowStyle}})),[]);return(0,V.jsxs)("span",{style:s.container,children:[(0,V.jsx)(wt.Z,{icon:i,isEmptyPage:o,size:14,disabled:!0}),(0,V.jsx)(It.Z,{store:t,style:s.recordTitle,shouldWrap:!0})]})}function Kt(e){window.__c={n:"CommentText"};const{discussionStore:t,commentStore:i}=e,o=(0,u.O7)(),s=(0,u.Fy)(),r=(0,m.Fg)(),n=(0,g.VK)((()=>bt.zP(i).getValue()),[i]),a=(0,g.VK)((()=>i.getSpaceId()),[i]),d=(0,g.VK)((()=>{if(!n||!a)return null;const e=(0,yt.H4)({textValue:n,currentUserId:o.currentUser.id,getRecordModel:t.getRecordModel,highlightStyle:"text_only"});return(0,at.IY)({environment:o,textValue:{value:e,spaceId:a},parentStore:t,disableStyleAnnotations:!1,disableInsertedDeletedAnnotations:!1,disableDateStyleAnnotations:!1,disableHover:!0,disabled:!0,theme:r,emojiType:(0,nt.e_)(o),katex:o.KatexStore.getKatex(),formulaValueTypes:[]})}),[o,t,r,n,a]),c=(0,m.yK)((e=>({commentText:{whiteSpace:"pre-wrap",wordBreak:"break-word",display:"inline",fontSize:13,color:e.mediumTextColor,lineHeight:(0,xt.Dp)({device:s},"UIRegular")}})),[s]);return(0,V.jsx)("span",{style:c.commentText,children:d})}function Ot(e){window.__c={n:"CommentContextForGrouping"};const{navigableBlockStore:t,discussionId:i,discussionContext:o,rootStore:s,textStyle:r}=e,n=(0,u.O7)(),a=(0,m.yK)((e=>({highlightContainer:{maxWidth:"100%",display:"flex"},highlight:{display:"inline-grid",gridAutoFlow:"column",gap:8,maxWidth:"100%",...x.Z.textOverflowStyle},text:{fontSize:13,color:e.mediumTextColor,...x.Z.textOverflowStyle,...r},highlightBlockBar:{width:2,borderRadius:1,backgroundColor:e.accentColors.yellow[200],height:22}})),[r]),d=(0,g.VK)((()=>{if(!o)return(0,V.jsx)(Tt,{store:t});const e=(0,vt.gh)({theme:n.ThemeModeStore.state});return(0,at.IY)({environment:n,textValue:o?{value:o,spaceId:s.id}:void 0,parentStore:s,disableHover:!0,disableStyleAnnotations:!0,disableInsertedDeletedAnnotations:!0,disableDateStyleAnnotations:!1,disabled:!0,highlightDiscussionId:i,theme:e,emojiType:(0,nt.e_)(n),katex:n.KatexStore.getKatex(),formulaValueTypes:[]})}),[t,s,n,o,i]);return(0,V.jsx)("div",{style:a.highlightContainer,children:(0,V.jsxs)("div",{style:a.highlight,children:[(0,V.jsx)("div",{style:a.highlightBlockBar}),(0,V.jsx)("span",{style:a.text,children:d})]})})}function Ft(e){let{databaseType:t,authorPhrase:i}=e;switch(t){case it.iS:return(0,V.jsx)(S.FormattedMessage,{defaultMessage:"{author} commented on a task",values:{author:i},id:"activity.commentTaskActivity.standardizedHeader.single"});case it.wW:return(0,V.jsx)(S.FormattedMessage,{defaultMessage:"{author} commented on a project",values:{author:i},id:"activity.commentProjectActivity.standardizedHeader.single"});case it.zU:return(0,V.jsx)(S.FormattedMessage,{defaultMessage:"{author} commented on a document",values:{author:i},id:"activity.commentDocActivity.standardizedHeader.single"});case it.GZ:return(0,V.jsx)(S.FormattedMessage,{defaultMessage:"{author} commented on a wiki page",values:{author:i},id:"activity.commentWikiActivity.standardizedHeader.single"});case it.Fi:return(0,V.jsx)(S.FormattedMessage,{defaultMessage:"{author} commented on a meeting note",values:{author:i},id:"activity.commentMeetingActivity.standardizedHeader.single"});case it.nG:case it.p$:case it.Be:case void 0:return(0,V.jsx)(S.FormattedMessage,{defaultMessage:"{author} commented",values:{author:i},id:"activity.commentActivity.standardizedGroupedHeader.single"});default:(0,d.t1)(t)}}function Pt(){window.__c={n:"QuotesIconInbox"};const e=(0,m.yK)((e=>({icon:{marginTop:1,height:13,width:13,fill:e.icon.secondary}})),[]);return(0,V.jsx)(Te.hn,{children:(0,ft.L)(e.icon)})}function Lt(e){return(0,g.VK)((()=>{const{discussionIdToExpansionStartPointMap:t}=Mt.default.state,i=e.getCommentStores().filter((e=>e.isDefined()));if(!t)return i;const o=t[e.id];if(!o)return i;const{commentId:s,timestamp:r}=o,n=s?i.findIndex((e=>e.id===s)):-1,a=r?i.findIndex((e=>e.getCreatedTime()>=r)):-1,d=n>=0?n:a;return d<0?i:i.slice(d)}),[e])}const zt=o.memo(Rt);var Dt=i(70301),Zt=i(45653);function qt(e){window.__c={n:"CommentViewTimeGroupingActivity"};const{activity:t,isFirst:i,isLast:s,tabArgs:r,rootStore:n}=e,{source:c,tab:h,notification:p}=r,f=(0,g.VK)((()=>t.getEdits()),[t]);let y=f.filter((e=>{switch(e.type){case"comment-changed":return!1;case"comment-created":case"comment-deleted":return!0;default:(0,d.t1)(e)}}));0===y.length&&0!==f.length&&"updates_sidebar"!==c&&(y=f);const b=y.length>0,x=(0,u.O7)(),A=(0,g.VK)((()=>n.getRecordStore(n,{table:a.qF,id:t.discussion_id,spaceId:t.space_id})),[n,t]),M=(0,g.VK)((()=>A.isDefined()),[A]),j=(0,g.VK)((()=>{const e=A.getParentPointer();if(e)return w.G.createChildStore(n,e)}),[A,n]),I=(0,g.VK)((()=>Boolean(j&&j.isDefined())),[j]),R=(0,g.VK)((()=>{const e=null==j?void 0:j.getNavigableBlockStore();return(null==e?void 0:e.id)||t.navigable_block_id}),[t,j]),_=w.G.createChildStore(n,{table:v.iU,id:R}),k=(0,g.VK)((()=>_.isDefined()),[_]),B=(0,g.VK)((()=>{if(!j)return;const e=j.getModel();return e?e.getRenderUrl({getRecordModel:n.getRecordModel,discussionId:t.discussion_id,pageVisitSource:Ge.tY.Notification}):void 0}),[j,n,t]),T=(0,g.VK)((()=>ht({source:c,forReplyMenu:!1})),[c]),K=(0,g.VK)((()=>(0,l.cr)({activity:t,rootStore:n})),[t,n]),O=(0,g.VK)((()=>t.getDiscussionId()),[t]),P=$t(A),L=(0,g.VK)((()=>{var e;const t=null===(e=At.default.state.currentUserStore)||void 0===e?void 0:e.id,i=P.map((e=>e.getCreatedByPointer())).filter(d.$K).map((e=>w.t1.createChildStore(A,e).getModel())).filter(d.$K).filter((e=>e.id!==t));return(0,F.mN)(i,(e=>e.id))}),[P,A]),z=(0,g.VK)((()=>(0,l.XW)(L,{...(0,C.h_)({useInboxRedesign:!0})})),[L]),D=(0,g.VK)((()=>(0,l.jC)({recordId:R,recordType:v.iU,tab:h,rootStore:n,environment:x})),[R,h,n,x]),Z=null==K?void 0:K.context,q=(0,g.VK)((()=>{const e=_.getAssociatedCollectionStore();return null==e?void 0:e.getDatabaseType()}),[_]),E=(0,g.VK)((()=>parseInt(t.end_time)),[t]),U=!(0,g.VK)((()=>1===P.length),[P]),H=(0,o.useCallback)((()=>{(0,de.BE)({...r,environment:x,activity:t})}),[r,x,t]),N=(0,m.yK)((e=>({flex:{display:"flex"},discussionThreadContainer:{display:"flex",flexDirection:"column",marginTop:Ht},commentContextContainer:{marginTop:2},commentContextText:{color:e.regularTextColor}})),[]);if(!(b&&k&&I&&M))return null;const G=Z?U?(0,V.jsx)(S.FormattedMessage,{id:"CommentGroupingActivity.discussionThread.title",defaultMessage:"New comments on a thread"}):(0,V.jsx)(Jt,{authorPhrase:z,databaseType:q}):U?(0,V.jsx)(S.FormattedMessage,{id:"CommentGroupingActivity.discussionThreadPageLevel.title",defaultMessage:"New page comments"}):(0,V.jsx)(S.FormattedMessage,{defaultMessage:"{author} commented on the page",values:{author:z},id:"activity.commentActivity.standardizedGroupedHeaderPageLevel.single"});return(0,V.jsxs)(Te.ZP,{timestamp:E,header:G,isFirst:i,isLast:s,isPrivate:D,rootStore:n,prominentTitleLink:void 0,navigableBlockId:R,notification:p,icon:U?(0,V.jsx)(Xt,{}):(0,V.jsx)(ae.BE,{authors:L,size:Te.IX,style:{marginTop:0,marginRight:0},showAvatarShadow:!1}),showSnapshotButton:!1,url:B,...(0,de.JJ)({notification:p,environment:x,tab:h,activity:t}),useDiscussionView:!1,children:[Z&&(0,V.jsx)("div",{style:N.commentContextContainer,children:(0,V.jsx)(Yt,{navigableBlockStore:_,discussionId:O,discussionContext:Z,rootStore:n})}),(0,V.jsx)("div",{style:N.discussionThreadContainer,children:O&&(0,V.jsx)(Ut,{rootStore:n,discussionId:O,discussionLocation:T,onReactionClick:H})}),(0,V.jsx)(Qt,{activity:t,rootStore:n,tabArgs:r})]})}const Et=2;function Ut(e){window.__c={n:"DiscussionThread"};const{rootStore:t,discussionId:i,discussionLocation:s,onReactionClick:r}=e,n=(0,u.O7)(),[d,c]=(0,o.useState)(!1),l=(0,g.VK)((()=>w.t1.createChildStore(t,{table:a.qF,id:i,spaceId:t.id})),[t,i]),h=$t(l),p=(0,o.useCallback)((e=>{c(!d),N.EH(n,{expand:!d,comments_count:h.length,discussion_id:i}),e.stopPropagation(),e.preventDefault()}),[d,h.length,i,n]),v=h.length-Et,f=v>0,y=1===h.length,b=(0,m.yK)((e=>({discussion:{display:"flex",flexDirection:"column",gap:Ht},truncateRepliesButton:{display:"flex",gap:8,padding:4,marginLeft:-4,borderRadius:4},avatars:{display:"flex"},truncationText:{display:"flex",alignItems:"center",color:e.lightTextColor,fontSize:12},expandButtonBase:{display:"flex",justifyContent:"start",alignItems:"center",gap:14,borderRadius:3,paddingTop:4,paddingBotton:4,fontSize:12,color:e.lightTextColor},expandButtonHovered:{color:e.regularTextColor,background:void 0},expandButtonPressed:{color:e.regularTextColor,background:void 0},divider:{width:20,flexGrow:2,color:e.stroke.deemphasized}})),[]);if(y){const e=h[0];return(0,V.jsx)("div",{style:b.discussion,children:(0,V.jsx)(Nt,{commentStore:e,discussionStore:l,discussionLocation:s,onReactionClick:r,useCommentView:!0},e.id)})}return(0,V.jsx)("div",{style:b.discussion,children:d?(0,V.jsxs)(V.Fragment,{children:[(0,V.jsxs)(Ct.Z,{style:b.expandButtonBase,hoveredStyle:b.expandButtonHovered,pressedStyle:b.expandButtonPressed,onClick:p,children:[(0,V.jsx)(S.FormattedMessage,{id:"CommentGroupingActivity.discussionThread.hidePreviousRepliesCount",defaultMessage:"Hide {previousRepliesCount} {previousRepliesCount, plural, one {previous} other {previous}}",values:{previousRepliesCount:v}}),(0,V.jsx)(Z.Z,{size:1,style:b.divider,dividerColor:b.divider.color})]}),h.map((e=>(0,V.jsx)(Nt,{commentStore:e,discussionStore:l,discussionLocation:s,onReactionClick:r,useCommentView:!1},e.id)))]}):(0,V.jsxs)(V.Fragment,{children:[f&&(0,V.jsxs)(Ct.Z,{style:b.expandButtonBase,hoveredStyle:b.expandButtonHovered,pressedStyle:b.expandButtonPressed,onClick:p,children:[(0,V.jsx)(S.FormattedMessage,{id:"CommentGroupingActivity.discussionThread.showPreviousRepliesCount",defaultMessage:"Show {previousRepliesCount} {previousRepliesCount, plural, one {previous} other {previous}}",values:{previousRepliesCount:v}}),(0,V.jsx)(Z.Z,{size:1,style:b.divider})]}),h.slice(-2).map((e=>(0,V.jsx)(Nt,{commentStore:e,discussionStore:l,discussionLocation:s,onReactionClick:r,useCommentView:!1},e.id)))]})})}const Ht=4;function Nt(e){window.__c={n:"DiscussionThreadComment"};const{commentStore:t,discussionStore:i,discussionLocation:s,onReactionClick:r,useCommentView:n}=e,a=(0,u.Fy)(),c=(0,S.useIntl)(),[l,h]=(0,o.useState)(!1),p=(0,g.VK)((()=>{const e=t.getCreatedByPointer();if(e)return w.t1.createChildStore(t,e)}),[t]),f=(0,g.VK)((()=>p?p.getDisplayName(c):(0,V.jsx)(S.FormattedMessage,{id:"CommentGroupingActivity.discussionThreadComment.unknownAuthorLabel",defaultMessage:"Unknown author"})),[p,c]),y=(0,g.VK)((()=>{const e=t.getContent(),i=0===e.length;if(e||!i)return e.map((e=>{const i=w.t1.createChildStore(t,{table:v.iU,id:e,spaceId:t.getSpaceId()}).getValue();if(i)return(0,V.jsx)(jt.ZP,{blockValue:i,rootStore:t},e)})).filter(d.$K)}),[t]),b=(0,g.VK)((()=>t.getUserVisibleReactions().length>0),[t]),A=(0,g.VK)((()=>t.getLastEditedTime()>t.getCreatedTime()+100),[t]),M=!b&&a.isMobile,j=l||b,C=(0,o.useCallback)((e=>{a.isMobile?e.preventDefault():h(!0)}),[a.isMobile]),I=(0,o.useCallback)((e=>{a.isMobile?e.preventDefault():h(!1)}),[a.isMobile]),R=(0,m.yK)((e=>({avatarCommentReactionBarContainer:{...!b&&!a.isMobile&&{position:"relative"}},avatarAndCommentContainer:{display:"flex",gap:Ht},commentContainer:{display:"flex",justifyContent:"space-between",gap:6,overflow:"hidden",flexGrow:1},commentClampContainer:{display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:2,verticalAlign:"top",textAlign:"left",lineHeight:x.Z.lineHeight.UIRegular.desktop,...x.Z.textOverflowStyle,color:e.accentColors.gray[500]},fullName:{fontWeight:x.Z.fontWeight.medium,fontSize:13,lineHeight:x.Z.lineHeight.UIRegular.desktop,marginRight:8,color:e.regularTextColor},editedBadge:{fontSize:13,color:e.mediumTextColor,paddingLeft:4},reactionBarMobile:{...(!b||n)&&{}},reactionBar:{...!b&&{position:"absolute",top:-8,right:0}}})),[a,n,b]);return(0,V.jsxs)("div",{style:R.avatarCommentReactionBarContainer,onMouseEnter:C,onMouseLeave:I,children:[(0,V.jsx)("div",{style:R.avatarAndCommentContainer,children:(0,V.jsxs)("div",{style:R.commentContainer,children:[(0,V.jsxs)("span",{style:R.commentClampContainer,children:[!n&&(0,V.jsx)("span",{style:R.fullName,children:f}),(0,V.jsx)(Wt,{discussionStore:i,commentStore:t}),y,A&&(0,V.jsx)("span",{style:R.editedBadge,children:(0,V.jsx)(S.FormattedMessage,{id:"CommentGroupingActivity.discussionThreadComment.editedBadge",defaultMessage:"(edited)"})})]}),M&&(0,V.jsx)("div",{style:a.isMobile?R.reactionBarMobile:R.reactionBar,children:(0,V.jsx)(St.LazyReactionBar,{parentStore:t,discussionLocation:s,onClick:r,disableDropShadow:!0})})]})}),j&&(0,V.jsx)("div",{style:a.isMobile?R.reactionBarMobile:R.reactionBar,children:(0,V.jsx)(St.LazyReactionBar,{parentStore:t,discussionLocation:s,onClick:r,disableDropShadow:!0})})]})}function Gt(e){window.__c={n:"PageTitle"};const{store:t}=e,i=(0,g.VK)((()=>t.getIcon()),[t]),o=(0,g.VK)((()=>t.isEmptyPage()),[t]),s=(0,m.yK)((()=>({container:{display:"inline-grid",gridAutoFlow:"column",gap:4,alignItems:"center"},recordTitle:{display:"inline",...x.Z.textOverflowStyle}})),[]);return(0,V.jsxs)("span",{style:s.container,children:[(0,V.jsx)(wt.Z,{icon:i,isEmptyPage:o,size:14,disabled:!0}),(0,V.jsx)(It.Z,{store:t,style:s.recordTitle,shouldWrap:!0})]})}function Wt(e){window.__c={n:"CommentText"};const{discussionStore:t,commentStore:i}=e,o=(0,u.O7)(),s=(0,u.Fy)(),r=(0,m.Fg)(),n=(0,g.VK)((()=>bt.zP(i).getValue()),[i]),a=(0,g.VK)((()=>i.getSpaceId()),[i]),d=(0,g.VK)((()=>{if(!n||!a)return null;const e=(0,yt.H4)({textValue:n,currentUserId:o.currentUser.id,getRecordModel:t.getRecordModel,highlightStyle:"text_only"});return(0,at.IY)({environment:o,textValue:{value:e,spaceId:a},parentStore:t,disableStyleAnnotations:!1,disableInsertedDeletedAnnotations:!1,disableDateStyleAnnotations:!1,disableHover:!0,disabled:!0,theme:r,emojiType:(0,nt.e_)(o),katex:o.KatexStore.getKatex(),formulaValueTypes:[]})}),[o,t,r,n,a]),c=(0,m.yK)((e=>({commentText:{whiteSpace:"pre-wrap",wordBreak:"break-word",display:"inline",fontSize:14,color:e.mediumTextColor,lineHeight:(0,xt.Dp)({device:s},"UIRegular")}})),[s]);return(0,V.jsx)("span",{style:c.commentText,children:d})}function Yt(e){window.__c={n:"CommentContextForGrouping"};const{navigableBlockStore:t,discussionId:i,discussionContext:o,rootStore:s,textStyle:r}=e,n=(0,u.O7)(),a=(0,m.yK)((e=>({highlightContainer:{maxWidth:"100%",display:"flex"},highlight:{display:"inline-grid",gridAutoFlow:"column",gap:8,maxWidth:"100%",...x.Z.textOverflowStyle},text:{fontSize:13,color:e.mediumTextColor,...x.Z.textOverflowStyle,...r},highlightBlockBar:{width:2,borderRadius:1,backgroundColor:e.accentColors.yellow[200],height:22}})),[r]),d=(0,g.VK)((()=>{if(!o)return(0,V.jsx)(Gt,{store:t});const e=(0,vt.gh)({theme:n.ThemeModeStore.state});return(0,at.IY)({environment:n,textValue:o?{value:o,spaceId:s.id}:void 0,parentStore:s,disableHover:!0,disableStyleAnnotations:!0,disableInsertedDeletedAnnotations:!0,disableDateStyleAnnotations:!1,disabled:!0,highlightDiscussionId:i,theme:e,emojiType:(0,nt.e_)(n),katex:n.KatexStore.getKatex(),formulaValueTypes:[]})}),[t,s,n,o,i]);return(0,V.jsx)("div",{style:a.highlightContainer,children:(0,V.jsxs)("div",{style:a.highlight,children:[(0,V.jsx)("div",{style:a.highlightBlockBar}),(0,V.jsx)("span",{style:a.text,children:d})]})})}function Jt(e){let{databaseType:t,authorPhrase:i}=e;switch(t){case it.iS:return(0,V.jsx)(S.FormattedMessage,{defaultMessage:"{author} commented on a task",values:{author:i},id:"activity.commentTaskActivity.standardizedHeader.single"});case it.wW:return(0,V.jsx)(S.FormattedMessage,{defaultMessage:"{author} commented on a project",values:{author:i},id:"activity.commentProjectActivity.standardizedHeader.single"});case it.zU:return(0,V.jsx)(S.FormattedMessage,{defaultMessage:"{author} commented on a document",values:{author:i},id:"activity.commentDocActivity.standardizedHeader.single"});case it.GZ:return(0,V.jsx)(S.FormattedMessage,{defaultMessage:"{author} commented on a wiki page",values:{author:i},id:"activity.commentWikiActivity.standardizedHeader.single"});case it.Fi:return(0,V.jsx)(S.FormattedMessage,{defaultMessage:"{author} commented on a meeting note",values:{author:i},id:"activity.commentMeetingActivity.standardizedHeader.single"});case it.nG:case it.p$:case it.Be:case void 0:return(0,V.jsx)(S.FormattedMessage,{defaultMessage:"{author} commented",values:{author:i},id:"activity.commentActivity.standardizedGroupedHeader.single"});default:(0,d.t1)(t)}}function Xt(){window.__c={n:"QuotesIconInbox"};const e=(0,m.yK)((e=>({icon:{marginTop:1,height:13,width:13,fill:e.icon.secondary}})),[]);return(0,V.jsx)(Te.hn,{children:(0,ft.L)(e.icon)})}function $t(e){return(0,g.VK)((()=>{const{discussionIdToExpansionStartPointMap:t}=Mt.default.state,i=e.getCommentStores().filter((e=>e.isDefined()));if(!t)return i;const o=t[e.id];if(!o)return i;const{commentId:s,timestamp:r}=o,n=s?i.findIndex((e=>e.id===s)):-1,a=r?i.findIndex((e=>e.getCreatedTime()>=r)):-1,d=n>=0?n:a;return d<0?i:i.slice(d)}),[e])}function Qt(e){window.__c={n:"CommentActions"};const{activity:t,rootStore:i,tabArgs:s}=e,{source:r,notification:n,tab:d}=s,c=(0,g.VK)((()=>{const e=i.getRecordStore(i,{table:a.qF,id:t.discussion_id,spaceId:t.space_id});if(e.isDefined())return e}),[t,i]),l=(0,u.O7)(),h=(0,g.VK)((()=>w.t1.createChildStore(i,{table:a.qF,id:t.discussion_id,spaceId:(0,ot.C)(i.pointer.spaceId)})),[t,i]),p=(0,g.VK)((()=>null==c?void 0:c.getParentId()),[c]),f=(0,o.useCallback)((e=>{if(!p)return;const o=w.G.createChildStore(i,{table:v.iU,id:p}),s=e.target,a=null==n?void 0:n.id;rt.oK({environment:l,discussionStore:h,rect:s.getBoundingClientRect(),blockStore:o,discussionLocation:ht({forReplyMenu:!0,source:r}),activityId:t.id,notificationId:a}),"notifications_tab"===r&&N.gY({environment:l,notificationId:a,alreadyRead:Boolean(null==n?void 0:n.read),activity:t,tab:d})}),[t,h,l,n,p,i,r,d]),y=(0,m.yK)((e=>({container:{paddingTop:12,paddingBottom:4},actionButton:(0,le.b9)(e)})),[]);return c?(0,V.jsx)("div",{style:y.container,children:(0,V.jsx)(_.Z,{onClick:f,style:y.actionButton,children:(0,V.jsx)(S.FormattedMessage,{defaultMessage:"Reply",id:"activity.replyButton.label"})})}):null}const ei=o.memo(qt);var ti=i(4688);function ii(e){window.__c={n:"CommentTimeGroupingActivity"};const{activity:t,isFirst:i,isLast:s,tabArgs:r,rootStore:n}=e,{source:c,tab:h,notification:p}=r,f=(0,g.VK)((()=>t.getEdits()),[t]);let y=f.filter((e=>{switch(e.type){case"comment-changed":return!1;case"comment-created":case"comment-deleted":return!0;default:(0,d.t1)(e)}}));0===y.length&&0!==f.length&&"updates_sidebar"!==c&&(y=f);const b=y.length>0,x=(0,u.O7)(),A=(0,g.VK)((()=>n.getRecordStore(n,{table:a.qF,id:t.discussion_id,spaceId:t.space_id})),[n,t]),M=(0,g.VK)((()=>A.isDefined()),[A]),j=(0,g.VK)((()=>{const e=A.getParentPointer();if(e)return w.G.createChildStore(n,e)}),[A,n]),C=(0,g.VK)((()=>Boolean(j&&j.isDefined())),[j]),I=(0,g.VK)((()=>{const e=null==j?void 0:j.getNavigableBlockStore();return(null==e?void 0:e.id)||t.navigable_block_id}),[t,j]),R=w.G.createChildStore(n,{table:v.iU,id:I}),_=(0,g.VK)((()=>R.isDefined()),[R]),k=(0,g.VK)((()=>{if(!j)return;const e=j.getModel();return e?e.getRenderUrl({getRecordModel:n.getRecordModel,discussionId:t.discussion_id,pageVisitSource:Ge.tY.Notification}):void 0}),[j,n,t]),B=(0,g.VK)((()=>ht({source:c,forReplyMenu:!1})),[c]),T=(0,g.VK)((()=>(0,l.cr)({activity:t,rootStore:n})),[t,n]),K=(0,g.VK)((()=>t.getDiscussionId()),[t]),O=gi(A),F=(0,g.VK)((()=>(0,l.jC)({recordId:I,recordType:v.iU,tab:h,rootStore:n,environment:x})),[I,h,n,x]),P=null==T?void 0:T.context,L=(0,g.VK)((()=>{const e=n.getRecordStore(n,{table:a.qF,id:t.discussion_id,spaceId:t.space_id});if(e.isDefined())return e}),[t,n]),z=(0,g.VK)((()=>null==L?void 0:L.getParentId()),[L]),D=(0,g.VK)((()=>parseInt(t.end_time)),[t]),Z=(0,g.VK)((()=>1===O.length),[O]),q=(0,o.useCallback)((()=>{(0,de.BE)({...r,environment:x,activity:t})}),[r,x,t]),E=(0,m.yK)((e=>({flex:{display:"flex"},discussionThreadContainer:{display:"flex",flexDirection:"column",marginTop:ri},commentContextContainer:{marginTop:2},commentContextText:{color:e.regularTextColor}})),[]),U=(0,o.useCallback)((e=>{if(!z)return;const i=w.G.createChildStore(n,{table:v.iU,id:z}),o=e.target,s=null==p?void 0:p.id;rt.oK({environment:x,discussionStore:A,rect:o.getBoundingClientRect(),blockStore:i,discussionLocation:ht({forReplyMenu:!0,source:c}),activityId:t.id,notificationId:s}),"notifications_tab"===c&&N.gY({environment:x,notificationId:s,alreadyRead:Boolean(null==p?void 0:p.read),activity:t,tab:h})}),[t,A,x,p,z,n,c,h]);if(!(b&&_&&C&&M))return null;const H=(0,V.jsx)(S.FormattedMessage,{id:"commentTimeGroupingActivity.header.title",defaultMessage:"Discussion"}),G=(0,V.jsx)(V.Fragment,{children:P&&(0,V.jsx)("div",{style:E.commentContextContainer,children:(0,V.jsx)(ui,{navigableBlockStore:R,discussionId:K,discussionContext:P,rootStore:n})})});return Z?(0,V.jsx)(ei,{...e}):(0,V.jsxs)(Te.ZP,{timestamp:D,header:H,isFirst:i,isLast:s,isPrivate:F,rootStore:n,prominentTitleLink:void 0,navigableBlockId:I,notification:p,icon:void 0,showSnapshotButton:!1,url:k,...(0,de.JJ)({notification:p,environment:x,tab:h,activity:t}),useDiscussionView:!0,children:[(0,V.jsx)("div",{style:E.discussionThreadContainer,children:K&&(0,V.jsx)(si,{rootStore:n,discussionId:K,discussionLocation:B,onReactionClick:q,onMoreCommentsClick:U,discussionContextHighlight:G})}),(0,V.jsx)("div",{style:{paddingLeft:ti._z+ai+ni-ti.MY},children:(0,V.jsx)(hi,{activity:t,rootStore:n,tabArgs:r})})]})}const oi=2;function si(e){window.__c={n:"DiscussionThread"};const{rootStore:t,discussionId:i,discussionLocation:o,discussionContextHighlight:s,onMoreCommentsClick:r,onReactionClick:n}=e,d=(0,g.VK)((()=>w.t1.createChildStore(t,{table:a.qF,id:i,spaceId:t.id})),[t,i]),c=gi(d),l=c.length-oi,u=l>0,h=1===c.length,p=(0,m.yK)((e=>({discussion:{display:"flex",flexDirection:"column",gap:ri},truncateRepliesButton:{display:"flex",gap:8,padding:4,marginLeft:-4,borderRadius:4},avatars:{display:"flex"},truncationText:{display:"flex",alignItems:"center",color:e.lightTextColor,fontSize:12},expandButtonContainer:{paddingLeft:ti._z+ai+ni-ti.MY},expandButtonBase:{display:"flex",justifyContent:"start",alignItems:"center",gap:14,borderRadius:4,fontSize:14,padding:6,marginLeft:-6,color:e.lightTextColor,maxWidth:"fit-content"},divider:{width:20,flexGrow:2,color:e.stroke.deemphasized}})),[]);if(h){const e=c[0];return(0,V.jsx)("div",{style:p.discussion,children:(0,V.jsx)(di,{commentStore:e,discussionStore:d,discussionLocation:o,onReactionClick:n,useCommentView:!0,discussionContextHighlight:s},e.id)})}return(0,V.jsxs)("div",{style:p.discussion,children:[c.slice(0,1).map((e=>(0,V.jsx)(di,{commentStore:e,discussionStore:d,discussionLocation:o,onReactionClick:n,useCommentView:!1,discussionContextHighlight:s},e.id))),u&&(0,V.jsx)("div",{style:p.expandButtonContainer,children:(0,V.jsx)(Ct.Z,{style:p.expandButtonBase,onClick:r,children:(0,V.jsx)(S.FormattedMessage,{id:"CommentTimeGroupingActivity.discussionThread.hidePreviousRepliesCount",defaultMessage:"{previousRepliesCount} {previousRepliesCount, plural, one {more comment} other {more comments}}",values:{previousRepliesCount:l}})})}),c.slice(-1).map((e=>(0,V.jsx)(di,{commentStore:e,discussionStore:d,discussionLocation:o,onReactionClick:n,useCommentView:!1},e.id)))]})}const ri=4,ni=12,ai=22;ti._z;function di(e){window.__c={n:"DiscussionThreadComment"};const{commentStore:t,discussionStore:i,discussionLocation:s,onReactionClick:r,useCommentView:n,discussionContextHighlight:a}=e,c=(0,u.Fy)(),l=(0,S.useIntl)(),[h,p]=(0,o.useState)(!1),f=(0,g.VK)((()=>{const e=t.getCreatedByPointer();if(e)return w.t1.createChildStore(t,e)}),[t]),y=(0,g.VK)((()=>f?f.getDisplayName(l):(0,V.jsx)(S.FormattedMessage,{id:"CommentGroupingActivity.discussionThreadComment.unknownAuthorLabel",defaultMessage:"Unknown author"})),[f,l]),b=(0,g.VK)((()=>{const e=t.getContent(),i=0===e.length;if(e||!i)return e.map((e=>{const i=w.t1.createChildStore(t,{table:v.iU,id:e,spaceId:t.getSpaceId()}).getValue();if(i)return(0,V.jsx)(jt.ZP,{blockValue:i,rootStore:t},e)})).filter(d.$K)}),[t]),A=(0,g.VK)((()=>t.getUserVisibleReactions().length>0),[t]),M=(0,g.VK)((()=>t.getLastEditedTime()>t.getCreatedTime()+100),[t]),j=!A&&c.isMobile,C=h||A,I=(0,o.useCallback)((e=>{c.isMobile?e.preventDefault():p(!0)}),[c.isMobile]),R=(0,o.useCallback)((e=>{c.isMobile?e.preventDefault():p(!1)}),[c.isMobile]),_=(0,m.yK)((e=>({avatarCommentReactionBarContainer:{...!A&&!c.isMobile&&{position:"relative"}},avatarAndCommentContainer:{display:"flex",flexDirection:"column",paddingLeft:ti._z-ti.MY},highlightContainer:{paddingLeft:ai+ni},commentContainer:{display:"flex",flexDirection:"column",justifyContent:"space-between",gap:6,flexGrow:1,paddingLeft:ai+ni,...!A&&!c.isMobile&&{position:"relative"},...!A&&c.isMobile&&{flexDirection:"row"}},commentClampContainer:{display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:3,verticalAlign:"top",textAlign:"left",lineHeight:x.Z.lineHeight.UIRegular.desktop,...x.Z.textOverflowStyle,color:e.accentColors.gray[500]},fullName:{fontWeight:x.Z.fontWeight.medium,fontSize:14,lineHeight:x.Z.lineHeight.UIRegular.desktop,marginRight:8,color:e.regularTextColor},editedBadge:{fontSize:13,color:e.mediumTextColor,paddingLeft:4},reactionBarMobile:{...(!A||n)&&{}},reactionBar:{...!A&&{position:"absolute",top:-8,right:0,zIndex:1e5}},avatarAndFullName:{display:"flex",gap:ni,maxWidth:"100%"}})),[c,n,A]);return(0,V.jsxs)("div",{style:_.avatarAndCommentContainer,children:[(0,V.jsxs)("div",{style:_.avatarAndFullName,children:[f&&(0,V.jsx)(mi,{actorStore:f,size:22,avatar:void 0}),(0,V.jsx)("div",{style:_.fullName,children:y})]}),(0,V.jsx)("div",{style:_.highlightContainer,children:a}),(0,V.jsxs)("div",{style:_.commentContainer,onMouseEnter:I,onMouseLeave:R,children:[(0,V.jsxs)("div",{style:_.commentClampContainer,children:[(0,V.jsx)(li,{discussionStore:i,commentStore:t}),b,M&&(0,V.jsx)("span",{style:_.editedBadge,children:(0,V.jsx)(S.FormattedMessage,{id:"CommentGroupingActivity.discussionThreadComment.editedBadge",defaultMessage:"(edited)"})})]}),j&&(0,V.jsx)("div",{style:c.isMobile?_.reactionBarMobile:_.reactionBar,children:(0,V.jsx)(St.LazyReactionBar,{parentStore:t,discussionLocation:s,onClick:r,disableDropShadow:!0})}),C&&(0,V.jsx)("div",{style:c.isMobile?_.reactionBarMobile:_.reactionBar,children:(0,V.jsx)(St.LazyReactionBar,{parentStore:t,discussionLocation:s,onClick:r,disableDropShadow:!0})})]})]})}function ci(e){window.__c={n:"PageTitle"};const{store:t}=e,i=(0,g.VK)((()=>t.getIcon()),[t]),o=(0,g.VK)((()=>t.isEmptyPage()),[t]),s=(0,m.yK)((()=>({container:{display:"inline-grid",gridAutoFlow:"column",gap:4,alignItems:"center"},recordTitle:{display:"inline",...x.Z.textOverflowStyle}})),[]);return(0,V.jsxs)("span",{style:s.container,children:[(0,V.jsx)(wt.Z,{icon:i,isEmptyPage:o,size:12,disabled:!0}),(0,V.jsx)(It.Z,{store:t,style:s.recordTitle,shouldWrap:!0})]})}function li(e){window.__c={n:"CommentText"};const{discussionStore:t,commentStore:i}=e,o=(0,u.O7)(),s=(0,u.Fy)(),r=(0,m.Fg)(),n=(0,g.VK)((()=>bt.zP(i).getValue()),[i]),a=(0,g.VK)((()=>i.getSpaceId()),[i]),d=(0,g.VK)((()=>{if(!n||!a)return null;const e=(0,yt.H4)({textValue:n,currentUserId:o.currentUser.id,getRecordModel:t.getRecordModel,highlightStyle:"text_only"});return(0,at.IY)({environment:o,textValue:{value:e,spaceId:a},parentStore:t,disableStyleAnnotations:!1,disableInsertedDeletedAnnotations:!1,disableDateStyleAnnotations:!1,disableHover:!0,disabled:!0,theme:r,emojiType:(0,nt.e_)(o),katex:o.KatexStore.getKatex(),formulaValueTypes:[]})}),[o,t,r,n,a]),c=(0,m.yK)((e=>({commentText:{whiteSpace:"pre-wrap",wordBreak:"break-word",display:"inline",fontSize:14,color:e.mediumTextColor,lineHeight:(0,xt.Dp)({device:s},"UIRegular")}})),[s]);return(0,V.jsx)("span",{style:c.commentText,children:d})}function ui(e){window.__c={n:"CommentContextForGrouping"};const{navigableBlockStore:t,discussionId:i,discussionContext:o,rootStore:s,textStyle:r}=e,n=(0,u.O7)(),a=(0,m.yK)((e=>({highlightContainer:{maxWidth:"100%",display:"flex"},highlight:{display:"inline-grid",gridAutoFlow:"column",gap:8,maxWidth:"100%",...x.Z.textOverflowStyle},text:{fontSize:14,color:e.mediumTextColor,...x.Z.textOverflowStyle,...r},highlightBlockBar:{width:2,borderRadius:1,backgroundColor:e.accentColors.yellow[200],height:22}})),[r]),d=(0,g.VK)((()=>{if(!o)return(0,V.jsx)(ci,{store:t});const e=(0,vt.gh)({theme:n.ThemeModeStore.state});return(0,at.IY)({environment:n,textValue:o?{value:o,spaceId:s.id}:void 0,parentStore:s,disableHover:!0,disableStyleAnnotations:!0,disableInsertedDeletedAnnotations:!0,disableDateStyleAnnotations:!1,disabled:!0,highlightDiscussionId:i,theme:e,emojiType:(0,nt.e_)(n),katex:n.KatexStore.getKatex(),formulaValueTypes:[]})}),[t,s,n,o,i]);return(0,V.jsx)("div",{style:a.highlightContainer,children:(0,V.jsxs)("div",{style:a.highlight,children:[(0,V.jsx)("div",{style:a.highlightBlockBar}),(0,V.jsx)("span",{style:a.text,children:d})]})})}function gi(e){return(0,g.VK)((()=>{const{discussionIdToExpansionStartPointMap:t}=Mt.default.state,i=e.getCommentStores().filter((e=>e.isDefined()));if(!t)return i;const o=t[e.id];if(!o)return i;const{commentId:s,timestamp:r}=o,n=s?i.findIndex((e=>e.id===s)):-1,a=r?i.findIndex((e=>e.getCreatedTime()>=r)):-1,d=n>=0?n:a;return d<0?i:i.slice(d)}),[e])}function mi(e){const{actorStore:t,avatar:i}=e,o=e.size??28;return t?t.table===P.cZ?(0,V.jsx)(Dt.Z,{botStore:t,size:o}):t.table===b.KJ?(0,V.jsx)(Zt.Z,{userStore:t,size:o}):t.table===H.y?(0,V.jsx)(Zt.Z,{userStore:void 0,size:o}):void(0,d.t1)(t):i?(0,V.jsx)(Zt.Z,{avatar:i,size:o}):(0,V.jsx)(Zt.Z,{userStore:void 0,size:o})}function hi(e){window.__c={n:"CommentActions"};const{activity:t,rootStore:i,tabArgs:s}=e,{source:r,notification:n,tab:d}=s,c=(0,g.VK)((()=>{const e=i.getRecordStore(i,{table:a.qF,id:t.discussion_id,spaceId:t.space_id});if(e.isDefined())return e}),[t,i]),l=(0,u.O7)(),h=(0,g.VK)((()=>w.t1.createChildStore(i,{table:a.qF,id:t.discussion_id,spaceId:(0,ot.C)(i.pointer.spaceId)})),[t,i]),p=(0,g.VK)((()=>null==c?void 0:c.getParentId()),[c]),f=(0,o.useCallback)((e=>{if(!p)return;const o=w.G.createChildStore(i,{table:v.iU,id:p}),s=e.target,a=null==n?void 0:n.id;rt.oK({environment:l,discussionStore:h,rect:s.getBoundingClientRect(),blockStore:o,discussionLocation:ht({forReplyMenu:!0,source:r}),activityId:t.id,notificationId:a}),"notifications_tab"===r&&N.gY({environment:l,notificationId:a,alreadyRead:Boolean(null==n?void 0:n.read),activity:t,tab:d})}),[t,h,l,n,p,i,r,d]),y=(0,m.yK)((e=>({container:{paddingTop:12,paddingBottom:4},actionButton:(0,le.b9)(e)})),[]);return c?(0,V.jsx)("div",{style:y.container,children:(0,V.jsx)(_.Z,{onClick:f,style:y.actionButton,children:(0,V.jsx)(S.FormattedMessage,{defaultMessage:"Reply",id:"activity.replyButton.label"})})}):null}const pi=o.memo(ii);const vi=function(e){window.__c={n:"EmailEditedActivity"};const{activity:t,rootStore:i,tabArgs:o,isFirst:s,isLast:r,useInboxRedesign:n}=e,{tab:a,notification:d}=o,c=(0,u.O7)(),m=(0,g.VK)((()=>(0,Je.hI)(t.getEdits())),[t]),h=(0,g.VK)((()=>(0,l.P6)({edits:m,rootStore:i})),[m,i]),p=(0,g.VK)((()=>(0,l.XW)(h,{...(0,C.h_)({useInboxRedesign:n})})),[h,n]),{oldEmail:v,newEmail:f}=(0,g.VK)((()=>{const e=m[0];return{oldEmail:e?e.old_email:"",newEmail:e?e.new_email:""}}),[m]),y="pageUpdatesSidebar"===a,b=(0,g.VK)((()=>parseInt(t.end_time)),[t]);return n?(0,V.jsx)(Te.ZP,{timestamp:b,header:(0,V.jsx)("span",{children:(0,V.jsx)(S.FormattedMessage,{defaultMessage:"You updated your email to {newEmail}",values:{newEmail:f},id:"activity.emailEdited.header.short"})}),isFirst:s,isLast:r,isPrivate:!1,rootStore:i,notification:d,icon:(0,V.jsx)(ae.BE,{authors:h,size:Te.IX,style:{marginTop:0,marginRight:0},showAvatarShadow:!1}),showSnapshotButton:y,url:void 0,...(0,de.JJ)({notification:d,activity:t,environment:c,tab:a})}):(0,V.jsx)(Ve,{timestamp:b,header:(0,V.jsx)("span",{children:(0,V.jsx)(S.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} changed email from {oldEmail} to {newEmail}} other {{authorOrAuthors} changed email from {oldEmail} to {newEmail}}}",values:{numberOfAuthors:h.length,authorOrAuthors:p,oldEmail:v,newEmail:f},id:"activity.emailEdited.header"})}),isLast:r,isPrivate:!1,rootStore:i,showRecordPath:!1,notification:d,icon:(0,V.jsx)(ae.BE,{authors:h,size:24}),showSnapshotButton:y,...(0,de.h9)({notification:d,activity:t,environment:c,tab:a})})};var fi=i(30134),yi=i(29551);function bi(e){window.__c={n:"ExportCompletedActivity"};const{activity:t,rootStore:i,tabArgs:o,isFirst:s,isLast:r,useInboxRedesign:n}=e,{tab:a,notification:d,source:c}=o,l=(0,u.O7)(),h=l.device.isMobile,{activityEndTimestamp:p,edits:v}=(0,g.VK)((()=>({activityEndTimestamp:parseInt(t.end_time),edits:t.getEdits()})),[t]),f=Boolean(null==d?void 0:d.visited),y=(0,m.yK)((e=>({container:{paddingLeft:(0,le.c3)({source:c,isMobile:h}),paddingTop:12,paddingBottom:4},newContainer:{paddingTop:12,paddingBottom:4},actionButton:(0,le.b9)(e)})),[h,c]),b=(0,V.jsx)(S.FormattedMessage,{defaultMessage:"Your workspace export is ready",id:"activity.exportCompleted.header"}),x=(0,V.jsx)(yi.gq,{style:{fontSize:12},children:(0,V.jsx)(S.FormattedMessage,{defaultMessage:"The download link will expire in 7 days.",id:"activity.exportCompleted.downloadLink"})}),A=()=>{window.open(v[0].link,"_blank")};return n?(0,V.jsxs)(Te.ZP,{timestamp:p,header:b,isFirst:s,isLast:r,isPrivate:!0,rootStore:i,notification:d,icon:(0,V.jsx)(xi,{}),showSnapshotButton:!1,url:void 0,...(0,de.JJ)({notification:d,activity:t,environment:l,tab:a}),children:[x,(0,V.jsx)("div",{style:y.newContainer,children:(0,V.jsx)(_.Z,{onClick:A,style:y.actionButton,children:(0,V.jsx)(S.FormattedMessage,{defaultMessage:"Download",id:"activity.actions.exportCompleted.download"})})})]}):(0,V.jsxs)(Ve,{timestamp:p,header:b,isLast:r,isPrivate:!0,rootStore:i,notification:d,icon:(0,V.jsx)(ae.Hy,{}),showRecordPath:!0,showSnapshotButton:!1,...(0,de.h9)({notification:d,activity:t,environment:l,tab:a}),children:[(0,V.jsx)(yi.gq,{style:{paddingLeft:(0,le.c3)({source:c,isMobile:!1})},children:x}),(0,V.jsxs)("div",{style:y.container,children:[(0,V.jsx)(_.Z,{onClick:A,style:y.actionButton,children:(0,V.jsx)(S.FormattedMessage,{defaultMessage:"Download",id:"activity.actions.exportCompleted.download"})}),f&&(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(Si,{}),(0,V.jsx)(ce.D,{tabArgs:o,environment:l,rootStore:i,activity:t})]})]})]})}function xi(){window.__c={n:"ExportIconInbox"};const e=(0,m.yK)((e=>({icon:{height:16,width:16,fill:e.icon.secondary}})),[]);return(0,V.jsx)(Te.hn,{children:(0,fi.c)(e.icon)})}function Si(){return(0,V.jsx)("div",{style:{width:5,display:"inline-block"}})}var Ai=i(54584);function Mi(e){window.__c={n:"GroupMentionedActivity"};const{activity:t,rootStore:i,isFirst:o,isLast:s,tabArgs:r,useInboxRedesign:n}=e,{tab:a,notification:d,source:c}=r,m=(0,u.O7)(),h=(0,g.VK)((()=>t.getEdits()),[t]),p=h.length>0,f=h[0],y=w.G.createChildStore(i,{table:v.iU,id:f.navigable_block_id}),b=(0,g.VK)((()=>y.isDefined()),[y]),x=(0,g.VK)((()=>{const e=w.G.createChildStore(i,{table:v.iU,id:t.mentioned_block_id}).getModel();if(e)return e.getRenderUrl({getRecordModel:i.getRecordModel,pageVisitSource:Ge.tY.Notification})}),[t,i]),A=(0,g.VK)((()=>i.getModel()),[i]),M=(0,g.VK)((()=>(0,Ai.QH)(j.default.getIntl(),A,t.mentioned_group_id)),[A,t]),I=(0,g.VK)((()=>(0,l.P6)({edits:t.getEdits(),rootStore:i})),[t,i]),R=(0,g.VK)((()=>(0,l.XW)(I,{...(0,C.h_)({useInboxRedesign:n})})),[I,n]),_=m.device.isMobile,k=(0,g.VK)((()=>(0,l.jC)({recordId:y.id,recordType:v.iU,tab:a,rootStore:i,environment:m})),[y,a,i,m]),B=(0,g.VK)((()=>parseInt(t.end_time)),[t]);if(!p||!b||!x)return null;const T=(0,V.jsx)(ue.Z,{titledRecordStore:y,activity:t,tabArgs:r,getRecordModel:i.getRecordModel});return n?(0,V.jsx)(Te.ZP,{timestamp:B,header:(0,V.jsx)("span",{children:(0,V.jsx)(S.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} mentioned your group} other {{authorOrAuthors} mentioned your group}}",values:{numberOfAuthors:I.length,authorOrAuthors:R},id:"activity.groupMentionActivity.standardizedHeader.short"})}),isFirst:o,isLast:s,isPrivate:k,rootStore:i,navigableBlockId:y.id,notification:d,icon:(0,V.jsx)(ae.BE,{authors:I,size:Te.IX,style:{marginTop:0,marginRight:0},showAvatarShadow:!1}),showSnapshotButton:!1,url:x,...(0,de.JJ)({notification:d,activity:t,environment:m,tab:a}),children:(0,V.jsx)($e.Z,{edit:f,rootStore:i,highlightCurrentUser:!0,highlightCurrentUserStyle:"text_only"})}):(0,V.jsxs)(Ve,{timestamp:B,header:(0,V.jsx)("span",{children:(0,V.jsx)(S.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} mentioned {groupName} in a page} other {{authorOrAuthors} mentioned {groupName} in a page}}",values:{numberOfAuthors:I.length,authorOrAuthors:R,groupName:M},id:"activity.groupMentionActivity.standardizedHeader"})}),isLast:s,isPrivate:k,rootStore:i,prominentTitleLink:T,navigableBlockId:y.id,showRecordPath:!0,notification:d,icon:(0,V.jsx)(ae.BE,{authors:I,size:24}),showSnapshotButton:!1,...(0,de.h9)({notification:d,activity:t,environment:m,tab:a}),children:[(0,V.jsx)(Xe.Z,{href:x,onClick:()=>(0,de.dG)({environment:m,activity:t,...r}),innerStyle:(0,le.OD)({source:c,isMobile:_}),children:(0,V.jsx)($e.Z,{edit:f,rootStore:i,highlightCurrentUser:!0})}),(0,V.jsx)(ce.Z,{tabArgs:r,activity:t,isMobile:_,environment:m,rootStore:i})]})}var ji=i(1800),Ci=i(82356);function wi(e){window.__c={n:"ImportCompletedActivity"};const{activity:t,rootStore:i,tabArgs:o,isFirst:s,isLast:r,useInboxRedesign:n}=e,{tab:a,notification:d,source:c}=o,l=(0,u.O7)(),{activityEndTimestamp:h,edits:p}=(0,g.VK)((()=>({activityEndTimestamp:parseInt(t.end_time),edits:t.getEdits()})),[t]),v=l.device.isMobile,f=(0,m.yK)((e=>({linkbox:{...(0,le.OD)({source:c,isMobile:v}),display:"flex",alignItems:"center",fontSize:xt.yv(l,"UIRegular"),paddingTop:2,paddingBottom:6,marginBottom:0,width:"100%"},newContainerLinkBox:{...(0,le.OD)({source:c,isMobile:v}),display:"flex",alignItems:"center",fontSize:xt.yv(l,"UIRegular"),paddingTop:2,paddingBottom:6,marginBottom:0,paddingLeft:0,width:"100%"}})),[v,c,l]),y=Boolean(null==d?void 0:d.visited),b=(0,m.yK)((e=>({container:{paddingLeft:(0,le.c3)({source:c,isMobile:v}),paddingTop:12,paddingBottom:4},newContainer:{paddingLeft:(0,le.c3)({source:c,isMobile:v}),paddingTop:12,paddingBottom:4},actionButton:(0,le.b9)(e)})),[v,c]);if(!p.length)return(0,V.jsx)(V.Fragment,{});const{import_source:x,import_status:A,landing_page:M}=p[0],j=(0,V.jsx)(S.FormattedMessage,{defaultMessage:"Your {importSource} import has failed",id:"activity.importFailed.header",values:{importSource:x,importStatus:A}}),C=(0,V.jsx)(S.FormattedMessage,{defaultMessage:"Your {importSource} import was successful",id:"activity.importSuccess.header",values:{importSource:x,importStatus:A}}),w=(0,V.jsx)(yi.gq,{style:{fontSize:xt.yv(l,"UISmall")},children:(0,V.jsx)(S.FormattedMessage,{defaultMessage:"View projects and tasks in Notion",id:"activity.importCompleted.projects.redirect"})}),I=(0,V.jsx)(yi.gq,{style:{fontSize:xt.yv(l,"UISmall")},children:(0,V.jsx)(S.FormattedMessage,{defaultMessage:"View import logs",id:"activity.importCompleted.loggerPage.redirect"})}),R=(0,ji.Z)({pageId:M,pageVisitSource:Ge.tY.Import});return n?(0,V.jsx)(Te.ZP,{url:void 0,timestamp:h,header:"successful"===A?C:j,isPrivate:!0,isFirst:s,isLast:r,rootStore:i,notification:d,icon:(0,V.jsx)(Ii,{}),showSnapshotButton:!1,...(0,de.JJ)({notification:d,activity:t,environment:l,tab:a}),children:(0,V.jsx)(yi.gq,{children:(0,V.jsx)(Xe.Z,{href:R,innerStyle:f.newContainerLinkBox,children:"successful"===A?w:I})})}):(0,V.jsxs)(Ve,{timestamp:h,header:"successful"===A?C:j,isLast:r,isPrivate:!0,rootStore:i,notification:d,icon:(0,V.jsx)(ae._c,{}),showRecordPath:!0,showSnapshotButton:!1,...(0,de.h9)({notification:d,activity:t,environment:l,tab:a}),children:[(0,V.jsx)(yi.gq,{children:(0,V.jsx)(Xe.Z,{href:R,innerStyle:f.linkbox,children:"successful"===A?w:I})}),(0,V.jsx)("div",{style:b.container,children:y&&(0,V.jsx)(ce.D,{tabArgs:o,environment:l,rootStore:i,activity:t})})]})}function Ii(){window.__c={n:"ImportIconInbox"};const e=(0,m.yK)((e=>({icon:{height:16,width:16,fill:e.icon.secondary}})),[]);return(0,V.jsx)(Te.hn,{children:(0,Ci.l)(e.icon)})}const Ri=function(e){window.__c={n:"PrivateContentTransferredActivity"};const{activity:t,rootStore:i,tabArgs:o,isFirst:s,isLast:r,useInboxRedesign:n}=e,{tab:a,notification:d}=o,c=(0,u.O7)(),m=(0,g.VK)((()=>t.getEdits()),[t]),h=(0,g.VK)((()=>(0,l.P6)({edits:m,rootStore:i})),[m,i]),p=(0,g.VK)((()=>(0,l.XW)(h,{...(0,C.h_)({useInboxRedesign:n})})),[h,n]),f=(0,g.VK)((()=>{const e=w.G.createChildStore(i,{table:v.iU,id:t.navigable_block_id});if(e.isDefined())return e}),[t,i]),y=(0,g.VK)((()=>Boolean(f&&(0,l.jC)({recordId:f.id,recordType:v.iU,tab:a,rootStore:i,environment:c}))),[f,a,i,c]),x=(0,g.VK)((()=>parseInt(t.end_time)),[t]),A=m[0],M=(0,g.VK)((()=>(0,l.N8)(A.from_user_id,i)),[A,i]),I=(0,g.VK)((()=>(0,l.N8)(A.to_user_id,i)),[A,i]);if(!(m.length>0&&M&&I&&f))return null;const R=(0,O.$4)(j.default.getIntl(),(0,O.LU)({table:b.KJ,value:M})),_=(0,V.jsx)(ue.Z,{titledRecordStore:f,activity:t,tabArgs:o,getRecordModel:i.getRecordModel});return n?(0,V.jsx)(Te.ZP,{timestamp:x,header:(0,V.jsx)(S.FormattedMessage,{defaultMessage:"{authorPhrase} transferred {fromUserName}{fromUserNameEndsWithS, select, true {’} other {’s}} private pages to you",values:{authorPhrase:p,fromUserName:R,fromUserNameEndsWithS:"s"===R.slice(-1).toLowerCase()},id:"activity.privateContentTransferred.standardizedHeader.short"}),prominentTitleLink:_,isPrivate:y,rootStore:i,notification:o.notification,isFirst:s,isLast:r,icon:(0,V.jsx)(ae.BE,{authors:h,size:Te.IX,style:{marginTop:0,marginRight:0},showAvatarShadow:!1}),showSnapshotButton:!1,url:void 0,...(0,de.JJ)({notification:d,activity:t,environment:c,tab:a})}):(0,V.jsx)(Ve,{timestamp:x,header:(0,V.jsx)(S.FormattedMessage,{defaultMessage:"{authorPhrase} transferred private content from {fromUserName} to you",values:{authorPhrase:p,fromUserName:R},id:"activity.privateContentTransferred.standardizedHeader"}),isLast:r,prominentTitleLink:_,isPrivate:y,rootStore:i,notification:o.notification,icon:(0,V.jsx)(ae.BE,{authors:h,size:24}),showSnapshotButton:!1,showRecordPath:!1,...(0,de.h9)({notification:d,activity:t,environment:c,tab:a})})};var _i=i(36700);function ki(e){window.__c={n:"ReminderActivity"};const{activity:t,rootStore:i,tabArgs:o,isFirst:s,isLast:r,useInboxRedesign:n}=e,{notification:a,tab:d,source:c}=o,m=(0,u.O7)(),h=(0,g.VK)((()=>t.getEdits()),[t]),p=h.length>0,f=w.G.createChildStore(i,{table:v.iU,id:h[0].navigable_block_id}),y=(0,g.VK)((()=>f.isDefined()),[f]),b=(0,g.VK)((()=>{const e=w.G.createChildStore(i,{table:v.iU,id:t.reminder_block_id}).getModel();if(e)return e.getRenderUrl({getRecordModel:i.getRecordModel,pageVisitSource:Ge.tY.Notification})}),[t,i]),x=(0,g.VK)((()=>(0,l.jC)({recordId:f.id,recordType:v.iU,tab:d,rootStore:i,environment:m})),[f,d,i,m]),A=(0,g.VK)((()=>parseInt(t.end_time)),[t]);if(!p||!y||!b)return null;const M=m.device.isMobile,j=(0,V.jsx)(ue.Z,{titledRecordStore:f,getRecordModel:i.getRecordModel,activity:t,tabArgs:o});return n?(0,V.jsx)(Te.ZP,{timestamp:A,header:(0,V.jsx)("span",{children:(0,V.jsx)(S.FormattedMessage,{defaultMessage:"You have a reminder",id:"activity.reminderInActivity.header.short"})}),isFirst:s,isLast:r,isPrivate:x,rootStore:i,navigableBlockId:f.id,notification:a,icon:(0,V.jsx)(Bi,{}),showSnapshotButton:!1,url:b,...(0,de.JJ)({notification:a,activity:t,environment:m,tab:d}),children:(0,V.jsx)($e.Z,{edit:h[0],rootStore:i})}):(0,V.jsx)(Ve,{timestamp:A,header:(0,V.jsx)("span",{children:(0,V.jsx)(S.FormattedMessage,{defaultMessage:"Reminder in {pageTitle}",id:"activity.reminderInActivity.header",values:{pageTitle:j}})}),isLast:r,isPrivate:x,rootStore:i,navigableBlockId:f.id,showRecordPath:!0,notification:a,icon:(0,V.jsx)(ae.hZ,{}),showSnapshotButton:!1,...(0,de.h9)({notification:a,activity:t,environment:m,tab:d}),children:(0,V.jsx)(Xe.Z,{href:b,onClick:()=>(0,de.dG)({environment:m,activity:t,...o}),innerStyle:(0,le.OD)({source:c,isMobile:M}),children:(0,V.jsx)($e.Z,{edit:h[0],rootStore:i})})})}function Bi(){window.__c={n:"ReminderIconInbox"};const e=(0,m.yK)((e=>({icon:{height:16,width:16,fill:e.icon.secondary}})),[]);return(0,V.jsx)(Te.hn,{children:(0,_i.m)(e.icon)})}var Vi=i(95697),Ti=i(24646),Ki=i(62820),Oi=i(9867);function Fi(e){window.__c={n:"TitleCard"};const{titledRecordStore:t,rootStore:i,activity:s,tabArgs:r,useInboxRedesign:n,stopPropagation:a}=e,c=i.getRecordModel,l=(0,g.VK)((()=>t.getModel()),[t]),h=(0,u.O7)(),p=(0,g.VK)((()=>null==l?void 0:l.getRenderIcon({getRecordModel:c})),[l,c]),x=(0,m.yK)((e=>({container:n?{display:"block",borderWidth:1,borderStyle:"solid",borderColor:e.tint.regular,borderRadius:8,marginTop:12,padding:12,background:e.contentBackground,boxShadow:"0px 1px 2px 0px "+("light"===e.mode?"rgba(0, 0, 0, 0.03)":"rgba(0, 0, 0, 0.12)")}:{...le.lS,display:"block",border:`1px solid ${e.outlineButtonBorder}`,borderRadius:4,marginTop:8,padding:10},icon:{...le.e9,marginRight:8},activityTitle:{fontSize:14,display:"inline",whiteSpace:"normal",marginRight:void 0!==p?3:0,wordBreak:"break-word",...le.nP},flexRow:{display:"flex",alignItems:"center"},title:{maxWidth:"80%"},spacer:{flexGrow:1},subtitle:{fontSize:12,color:e.lightTextColor},avatarContainer:{display:"flex",flexDirection:"row",justifyContent:"start",overflow:"hidden",paddingRight:2,alignItems:"center"},overlappingAvatar:{marginRight:-5,position:"relative"},rightmostAvatar:{position:"relative"},remainderCount:{paddingLeft:2,color:e.lightTextColor}})),[p,n]),A=(0,g.VK)((()=>{if(l&&l.table!==y.e0)return l.getRenderUrl({getRecordModel:c,pageVisitSource:Ge.tY.Notification})}),[l,c]),M=(0,o.useCallback)((e=>{a&&e.stopPropagation();const i=t.table;switch(i){case v.iU:case f.bx:(0,de.V3)({environment:h,activity:s,...r});break;case y.e0:(0,de.dG)({environment:h,activity:s,...r}),Oi.hI({environment:h,teamStore:t,shouldScroll:!0}),Ki.Z.setState({...Ki.Z.state,open:!1});break;default:(0,d.t1)(i)}}),[s,h,r,t,a]),C=(0,g.VK)((()=>{const e=t.table;switch(e){case"space":const i=t.getPublicSpaceData();return i&&"none"!==i.role?(0,V.jsx)("div",{children:(0,V.jsx)(S.FormattedMessage,{id:"activity.titleCard.spaceSubtitle",defaultMessage:"{numberOfWorkspaceMembers, plural, one {{numberOfWorkspaceMembers} member} other {{numberOfWorkspaceMembers} members}} · {planType}",values:{numberOfWorkspaceMembers:j.default.formatNumber(i.memberCount),planType:j.default.formatMessage((0,Ti.em)(i.subscriptionTier))}})}):null;case"block":return(0,V.jsx)(xe.Z,{store:t});case"team":const o=t.getUserIdsInTeam().length,s=t.getTeamAccessLevel();return(0,V.jsx)("div",{children:(0,V.jsx)(S.FormattedMessage,{id:"activity.titleCard.teamSubtitle",defaultMessage:"{accessLevel} · {numberOfTeamMembers, plural, one {{numberOfTeamMembers} member} other {{numberOfTeamMembers} members}}",values:{accessLevel:s,numberOfTeamMembers:o}})});default:(0,d.t1)(e)}}),[t]),I=(0,g.VK)((()=>{const e=t.table;let o=[];switch(e){case"space":const s=t.getModel();if(!s)break;o=s.getUserPermissionItems().map((e=>e.user_id));break;case"block":const r=t.getCreatedByPointer();(null==r?void 0:r.table)===b.KJ&&(o=[r.id]);break;case"team":o=(0,Vi.xf)({teamStore:t,spaceStore:i});break;default:(0,d.t1)(e)}const s=Math.max(0,o.length-3),r=Math.min(o.length,3);return(0,V.jsxs)("div",{style:x.avatarContainer,children:[o.slice(0,3).map(((e,i)=>{const o=w.U6.createChildStore(t,{table:b.KJ,id:e}),s=i===r-1;if(o)return(0,V.jsx)(Zt.Z,{userStore:o,size:24,avatarShouldShowShadow:!1,style:s?x.rightmostAvatar:x.overlappingAvatar,isOffline:!1,hasTooltip:!h.device.isMobile},e)})),s>0&&(0,V.jsx)("div",{style:x.remainderCount,children:(0,V.jsx)(S.FormattedMessage,{defaultMessage:"{remainingAvatarCount, plural, one {+{remainingAvatarCount}} other {+{remainingAvatarCount}}}",id:"activity.titleCard.members.otherCount.message",values:{remainingAvatarCount:s}})})]})}),[h.device.isMobile,x,t,i]);return l?(0,V.jsx)(Xe.Z,{href:A,onClick:M,external:!1,innerStyle:x.container,inline:!0,children:(0,V.jsxs)("div",{style:x.flexRow,children:[p&&(0,V.jsx)(wt.Z,{disabled:!0,icon:p,isEmptyPage:!1,size:25,style:x.icon}),(0,V.jsxs)("div",{style:x.title,children:[(0,V.jsx)(It.Z,{store:t,style:x.activityTitle}),!n&&(0,V.jsx)("div",{style:x.subtitle,children:C})]}),(0,V.jsx)("div",{style:x.spacer}),(0,V.jsx)("div",{children:I})]})}):null}const Pi=o.memo(Fi);function Li(e){window.__c={n:"TeamMembershipEditedActivity"};const{activity:t,rootStore:i,tabArgs:o,isFirst:s,isLast:r,useInboxRedesign:n}=e,{notification:a,tab:d}=o,c=(0,u.O7)(),m=(0,g.VK)((()=>t.getEdits()),[t]),h=m.length>0,p=(0,g.VK)((()=>(0,l.P6)({edits:m,rootStore:i})),[m,i]),v=(0,g.VK)((()=>(0,l.XW)(p,{...(0,C.h_)({useInboxRedesign:n})})),[p,n]),f=m[0],b=w.zX.createChildStore(i,{table:y.e0,id:f.team_id}),x=(0,g.VK)((()=>b.isDefined()),[b]),A=(0,g.VK)((()=>parseInt(t.end_time)),[t]);return h&&x?n?(0,V.jsx)(Te.ZP,{timestamp:A,header:(0,V.jsx)(S.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} invited you to a teamspace} other {{authorOrAuthors} invited you to a teamspace}}",values:{numberOfAuthors:p.length,authorOrAuthors:v},id:"activity.userInvitedToTeamActivity.standardizedHeader"}),isFirst:s,isLast:r,isPrivate:!1,rootStore:i,notification:a,icon:(0,V.jsx)(ae.BE,{authors:p,size:Te.IX,style:{marginTop:0,marginRight:0},showAvatarShadow:!1}),showSnapshotButton:!1,url:void 0,...(0,de.JJ)({notification:a,activity:t,environment:c,tab:d}),children:(0,V.jsx)(Pi,{titledRecordStore:b,rootStore:i,activity:t,tabArgs:o,useInboxRedesign:!0})}):(0,V.jsx)(Ve,{timestamp:A,header:(0,V.jsx)(S.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} invited you to a teamspace} other {{authorOrAuthors} invited you to a teamspace}}",values:{numberOfAuthors:p.length,authorOrAuthors:v},id:"activity.userInvitedToTeamActivity.standardizedHeader"}),prominentTitleLink:(0,V.jsx)(Pi,{titledRecordStore:b,rootStore:i,activity:t,tabArgs:o,useInboxRedesign:!1}),isLast:r,isPrivate:!1,rootStore:i,notification:a,showRecordPath:!1,icon:(0,V.jsx)(ae.BE,{authors:p,size:24}),showSnapshotButton:!1,...(0,de.h9)({notification:a,activity:t,environment:c,tab:d})}):null}var zi=i(55061),Di=i(84683),Zi=i(94044),qi=i(63143),Ei=i(36081);function Ui(e){window.__c={n:"UserInvitedActivity"};const{activity:t,rootStore:i,tabArgs:o,isFirst:s,isLast:r,useInboxRedesign:n}=e,{notification:a,tab:c}=o,m=(0,u.O7)(),h=(0,g.VK)((()=>t.getEdits()),[t]),p=h[0],v=Yi({rootStore:i,edit:p}),f=function(e){let{data:t,spaceId:i,tab:o,rootStore:s}=e;const r=(0,u.O7)();return(0,g.VK)((()=>{let e,n;if(!t)return!1;if("block"===(null==t?void 0:t.type))e=t.block.id,n="block";else if("space"===(null==t?void 0:t.type)||"group"===(null==t?void 0:t.type)){if(!i)return!1;e=i,n="space"}else(0,d.t1)(t);return(0,l.jC)({recordId:e,recordType:n,tab:o,rootStore:s,environment:r})}),[t,r,s,i,o])}({data:v,spaceId:p.space_id,tab:c,rootStore:i}),y=(0,g.VK)((()=>(0,l.P6)({edits:h,rootStore:i})),[h,i]),b=(0,g.VK)((()=>{if("block"!==(null==v?void 0:v.type))return;return v.block}),[v]),x=(0,g.VK)((()=>{if(!b)return;const e=b.getModel();return e?e.getRenderUrl({getRecordModel:i.getRecordModel,pageVisitSource:Ge.tY.Notification}):void 0}),[b,i.getRecordModel]),S=(0,g.VK)((()=>parseInt(t.end_time)),[t]),A=(0,g.VK)((()=>t.navigable_block_id),[t]);if(0===h.length||!v)return null;const M=0===y.filter(O.uC).length,j=M?void 0:n?(0,V.jsx)(ae.BE,{authors:y,size:Te.IX,style:{marginTop:0,marginRight:0},showAvatarShadow:!1}):(0,V.jsx)(ae.BE,{authors:y,size:24});return n?(0,V.jsxs)(Te.ZP,{timestamp:S,header:(0,V.jsx)("span",{children:(0,V.jsx)(Gi,{data:v,authors:y,isFromBot:M,spaceId:p.space_id})}),isFirst:s,isLast:r,isPrivate:f,rootStore:i,navigableBlockId:A,notification:a,icon:j,showSnapshotButton:!1,url:x,...(0,de.JJ)({notification:a,environment:m,tab:c,activity:t}),children:[(0,V.jsx)(Hi,{data:v,rootStore:i,activity:t,tabArgs:o,useInboxRedesign:!0}),(0,V.jsx)(Wi,{...e,edit:p})]}):(0,V.jsx)(Ve,{timestamp:S,header:(0,V.jsx)("span",{children:(0,V.jsx)(Ni,{data:v,authors:y,isFromBot:M,spaceId:p.space_id})}),prominentTitleLink:(0,V.jsx)(Hi,{data:v,rootStore:i,activity:t,tabArgs:o,useInboxRedesign:!1}),isLast:r,isPrivate:f,rootStore:i,navigableBlockId:A,showRecordPath:!1,notification:a,icon:j,showSnapshotButton:!1,...(0,de.h9)({notification:a,environment:m,tab:c,activity:t}),children:(0,V.jsx)(Wi,{...e,edit:p})})}function Hi(e){var t;let{data:i,rootStore:o,activity:s,tabArgs:r,useInboxRedesign:n}=e;window.__c={n:"UserInviteTitle"};const a=(0,m.yK)((e=>({group:{color:e.mediumTextColor,fontSize:14}})),[]);switch(i.type){case"block":return(0,V.jsx)(Pi,{tabArgs:r,titledRecordStore:i.block,rootStore:o,activity:s,useInboxRedesign:n,stopPropagation:!0});case"group":return n?(0,V.jsx)("div",{style:a.group,children:(0,V.jsx)(S.FormattedMessage,{defaultMessage:"You will now get notifications when @{groupName} is mentioned",id:"activity.userInvitedActivity.groupInviteExplanation",values:{groupName:null===(t=i.group)||void 0===t?void 0:t.name}})}):null;case"space":return(0,V.jsx)(Pi,{tabArgs:r,titledRecordStore:i.space,rootStore:o,activity:s,useInboxRedesign:n,stopPropagation:!0});default:(0,d.t1)(i)}}function Ni(e){let{data:t,authors:i,isFromBot:o,spaceId:s}=e;window.__c={n:"UserInviteSimplifiedHeader"};const r=(0,g.VK)((()=>(0,l.XW)(i)),[i]),n=(0,g.VK)((()=>{var e;return"block"===t.type?null===(e=t.block.getAssociatedCollectionStore())||void 0===e?void 0:e.getDatabaseType():void 0}),[t]);switch(t.type){case"block":if(o)switch(n){case it.wW:return(0,V.jsx)(S.FormattedMessage,{defaultMessage:"You were added to a project",id:"activity.userInvitedActivityProjectByBot.standardizedHeader"});case it.iS:return(0,V.jsx)(S.FormattedMessage,{defaultMessage:"You were added to a task",id:"activity.userInvitedActivityTaskByBot.standardizedHeader"});case it.zU:return(0,V.jsx)(S.FormattedMessage,{defaultMessage:"You were added to a document",id:"activity.userInvitedActivityDocByBot.standardizedHeader"});case it.Fi:return(0,V.jsx)(S.FormattedMessage,{defaultMessage:"You were added to a meeting",id:"activity.userInvitedActivityMeetingByBot.standardizedHeader"});case it.p$:return(0,V.jsx)(S.FormattedMessage,{defaultMessage:"You were added to a sprint",id:"activity.userInvitedActivitySprintByBot.standardizedHeader"});case it.GZ:return(0,V.jsx)(S.FormattedMessage,{defaultMessage:"You were added to a wiki",id:"activity.userInvitedActivityWikiByBot.standardizedHeader"});default:return(0,V.jsx)(S.FormattedMessage,{defaultMessage:"You were added to a page",id:"activity.userInvitedActivityNavigableBlockByBot.standardizedHeader"})}else switch(n){case it.wW:return(0,V.jsx)(S.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} added you to a project} other {{authorOrAuthors} added you to a project}}",values:{numberOfAuthors:i.length,authorOrAuthors:r},id:"activity.userInvitedActivityProject.standardizedHeader"});case it.iS:return(0,V.jsx)(S.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} added you to a task} other {{authorOrAuthors} added you to a task}}",values:{numberOfAuthors:i.length,authorOrAuthors:r},id:"activity.userInvitedActivityTask.standardizedHeader"});case it.zU:return(0,V.jsx)(S.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} added you to a document} other {{authorOrAuthors} added you to a document}}",values:{numberOfAuthors:i.length,authorOrAuthors:r},id:"activity.userInvitedActivityDoc.standardizedHeader"});case it.Fi:return(0,V.jsx)(S.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} added you to a meeting} other {{authorOrAuthors} added you to a meeting}}",values:{numberOfAuthors:i.length,authorOrAuthors:r},id:"activity.userInvitedActivityMeeting.standardizedHeader"});case it.p$:return(0,V.jsx)(S.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} added you to a sprint} other {{authorOrAuthors} added you to a sprint}}",values:{numberOfAuthors:i.length,authorOrAuthors:r},id:"activity.userInvitedActivitySprint.standardizedHeader"});case it.GZ:return(0,V.jsx)(S.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} added you to a wiki} other {{authorOrAuthors} added you to a wiki}}",values:{numberOfAuthors:i.length,authorOrAuthors:r},id:"activity.userInvitedActivityWiki.standardizedHeader"});default:return(0,V.jsx)(S.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} added you to a page} other {{authorOrAuthors} added you to a page}}",values:{numberOfAuthors:i.length,authorOrAuthors:r},id:"activity.userInvitedActivityNavigableBlock.standardizedHeader"})}case"group":const e=(0,V.jsx)(Ei.Z,{permissionGroup:t.group,spaceId:s});return o?(0,V.jsx)(S.FormattedMessage,{defaultMessage:"You were added to group {groupName}",values:{groupName:e},id:"activity.userInvitedActivityGroupIdByBot.standardizedHeader"}):(0,V.jsx)(S.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} added you to group {groupName}} other {{authorOrAuthors} added you to group {groupName}}}",values:{numberOfAuthors:i.length,authorOrAuthors:r,groupName:e},id:"activity.userInvitedActivityGroupId.standardizedHeader"});case"space":return o?(0,V.jsx)(S.FormattedMessage,{defaultMessage:"You were added to a workspace",id:"activity.userInvitedActivityOtherInviteByBot.standardizedHeader"}):(0,V.jsx)(S.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} added you to a workspace} other {{authorOrAuthors} added you to a workspace}}",values:{numberOfAuthors:i.length,authorOrAuthors:r},id:"activity.userInvitedActivityOtherInvite.standardizedHeader"});default:(0,d.t1)(t)}}function Gi(e){var t,i;let{data:o,authors:s,isFromBot:r,spaceId:n}=e;window.__c={n:"UserInviteSimplifiedHeaderRedesign"};const a=(0,g.VK)((()=>(0,l.XW)(s,{...(0,C.h_)({useInboxRedesign:!0})})),[s]),c=(0,g.VK)((()=>{var e;return"block"===o.type?null===(e=o.block.getAssociatedCollectionStore())||void 0===e?void 0:e.getDatabaseType():void 0}),[o]);switch(o.type){case"block":if(r)switch(c){case it.wW:return(0,V.jsx)(S.FormattedMessage,{defaultMessage:"You were invited to a project",id:"activity.userInvitedActivityProjectByBot.standardizedHeader.redesign"});case it.iS:return(0,V.jsx)(S.FormattedMessage,{defaultMessage:"You were invited to a task",id:"activity.userInvitedActivityTaskByBot.standardizedHeader.redesign"});case it.zU:return(0,V.jsx)(S.FormattedMessage,{defaultMessage:"You were invited to a document",id:"activity.userInvitedActivityDocByBot.standardizedHeader.redesign"});case it.Fi:return(0,V.jsx)(S.FormattedMessage,{defaultMessage:"You were invited to a meeting",id:"activity.userInvitedActivityMeetingByBot.standardizedHeader.redesign"});case it.p$:return(0,V.jsx)(S.FormattedMessage,{defaultMessage:"You were invited to a sprint",id:"activity.userInvitedActivitySprintByBot.standardizedHeader.redesign"});case it.GZ:return(0,V.jsx)(S.FormattedMessage,{defaultMessage:"You were invited to a wiki",id:"activity.userInvitedActivityWikiByBot.standardizedHeader.redesign"});default:return(0,V.jsx)(S.FormattedMessage,{defaultMessage:"You were invited to a page",id:"activity.userInvitedActivityNavigableBlockByBot.standardizedHeader.redesign"})}else switch(c){case it.wW:return(0,V.jsx)(S.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} invited you to a project} other {{authorOrAuthors} invited you to a project}}",values:{numberOfAuthors:s.length,authorOrAuthors:a},id:"activity.userInvitedActivityProject.standardizedHeader.redesign"});case it.iS:return(0,V.jsx)(S.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} invited you to a task} other {{authorOrAuthors} invited you to a task}}",values:{numberOfAuthors:s.length,authorOrAuthors:a},id:"activity.userInvitedActivityTask.standardizedHeader.redesign"});case it.zU:return(0,V.jsx)(S.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} invited you to a document} other {{authorOrAuthors} invited you to a document}}",values:{numberOfAuthors:s.length,authorOrAuthors:a},id:"activity.userInvitedActivityDoc.standardizedHeader.redesign"});case it.Fi:return(0,V.jsx)(S.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} invited you to a meeting} other {{authorOrAuthors} invited you to a meeting}}",values:{numberOfAuthors:s.length,authorOrAuthors:a},id:"activity.userInvitedActivityMeeting.standardizedHeader.redesign"});case it.p$:return(0,V.jsx)(S.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} invited you to a sprint} other {{authorOrAuthors} invited you to a sprint}}",values:{numberOfAuthors:s.length,authorOrAuthors:a},id:"activity.userInvitedActivitySprint.standardizedHeader.redesign"});case it.GZ:return(0,V.jsx)(S.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} invited you to a wiki} other {{authorOrAuthors} invited you to a wiki}}",values:{numberOfAuthors:s.length,authorOrAuthors:a},id:"activity.userInvitedActivityWiki.standardizedHeader.redesign"});default:return(0,V.jsx)(S.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} invited you to a page} other {{authorOrAuthors} invited you to a page}}",values:{numberOfAuthors:s.length,authorOrAuthors:a},id:"activity.userInvitedActivityNavigableBlock.standardizedHeader.redesign"})}case"group":return r?(0,V.jsx)(S.FormattedMessage,{defaultMessage:"You were added to @{groupName}",values:{groupName:null===(t=o.group)||void 0===t?void 0:t.name},id:"activity.userInvitedActivityGroupIdByBot.standardizedHeader.redesign"}):(0,V.jsx)(S.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} added you to @{groupName}} other {{authorOrAuthors} added you to @{groupName}}}",values:{numberOfAuthors:s.length,authorOrAuthors:a,groupName:null===(i=o.group)||void 0===i?void 0:i.name},id:"activity.userInvitedActivityGroupId.standardizedHeader.redesign"});case"space":return r?(0,V.jsx)(S.FormattedMessage,{defaultMessage:"You were invited to a workspace",id:"activity.userInvitedActivityOtherInviteByBot.standardizedHeader.redesign"}):(0,V.jsx)(S.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} invited you to a workspace} other {{authorOrAuthors} invited you to a workspace}}",values:{numberOfAuthors:s.length,authorOrAuthors:a},id:"activity.userInvitedActivityOtherInvite.standardizedHeader.redesign"});default:(0,d.t1)(o)}}function Wi(e){let{edit:t,activity:i,rootStore:o,tabArgs:s,useInboxRedesign:r}=e;window.__c={n:"InviteDetail"};const n=(0,u.O7)(),{isMobile:a}=n.device,{source:d}=s,c=(0,m.yK)((()=>({redesignedInviteMessage:{fontSize:14,paddingTop:8,paddingBottom:8},inviteMessage:{paddingLeft:(0,le.c3)({source:d,isMobile:a}),paddingTop:8,paddingBottom:8,paddingRight:12,fontSize:14}})),[a,d]),l=Yi({rootStore:o,edit:t}),h=(0,g.VK)((()=>parseInt(i.end_time)),[i]),p=(0,g.VK)((()=>{if("block"!==(null==l?void 0:l.type))return;const e=l.block;return null!=e&&e.isDefined()?e.getModel():void 0}),[l]),v=(0,g.VK)((()=>{if(p)return(0,de.ME)(p.getRenderUrl({getRecordModel:o.getRecordModel,pageVisitSource:Ge.tY.Notification}))}),[p,o.getRecordModel]),f=(0,g.VK)((()=>{if(!p)return{isValid:!1};const e=p&&(0,Zi.$e)(p,i);if(!e)return{isValid:!1};const t=o.getRecordModel({table:Di.Tu,id:e,spaceId:i.space_id});return t&&t.getMessage()&&t.getCreatedTime()<=h+5*qi.hM?{isValid:!0,message:t.getMessage()}:{isValid:!1}}),[i,h,p,o]);return null!=f&&f.isValid?r?(0,V.jsx)("div",{style:c.redesignedInviteMessage,children:f.message}):(0,V.jsx)(Xe.Z,{href:v,onClick:()=>(0,de.dG)({...s,environment:n,activity:i,mightCloseTab:!0}),innerStyle:c.inviteMessage,children:f.message}):null}function Yi(e){let{rootStore:t,edit:i}=e;return(0,g.VK)((()=>{if(i)return i.navigable_block_id?{type:"block",block:w.G.createChildStore(t,{table:v.iU,id:i.navigable_block_id})}:i.permission_group_id?{type:"group",group:(0,zi.Bg)({spaceId:i.space_id,permissionGroupId:i.permission_group_id,getRecordValue:t.getRecordValue})}:{type:"space",space:w.H2.createChildStore(t,{table:f.bx,id:i.space_id})}}),[i,t])}const Ji=o.memo(Ui);var Xi=i(70921);function $i(e){window.__c={n:"UserMentionedActivity"};const{activity:t,rootStore:i,tabArgs:o,isFirst:s,isLast:r,useInboxRedesign:n}=e,{source:a,tab:d,notification:c}=o,m=(0,u.O7)(),h=(0,g.VK)((()=>t.getEdits()),[t]),p=h.length>0,f=h[0],y=w.G.createChildStore(i,{table:v.iU,id:f.navigable_block_id}),b=(0,g.VK)((()=>y.isDefined()),[y]),x=(0,g.VK)((()=>w.WJ.createChildStore(i,{table:Xi.TY,id:t.id,spaceId:t.space_id}).getStandardizedMentionedPropertyURI()),[t,i]),A=(0,g.VK)((()=>{const e=w.G.createChildStore(i,{table:v.iU,id:t.mentioned_block_id}).getModel();return null==e?void 0:e.getRenderUrl({getRecordModel:i.getRecordModel,pageVisitSource:Ge.tY.Notification})}),[t,i]),M=(0,g.VK)((()=>(0,l.P6)({edits:h,rootStore:i})),[h,i]),j=(0,g.VK)((()=>(0,l.XW)(M,{...(0,C.h_)({useInboxRedesign:n})})),[M,n]),I=(0,g.VK)((()=>(0,l.jC)({recordId:y.id,recordType:"block",tab:d,rootStore:i,environment:m})),[y,d,i,m]),R=(0,g.VK)((()=>parseInt(t.end_time)),[t]);if(!p||!b||!A)return null;const _=m.device.isMobile,k=(0,V.jsx)(ue.Z,{titledRecordStore:y,getRecordModel:i.getRecordModel,activity:t,tabArgs:o}),B=function(e,t,i,o){switch(e){case it.Es.Assign:return(0,V.jsx)(S.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} assigned you a task} other {{authorOrAuthors} assigned you a task}}",values:{numberOfAuthors:i.length,authorOrAuthors:t},id:"activity.mentionTaskActivity.standardizedHeader"});case it.zI.People:return o?(0,V.jsx)(S.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} mentioned you} other {{authorOrAuthors} mentioned you}}",values:{numberOfAuthors:i.length,authorOrAuthors:t},id:"activity.mentionProjectActivity.standardizedHeader.short"}):(0,V.jsx)(S.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} mentioned you in a project} other {{authorOrAuthors} mentioned you in a project}}",values:{numberOfAuthors:i.length,authorOrAuthors:t},id:"activity.mentionProjectActivity.standardizedHeader"});default:return o?(0,V.jsx)(S.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} mentioned you} other {{authorOrAuthors} mentioned you}}",values:{numberOfAuthors:i.length,authorOrAuthors:t},id:"activity.mentionActivity.standardizedHeader.short"}):(0,V.jsx)(S.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} mentioned you in a page} other {{authorOrAuthors} mentioned you in a page}}",values:{numberOfAuthors:i.length,authorOrAuthors:t},id:"activity.mentionActivity.standardizedHeader"})}}(x,j,M,n);return n?(0,V.jsx)(Te.ZP,{timestamp:R,header:(0,V.jsx)("span",{children:B}),isFirst:s,isLast:r,isPrivate:I,rootStore:i,navigableBlockId:y.id,notification:c,icon:(0,V.jsx)(ae.BE,{authors:M,size:Te.IX,style:{marginTop:0,marginRight:0},showAvatarShadow:!1}),showSnapshotButton:!1,url:A,...(0,de.JJ)({notification:c,activity:t,environment:m,tab:d}),children:(0,V.jsx)($e.Z,{edit:f,rootStore:i,highlightCurrentUser:!0,highlightCurrentUserStyle:"text_only"})}):(0,V.jsxs)(Ve,{timestamp:R,header:(0,V.jsx)("span",{children:B}),isLast:r,isPrivate:I,rootStore:i,navigableBlockId:y.id,prominentTitleLink:k,notification:c,icon:(0,V.jsx)(ae.BE,{authors:M,size:24}),showRecordPath:!0,showSnapshotButton:!1,...(0,de.h9)({notification:c,activity:t,environment:m,tab:d}),children:[(0,V.jsx)(Xe.Z,{href:A,onClick:()=>(0,de.dG)({environment:m,activity:t,...o}),innerStyle:(0,le.OD)({source:a,isMobile:_}),children:(0,V.jsx)($e.Z,{edit:f,rootStore:i,highlightCurrentUser:!0})}),(0,V.jsx)(ce.Z,{tabArgs:o,activity:t,isMobile:_,environment:m,rootStore:i})]})}var Qi=i(80951),eo=i(94308),to=i(6287);function io(e){window.__c={n:"VerificationExpiredActivity"};const{activity:t,rootStore:i,tabArgs:o,isFirst:s,isLast:r,useInboxRedesign:n}=e,{tab:a,source:d,notification:c}=o,h=(0,u.O7)(),p=h.device.isMobile,f=(0,g.VK)((()=>w.G.createChildStore(i,{table:v.iU,id:t.navigable_block_id})),[t,i]),y=(0,g.VK)((()=>f.isDefined()),[f]),b=(0,g.VK)((()=>{const e=f.getModel();if(e)return e.getRenderUrl({getRecordModel:i.getRecordModel,pageVisitSource:Ge.tY.Notification})}),[f,i]),x=(0,g.VK)((()=>w.NW.createChildStore(i,{table:to.v,id:t.collection_id,spaceId:t.space_id})),[t,i]),A=(0,g.VK)((()=>x.isDefined()),[x]),M=(0,g.VK)((()=>{const e=x.getSchema(),t=Object.keys(e).find((t=>{var i;return"verification"===(null===(i=e[t])||void 0===i?void 0:i.type)}));let o=(0,V.jsx)(S.FormattedMessage,{id:"Activity.author.unknown",defaultMessage:"Unknown"});if(t){const e=f.getPropertyValue(t),s=Qi._w(e);if(s){const e=s[0],t=(0,l.uA)(e,i);t&&t.asActor&&(o=(0,l.XW)([t],{...(0,C.h_)({useInboxRedesign:n})}))}}return o}),[f,x,i,n]),j=(0,g.VK)((()=>(0,l.jC)({recordId:f.id,recordType:"block",tab:a,rootStore:i,environment:h})),[f,a,i,h]),{activityStartTimestamp:I,activityEndTimestamp:R}=(0,g.VK)((()=>({activityStartTimestamp:parseInt(t.start_time),activityEndTimestamp:parseInt(t.end_time)})),[t]),_=(0,m.yK)((e=>({verificationMessage:{fontSize:14,...!n&&(0,le.OD)({source:d,isMobile:p}),...n&&{color:e.mediumTextColor}}})),[p,d,n]);if(!y||!A)return null;const k=(0,V.jsx)(ue.Z,{titledRecordStore:f,getRecordModel:i.getRecordModel,activity:t,tabArgs:o}),B=n?(0,V.jsx)(S.FormattedMessage,{defaultMessage:"Your wiki is no longer valid",id:"activity.verificationExpired.header.short"}):(0,V.jsx)(S.FormattedMessage,{defaultMessage:"Verification expired for <boldtext>{pageTitle}</boldtext>",values:{pageTitle:k,boldtext:e=>(0,V.jsx)("span",{style:{fontWeight:500},children:e})},id:"activity.verificationExpired.header"}),T=(0,V.jsx)("div",{style:_.verificationMessage,children:I&&R?(0,V.jsx)(S.FormattedMessage,{defaultMessage:"Last verified by {person} from {startDate} to {endDate}",values:{person:M,startDate:(0,fe.gs)(I),endDate:(0,fe.gs)(R)},id:"activity.verificationExpired.contentWithTimestamp"}):(0,V.jsx)(S.FormattedMessage,{defaultMessage:"Last verified by {person}",values:{person:M},id:"activity.verificationExpired.contentWithoutTimestamp"})});return n?(0,V.jsx)(Te.ZP,{timestamp:R,header:B,isFirst:s,isLast:r,isPrivate:j,rootStore:x,navigableBlockId:f.id,notification:c,icon:(0,V.jsx)(oo,{}),showSnapshotButton:!1,url:b,...(0,de.JJ)({notification:c,activity:t,environment:h,tab:a}),children:T}):(0,V.jsxs)(Ve,{timestamp:R,header:B,isLast:r,isPrivate:j,rootStore:x,navigableBlockId:f.id,notification:c,icon:(0,V.jsx)(ae.of,{}),showRecordPath:!0,showSnapshotButton:!1,...(0,de.h9)({notification:c,activity:t,environment:h,tab:a}),children:[T,(0,V.jsx)(ce.Z,{tabArgs:o,activity:t,isMobile:h.device.isMobile,environment:h,rootStore:i})]})}function oo(){window.__c={n:"VerificationIconInbox"};const e=(0,m.yK)((e=>({icon:{height:16,width:16,fill:e.icon.secondary}})),[]);return(0,V.jsx)(Te.hn,{children:(0,eo.f)(e.icon)})}class so extends s.Z{UNSAFE_willMountOrUpdate(){!function(e,t){if("commented"===e.type){const o=function(e,t){return t.getRecordStore(t,e)}({table:a.qF,id:e.discussion_id,spaceId:e.space_id},t);if(o.isDefined()){const e=o.getCommentStores();for(const t of e){var i;null===(i=t.getCreatedByStore())||void 0===i||i.load()}}}}(this.props.activity,this.props.rootStore),this.environment.KatexStore.loadIfNeeded((()=>function(e,t){const i=(0,l.cr)({activity:e,rootStore:t});if(!i)return;return i.context}(this.props.activity,this.props.rootStore)))}renderComponent(){const{activity:e,rootStore:t,tabArgs:i,isFirst:o,isLast:s,useInboxRedesign:a}=this.props,l=e.type;if(!r.n_(l))return n.log({level:"error",from:"ActivityNotification",type:"unsupportedActivityType",data:{message:`Activity type ${l} is not supported for ActivityNotification`}}),null;switch(l){case"block-property-edited":return(0,V.jsx)(et,{activity:e,rootStore:t,tabArgs:i,isFirst:o,isLast:s,useInboxRedesign:a});case"user-mentioned":return(0,V.jsx)($i,{activity:e,rootStore:t,tabArgs:i,isFirst:o,isLast:s,useInboxRedesign:a});case"commented":return(0,c.UE)()?(0,V.jsx)(pi,{activity:e,tabArgs:i,rootStore:t,isFirst:o,isLast:s}):a?(0,V.jsx)(zt,{activity:e,tabArgs:i,rootStore:t,isFirst:o,isLast:s}):(0,V.jsx)(pt,{activity:e,tabArgs:i,rootStore:t,isFirst:o,isLast:s});case"user-invited":return(0,V.jsx)(Ji,{activity:e,rootStore:t,tabArgs:i,isFirst:o,isLast:s,useInboxRedesign:a});case"reminder":return(0,V.jsx)(ki,{activity:e,rootStore:t,tabArgs:i,isFirst:o,isLast:s,useInboxRedesign:a});case"email-edited":return(0,V.jsx)(vi,{activity:e,rootStore:t,tabArgs:i,isFirst:o,isLast:s,useInboxRedesign:a});case"access-requested":return(0,V.jsx)(Ee,{activity:e,rootStore:t,tabArgs:i,isFirst:o,isLast:s,useInboxRedesign:a});case"access-request-resolved":return(0,V.jsx)(Ne,{activity:e,rootStore:t,tabArgs:i,isFirst:o,isLast:s,useInboxRedesign:a});case"team-membership-edited":return(0,V.jsx)(Li,{activity:e,rootStore:t,tabArgs:i,isFirst:o,isLast:s,useInboxRedesign:a});case"private-content-transferred":return(0,V.jsx)(Ri,{activity:e,rootStore:t,tabArgs:i,isFirst:o,isLast:s,useInboxRedesign:a});case"permission-group-mentioned":return(0,V.jsx)(Mi,{activity:e,rootStore:t,tabArgs:i,isFirst:o,isLast:s,useInboxRedesign:a});case"verification-expired":return(0,V.jsx)(io,{activity:e,rootStore:t,tabArgs:i,isFirst:o,isLast:s,useInboxRedesign:a});case"export-completed":return(0,V.jsx)(bi,{activity:e,rootStore:t,tabArgs:i,isFirst:o,isLast:s,useInboxRedesign:a});case"import-completed":return(0,V.jsx)(wi,{activity:e,rootStore:t,tabArgs:i,isFirst:o,isLast:s,useInboxRedesign:a});default:(0,d.t1)(l)}}}so.displayName="ActivityNotification";const ro=so},87199:(e,t,i)=>{i.d(t,{k:()=>o});const o=(0,i(9291).defineMessages)({paymentMethodUnverified:{id:"subscriptions.paymentMethodUnverified",defaultMessage:"Your payment is being processed. Please try again when your payment has completed."},otherPaymentMethod:{id:"subscriptions.otherPaymentMethod",defaultMessage:"Other"}})},44041:(e,t,i)=>{i.d(t,{y:()=>x});i(67294);var o=i(47425),s=i(9291),r=i(86572),n=i(47307),a=i(33929),d=i(52533),c=i(80444),l=i(92083),u=i(39343),g=i(87199),m=i(70060),h=i(88893),p=i(35057),v=i(88280),f=i(34583),y=i(64891),b=i(85893);const x=async function(e,t){var i;r.sA(e,{from:t.from,for_subscription_tier:t.for,addOnFeature:t.addOnFeature});if((0,p.QM)()&&["block_limit_sidebar","block_limit_settings","block_limit_banner"].includes(t.from)&&!t.addOnFeature&&(0,m.XA)(e))return void l.Z.setState({open:!0,openedFrom:"upsell",currentTab:"plans",defaultSubtab:void 0,highlightedSetting:void 0});if(!t.addOnFeature&&(0,o.QM)(t.for))return;const x=(0,d.S$)({environment:e})&&"personal"===t.for;if(e.device.isMobileNative){if("ai"===t.addOnFeature){const t=(0,d.Y2)({environment:e})?(0,b.jsx)(s.FormattedMessage,{id:"upsellActions.noIAPForAIWithExternalPurchaseOption",defaultMessage:"This workspace has used all of its free AI responses. Visit on desktop to purchase Notion AI and go unlimited."}):(0,b.jsx)(s.FormattedMessage,{id:"upsellActions.noIAPForAIWithoutExternalPurchaseOption",defaultMessage:"This workspace has used all of its free AI responses. Unfortunately, additional AI responses cannot be purchased on this platform."});return void n.showErrorMessage(t)}if(!x)return}const S=c.default.state.currentSpaceStore;if(!S)return;if(!S.canAdmin())return;await f.bi(e);const A=v.subscriptionDataStoreInstance.state;if(!A)return;if("unsubscribed_admin"!==A.type&&"subscribed_admin"!==A.type)return void(t.dontOpenPlansOnCancel||l.Z.setState({open:!0,openedFrom:"upsell",currentTab:"plans",defaultSubtab:void 0,highlightedSetting:void 0}));if(h.ri(A))return void n.showErrorMessage(a.default.formatMessage(g.k.paymentMethodUnverified));if(h.Q6(A)){const e=(0,b.jsx)(s.FormattedMessage,{id:"upsellActions.referToSalesRep",defaultMessage:"This workspace is part of a managed account. Please contact your account representative to discuss any changes to your subscription."});return void n.showErrorMessage(e)}if(x)return void(e.mobileNative&&S.id&&e.mobileNative.openUpgradeModal(S.id));if("revenueCat"===(null===(i=A.customerData)||void 0===i?void 0:i.activeSubscriptionPlatform)){const e=(0,b.jsx)(s.FormattedMessage,{id:"upsellActions.switchPlanFromInAppPurchase",defaultMessage:"You're currently subscribed through an in-app purchase with Apple. To switch plans, cancel your subscription with Apple first."});return void n.showErrorMessage(e)}const M=h.XX(A);if(t.addOnFeature&&(0,u.Fk)(M)){const e=(0,b.jsx)(s.FormattedMessage,{id:"upsellActions.noAddOnPurchaseDuringFreeTrial",defaultMessage:"Unfortunately, additional {addOn, select, ai {AI responses} other {features}} cannot be purchased while a workspace is on a free trial.",values:{addOn:t.addOnFeature}});n.showErrorMessage(e)}else{if(M&&h.MM(A))return t.addOnFeature?void y.af({environment:e,from:t.from,view:"add_ons",addOnFeature:t.addOnFeature,billingInterval:M.interval,pageSection:t.pageSection}):void y.af({environment:e,from:t.from,view:"plans",temporarySubscriptionTier:t.for,billingInterval:M.interval,pageSection:t.pageSection});{const i=(0,m.px)(e,t.for)?"ai_fifty_percent":void 0;f.I0(e,{subscriptionTier:t.for,from:t.from,addOnFeature:t.addOnFeature,coupon:i,isTrial:t.isTrial})}}}},32856:(e,t,i)=>{i.d(t,{D:()=>r});var o=i(86628),s=i(77080);function r(e){window.__c={n:"ExperimentSwitch"};const{experimentId:t,groups:i,disableExposureLogging:r}=e,n=function(e){const{experimentId:t,disableExposureLogging:i,defaultGroup:r}=e;return(0,o.VK)((()=>s.default.getEligibleGroup({experimentId:t,defaultGroup:r??"control",disableExposureLogging:i})),[t,i,r])}({experimentId:t,disableExposureLogging:r});return i[n]}},49204:(e,t,i)=>{i.d(t,{Id:()=>A,Ng:()=>M,Px:()=>x,ow:()=>S,t_:()=>b,um:()=>y});var o=i(15145),s=i(19889),r=i(9291),n=i(17224),a=i(54642),d=i(9953),c=i(64964),l=i(29974),u=i(82530),g=i(33929),m=i(38755),h=i(80444),p=i(9867),v=i(28517);const f=(0,r.defineMessages)({joinTeamSuccessMessage:{id:"teamInviteLinkActions.joinTeam.confirmationMessage",defaultMessage:"Joined {teamName}"},requestTeamSuccessMessage:{id:"teamInviteLinkActions.requestAccess.successMessage",defaultMessage:"Successfully requested membership"},requestTeamFailureMessage:{id:"teamInviteLinkActions.requestAccess.failureMessage",defaultMessage:"Failed to request membership"}});async function y(e){let{environment:t,userId:i,teamStore:o,user:s}=e;const r=o.getSpaceId();if(!r)return;await p.Cj({environment:t,teamId:o.id,spaceId:r,teamMemberInfos:s,isSettingDefaultTeam:!1,inviterId:i})&&(n.UD(t,{store:o,joined_role:"member",from:"team_invite_link"}),await b({environment:t,userId:i,teamStore:o}),c.oV({label:g.default.formatMessage(f.joinTeamSuccessMessage,{teamName:o.getName()})}))}async function b(e){let{environment:t,userId:i,teamStore:s}=e;const r=h.default.state.currentUserRootStore,n=s.getSpaceId();if(!n||!r)return;const a=r.getSpaceViewStores().filter((e=>e.getSpaceId()===n))[0];await l.y3({environment:t,spaceViewStore:a,userSettingsStore:void 0,userRootStore:r,pageVisitSource:o.tY.JoinTeam,navigationType:"switchingToOrLoadingSpace"}),await v.I({environment:t,spaceId:n,userId:i}),p.hI({environment:t,teamStore:s,shouldScroll:!0})}async function x(e){let{environment:t,teamId:i,message:o}=e;if(!t.currentUser.id)return;"success"===(await a.requestAccess(t,{type:"current-actor-to-team",teamId:i,message:o})).type?(n.LB(t,{teamId:i}),await A({environment:t}),new Promise((e=>setTimeout(e,500))).then((()=>{c.oV({label:g.default.formatMessage(f.requestTeamSuccessMessage)})}))):c.oV({label:g.default.formatMessage(f.requestTeamFailureMessage)})}async function S(e){let{environment:t,teamStore:i,accessRequestStore:o,status:r}=e;const a=o.getForActorId();if(!a)return;const c=o.getRecordModel({table:s.KJ,id:a});if(c){if("approved"===r){const e=[{type:"member",entity_type:"user",user_id:c.id}];if(!(await p.Uj({environment:t,teamStore:i,teamMemberInfos:e,isSettingDefaultTeam:!1,createNewTeamFlowId:void 0})))return}u.createAndCommit({userAction:"GrantAccessActivityAction.handleGrantAccess",environment:t,perform:e=>{d.sW({store:o,transaction:e,data:{resolved_time:Date.now(),resolved_by_table:s.KJ,resolved_by_id:t.currentUser.id,status:r}})}}),n.co(t,{store:i,resolution:r})}}async function A(e){let{environment:t}=e;const{lastVisitedSpaceView:i,userRootStore:s,userSettingsStore:r}=await(0,m.iX)({environment:t,disableRedirectUrl:!1});i?await l.y3({environment:t,spaceViewStore:i,userRootStore:s,userSettingsStore:r,pageVisitSource:o.tY.BackForward,navigationType:"switchingToOrLoadingSpace"}):await l.L5({environment:t,userRootStore:s,userSettingsStore:r,pageVisitSource:o.tY.BackForward})}async function M(e){let{environment:t,teamId:i}=e;const o=await a.getTeamAccessRequestMetadata(t,{teamId:i});if("success"===o.type)return o.data}},39343:(e,t,i)=>{i.d(t,{Fk:()=>a,U6:()=>c,nx:()=>d});var o=i(30120),s=i(13991),r=i(7057),n=i(95477);function a(e){return!(null==e||!e.trialEnd)&&e.trialEnd>=o.ou.now().toSeconds()}function d(e){const t=function(e){if(!a(e))return;const t=1e3*(null==e?void 0:e.trialEnd);return null!=e&&e.periodEnd&&e.periodEnd>=o.ou.now().toSeconds()&&e.periodEnd<t?e.periodEnd:t}(e);return t?(0,r.Yx)(t,"long",s.SP):void 0}function c(e){return e?n.default.trials[e.id].duration:n.default.trials.default.duration}},13148:(e,t,i)=>{i.d(t,{U:()=>r});i(67294);var o=i(45238),s=i(85893);const r=(0,o.I)("close",{viewBox:"0 0 16 16",svg:(0,s.jsx)("path",{d:"M2.89795 13.3428C3.18799 13.6262 3.6626 13.6262 3.93945 13.3494L7.99341 9.29541L12.0474 13.3494C12.3308 13.6262 12.8054 13.6328 13.0889 13.3428C13.3723 13.0593 13.3723 12.5847 13.0955 12.3079L9.0415 8.24731L13.0955 4.19336C13.3723 3.9165 13.3789 3.4353 13.0889 3.15845C12.7988 2.875 12.3308 2.875 12.0474 3.15186L7.99341 7.20581L3.93945 3.15186C3.6626 2.875 3.1814 2.86841 2.89795 3.15186C2.6145 3.44189 2.62109 3.9231 2.89795 4.19336L6.9519 8.24731L2.89795 12.3079C2.62109 12.5781 2.6145 13.0659 2.89795 13.3428Z"})})},41219:(e,t,i)=>{i.d(t,{L:()=>r});i(67294);var o=i(45238),s=i(85893);const r=(0,o.I)("topbarComment",{viewBox:"0 0 20 20",svg:(0,s.jsx)("path",{d:"M5.9375 18.4844C6.38281 18.4844 6.71094 18.2656 7.25 17.7891L9.92969 15.4297H14.6328C16.9844 15.4297 18.3047 14.0703 18.3047 11.75V5.67969C18.3047 3.35938 16.9844 2 14.6328 2H4.67188C2.32812 2 1 3.35938 1 5.67969V11.75C1 14.0781 2.36719 15.4297 4.61719 15.4297H4.9375V17.3438C4.9375 18.0391 5.30469 18.4844 5.9375 18.4844ZM6.32812 16.7344V14.5078C6.32812 14.0469 6.125 13.8672 5.6875 13.8672H4.72656C3.25781 13.8672 2.55469 13.125 2.55469 11.7031V5.72656C2.55469 4.30469 3.25781 3.5625 4.72656 3.5625H14.5859C16.0469 3.5625 16.75 4.30469 16.75 5.72656V11.7031C16.75 13.125 16.0469 13.8672 14.5859 13.8672H9.84375C9.36719 13.8672 9.13281 13.9453 8.80469 14.2891L6.32812 16.7344Z"})})}}]);