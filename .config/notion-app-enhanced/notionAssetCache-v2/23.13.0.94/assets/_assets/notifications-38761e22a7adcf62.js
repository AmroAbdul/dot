"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[1909],{79698:(e,t,n)=>{n.d(t,{j:()=>m});var o=n(9291),i=n(23728),s=n(14542),r=n(96809),a=n(47307),l=n(96802),d=n(27153),c=n(82530),u=n(53471);const p=1500,h=(0,o.defineMessages)({pageCover:{defaultMessage:"Page cover",id:"pageCover.title"},fileTypeCaption:{defaultMessage:"Images wider than {idealImageWidth} pixels work best.",id:"pageCover.fileType.caption"},uploadFailed:{defaultMessage:"Upload failed",id:"pageCover.errorDialogMessage.uploadFailed"},embedTitle:{defaultMessage:"Link",id:"pageCover.embedType.title"},embedPlaceholder:{defaultMessage:"Paste an image link…",id:"pageCover.embedType.placeholder"},embedCaption:{defaultMessage:"Works with any image from the web.",id:"pageCover.embedType.caption"},embedSubmit:{defaultMessage:"Submit",id:"pageCover.embedType.buttonText"}});function m(e){let{environment:t,intl:n,store:o,rect:s}=e;d.$(t,{originGap:3,originRect:s,isSmallWidth:!1,popupWidth:540,maxHeight:485,title:n.formatMessage(h.pageCover),onDelete:()=>{!function(e){let{environment:t,store:n}=e;d.Z();const{serverCommitResult:o}=c.createAndCommit({userAction:"PageCover.handleDelete",environment:t,perform:e=>{l.MF({store:n,transaction:e})}});o.then((()=>i.P({store:n,environment:t})))}({environment:t,store:o})},currentTab:"gallery",tabs:[{type:"gallery",onChange:e=>{let{url:n,position:i}=e;f({environment:t,store:o,url:n,position:i})}},{type:"file",fileUpload:!1,imageUpload:!0,videoUpload:!1,caption:n.formatMessage(h.fileTypeCaption,{idealImageWidth:p}),onUpload:e=>{d.Z(),u.cT({environment:t,file:e,bucket:"secure",record:o.pointer,onStart:C,onProgress:b,onComplete:e=>{var n;n={environment:t,store:o,url:e},g({...n,position:.5})},onError:()=>{a.showErrorMessage(n.formatMessage(h.uploadFailed))}})}},{type:"embed",title:n.formatMessage(h.embedTitle),inputPlaceholder:n.formatMessage(h.embedPlaceholder),caption:n.formatMessage(h.embedCaption),buttonText:n.formatMessage(h.embedSubmit),onChange:e=>{var n;n={environment:t,store:o,url:e},g({...n,position:.5}),d.Z()}},{type:"unsplash",onChange:e=>{let{url:n,position:i}=e;f({environment:t,store:o,url:n,position:i})}}]})}async function g(e){const{environment:t,store:n,url:o,position:a}=e,{serverCommitResult:d}=c.createAndCommit({userAction:"PageCover.updatePageCover",environment:t,perform:e=>{l.fs({store:n,url:o,position:a||.5,transaction:e})}});await d,r.Z.state.loadingMode===s.NS&&r.Z.setState({loadingMode:s.EP,dataURL:r.Z.state.dataURL,uploadProgress:100}),i.P({store:n,environment:t})}function f(e){g(e),e.environment.device.isMobile&&d.Z()}function C(e){const{file:t,name:n,size:o}=e;if(d.Z(),r.Z.setState({loadingMode:s.SS,file:t,name:n,size:o}),t.type.indexOf("image")>=0){const e=new FileReader;e.onload=e=>{r.Z.state.loadingMode===s.SS&&r.Z.setState({...r.Z.state,uploadProgress:0,loadingMode:s.NS,dataURL:e.target.result})},e.readAsDataURL(t)}}function b(e){const{progressPercent:t}=e;r.Z.state.loadingMode===s.NS&&r.Z.setState({...r.Z.state,uploadProgress:t})}},23728:(e,t,n)=>{n.d(t,{P:()=>g});var o=n(17755),i=n(22808),s=n(72126),r=n(70203),a=n(95477),l=n(77080),d=n(96802),c=n(82530),u=n(53471);const p=315,h=600,m=e=>new Promise(((t,n)=>{const o=new Image;o.onload=()=>t(o),o.onerror=n,o.src=e})),g=(0,s.Ds)((async e=>{var t,n;let{store:g,environment:f}=e;if(!l.default.checkGate("social_media_preview_image_uploader_enabled"))return;const C=r.QaF(g.getTitleValue())||"",b=null===(t=g.getIcon())||void 0===t?void 0:t.icon,v=null===(n=g.getCover())||void 0===n?void 0:n.cover,x=g.getFormat().page_cover_position,M=new OffscreenCanvas(h,p),y=M.getContext("2d");if(y){(e=>{e.roundRect(0,0,h,p,30),e.fillStyle="white",e.fill(),e.clip()})(y),await(async e=>{let{context:t,coverImageUrl:n,coverPosition:o=.5}=e;if(n){const e=await m(n),i=157.5,r=e.width,a=e.width*(i/h),l=((0,s.hj)(o)?1-o:.5)*(e.height-a);t.drawImage(e,0,l,r,a,0,0,h,i)}else t.fillStyle="rgb(249, 249, 248)",t.fillRect(0,0,h,157.5)})({context:y,coverImageUrl:v,coverPosition:x}),await(async e=>{let{context:t,store:n,icon:s}=e;if(s)if((0,i.Z)(s))t.font="96px Apple Color Emoji",t.textAlign="center",t.textBaseline="middle",t.fillText(s,80,157.5);else{const e=o.EK({url:s,baseUrl:a.default.domainBaseUrl,fullyQualified:!0,permissionRecord:n.pointer,width:96,userId:void 0}),i=await m(e);t.drawImage(i,80,109.5,96,96)}})({context:y,store:g,icon:b}),(e=>{let{context:t,font:n,title:o}=e;t.font=n,t.textAlign="left",t.textBaseline="middle",t.fillStyle="black",t.fillText(o,40,945/4)})({context:y,font:"500 48px sans-serif",title:C});const e=await M.convertToBlob();(e=>{let{store:t,file:n,environment:o}=e;u.cT({environment:o,file:n,bucket:"secure",record:t.pointer,onComplete:e=>{c.createAndCommit({userAction:"SocialMediaPreviewImageUploadStore.updateSocialMediaPreviewImage",environment:o,perform:n=>{d.eO({store:t,url:e,transaction:n})}})},retryWhenOffline:!0})})({store:g,environment:f,file:new File([e],"SocialMediaPreviewImage.png",{type:"image/png"})})}}),5e3)},45257:(e,t,n)=>{n.d(t,{Z:()=>l});n(67294);var o=n(480),i=n(24405),s=n(42853),r=n(64921),a=n(85893);function l(e){window.__c={n:"CollectionViewFilterPill"};const{icon:t,title:n,on:l,hasDiff:c,wrapStyle:u,innerStyle:p,hideChevron:h}=e,m=(0,i.Fg)(),g=(0,o.O7)();return(0,a.jsxs)("div",{style:{borderRadius:14,marginRight:6,display:"inline-flex",...c&&{position:"relative"},...u},children:[(0,a.jsxs)(r.Z,{disabled:e.disabled,style:d(Boolean(l),m,p,g.device.isMobile),hoveredStyle:l?{background:m.outlineBlueButtonHoveredBackground}:void 0,pressedStyle:l?{background:m.outlineBlueButtonPressedBackground}:void 0,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,onClick:e.onClick,onDoubleClick:e.onDoubleClick,children:[t,n,!h&&(0,s.i)({width:10,marginLeft:4,marginTop:1,fill:l?m.blueColor:m.lightIconColor})]}),c&&(0,a.jsx)("div",{style:{position:"absolute",top:-2,right:-2,background:"dark"===m.mode?m.accentColors.orange[500]:m.accentColors.orange[300],border:`1px solid ${m.contentBackground}`,width:9,height:9,borderRadius:9}})]})}function d(e,t,n,o){return{fontSize:14,display:"inline-flex",alignItems:"center",justifyContent:"center",whiteSpace:"nowrap",borderRadius:32,height:o?28:24,lineHeight:o?"28px":"24px",padding:"0 8px",border:`1px solid ${t.outlineButtonBorder}`,color:t.mediumTextColor,...e&&{color:t.blueColor,border:`1px solid ${t.filterPillBorder}`,background:t.filterPillBackground},...n}}},255:(e,t,n)=>{n.d(t,{Z:()=>a});n(67294);var o=n(480),i=n(53465),s=n(73063),r=n(85893);const a=function(e){window.__c={n:"MenuItemRemoveButton"};const t=(0,o.O7)(),n={removeFilterButton:{height:void 0,width:void 0},removeFilterButtonMobile:{marginRight:-12,marginTop:-12,marginBottom:-12,paddingRight:12,paddingTop:12,paddingBottom:12}},{onClick:a,disabled:l}=e,{device:d}=t,c=d.isMobile?{...n.removeFilterButton,...n.removeFilterButtonMobile}:n.removeFilterButton;return(0,r.jsx)(s.Z,{icon:i.X,onClick:a,disabled:l,disableBackground:!0,style:c})}},27386:(e,t,n)=>{n.d(t,{Um:()=>u,ZP:()=>p,kN:()=>c});n(67294);var o=n(480),i=n(24405),s=n(34859),r=n(91754),a=n(61519),l=n(53336),d=n(85893);function c(e){return e?18:60}function u(){return(0,d.jsx)(a.Z,{size:37})}const p=function(e){let{children:t,controlRow:n,bannerText:a,controlRowPaddingTopBottom:u,removeBoxShadow:p,contentPaddingLeftRight:h,controlRowPaddingLeftRight:m,getPaddingTopBottom:g,disableScroller:f}=e;window.__c={n:"SettingBox"};const C=(0,i.Fg)(),b=(0,o.O7)(),{device:v}=b,x=g?g():v.isMobile?18:36;return f?(0,d.jsxs)("div",{style:{paddingLeft:c(v.isMobile),paddingRight:c(v.isMobile)},children:[(0,d.jsx)("div",{style:{paddingTop:x,paddingBottom:x},children:t}),n&&(0,d.jsx)("div",{style:{paddingTop:u,paddingBottom:u,boxShadow:`0 -1px 0 ${C.regularDividerColor}`},children:n})]}):(0,d.jsxs)("div",{style:{display:"flex",flexDirection:"column",width:"100%",height:"100%",backgroundColor:C.cardContentBackground},children:[a&&(0,d.jsx)(r.Z,{styleKey:r.v.Blue,isMobile:!1,children:a}),(0,d.jsx)(l.Z,{type:s.Z.All,style:{flexGrow:1,WebkitOverflowScrolling:"touch",transform:"translateZ(0)",paddingLeft:h??c(v.isMobile),paddingRight:h??c(v.isMobile),paddingTop:a?15:x,paddingBottom:a?22:x},children:t}),n&&(0,d.jsx)("div",{style:{flexGrow:0,flexShrink:0,paddingLeft:m??c(v.isMobile),paddingRight:m??c(v.isMobile),paddingTop:u,paddingBottom:u,boxShadow:p?void 0:`0 -1px 0 ${C.regularDividerColor}`},children:n})]})}},55422:(e,t,n)=>{n.d(t,{Z:()=>I});n(57658);var o=n(67294),i=n(480),s=n(86628),r=n(24405),a=n(36591),l=n(42853),d=n(97880),c=n(9291),u=n(61045),p=n(11368),h=n(87279),m=n(23570),g=n(44041),f=n(91694),C=n(52275),b=n(31945),v=n(78140),x=n(28992),M=n(32163),y=n(63296),T=n(89728),S=n(72495),O=n(24006),j=n(26388),w=n(64369),_=n(27386),k=n(23189),B=n(85893);function I(e){window.__c={n:"SettingsItem"};const{title:t,caption:n,captionStyle:a,isMobile:l,upsellOptions:d,type:c,shouldHighlight:h}=e,C=(0,i.O7)(),{paddingLeftCSS:b,paddingRightCSS:v}=(0,s.VK)((()=>C.WindowSizeStore.state),[C]),[x,M]=(0,o.useState)(!1),y=(0,o.useCallback)((()=>M(!0)),[M]),T=(0,o.useCallback)((()=>M(!1)),[M]),S=(0,o.useContext)(p.Ue),O=(0,o.useRef)(null);(0,o.useEffect)((()=>{h&&O.current&&u.bx({element:O.current,scrollers:{verticalScroller:null==S?void 0:S.verticalScroller},vertical:{reveal:"closest"},horizontal:void 0,animate:!0})}),[h,O,null==S?void 0:S.verticalScroller]);const I=(0,o.useMemo)((()=>{if(l){if("dropdown"===c)return{display:"flex",flexDirection:"column"};if("toggleToButton"===e.type&&e.isOn||"custom"===e.type&&!0===e.useFlexboxStyle)return{}}return{display:"flex",alignItems:"center",justifyContent:"space-between"}}),[l,c,e]),Z=(0,r.yK)((t=>({container:{...I,paddingLeft:l?b:void 0,paddingRight:l?v:void 0,cursor:x&&!e.disabled?"pointer":e.disabled?"not-allowed":"default",...h?{backgroundColor:t.buttonHoveredBackground,marginLeft:-1*(0,_.kN)(l),marginRight:-1*(0,_.kN)(l),paddingLeft:(0,_.kN)(l),paddingRight:(0,_.kN)(l),marginTop:-1*(0,m.f)(l)/2,marginBottom:-1*(0,m.f)(l)/2,paddingTop:(0,m.f)(l)/2,paddingBottom:(0,m.f)(l)/2}:{}},description:{display:"flex",flexDirection:"column",marginRight:"10%"},captionStyle:{...a},title:{display:"flex",flexDirection:"row"}})),[l,b,v,h,x,a,e.disabled,I]),P="toggle"===e.type||"toggleToButton"===e.type||"custom"===e.type&&!e.disableSettingsItemClick,F=(0,B.jsxs)("div",{ref:O,style:Z.container,onClick:()=>{if(!(e.disabled||"custom"===e.type&&e.disableSettingsItemClick))return d&&d.shouldUpsell?g.y(C,{from:d.analyticsName,for:d.subscriptionTier}):void("toggle"===e.type?e.onToggle():"toggleToButton"===e.type?e.onClick():"custom"===e.type&&e.customButton&&o.isValidElement(e.customButton)&&e.customButton.props.onClick&&"function"==typeof e.customButton.props.onClick&&e.customButton.props.onClick())},onMouseEnter:P?y:void 0,onMouseLeave:P?T:void 0,children:[(0,B.jsxs)("div",{style:Z.description,children:[(0,B.jsxs)(k.Z,{smallMarginBottom:!0,disabled:e.disabled,isCritical:e.isCritical,children:[(0,B.jsxs)("div",{style:Z.title,children:[t,e.badge]}),d&&d.shouldUpsell&&(0,B.jsx)(f.Z,{subscriptionTier:d.subscriptionTier,analyticsName:d.analyticsName,onClick:()=>g.y(C,{from:d.analyticsName,for:d.subscriptionTier}),desktopStyle:{display:"inline-block",marginLeft:8,marginTop:-3}})]}),(0,B.jsx)(w.Z,{style:Z.captionStyle,isSmall:!0,isMultiline:!0,children:n})]}),(0,B.jsx)(N,{...e})]});return e.tooltipLabel?(0,B.jsx)(j.ZP,{placement:j.ug.Bottom,alignment:j.v2.Center,disableTooltip:e.disableTooltip,renderTooltip:()=>e.tooltipLabel,render:e=>(0,B.jsx)("div",{...e,children:F})}):F}function N(e){return"toggle"===e.type?(0,B.jsx)(O.Z,{on:e.isOn,disabled:e.disabled}):"dropdown"===e.type?(0,B.jsx)(Z,{...e}):"custom"===e.type?(0,B.jsx)(B.Fragment,{children:e.customButton}):"toggleToButton"===e.type?e.isOn?(0,B.jsx)("div",{style:{marginTop:12},children:(0,B.jsx)(y.Z,{isLarge:!0,onClick:e.onClick,style:e.buttonStyle,disabled:e.disabled,children:e.buttonLabel})}):(0,B.jsx)(O.Z,{on:!1,onClick:e.onClick,disabled:e.disabled}):void(0,d.t1)(e)}function Z(e){var t;window.__c={n:"Dropdown"};const{isMobile:n,title:o,upsellOptions:i,currentOption:s,options:d,info:u,onSelectOption:p,menuStyle:m}=e,g=null===(t=d.find((e=>{let{key:t}=e;return t===s})))||void 0===t?void 0:t.label,f=(0,r.yK)((e=>({button:{marginTop:12,marginBottom:4,marginRight:n?"auto":void 0,paddingLeft:n?12:8,paddingRight:n?12:8,height:n?44:28,border:n?`1px solid ${e.outlineButtonBorder}`:void 0},icon:{width:10,marginLeft:4,fill:e.lightIconColor}})),[n]),y=Boolean(i&&i.shouldUpsell)||e.disabled;return(0,B.jsx)(b.ZP,{popupType:n?b.Z4.SlideUp:b.Z4.Popup,placementToOrigin:b.pO.Right,renderOrigin:e=>(0,B.jsxs)(T.Z,{...e,isLarge:!0,style:{...f.button,opacity:y?.4:1},disabled:y,children:[g,(0,l.i)(f.icon)]}),render:e=>{let t;t=n?{menuType:h.og.Modal,title:o,right:(0,B.jsx)(c.FormattedMessage,{defaultMessage:"Done",id:"settingItem.buttonPopup.done.label"}),onClickRight:e.close}:{menuType:h.og.Popup,width:250,...m};const i=[{key:"settings-item-section",render:e=>(0,B.jsx)(S.Z,{...e}),items:d.map((t=>{let{key:o,label:i,caption:s}=t;return{key:o,action:()=>{p(o),e.close()},render:e=>(0,B.jsx)(C.Z,{...e,title:i,caption:s,shouldWrapCaption:!0,right:g===i?(0,B.jsx)("div",{style:{width:n?16:14},children:(0,a.e)()}):void 0})}}))}];if(u){const e=u.map((e=>{let{key:t,label:n}=e;return{key:t,action:()=>{},render:e=>(0,B.jsx)(x.Z,{...e,shouldWrapCaption:!0,caption:n})}}));i.push({key:"info-item-section",render:e=>(0,B.jsx)(S.Z,{...e,topBorder:!0}),items:e})}return(0,B.jsx)(v.Z,{...t,children:(0,B.jsx)(M.Z,{type:M.i.Vertical,sections:i,initialFocus:void 0})})}})}},66957:(e,t,n)=>{n.d(t,{Z:()=>u});var o=n(67294),i=n(480),s=n(86628),r=n(24405),a=n(87279),l=n(89728),d=n(85893);function c(e){let{tabs:t,selectedIndex:n,onChange:c,separatorIndexes:u,right:p,style:h,rightStyle:m,tabStyle:g,tabTitleStyle:f,tabBorderStyle:C,selectedTabStyle:b,readOnly:v,hideTabBorder:x}=e;window.__c={n:"TabBarMenuItem"};const M=(0,o.useContext)(a.Xp),{device:y,WindowSizeStore:T}=(0,i.O7)(),{safePaddingLeft:S,safePaddingRight:O}=(0,s.VK)((()=>({safePaddingLeft:T.getSafePaddingLeftCSS(16),safePaddingRight:T.getSafePaddingRightCSS(16)})),[T]),j=(0,r.yK)((e=>{const t={paddingTop:6,paddingBottom:6,whiteSpace:"nowrap",minWidth:0,flexShrink:0,color:e.mediumTextColor,...g},n=`inset 0 -1px 0 ${e.regularDividerColor}`,o=M.menuType===a.og.Popup,i={fontSize:16,paddingTop:2,paddingLeft:o?16:S,paddingRight:o?16:O,zIndex:2,height:44,background:e.popoverBackground};return{container:{overflowY:"visible",overflowX:"auto",display:"flex",width:"100%",position:"relative",boxShadow:x?void 0:n,...y.isMobile?i:{fontSize:14,paddingLeft:8,paddingRight:8,zIndex:1},...h},separator:{display:"inline-flex",alignItems:"center",margin:"0 4px",paddingBottom:4,whiteSpace:"nowrap",minWidth:0,flexShrink:0,color:e.regularDividerColor},mobile:{},tab:t,selectedTab:{...t,position:"relative",color:e.regularTextColor,...b},border:{borderBottom:`2px solid ${e.regularTextColor}`,position:"absolute",bottom:0,left:8,right:8,...C},rightContainer:{flexGrow:1,display:"flex",alignItems:"center",justifyContent:"flex-end",color:e.mediumTextColor,...m}}}),[M.menuType,y.isMobile,m,S,O,b,h,C,g,x]);return(0,d.jsxs)("div",{className:"hide-scrollbar",style:j.container,children:[t.map(((e,t)=>{const i=t===n;return(0,d.jsxs)(o.Fragment,{children:[(0,d.jsxs)("div",{style:i?j.selectedTab:j.tab,children:[(0,d.jsx)(l.Z,{style:f,onClick:()=>c(t),disabled:v,mobileFeedback:y.isMobile,children:e}),i&&(0,d.jsx)("div",{style:j.border})]},`tabButton-${t}`),u&&u.includes(t)&&(0,d.jsx)("div",{style:j.separator,className:"notranslate",children:"|"},`${t}-separator`)]},t)})),p&&(0,d.jsx)("div",{style:j.rightContainer,children:p})]})}const u=o.memo(c)},94865:(e,t,n)=>{n.r(t),n.d(t,{default:()=>le});var o=n(67294),i=n(83355),s=n(480),r=n(86628),a=n(49085),l=n(1464),d=n(98519),c=n(72126),u=n(29477),p=n(97880),h=n(9291),m=n(19719),g=n(17659),f=n(12457),C=n(43250),b=n(87279),v=n(51811),x=n(5162),M=n(80444),y=n(4761),T=n(84708),S=n(23063),O=n(36488),j=n(68785),w=n(78140),_=n(89728),k=n(43145),B=n(30506),I=n(83785),N=n(82598),Z=n(24405),P=n(6637),F=n(73063),R=n(26388),A=n(85893);function L(e){let{location:t}=e;window.__c={n:"InboxFilterForUnreadButton"};const n=(0,h.useIntl)(),i=(0,s.O7)(),{currentTab:a,showOnlyUnreadNotifications:l,isCurrentTabEmpty:d}=(0,r.VK)((()=>{const{currentTab:e,isCurrentTabEmpty:t}=y.ZP.state;return{currentTab:e,showOnlyUnreadNotifications:"mentions"===e&&y.ZP.state.showOnlyUnreadNotifications,isCurrentTabEmpty:t}}),[]),c=(0,o.useCallback)((async()=>{if(l)y.ZP.update((e=>({...e,showOnlyUnreadNotifications:!1,unreadNotificationIds:[]}))),m.U0(i,{toggled_to:"off"});else{const e=await g.Qy({environment:i});y.ZP.update((t=>({...t,showOnlyUnreadNotifications:!0,unreadNotificationIds:e}))),m.U0(i,{toggled_to:"on"})}}),[i,l]),u=(0,Z.yK)((e=>({mobileTopBarIcon:{height:18,width:18,fill:l?void 0:e.regularTextColor},webUpdatesModalIcon:{height:17,width:17},desktopInboxPanelIcon:{height:18,width:18,...!l&&{fill:e.regularTextColor}}})),[l]);if("mentions"!==a)return null;const f=!l&&d,C=l?(0,A.jsx)(h.FormattedMessage,{defaultMessage:"Show all notifications",id:"updatesModal.unreadNotificationsFilterButton.allTooltip"}):(0,A.jsx)(h.FormattedMessage,{defaultMessage:"Show unread notifications only",id:"updatesModal.unreadNotificationsFilterButton.unreadTooltip"}),b=l?n.formatMessage({defaultMessage:"Show all notifications",id:"updatesModal.unreadNotificationsFilterButton.allTooltipAriaLabel"}):n.formatMessage({defaultMessage:"Show unread notifications only",id:"updatesModal.unreadNotificationsFilterButton.unreadTooltipAriaLabel"});let v,x;switch(t){case"mobileTopBar":v=void 0,x=u.mobileTopBarIcon;break;case"webUpdatesModal":v=!!l||void 0,u.webUpdatesModalIcon;break;case"desktopInboxPanel":v=!!l||void 0,x=u.desktopInboxPanelIcon;break;default:(0,p.t1)(t)}return(0,A.jsx)(R.ZP,{disableTooltip:f,renderTooltip:()=>C,render:e=>(0,A.jsx)(F.Z,{icon:P.I,isBlue:l,hovered:v,iconStyle:x,disabled:f,onClick:c,ariaLabel:b,...e})})}const U=o.memo(L);var E=n(82990),D=n(18514),V=n(19034),H=n(74523),W=n(39849),z=n(66957),K=n(52867),$=n(5686),G=n(50770),X=n(63296);function q(e){let{}=e;window.__c={n:"InboxMentionsActionButtons"};const t=(0,s.Fy)(),n=(0,s.O7)(),i=(0,r.VK)((()=>(0,G.H7)()),[]),a=(0,r.VK)((()=>y.n_.state),[]),l=(0,r.VK)((()=>{const{currentTab:e,isCurrentTabEmpty:t}=y.ZP.state;if("mentions"!==e||t)return;const{containsBothReadAndUnreadNotifications:n,containsUnreadNotifications:o,showOnlyUnreadNotifications:i}=y.ZP.state;return{containsBothReadAndUnreadNotifications:n,containsUnreadNotificationsAccordingToUpdatesStore:o,showOnlyUnreadNotifications:i}}),[]),d=(0,r.VK)((()=>V.Z.getUnreadCountForCurrentSpace().mentions>0),[]),c=(0,o.useCallback)((()=>{m.Xf(n),g.go(n)}),[n]),u=(0,o.useCallback)((()=>{if(!l)return;const{containsBothReadAndUnreadNotifications:e,showOnlyUnreadNotifications:t}=l;let o="none";t?o="unread":e&&(o="read"),m.zD(n,{readFilter:o}),g.rG(n,"mentions",o)}),[n,l]),p=(0,Z.yK)((e=>{const n={opacity:1,flex:1,height:t.isMobile?32:27,...i&&{fontSize:14}};return{headerWithBottomBorder:{borderBottom:a?void 0:`1px solid ${e.regularDividerColor}`},container:{display:"flex",marginTop:i&&!t.isMobile?0:12,marginLeft:16,marginRight:16,paddingBottom:12,gap:8},buttons:n,buttonsWithLoweredOpacity:{...n,opacity:.7}}}),[t.isMobile,a,i]);if(!l)return null;const{containsBothReadAndUnreadNotifications:f,containsUnreadNotificationsAccordingToUpdatesStore:C,showOnlyUnreadNotifications:b}=l,v=C||d;return(0,A.jsx)("div",{style:p.headerWithBottomBorder,children:(0,A.jsxs)("div",{style:p.container,children:[(0,A.jsx)(R.ZP,{disableTooltip:v,renderTooltip:e=>(0,A.jsx)("div",{...e,children:(0,A.jsx)(h.FormattedMessage,{defaultMessage:"All notifications have been marked as read.",id:"updatesModal.spaceUpdatesTab.markAllReadButton.disabledTooltip"})}),render:e=>(0,A.jsx)(X.Z,{onClick:c,style:v?p.buttons:p.buttonsWithLoweredOpacity,isSmall:!t.isMobile,disabled:!v,icon:i?$.J:void 0,...e,children:(0,A.jsx)(h.FormattedMessage,{defaultMessage:"Mark all as read",id:"updatesModal.spaceUpdates.mentionsTab.markAllReadButtonTitle"})})}),(0,A.jsx)(X.Z,{onClick:u,style:p.buttons,isSmall:!t.isMobile,icon:i?K.H:void 0,children:b?(0,A.jsx)(h.FormattedMessage,{defaultMessage:"Archive unread",id:"updatesModal.spaceUpdates.mentionsTab.archiveUnreadButtonTitle"}):f?(0,A.jsx)(h.FormattedMessage,{defaultMessage:"Archive read",id:"updatesModal.spaceUpdates.mentionsTab.archiveReadButtonTitle"}):(0,A.jsx)(h.FormattedMessage,{defaultMessage:"Archive all",id:"updatesModal.spaceUpdates.mentionsTab.archiveAllButtonTitle"})})]})})}const Y=o.memo(q);var Q=n(3712);const J=(0,n(45238).I)("refresh",{viewBox:"0 0 24 20",svg:(0,A.jsx)("path",{d:"M0.19663 9.99023C-0.184229 10.5273-0.00844799 11.0059 0.694677 11.0059L2.04233 11.0059C2.56968 15.9766 6.85679 19.9219 11.9447 19.9219C14.9232 19.9219 17.6185 18.5645 19.4544 16.4551C19.8158 16.0352 19.7669 15.5078 19.3861 15.2344C19.0052 14.9609 18.5365 15.0586 18.224 15.4199C16.7103 17.168 14.4642 18.2617 11.9447 18.2617C7.68686 18.2617 4.22007 15.1074 3.72202 11.0059L5.1771 11.0059C5.87046 11.0059 6.04624 10.5273 5.67515 10L3.48765 6.88477C3.17515 6.43555 2.7064 6.42578 2.38413 6.88477ZM4.44468 3.4668C4.07358 3.88672 4.12241 4.4043 4.51304 4.67773C4.8939 4.95117 5.35288 4.86328 5.67515 4.50195C7.19858 2.76367 9.44468 1.66016 11.9447 1.66016C16.1927 1.66016 19.6595 4.81445 20.1673 8.92578L18.7123 8.92578C18.0189 8.92578 17.8431 9.39453 18.2142 9.93164L20.4017 13.0469C20.7142 13.4961 21.183 13.5059 21.5052 13.0469L23.683 9.94141C24.0736 9.39453 23.888 8.92578 23.1849 8.92578L21.847 8.92578C21.3099 3.95508 17.0326 0 11.9447 0C8.96616 0 6.28061 1.34766 4.44468 3.4668Z"})});function ee(e){let{location:t,onClick:n}=e;window.__c={n:"InboxRefreshAllTabButton"};const o=(0,h.useIntl)(),i=(0,r.VK)((()=>y.ZP.state.currentTab),[]),s=(0,Z.yK)((e=>({mobileTopBarIcon:{height:18,width:18,fill:e.regularTextColor},webUpdatesModalIcon:{height:17,width:17}})),[]);if("allPages"!==i)return null;let a;switch(t){case"mobileTopBar":a=s.mobileTopBarIcon;break;case"webUpdatesModal":a=s.webUpdatesModalIcon;break;default:(0,p.t1)(t)}return(0,A.jsx)(R.ZP,{renderTooltip:()=>(0,A.jsx)(h.FormattedMessage,{defaultMessage:"Refresh",id:"updatesModal.allUpdatesRefreshButton.refreshButtonDescription"}),render:e=>(0,A.jsx)(F.Z,{icon:J,iconStyle:a,onClick:n,ariaLabel:o.formatMessage({defaultMessage:"Refresh",id:"updatesModal.allUpdatesRefreshButton.refreshButtonDescriptionAriaLabel"}),...e})})}const te=o.memo(ee);var ne=n(92955);function oe(e){let{orderedTabConfigs:t,onClickRefreshAllTab:n}=e;window.__c={n:"InboxModalHeader"};const i=(0,s.Fy)(),a=(0,s.O7)(),{currentTab:l,currentTabIndex:d}=(0,r.VK)((()=>{const{currentTab:e}=y.ZP.state,n=t.findIndex((t=>t.tab===e));return{currentTab:e,currentTabIndex:n}}),[t]),c=(0,o.useMemo)((()=>t.map(((e,t)=>{if(e.showSeparatorBefore)return t-1})).filter(p.$K)),[t]),u=(0,r.VK)((()=>V.Z.getUnreadCountForCurrentSpace().mentions>0),[]),m=(0,o.useCallback)((e=>{const n=t[e],o=null==n?void 0:n.tab;o&&l!==o&&g.G7({environment:a,newTab:o,shouldTrack:!0})}),[l,a,t]),f=(0,Z.yK)((()=>({mentionsContainer:{display:"flex",alignItems:"center",justifyContent:"center",fontWeight:u?E.Z.fontWeight.medium:void 0},tabBarRightStyle:{justifyContent:"space-between"},helpButton:{marginLeft:0,...i.isMobile&&{marginTop:-1}},unreadMentionsBadge:{marginLeft:6},actionButtons:{display:"flex",justifyContent:"center",gap:6}})),[i.isMobile,u]),b=W.N.Red,v={mentions:(0,A.jsxs)("div",{style:f.mentionsContainer,className:C.I2F,children:[(0,A.jsx)("div",{children:(0,A.jsx)(h.FormattedMessage,{defaultMessage:"Inbox",id:"updatesModal.mentionsTab.title"})}),(0,A.jsx)(ne.Z,{type:"currentSpace",color:b,style:f.unreadMentionsBadge})]}),allPages:(0,A.jsx)("div",{className:C.gjL,children:(0,A.jsx)(h.FormattedMessage,{defaultMessage:"All",id:"updatesModal.allUpdatesTab.title"})}),archive:(0,A.jsx)("div",{className:C.HKr,children:(0,A.jsx)(h.FormattedMessage,{defaultMessage:"Archived",id:"updatesModal.archiveTab.title"})})},x=t.map((e=>v[e.tab])),M="webUpdatesModal",T=!i.isMobile&&(0,A.jsxs)("div",{style:f.actionButtons,children:[(0,A.jsx)(te,{location:M,onClick:n}),(0,A.jsx)(U,{location:M}),(0,A.jsx)(Q.Z,{location:M})]}),S=(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(R.ZP,{render:e=>(0,A.jsx)(H.Z,{href:(0,D.UY)("guides.notifications"),analyticsFrom:"inbox_tabs_link",style:f.helpButton,...e}),renderTooltip:()=>(0,A.jsx)(h.FormattedMessage,{id:"updatesButton.learnMoreAboutInboxLink",defaultMessage:"Learn more about notifications"})}),T]});return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(z.Z,{tabs:x,selectedIndex:d,onChange:m,separatorIndexes:c,right:S,rightStyle:f.tabBarRightStyle}),"mentions"===l&&(0,A.jsx)(Y,{})]})}const ie=o.memo(oe);var se=n(56258);const re=[{tab:"mentions"},{tab:"archive"},{tab:"allPages",showSeparatorBefore:!0}];class ae extends i.Z{constructor(){super(...arguments),this.storeTypes={refreshCountStore:a.default.createClass(0)},this.CLASS_COMPONENT_CONVERSION_DO_NOT_TOUCH_handleRefreshAll=()=>{var e;(e=this.stores.refreshCountStore).setState(e.state+1)},this.handleRefreshAllThrottled=c.Ds(this.CLASS_COMPONENT_CONVERSION_DO_NOT_TOUCH_handleRefreshAll,1e3,{leading:!0})}willUnmount(){var e;e=this.environment,m.nI(e),g.G7({environment:e,newTab:"mentions",shouldTrack:!1})}renderComponent(){const{device:e}=this.environment;let t;const n=(0,A.jsx)(ie,{onClickRefreshAllTab:this.handleRefreshAllThrottled,orderedTabConfigs:re});if(e.isMobile){const o="mobileTopBar";t={menuType:b.og.Modal,title:(0,A.jsx)(h.FormattedMessage,{defaultMessage:"Updates",id:"updatesModal.mobileMenu.title"}),width:this.props.format===v.EX.RenderAsPage?"100vw":void 0,renderAsPage:this.props.format===v.EX.RenderAsPage,right:[(0,A.jsx)(te,{onClick:this.handleRefreshAllThrottled,location:o},"InboxRefreshAllTabButton"),(0,A.jsx)(U,{location:o},"InboxFilterForUnreadButton"),(0,A.jsx)("span",{style:{width:8}},"paddingSpan"),(0,A.jsx)(Q.Z,{location:o},"InboxNotificationSettingsButton")],left:[ce(),e.isPhone&&(0,x.Y)("supportsNativeHome")&&this.props.format===v.EX.RenderAsPage&&!(0,x.Y)("supportsNativeInbox")?void 0:(0,l.k)({fill:this.theme.regularTextColor,width:26,height:26})],onClickLeft:this.props.onClose,header:n,whiteBackground:!0}}else t={menuType:b.og.Popup,header:n,height:"auto"};return(0,A.jsx)(B.Z,{onSwipeLeft:()=>function(e){const t=re.findIndex((e=>e.tab===y.ZP.state.currentTab));if(-1===t)return;const n=re[t+1].tab;void 0!==n&&g.G7({environment:e,newTab:n,shouldTrack:!0})}(this.environment),onSwipeRight:()=>function(e){const t=re.findIndex((e=>e.tab===y.ZP.state.currentTab));if(-1===t)return;const n=re[t-1].tab;void 0!==n&&g.G7({environment:e,newTab:n,shouldTrack:!0})}(this.environment),render:e=>(0,A.jsxs)(w.Z,{...t,...e,className:C.C18,children:[(0,A.jsx)(k.Z,{onChange:(e,t)=>{let{offsetFromTop:n}=t;y.n_.setState(n<=0)}}),(0,A.jsx)(O.Z,{capture:!0,allowUndo:!0,allowEsc:!0,allowMobileAutoScroll:!0,render:()=>this.props.format===v.EX.RenderAsPage?(0,A.jsx)(pe,{refreshCountStore:this.stores.refreshCountStore}):(0,A.jsx)(ue,{refreshCountStore:this.stores.refreshCountStore})})]})})}}ae.displayName="UpdatesPopup";const le=ae;function de(){return(0,A.jsx)(N.Z,{icon:d.k,title:(0,A.jsx)(h.FormattedMessage,{defaultMessage:"You've read everything",id:"updatesModal.spaceUpdatesTab.emptyUnreadMentionsTabTitle"}),message:(0,A.jsxs)("div",{children:[(0,A.jsx)(h.FormattedMessage,{defaultMessage:"You have more notifications in your inbox.",id:"updatesModal.spaceUpdatesTab.emptyUnreadMentionsTabMessage"}),(0,A.jsx)("div",{style:{height:12}}),(0,A.jsx)(_.Z,{isBlue:!0,onClick:()=>{"mentions"===y.ZP.state.currentTab&&y.ZP.setState({...y.ZP.state,showOnlyUnreadNotifications:!1,unreadNotificationIds:[]})},children:(0,A.jsx)(h.FormattedMessage,{defaultMessage:"See all",id:"updatesModal.spaceUpdatesTab.emptyUnreadMentionsTabButton"})})]})})}function ce(){if((0,x.Y)("supportsNativeHome"))return(0,A.jsx)(f.Z,{show:void 0!==y.ZP.state.loadingId,showDelay:400,showHold:0,render:e=>e?(0,A.jsx)(j.Z,{style:{width:14}}):(0,A.jsx)("div",{style:{width:14}})})}function ue(e){let{refreshCountStore:t}=e;window.__c={n:"ContentComponent"};const n=(0,r.VK)((()=>y.ZP.state),[]),{currentSpaceStore:o,mainEditorCurrentBlockStore:i}=(0,r.VK)((()=>M.default.state),[]),s=(0,r.VK)((()=>t.state),[t]),a=n.currentTab;if("allPages"===a)return o&&i?(0,A.jsx)(T.Z,{spaceId:o.id,empty:()=>(0,A.jsx)(N.Z,{message:(0,A.jsx)(h.FormattedMessage,{defaultMessage:"Updates on pages in your workspace will appear here.",id:"updatesModal.allPagesTab.emptyPrompt"}),title:(0,A.jsx)(h.FormattedMessage,{defaultMessage:"No new updates",id:"updatesModal.allPagesTab.emptyPromptTitle"})}),source:"notifications_tab"},`all-pages-${s}`):null;if("mentions"===a){const e=n.showOnlyUnreadNotifications;return(0,A.jsx)(se.Z,{type:"mentions",empty:e?(0,A.jsx)(de,{}):(0,A.jsx)(N.Z,{message:(0,A.jsx)(h.FormattedMessage,{defaultMessage:"You'll be notified here for @mentions, page activity, requests, and page invites.",id:"updatesModal.spaceUpdatesTab.allArchivedRequests"}),title:(0,A.jsx)(h.FormattedMessage,{defaultMessage:"You're all caught up",id:"updatesModal.spaceUpdatesTab.allArchivedTitle"})}),source:"notifications_tab",tab:"inbox"},"mentions")}if("archive"===a)return(0,A.jsx)(se.Z,{type:"archive",empty:(0,A.jsx)(N.Z,{message:(0,A.jsx)(h.FormattedMessage,{defaultMessage:"Any Inbox updates you archived will show up here.",id:"updatesModal.archiveTab.emptyPrompt"}),title:(0,A.jsx)(h.FormattedMessage,{defaultMessage:"No archived updates",id:"updatesModal.archiveTab.emptyPromptTitle"})}),source:"notifications_tab",tab:"archive"},"archive");(0,p.t1)(a)}function pe(e){let{refreshCountStore:t}=e;window.__c={n:"ContentAsPageWithLazyLoaderComponent"};const n=(0,s.O7)();return(0,A.jsx)(I.Z,{fetch:async()=>{await u.Vs(0),await M.default.waitUntil((()=>void 0!==M.default.state.currentSpaceStore))},loading:()=>(0,A.jsx)(o.Fragment,{}),willRender:()=>{var e;null===(e=n.mobileNative)||void 0===e||e.markTransitionReady({type:"updates"})},render:()=>(0,A.jsx)(S.Z,{isVisible:!0,enterAnimationStyle:{opacity:0},animationStyle:{opacity:1},blockRenderQueueOnEnter:!0,render:()=>(0,A.jsx)(ue,{refreshCountStore:t})})})}},93481:(e,t,n)=>{n.d(t,{Z:()=>T});n(67294);var o=n(83355),i=n(69651),s=n(97880),r=n(9291),a=n(45257),l=n(97638),d=n(41558),c=n(42922),u=n(52275),p=n(3386),h=n(89728),m=n(53437),g=n(72495),f=n(83264),C=n(255),b=n(75689),v=n(91642),x=n(8319),M=n(85893);class y extends o.Z{constructor(){super(...arguments),this.storeTypes={store:d.Z},this.renderActiveButtonOrigin=()=>{const{value:e,dateFormat:t,disabled:n,focused:o,intl:s}=this.props,r=_(this.environment),a=O(this.theme),d={...r.menuItem,...a.activeMenuItem},c=l._Q(e,s,t),p=(0,M.jsx)(C.Z,{onClick:()=>w(this.props.onChange),disabled:n});return(0,M.jsx)(u.Z,{focused:o,disabled:n,icon:(0,i.C)(r.iconActiveDesktop),title:c,right:p,isTokenTitle:!0,alignIconTop:!0,onClick:this.CLASS_COMPONENT_CONVERSION_DO_NOT_TOUCH_handleOriginActivate,desktopTitleStyle:r.menuItemTitleDesktop,desktopIconStyle:r.iconActiveDesktopWrapper,style:d})},this.renderInactiveButtonOrigin=()=>{const{title:e,icon:t,disabled:n,focused:o,mode:i}=this.props,s=_(this.environment),r=O(this.theme),a={...s.menuItem,...r.buttonMenuItem,...i===x.z.Pill?{width:"fit-content",border:"solid 1px",paddingLeft:0,paddingRight:0,borderRadius:20,fontSize:12}:{}};return(0,M.jsx)(u.Z,{focused:o,disabled:n,icon:t(s.icon),title:e,onClick:this.CLASS_COMPONENT_CONVERSION_DO_NOT_TOUCH_handleOriginActivate,style:a})},this.renderPillButtonOrigin=()=>{const{value:e,title:t}=this.props;return(0,M.jsx)(a.Z,{on:Boolean(e.starting||e.ending),icon:(0,i.C)({width:16,marginRight:6,fill:"currentColor"}),title:(0,M.jsx)("span",{children:t}),onClick:this.CLASS_COMPONENT_CONVERSION_DO_NOT_TOUCH_handleOriginActivate})},this.renderPopupContents=()=>{const{title:e,showButtons:t}=this.props,{store:n}=this.stores;return(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(f.Z,{title:e,value:k(this.props.value,this.stores.store),onUpdate:this.CLASS_COMPONENT_CONVERSION_DO_NOT_TOUCH_updateTemporary,store:n,onDismiss:this.CLASS_COMPONENT_CONVERSION_DO_NOT_TOUCH_handleMenuClose}),t&&(0,M.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",width:"100%",padding:"0px 10px"},children:[(0,M.jsx)(h.Z,{isGray:!0,style:{marginLeft:"auto",marginRight:8},onClick:this.CLASS_COMPONENT_CONVERSION_DO_NOT_TOUCH_handleMenuClose,children:(0,M.jsx)(r.FormattedMessage,{defaultMessage:"Cancel",id:"searchDateFilter.cancelButton.label"})}),(0,M.jsx)(c.Z,{onClick:()=>this.props.onChange(this.stores.store.state.temporaryDateRange),children:(0,M.jsx)(r.FormattedMessage,{defaultMessage:"Accept",id:"searchDateFilter.acceptButton.label"})})]})]})},this.renderFooter=()=>{const{store:e}=this.stores;return(0,M.jsxs)(g.Z,{topBorder:!0,style:{padding:6,justifyContent:"space-between",display:"flex"},children:[(0,M.jsx)(h.Z,{onClick:()=>{e.setState({...e.state,temporaryDateRange:{starting:void 0,ending:void 0}}),this.props.onChange({})},children:(0,M.jsx)(r.FormattedMessage,{id:"searchDateFilter.clearButton",defaultMessage:"Clear"})}),(0,M.jsx)(c.Z,{onClick:this.CLASS_COMPONENT_CONVERSION_DO_NOT_TOUCH_handleMenuClose,children:(0,M.jsx)(r.FormattedMessage,{id:"searchDateFilter.applyButton",defaultMessage:"Apply"})})]})},this.CLASS_COMPONENT_CONVERSION_DO_NOT_TOUCH_handleOriginActivate=()=>function(e,t){if(t)return;e.setState({...e.state,isOpen:!0,focus:"starting"})}(this.stores.store,this.props.disabled),this.CLASS_COMPONENT_CONVERSION_DO_NOT_TOUCH_handleMenuClose=e=>function(e,t,n,o,i){const{temporaryDateRange:s}=n.state;if(l.zD(e))return;i||t(s);n.setState({...n.state,isOpen:!1,temporaryDateRange:{starting:void 0,ending:void 0}}),o&&o()}(e,this.props.onChange,this.stores.store,this.props.onMenuDismiss,this.props.showButtons),this.CLASS_COMPONENT_CONVERSION_DO_NOT_TOUCH_updateTemporary=e=>B(e,this.stores.store)}didMount(){B({value:this.props.value},this.stores.store)}renderComponent(){const{device:e}=this.environment,{mode:t}=this.props;return e.isMobile?this.renderMobile(t):this.renderDesktop(t)}renderDesktop(e){const{title:t}=this.props,{store:n}=this.stores,o=_(this.environment),i=e===x.z.Section,r=i?t:void 0,a=(()=>e===x.z.Section?this.renderActiveButtonOrigin():e===x.z.Button?this.renderInactiveButtonOrigin():e===x.z.Pill?this.renderPillButtonOrigin():void(0,s.t1)(e))();return(0,M.jsx)(v.Z,{title:r,marginAfter:i,children:(0,M.jsx)(p.Z,{debugName:"SearchDateFilter",capture:n.state.isOpen,onUp:j,onDown:j,onEnter:j,children:(0,M.jsx)(m.ZP,{popupType:S(this.environment),open:n.state.isOpen,origin:a,render:this.renderPopupContents,onDismiss:this.CLASS_COMPONENT_CONVERSION_DO_NOT_TOUCH_handleMenuClose,placementToOrigin:m.ZP.Placement.Bottom,alignmentToOrigin:m.ZP.Alignment.Start,keepFocus:!0,style:o.popup})})})}renderMobile(e){const{store:t}=this.stores,n=e===x.z.Section?this.renderMobileFilterSummary():this.renderMobileButtonOrigin();return(0,M.jsx)(m.ZP,{popupType:m.ZP.PopupType.SlideUp,open:t.state.isOpen,origin:n,render:this.renderPopupContents,onDismiss:this.CLASS_COMPONENT_CONVERSION_DO_NOT_TOUCH_handleMenuClose,preventScaleTransition:!0})}renderMobileButtonOrigin(){const{icon:e,title:t,disabled:n}=this.props,o=_(this.environment);return(0,M.jsx)(u.Z,{disabled:n,focused:!1,icon:e(o.icon),title:t,onClick:this.CLASS_COMPONENT_CONVERSION_DO_NOT_TOUCH_handleOriginActivate})}renderMobileFilterSummary(){const{title:e,value:t,dateFormat:n,disabled:o,intl:s}=this.props,r=_(this.environment),a=(0,M.jsxs)("div",{style:r.summary,children:[(0,i.C)(r.iconActiveMobile),l._Q(t,s,n)]});return(0,M.jsx)(b.Z,{disabled:o,onClick:this.CLASS_COMPONENT_CONVERSION_DO_NOT_TOUCH_handleOriginActivate,onClickClear:()=>w(this.props.onChange),label:e,title:a})}}y.displayName="SearchDateFilter";const T=(0,r.injectIntl)(y);function S(e){const{device:t}=e;return t.isMobile?m.ZP.PopupType.SlideUp:m.ZP.PopupType.Popup}function O(e){return{buttonMenuItem:{color:e.mediumTextColor},activeMenuItem:{color:e.regularTextColor}}}function j(e){e.preventDefault&&e.preventDefault()}function w(e){e({starting:void 0,ending:void 0})}function _(e){return{menuItem:{minHeight:void 0,paddingTop:e.device.isMobile?12:4,paddingBottom:e.device.isMobile?12:4},icon:{height:14,width:14,fill:"currentColor"},iconActiveDesktop:{height:14,width:14,fill:"currentColor",alignSelf:"flex-start",marginTop:2,marginRight:2},iconActiveDesktopWrapper:{marginTop:0},iconActiveMobile:{height:14,width:14,fill:"currentColor",marginTop:1,marginRight:6},popup:{paddingTop:12,paddingBottom:8},menuItemTitleDesktop:{width:"100%"},sectionMenuItem:{display:"flex"},summary:{display:"inline-flex"}}}function k(e,t){const{temporaryDateRange:n}=t.state;return{...e,...n}}function B(e,t){if(!e.error)return t.setState({...t.state,temporaryDateRange:{...t.state.temporaryDateRange,...e.value}})}},8319:(e,t,n)=>{n.d(t,{z:()=>D,Z:()=>H});var o=n(67294),i=n(83355),s=n(47453),r=n(72126),a=n(97880),l=n(9291),d=n(45257),c=n(75024),u=n(49085);class p extends u.default{getInitialState(){return{isMenuOpen:!1,inputTemporaryValue:"",indexToReplace:void 0,popupOriginRect:void 0}}}const h=p;var m=n(42922),g=n(52275),f=n(89728),C=n(53437),b=n(72495),v=n(75689),x=n(91642),M=n(480),y=n(86628),T=n(68626),S=n(91155),O=n(23586),j=n(87279),w=n(29798),_=n(72087),k=n(78140),B=n(32163),I=n(43765),N=n(40721),Z=n(47082),P=n(85893);const F={input:{marginTop:8,marginLeft:8,marginRight:8,boxSizing:"border-box",width:"auto"},menu:{width:250,maxHeight:"40vh"},inputMenu:{maxHeight:"20vh"}};const R=function(e){let{labelText:t,value:n,renderResultMenuItem:i,onConfirm:s,items:r,performRequest:a,onDismiss:l,onChange:d,renderToken:c,onRemove:u,onClear:p,disabled:h}=e;window.__c={n:"SearchTokenInputMenu"};const m=(0,M.O7)(),g=(0,y.qz)(void 0,w.Z),f=(0,y.qz)(void 0,_.Z),C=(0,o.useCallback)(((e,o,r)=>(0,P.jsx)(E,{error:e,data:o,ready:r,labelText:t,value:n,renderResultMenuItem:i,onConfirm:s,menuListStore:g})),[t,n,i,s,g]),b={query:n,current:r};return(0,P.jsx)(k.Z,{...U(m,l,t,n,r,d,c,u,p,h),children:(0,P.jsx)(O.Z,{debounce:100,requestStore:f,request:b,performRequest:a,render:C})})};function A(e){const{device:t}=e;return t.isMobile}function L(e){let{labelText:t,value:n,items:o,disabled:i,onChange:s,renderToken:a,onRemove:l,onClear:d}=e;window.__c={n:"TokenInputComponent"};const c=(0,M.O7)(),u=o.map((e=>a(e,{onRemove:()=>l(e)})));return(0,P.jsx)(Z.Z,{focus:!A(c)||void 0,focusAfterAnimation:!0,format:Z.U.FilterValue,tokens:u,placeholder:t.tokenInputPlaceholder,onRemoveLastToken:()=>function(e,t){const n=r.Z$(e);n&&t(n)}(o,l),onClearButtonClick:d,value:n,onChange:s,showClearButton:!0,disabled:Boolean(i),style:F.inputMenu})}function U(e,t,n,o,i,s,r,a,l,d){if(A(e)){return{menuType:j.og.Modal,title:n.title,right:(0,P.jsx)(N.DoneMenuText,{}),onClickRight:t,header:(0,P.jsx)(L,{labelText:n,value:o,items:i,disabled:d,onChange:s,renderToken:r,onRemove:a,onClear:l})}}return{menuType:j.og.Popup,onClickOutside:t,header:(0,P.jsx)(L,{labelText:n,value:o,items:i,disabled:d,onChange:s,renderToken:r,onRemove:a,onClear:l}),...F.menu}}function E(e){let{error:t,data:n,ready:i,labelText:s,value:r,renderResultMenuItem:a,onConfirm:d,menuListStore:c}=e;window.__c={n:"RequestComponent"};const u=(0,y.qz)(c,w.Z),p=(0,o.useCallback)((e=>(0,P.jsx)(b.Z,{...e,title:s.resultSectionTitle,loading:!i})),[s,i]);if(t)return T.log({level:"error",from:s.componentDebugName,type:"requestFailed",error:(0,S.Ui)(t),data:{miscDataToConvertToString:{query:r}}}),(0,P.jsx)(p,{children:(0,P.jsx)(I.Z,{title:(0,P.jsx)(l.FormattedMessage,{defaultMessage:"Something went wrong.",id:"search.inputMenu.errorMessage"})})});if(!n)return(0,P.jsx)(p,{children:(0,P.jsx)(I.Z,{title:(0,P.jsx)(l.FormattedMessage,{defaultMessage:"Loading…",id:"search.inputMenu.loading.message"})})});if(n&&0===n.length)return(0,P.jsx)(p,{children:(0,P.jsx)(I.Z,{title:(0,P.jsx)(l.FormattedMessage,{defaultMessage:"No results found.",id:"search.inputMenu.noResults.message"})})});const h={key:"results",items:n.map((e=>function(e,t,n){return{key:e,action:()=>n(e),render:n=>t(e,n)}}(e,a,d))),render:p};return(0,P.jsx)(B.Z,{type:B.i.Vertical,store:u,initialFocus:0,sections:[h]})}let D=function(e){return e.Button="Button",e.Section="Section",e.Pill="Pill",e}({});class V extends i.Z{constructor(){super(...arguments),this.animationFrame=void 0,this.origin=o.createRef(),this.storeTypes={componentStore:h},this.renderMobileFilterSummary=e=>{const{title:t,items:n,renderItemForSummary:i}=this.props,{disableFilters:s}=e,r=G(this.environment,this.props.mode),a={...c.mK,...r.summary},l=n.length-1,d=(0,P.jsx)("ul",{style:a,children:n.map(((e,t)=>(0,P.jsx)("li",{style:r.summaryItem,children:(0,P.jsxs)(o.Fragment,{children:[i(e),t!==l&&","," "]})},e)))});return(0,P.jsx)(v.Z,{disabled:s,onClick:this.CLASS_COMPONENT_CONVERSION_DO_NOT_TOUCH_handleMenuOpenMobile,onClickClear:()=>z(this.props.onChange),label:t,title:d})},this.renderMenu=()=>{const{renderToken:e,renderFooter:t,allowApplyBatchSelection:n}=this.props,{componentStore:{state:o}}=this.stores;return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(R,{...this.props,value:o.inputTemporaryValue,onChange:this.CLASS_COMPONENT_CONVERSION_DO_NOT_TOUCH_handleMenuInputChange,onDismiss:this.CLASS_COMPONENT_CONVERSION_DO_NOT_TOUCH_handleMenuClose,onConfirm:this.CLASS_COMPONENT_CONVERSION_DO_NOT_TOUCH_handleItemConfirm,onClear:()=>{var e;(e=this.stores.componentStore).setState({...e.state,inputTemporaryValue:""}),z(this.props.onChange)},onRemove:e=>$(e,this.props.items,this.props.onChange),renderToken:e}),t&&(0,P.jsxs)(b.Z,{topBorder:!0,style:{padding:6,justifyContent:"space-between",display:"flex"},children:[(0,P.jsx)(f.Z,{onClick:()=>{z(this.props.onChange)},children:(0,P.jsx)(l.FormattedMessage,{id:"searchTokenFilter.clearButton",defaultMessage:"Clear"})}),n&&(0,P.jsx)(m.Z,{onClick:()=>{Q(this.stores.componentStore,this.props.onMenuDismiss,"applyButton")},children:(0,P.jsx)(l.FormattedMessage,{id:"searchTokenFilter.applyButton",defaultMessage:"Apply"})})]})]})},this.handleMenuOpen=e=>{const{onMenuOpen:t}=this.props;t&&t(),this.scheduleMeasurement(void 0,(t=>({...t,isMenuOpen:!0,indexToReplace:e})))},this.CLASS_COMPONENT_CONVERSION_DO_NOT_TOUCH_handleMenuOpenMobile=()=>X(this.stores.componentStore),this.CLASS_COMPONENT_CONVERSION_DO_NOT_TOUCH_handleMenuClose=e=>Q(this.stores.componentStore,this.props.onMenuDismiss,e),this.CLASS_COMPONENT_CONVERSION_DO_NOT_TOUCH_handleItemConfirm=e=>function(e,t,n,o,i){const{indexToReplace:s}=i.state;"number"==typeof s&&s<t.length?function(e,t,n,o){const i=n.slice(0,e).concat(t,n.slice(e+1));o(i)}(s,e,t,n):t.includes(e)&&D.Pill?W(e,t,n):function(e,t,n){const o=t.concat(e);n(r.jj(o))}(e,t,n);o||Y(i)}(e,this.props.items,this.props.onChange,this.props.keepInputOnItemConfirm,this.stores.componentStore),this.CLASS_COMPONENT_CONVERSION_DO_NOT_TOUCH_handleMenuInputChange=e=>function(e,t){const{target:n}=e;t.setState({...t.state,inputTemporaryValue:String(n.value)})}(e,this.stores.componentStore),this.scheduleMeasurement=(e,t)=>{this.animationFrame=requestAnimationFrame(this.measureOriginRect(t))},this.measureOriginRect=e=>t=>{const{componentStore:n}=this.stores;if(!this.origin)return;if(!this.origin.current)return;const o=e?e(n.state):n.state;n.setState({...o,popupOriginRect:this.origin.current.getBoundingClientRect()})}}didMount(){window.addEventListener("resize",this.scheduleMeasurement)}willUnmount(){window.removeEventListener("resize",this.scheduleMeasurement),this.animationFrame&&(cancelAnimationFrame(this.animationFrame),this.animationFrame=void 0)}didUpdate(e){(e.items.length!==this.props.items.length||e.mode!==this.props.mode)&&this.scheduleMeasurement()}renderComponent(){const{device:e}=this.environment,{mode:t}=this.props;return e.isMobile?this.renderMobile(t):this.renderDesktop(t)}renderDesktop(e){const{title:t,disabled:n}=this.props,{componentStore:{state:o}}=this.stores,i=n||o.isMenuOpen;let s;const r=(()=>e===D.Section?(s=t,this.renderSectionOrigin()):e===D.Button?this.renderButtonOrigin():e===D.Pill?this.renderPillOrigin():void(0,a.t1)(e))();return(0,P.jsxs)(x.Z,{title:s,marginAfter:e===D.Section,style:G(this.environment,this.props.mode).sectionMenuItem,children:[e!==D.Pill&&this.renderFilters({disableFilters:i,showLabel:!1}),r,(0,P.jsx)(C.ZP,{popupType:C.ZP.PopupType.Popup,placementToOrigin:C.ZP.Placement.Bottom,alignmentToOrigin:C.ZP.Alignment.Start,open:q(this.stores.componentStore),originRect:o.popupOriginRect,render:()=>this.renderMenu(),onDismiss:this.CLASS_COMPONENT_CONVERSION_DO_NOT_TOUCH_handleMenuClose,keepFocus:!0,preventScaleTransition:!0})]})}renderButtonOrigin(){const{icon:e,title:t,disabled:n,focused:o}=this.props,i=G(this.environment,this.props.mode),s=K(this.theme),r={...i.menuItem,...s.buttonMenuItem};return(0,P.jsx)("div",{ref:this.origin,style:i.menuItemWrapper,children:(0,P.jsx)(g.Z,{disabled:n||q(this.stores.componentStore),icon:e(i.icon),title:t,focused:o,onClick:e=>this.handleMenuOpen(),style:r})})}renderPillOrigin(){const{icon:e,title:t,disabled:n,iconStyles:o}=this.props,i=G(this.environment,this.props.mode),s=this.props.mode===D.Pill&&this.props.hasItemsSelected;return(0,P.jsx)("div",{ref:this.origin,style:i.menuItemWrapper,children:(0,P.jsx)(d.Z,{on:s,icon:e({...i.icon,...o}),title:(0,P.jsx)("span",{children:t}),onClick:e=>this.handleMenuOpen(),wrapStyle:{opacity:n?.4:1}})})}renderSectionOrigin(){const{addItemLabel:e,disabled:t}=this.props,n=G(this.environment,this.props.mode),i=K(this.theme);return(0,P.jsxs)(o.Fragment,{children:[(0,P.jsx)("div",{ref:this.origin,style:n.menuItemWrapper}),(0,P.jsx)(g.Z,{disabled:t||q(this.stores.componentStore),icon:(0,s.R)(n.iconSmall),title:e,focused:!1,onClick:e=>this.handleMenuOpen(),style:{...n.appendListItemButton,...i.appendListItemButton}})]})}renderMobile(e){const{disabled:t}=this.props,n=t||q(this.stores.componentStore),o=e===D.Section?this.renderMobileFilterSummary({disableFilters:n}):this.renderMobileButtonOrigin({disableFilters:n});return(0,P.jsx)(C.ZP,{popupType:C.ZP.PopupType.SlideUp,open:q(this.stores.componentStore),origin:o,render:this.renderMenu,onDismiss:this.CLASS_COMPONENT_CONVERSION_DO_NOT_TOUCH_handleMenuClose,keepFocus:!0})}renderMobileButtonOrigin(e){const{icon:t,title:n}=this.props,o=G(this.environment,this.props.mode);return(0,P.jsx)(g.Z,{disabled:e.disableFilters,focused:!1,icon:t({...o.icon}),title:n,onClick:e=>X(this.stores.componentStore)})}renderFilters(e){const{items:t,renderFilter:n}=this.props,{device:o}=this.environment,i=t.map(((t,i)=>(0,P.jsx)("li",{children:n(t,{disabled:e.disableFilters,onRemove:()=>$(t,this.props.items,this.props.onChange),onClick:()=>o.isMobile?X(this.stores.componentStore):this.handleMenuOpen(i)})},`${t}_${i}`)));return(0,P.jsx)("ul",{style:c.mK,children:i})}}V.displayName="SearchTokenFilter";const H=V;function W(e,t,n){n(t.filter((t=>t!==e)))}function z(e){e([])}function K(e){return{buttonMenuItem:{color:e.mediumTextColor},appendListItemButton:{color:e.lightTextColor}}}function $(e,t,n){W(e,t,n)}function G(e,t){return{menuItem:{minHeight:void 0,paddingTop:e.device.isMobile?12:4,paddingBottom:e.device.isMobile?12:4},menuItemWrapper:{display:"flex"},sectionMenuItem:{display:"flex"},appendListItemButton:{minHeight:void 0,paddingTop:4,paddingBottom:4,fontSize:c.yv(e,"UIRegular")},icon:{height:16,width:16,marginRight:"Pill"===t?6:-2,fill:"currentColor"},iconSmall:{height:12,width:12},summary:{display:"inline"},summaryItem:{display:"inline"}}}function X(e){e.setState({...e.state,isMenuOpen:!0})}function q(e){return e.state.isMenuOpen}function Y(e){e.setState({...e.state,inputTemporaryValue:"",indexToReplace:void 0})}function Q(e,t,n){Y(e),e.setState({...e.state,isMenuOpen:!1,indexToReplace:void 0}),t&&t(n)}},75689:(e,t,n)=>{n.d(t,{Z:()=>c});n(67294);var o=n(480),i=n(24405),s=n(82990),r=n(52275),a=n(24006),l=n(255),d=n(85893);const c=function(e){window.__c={n:"SearchFilterSummaryMenuItem"};const{disabled:t,label:n,title:s,onClick:a,isToggle:l,isToggleActive:c,onClickClear:h,...m}=e,g=(0,i.Fg)(),f=(0,o.O7)(),C=function(e){return{menuItemLabel:{color:e.lightTextColor}}}(g),b=u(f),v=(0,d.jsx)("span",{style:C.menuItemLabel,children:n});return(0,d.jsx)(r.Z,{focused:!1,...m,inline:l,disabled:t,icon:v,title:s,right:(0,d.jsx)(p,{disabled:!!t,isToggle:!!l,isToggleActive:!!c,onClick:a,onClickClear:h}),onClick:a,dontShrinkIcon:!0,dontShrinkRight:!0,shouldWrapTitle:!0,style:b.menuItem,desktopIconStyle:b.menuItemLabel})};function u(e){return{menuItem:{background:void 0,minHeight:void 0,fontSize:e.device.isMobile?s.Z.fontSize.UISmall.mobile:s.Z.fontSize.UIRegular.desktop,paddingTop:e.device.isMobile?12:4,paddingBottom:e.device.isMobile?12:4},labeledMenuItemTitle:{display:"inline-flex",alignItems:"center"},menuItemLabel:{marginTop:0},rightWrapper:{display:"flex",alignItems:"center",marginTop:"-50%",marginBottom:"-50%",height:44}}}function p(e){let{disabled:t,isToggle:n,isToggleActive:i,onClick:s,onClickClear:r=(()=>{})}=e;window.__c={n:"RightComponent"};const c=u((0,o.O7)()).rightWrapper;return n?(0,d.jsx)("div",{style:c,children:(0,d.jsx)(a.Z,{on:!!i,onClick:s})}):(0,d.jsx)(l.Z,{disabled:t,onClick:r})}},91642:(e,t,n)=>{n.d(t,{Z:()=>s});n(67294);var o=n(72495),i=n(85893);const s=function(e){const t={desktopTitleStyle:{marginBottom:4},marginAfter:{marginBottom:16}},{title:n,marginAfter:s,desktopStyle:r,desktopTitleStyle:a,...l}=e,d=(s||r)&&{...s&&t.marginAfter,...r},c=a?{...t.desktopTitleStyle,...a}:t.desktopTitleStyle;return(0,i.jsx)(o.Z,{isTitleUppercase:!0,disableDesktopPadding:!0,enableActionSheetTitle:!0,desktopStyle:d,desktopTitleStyle:c,shouldShowBottomDivider:!1,title:n,...l})}},83420:(e,t,n)=>{n.d(t,{TL:()=>u,nc:()=>c,ue:()=>d});var o=n(66897),i=n(54368),s=n(77420),r=n(19889),a=n(97880),l=n(79797);function d(e){const{parentStore:t,pointer:n}=e,i=(0,l.Kv)(t,n).getValue();if(i)return(0,o.LU)({table:n.table,value:i})}function c(e){const{parentStore:t,pointer:n}=e;return n.table===s.cZ?l.Qx.createChildStore(t,n):n.table===r.KJ?l.U6.createChildStore(t,n):n.table===i.y?l.fg.createChildStore(t,n):void(0,a.t1)(n)}function u(e){return e.table===s.cZ?(0,o.ON)(e.getValue()):e.table===r.KJ?(0,o.m3)(e.getValue()):e.table===i.y?(0,o.I4)(e.getValue()):void(0,a.t1)(e)}},23570:(e,t,n)=>{function o(e){return e?32:18}n.d(t,{f:()=>o})},51811:(e,t,n)=>{n.d(t,{EX:()=>o,HB:()=>l,IS:()=>d,Tj:()=>a,yW:()=>r});let o=function(e){return e[e.Sidebar=0]="Sidebar",e[e.SidebarMobile=1]="SidebarMobile",e[e.MobileBottomBarPhone=2]="MobileBottomBarPhone",e[e.MobileBottomBarTablet=3]="MobileBottomBarTablet",e[e.TopbarMobile=4]="TopbarMobile",e[e.RenderAsPage=5]="RenderAsPage",e}({});const i=new Map,s=new Map;function r(e,t){i.set(c(e),t)}function a(e){return i.get(c(e))}function l(e,t){s.set(u(e),t)}function d(e){return s.get(u(e))??[]}function c(e){return Object.keys(e).sort().map((t=>{const n=e[t];return JSON.stringify(n)})).join("-")}function u(e){return Object.keys(e).sort().map((t=>{const n=e[t];return JSON.stringify(n)})).join("-")}},61931:(e,t,n)=>{n.d(t,{$1:()=>b,A5:()=>c,Cm:()=>d,EP:()=>a,Er:()=>v,FK:()=>h,MI:()=>f,Uf:()=>l,WB:()=>p,Wx:()=>g,XX:()=>i,_U:()=>y,iO:()=>r,jO:()=>C,jX:()=>u,jq:()=>s,yc:()=>m});var o=n(97880);const i=80,s=40,r=24,a=20,l=270,d=405,c=16,u=44,p=l-u,h=144,m=144,g="linear-gradient(transparent 0%, black 10px)",f={backdropFilter:"blur(48px)",WebkitBackdropFilter:"blur(48px)"};function C(e){return{width:48,height:48,fill:e.lightIconColor}}function b(e){let{theme:t,isPhone:n}=e;return n?t.personalHomeBackgroundPhone:t.personalHomeBackgroundDesktop}function v(e){let{theme:t,isPhone:n,buttonState:o,hasCover:i}=e,s=t.whiteButtonBackground;switch(o){case"hovered":s=t.whiteButtonHoveredBackground;break;case"pressed":s=t.whiteButtonPressedBackground}return n&&(s=void 0),{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",background:s,...f,boxShadow:i?y({isPhone:n,theme:t}):void 0,width:28,height:28,borderRadius:4}}const x=1,M=.5;function y(e){let{isPhone:t,theme:n}=e;if("dark"===n.mode)return"unset";n.mode;const i=t?M:x,s=n.home.tile.border&&`0 0 0 ${i}px ${n.home.tile.border}`;return t?s:[s,"0 12px 40px rgba(0, 0, 0, 0.025)"].filter(o.$K).join(", ")}},14542:(e,t,n)=>{n.d(t,{EP:()=>r,LU:()=>a,NS:()=>s,SS:()=>i,ZP:()=>d});var o=n(49085);const i="loadingLocalImage",s="uploading",r="downloading",a="loaded";class l extends o.default{getInitialState(){return{loadingMode:a}}}const d=l},96809:(e,t,n)=>{n.d(t,{Z:()=>o});const o=new(n(14542).ZP)},87199:(e,t,n)=>{n.d(t,{k:()=>o});const o=(0,n(9291).defineMessages)({paymentMethodUnverified:{id:"subscriptions.paymentMethodUnverified",defaultMessage:"Your payment is being processed. Please try again when your payment has completed."},otherPaymentMethod:{id:"subscriptions.otherPaymentMethod",defaultMessage:"Other"}})},44041:(e,t,n)=>{n.d(t,{y:()=>x});n(67294);var o=n(47425),i=n(9291),s=n(86572),r=n(47307),a=n(33929),l=n(52533),d=n(80444),c=n(92083),u=n(39343),p=n(87199),h=n(70060),m=n(88893),g=n(35057),f=n(88280),C=n(34583),b=n(64891),v=n(85893);const x=async function(e,t){var n;s.sA(e,{from:t.from,for_subscription_tier:t.for,addOnFeature:t.addOnFeature});if((0,g.QM)()&&["block_limit_sidebar","block_limit_settings","block_limit_banner"].includes(t.from)&&!t.addOnFeature&&(0,h.XA)(e))return void c.Z.setState({open:!0,openedFrom:"upsell",currentTab:"plans",defaultSubtab:void 0,highlightedSetting:void 0});if(!t.addOnFeature&&(0,o.QM)(t.for))return;const x=(0,l.S$)({environment:e})&&"personal"===t.for;if(e.device.isMobileNative){if("ai"===t.addOnFeature){const t=(0,l.Y2)({environment:e})?(0,v.jsx)(i.FormattedMessage,{id:"upsellActions.noIAPForAIWithExternalPurchaseOption",defaultMessage:"This workspace has used all of its free AI responses. Visit on desktop to purchase Notion AI and go unlimited."}):(0,v.jsx)(i.FormattedMessage,{id:"upsellActions.noIAPForAIWithoutExternalPurchaseOption",defaultMessage:"This workspace has used all of its free AI responses. Unfortunately, additional AI responses cannot be purchased on this platform."});return void r.showErrorMessage(t)}if(!x)return}const M=d.default.state.currentSpaceStore;if(!M)return;if(!M.canAdmin())return;await C.bi(e);const y=f.subscriptionDataStoreInstance.state;if(!y)return;if("unsubscribed_admin"!==y.type&&"subscribed_admin"!==y.type)return void(t.dontOpenPlansOnCancel||c.Z.setState({open:!0,openedFrom:"upsell",currentTab:"plans",defaultSubtab:void 0,highlightedSetting:void 0}));if(m.ri(y))return void r.showErrorMessage(a.default.formatMessage(p.k.paymentMethodUnverified));if(m.Q6(y)){const e=(0,v.jsx)(i.FormattedMessage,{id:"upsellActions.referToSalesRep",defaultMessage:"This workspace is part of a managed account. Please contact your account representative to discuss any changes to your subscription."});return void r.showErrorMessage(e)}if(x)return void(e.mobileNative&&M.id&&e.mobileNative.openUpgradeModal(M.id));if("revenueCat"===(null===(n=y.customerData)||void 0===n?void 0:n.activeSubscriptionPlatform)){const e=(0,v.jsx)(i.FormattedMessage,{id:"upsellActions.switchPlanFromInAppPurchase",defaultMessage:"You're currently subscribed through an in-app purchase with Apple. To switch plans, cancel your subscription with Apple first."});return void r.showErrorMessage(e)}const T=m.XX(y);if(t.addOnFeature&&(0,u.Fk)(T)){const e=(0,v.jsx)(i.FormattedMessage,{id:"upsellActions.noAddOnPurchaseDuringFreeTrial",defaultMessage:"Unfortunately, additional {addOn, select, ai {AI responses} other {features}} cannot be purchased while a workspace is on a free trial.",values:{addOn:t.addOnFeature}});r.showErrorMessage(e)}else{if(T&&m.MM(y))return t.addOnFeature?void b.af({environment:e,from:t.from,view:"add_ons",addOnFeature:t.addOnFeature,billingInterval:T.interval,pageSection:t.pageSection}):void b.af({environment:e,from:t.from,view:"plans",temporarySubscriptionTier:t.for,billingInterval:T.interval,pageSection:t.pageSection});{const n=(0,h.px)(e,t.for)?"ai_fifty_percent":void 0;C.I0(e,{subscriptionTier:t.for,from:t.from,addOnFeature:t.addOnFeature,coupon:n,isTrial:t.isTrial})}}}},32856:(e,t,n)=>{n.d(t,{D:()=>s});var o=n(86628),i=n(77080);function s(e){window.__c={n:"ExperimentSwitch"};const{experimentId:t,groups:n,disableExposureLogging:s}=e,r=function(e){const{experimentId:t,disableExposureLogging:n,defaultGroup:s}=e;return(0,o.VK)((()=>i.default.getEligibleGroup({experimentId:t,defaultGroup:s??"control",disableExposureLogging:n})),[t,n,s])}({experimentId:t,disableExposureLogging:s});return n[r]}},91694:(e,t,n)=>{n.d(t,{Z:()=>C});n(67294);var o=n(480),i=n(86628),s=n(24405),r=n(8848),a=n(47425),l=n(97880),d=n(82990),c=n(9291),u=n(74136),p=n(26388),h=n(44041),m=n(70060),g=n(32856),f=n(85893);const C=function(e){let{subscriptionTier:t,mobileStyle:n,desktopStyle:C,analyticsName:b,onClick:v}=e;window.__c={n:"UpsellButton"};const x=(0,s.Fg)(),M=(0,o.O7)(),{device:y}=M,T=y.isIOS&&y.isNative,S=(0,i.VK)((()=>function(e,t){if(!(0,m.R$)())return{};switch(e){case"plus":case"business":case"enterprise":return{color:t.blueColor,background:"light"===t.mode?r.ZP.diffBackground:"rgba(35, 131, 226, 0.2)",fontWeight:d.Z.fontWeight.medium};default:return{}}}(t,x)),[t,x]);if(T)return null;let O;return"personal"===t?O=(0,f.jsx)(c.FormattedMessage,{defaultMessage:"Personal Pro",id:"upgradeButton.personal.text"}):(0,a.eR)(t)?O=(0,f.jsx)(g.D,{experimentId:"upsell_colors",groups:{control:(0,f.jsx)(c.FormattedMessage,{defaultMessage:"Plus",id:"upgradeButton.plus.text"}),on:(0,f.jsx)(c.FormattedMessage,{defaultMessage:"Plus ↗",id:"upgradeButton.plus.textWithArrow"})}}):(0,a.NG)(t)?O=(0,f.jsx)(g.D,{experimentId:"upsell_colors",groups:{control:(0,f.jsx)(c.FormattedMessage,{defaultMessage:"Business",id:"upgradeButton.business.text"}),on:(0,f.jsx)(c.FormattedMessage,{defaultMessage:"Business ↗",id:"upgradeButton.business.textWithArrow"})}}):(0,a.wP)(t)?O=(0,f.jsx)(g.D,{experimentId:"upsell_colors",groups:{control:(0,f.jsx)(c.FormattedMessage,{defaultMessage:"Enterprise",id:"upgradeButton.enterprise.text"}),on:(0,f.jsx)(c.FormattedMessage,{defaultMessage:"Enterprise ↗",id:"upgradeButton.enterprise.textWithArrow"})}}):(0,l.t1)(t),y.isMobile?(0,f.jsx)(u.Z,{mobileStyle:n,children:O}):(0,f.jsx)(p.ZP,{delayThreshold:120,placement:p.ug.Bottom,renderTooltip:()=>(0,f.jsxs)("div",{style:{maxWidth:500},children:[(0,f.jsx)(c.FormattedMessage,{defaultMessage:"Upgrade to use this feature.",id:"upgradeButton.upgrade.tooltip"}),(0,f.jsx)("br",{}),(0,f.jsx)(c.FormattedMessage,{defaultMessage:"Click to learn more.",id:"upgradeButton.learnMore.tooltip"})]}),originGap:6,render:e=>(0,f.jsx)(u.Z,{desktopStyle:C,innerStyle:S,onClick:e=>function(e,t,n,o,i){h.y(o,{from:t,for:n}),i&&i(e)}(e,b,t,M,v),...e,children:O})})}},39343:(e,t,n)=>{n.d(t,{Fk:()=>a,U6:()=>d,nx:()=>l});var o=n(30120),i=n(13991),s=n(7057),r=n(95477);function a(e){return!(null==e||!e.trialEnd)&&e.trialEnd>=o.ou.now().toSeconds()}function l(e){const t=function(e){if(!a(e))return;const t=1e3*(null==e?void 0:e.trialEnd);return null!=e&&e.periodEnd&&e.periodEnd>=o.ou.now().toSeconds()&&e.periodEnd<t?e.periodEnd:t}(e);return t?(0,s.Yx)(t,"long",i.SP):void 0}function d(e){return e?r.default.trials[e.id].duration:r.default.trials.default.duration}},83176:(e,t,n)=>{n.d(t,{z:()=>s});n(67294);var o=n(45238),i=n(85893);const s=(0,o.I)("analyticsSearch",{viewBox:"0 0 51 52",svg:(0,i.jsx)("path",{d:"M.414 21.297c0 2.86.533 5.543 1.6 8.049a21.156 21.156 0 004.468 6.576 20.797 20.797 0 006.577 4.443c2.505 1.067 5.18 1.6 8.023 1.6 2.116 0 4.13-.305 6.043-.914a21.55 21.55 0 005.332-2.565l11.654 11.655a3.44 3.44 0 001.245.812c.473.186.964.28 1.472.28.728 0 1.371-.17 1.93-.508a3.48 3.48 0 001.32-1.346 3.887 3.887 0 00.482-1.93 3.8 3.8 0 00-.279-1.447 3.126 3.126 0 00-.787-1.193l-11.578-11.63a20.414 20.414 0 002.818-5.51c.694-2.013 1.041-4.138 1.041-6.372 0-2.844-.541-5.51-1.625-7.998a20.718 20.718 0 00-4.443-6.602 20.515 20.515 0 00-6.602-4.468c-2.488-1.067-5.162-1.6-8.023-1.6-2.844 0-5.518.533-8.023 1.6a20.592 20.592 0 00-6.577 4.468A21.072 21.072 0 002.014 13.3c-1.067 2.488-1.6 5.154-1.6 7.998zm5.408 0c0-2.1.39-4.071 1.168-5.916a15.517 15.517 0 013.301-4.875 15.168 15.168 0 014.875-3.276c1.845-.795 3.817-1.193 5.916-1.193 2.116 0 4.096.398 5.941 1.193a14.877 14.877 0 014.85 3.276 15.515 15.515 0 013.3 4.875c.796 1.845 1.194 3.817 1.194 5.916 0 2.116-.398 4.096-1.193 5.941a15.517 15.517 0 01-3.301 4.875 15.426 15.426 0 01-4.85 3.276c-1.845.795-3.825 1.193-5.941 1.193-2.099 0-4.07-.398-5.916-1.193a15.737 15.737 0 01-4.875-3.276 15.52 15.52 0 01-3.3-4.875c-.78-1.845-1.169-3.825-1.169-5.941zm15.31 10.36c.458 0 .746-.263.864-.788.237-1.32.474-2.437.711-3.351.254-.931.559-1.693.914-2.286a4.554 4.554 0 011.397-1.498c.575-.389 1.311-.694 2.209-.914.914-.237 2.056-.448 3.427-.634.542-.085.813-.381.813-.89 0-.507-.271-.812-.813-.913-1.354-.17-2.496-.373-3.427-.61-.915-.253-1.668-.567-2.26-.939a4.814 4.814 0 01-1.422-1.498c-.373-.61-.677-1.363-.914-2.26a42.337 42.337 0 01-.635-3.326c-.084-.542-.372-.813-.863-.813s-.796.263-.914.788a53.724 53.724 0 01-.737 3.377c-.22.914-.507 1.675-.863 2.285a4.64 4.64 0 01-1.396 1.472c-.576.373-1.32.677-2.235.914-.914.22-2.048.424-3.402.61-.559.101-.838.406-.838.914 0 .49.28.787.838.889 1.693.186 3.055.44 4.088.761 1.032.305 1.828.762 2.387 1.371.575.61 1.015 1.44 1.32 2.489.305 1.05.584 2.395.838 4.037a1 1 0 00.279.584c.17.152.38.228.635.228z"})})},82855:(e,t,n)=>{n.d(t,{E:()=>s});n(67294);var o=n(45238),i=n(85893);const s=(0,o.I)("chevronDownRounded",{viewBox:"0 0 15 9",svg:(0,i.jsx)("path",{d:"M7.92188 8.65625C8.19531 8.64844 8.44531 8.54688 8.64844 8.32812L14.5859 2.25C14.7578 2.07812 14.8516 1.85938 14.8516 1.60156C14.8516 1.08594 14.4453 0.671875 13.9297 0.671875C13.6797 0.671875 13.4375 0.773438 13.2578 0.953125L7.92969 6.42969L2.58594 0.953125C2.40625 0.78125 2.17188 0.671875 1.91406 0.671875C1.39844 0.671875 0.992188 1.08594 0.992188 1.60156C0.992188 1.85938 1.08594 2.07812 1.25781 2.25L7.20312 8.32812C7.41406 8.54688 7.64844 8.65625 7.92188 8.65625Z"})})},13148:(e,t,n)=>{n.d(t,{U:()=>s});n(67294);var o=n(45238),i=n(85893);const s=(0,o.I)("close",{viewBox:"0 0 16 16",svg:(0,i.jsx)("path",{d:"M2.89795 13.3428C3.18799 13.6262 3.6626 13.6262 3.93945 13.3494L7.99341 9.29541L12.0474 13.3494C12.3308 13.6262 12.8054 13.6328 13.0889 13.3428C13.3723 13.0593 13.3723 12.5847 13.0955 12.3079L9.0415 8.24731L13.0955 4.19336C13.3723 3.9165 13.3789 3.4353 13.0889 3.15845C12.7988 2.875 12.3308 2.875 12.0474 3.15186L7.99341 7.20581L3.93945 3.15186C3.6626 2.875 3.1814 2.86841 2.89795 3.15186C2.6145 3.44189 2.62109 3.9231 2.89795 4.19336L6.9519 8.24731L2.89795 12.3079C2.62109 12.5781 2.6145 13.0659 2.89795 13.3428Z"})})},6637:(e,t,n)=>{n.d(t,{I:()=>s});n(67294);var o=n(45238),i=n(85893);const s=(0,o.I)("filterCircled",{viewBox:"0 0 16 16",svg:(0,i.jsx)("path",{d:"M8 15.126C11.8623 15.126 15.0615 11.9336 15.0615 8.06445C15.0615 4.20215 11.8623 1.00293 7.99316 1.00293C4.13086 1.00293 0.938477 4.20215 0.938477 8.06445C0.938477 11.9336 4.1377 15.126 8 15.126ZM8 13.7383C4.85547 13.7383 2.33301 11.209 2.33301 8.06445C2.33301 4.91992 4.84863 2.39746 7.99316 2.39746C11.1377 2.39746 13.667 4.91992 13.6738 8.06445C13.6738 11.209 11.1445 13.7383 8 13.7383ZM4.41797 6.75879H11.5889C11.9307 6.75879 12.1699 6.54688 12.1699 6.22559C12.1699 5.9043 11.9307 5.68555 11.5889 5.68555H4.41797C4.07617 5.68555 3.84375 5.9043 3.84375 6.22559C3.84375 6.54688 4.07617 6.75879 4.41797 6.75879ZM5.36816 9.02148H10.6455C10.9805 9.02148 11.2197 8.80273 11.2197 8.48145C11.2197 8.16016 10.9805 7.94141 10.6455 7.94141H5.36816C5.02637 7.94141 4.78711 8.16016 4.78711 8.48145C4.78711 8.80273 5.02637 9.02148 5.36816 9.02148ZM6.35254 11.2773H9.6543C9.99609 11.2773 10.2354 11.0654 10.2354 10.7441C10.2354 10.4229 9.99609 10.2041 9.6543 10.2041H6.35254C6.01074 10.2041 5.77148 10.4229 5.77148 10.7441C5.77148 11.0654 6.01074 11.2773 6.35254 11.2773Z"})})},12392:(e,t,n)=>{n.d(t,{S:()=>s});n(67294);var o=n(45238),i=n(85893);const s=(0,o.I)("historyBack",{viewBox:"0 0 14 14",svg:(0,i.jsx)("polygon",{points:"2.85893 7.74676 8.05608 12.9439 7 14 0.528042 7.52804 0 7 0.528042 6.47196 7 0 8.05608 1.05608 2.85893 6.25324 14 6.25324 14 7.74676"})})},16184:(e,t,n)=>{n.d(t,{Q:()=>s});n(67294);var o=n(45238),i=n(85893);const s=(0,o.I)("lockedFilled",{viewBox:"0 0 16 16",svg:(0,i.jsx)("path",{d:"M4.69141 14.6338H11.3018C12.2178 14.6338 12.6689 14.1826 12.6689 13.1914V8.08496C12.6689 7.18945 12.293 6.72461 11.541 6.64941V4.96094C11.541 2.36328 9.81152 1.1123 7.99316 1.1123C6.18164 1.1123 4.45215 2.36328 4.45215 4.96094V6.67676C3.74805 6.78613 3.32422 7.2373 3.32422 8.08496V13.1914C3.32422 14.1826 3.77539 14.6338 4.69141 14.6338ZM5.75098 4.83105C5.75098 3.22461 6.76953 2.35645 7.99316 2.35645C9.2168 2.35645 10.2422 3.22461 10.2422 4.83105V6.64258L5.75098 6.64941V4.83105Z"})})},8843:(e,t,n)=>{n.d(t,{h:()=>s});n(67294);var o=n(45238),i=n(85893);const s=(0,o.I)("mailRound",{viewBox:"0 0 17 12",svg:(0,i.jsx)("path",{d:"M3.09961 11.9639H14.1055C15.3359 11.9639 16.0469 11.2529 16.0469 9.84473V2.29785C16.0469 0.896484 15.3291 0.185547 13.9004 0.185547H2.89453C1.66406 0.185547 0.953125 0.889648 0.953125 2.29785V9.84473C0.953125 11.2598 1.6709 11.9639 3.09961 11.9639ZM7.68652 6.41992L2.52539 1.32715C2.67578 1.26562 2.85352 1.23145 3.05859 1.23145H13.9414C14.1533 1.23145 14.3379 1.26562 14.4883 1.33398L9.34082 6.41992C9.04688 6.71387 8.78027 6.84375 8.51367 6.84375C8.24023 6.84375 7.97363 6.70703 7.68652 6.41992ZM1.99902 9.84473V2.29785C1.99902 2.24316 1.99902 2.27051 1.99902 2.22266L5.92969 6.08496L2.00586 9.96094C1.99902 9.92676 1.99902 9.88574 1.99902 9.84473ZM15.001 2.30469V9.85156C15.001 9.87891 15.001 9.91309 15.001 9.94043L11.0977 6.08496L15.001 2.24316C15.001 2.30469 15.001 2.30469 15.001 2.30469ZM3.05859 10.918C2.86719 10.918 2.70312 10.8906 2.55957 10.8291L6.64746 6.78906L7.0918 7.22656C7.57031 7.69824 8.02832 7.89648 8.51367 7.89648C8.99219 7.89648 9.45703 7.69824 9.93555 7.22656L10.3799 6.78906L14.4609 10.8223C14.3105 10.8906 14.1396 10.918 13.9414 10.918H3.05859Z"})})},22686:(e,t,n)=>{n.d(t,{f:()=>s});n(67294);var o=n(45238),i=n(85893);const s=(0,o.I)("person",{viewBox:"0 0 16 16",svg:(0,i.jsx)("path",{d:"M7.7832 8.00195C9.27344 8.00195 10.5381 6.67578 10.5381 4.95996C10.5381 3.28516 9.2666 2 7.7832 2C6.29297 2 5.01465 3.30566 5.02148 4.97363C5.02148 6.67578 6.28613 8.00195 7.7832 8.00195ZM3.51758 14.3594H12.0352C13.1631 14.3594 13.5527 14.0176 13.5527 13.3887C13.5527 11.6318 11.3242 9.21191 7.77637 9.21191C4.23535 9.21191 2 11.6318 2 13.3887C2 14.0176 2.38965 14.3594 3.51758 14.3594Z"})})},14734:(e,t,n)=>{n.d(t,{X:()=>s});n(67294);var o=n(45238),i=n(85893);const s=(0,o.I)("personCrossedOut",{viewBox:"0 0 44 44",svg:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("path",{d:"M5.4857 44H0L44 8.56549V13.0061L5.4857 44Z"}),(0,i.jsx)("path",{d:"M39.8048 44H8.66491L25.6448 30.4378C26.9394 30.6489 28.1581 30.9719 29.3009 31.4067C31.5362 32.2374 33.4346 33.326 34.9964 34.6723C36.5725 36.0044 37.7761 37.4367 38.6071 38.9692C39.4525 40.5018 39.8752 41.9555 39.8752 43.3305C39.8752 43.5675 39.8517 43.7906 39.8048 44Z"}),(0,i.jsx)("path",{d:"M30.3971 16.7973C30.3971 16.8668 30.3965 16.9359 30.3952 17.0048L19.3828 25.9192C18.7467 25.7134 18.1339 25.4228 17.5446 25.0473C16.2408 24.2023 15.1876 23.0708 14.3853 21.6528C13.5972 20.2205 13.2032 18.6163 13.2032 16.8403C13.2032 15.0929 13.5972 13.5174 14.3853 12.1137C15.1876 10.7101 16.2408 9.60007 17.5446 8.78366C18.8485 7.96725 20.267 7.55905 21.8001 7.55905C23.3332 7.55905 24.7517 7.96009 26.0556 8.76218C27.3595 9.56426 28.4054 10.6671 29.1935 12.0708C29.9959 13.4601 30.3971 15.0356 30.3971 16.7973Z"})]})})},35840:(e,t,n)=>{n.d(t,{R:()=>s,T:()=>i});n(67294);var o=n(45238);const i=(0,n(85893).jsx)("path",{d:"M.281 6.438c0-.875.164-1.696.492-2.461a6.484 6.484 0 011.375-2.032A6.237 6.237 0 016.64.078 6.2 6.2 0 019.11.57c.77.328 1.447.787 2.03 1.375a6.374 6.374 0 011.368 2.032c.333.765.5 1.586.5 2.46 0 .688-.107 1.342-.32 1.961a6.28 6.28 0 01-.868 1.696l3.563 3.578c.11.104.19.226.242.367.057.14.086.29.086.445 0 .22-.05.417-.149.594a1.122 1.122 0 01-1 .57c-.156 0-.307-.028-.453-.086a1.058 1.058 0 01-.382-.25l-3.586-3.585c-.5.333-1.047.596-1.641.789a6.089 6.089 0 01-1.86.28 6.237 6.237 0 01-2.468-.491 6.4 6.4 0 01-2.024-1.367A6.509 6.509 0 01.773 8.913a6.256 6.256 0 01-.492-2.476zm1.664 0c0 .65.12 1.26.36 1.828a4.775 4.775 0 001.015 1.5c.433.427.933.763 1.5 1.007a4.548 4.548 0 001.82.368c.652 0 1.261-.123 1.829-.368a4.747 4.747 0 002.508-2.507 4.567 4.567 0 00.367-1.829c0-.645-.123-1.252-.367-1.82a4.776 4.776 0 00-1.016-1.5A4.578 4.578 0 008.469 2.11a4.567 4.567 0 00-1.828-.367c-.646 0-1.253.123-1.82.367a4.667 4.667 0 00-1.5 1.008c-.433.432-.772.932-1.016 1.5a4.633 4.633 0 00-.36 1.82z"}),s=(0,o.I)("search",{viewBox:"0 0 16 16",svg:i})},45137:(e,t,n)=>{n.d(t,{o:()=>s});n(67294);var o=n(45238),i=n(85893);const s=(0,o.I)("speechBubbleThin",{viewBox:"0 0 16 16",svg:(0,i.jsx)("path",{d:"M4.73926 15.6797C5.12207 15.6797 5.40918 15.4951 5.87402 15.085L8.21875 13.0068H12.3545C14.4121 13.0068 15.5674 11.8311 15.5674 9.80078V4.49609C15.5674 2.46582 14.4121 1.29004 12.3545 1.29004H3.63867C1.58105 1.29004 0.425781 2.46582 0.425781 4.49609V9.80078C0.425781 11.8311 1.6084 13.0068 3.59082 13.0068H3.87109V14.6953C3.87109 15.3037 4.19238 15.6797 4.73926 15.6797ZM5.07422 14.1758V12.2275C5.07422 11.8242 4.90332 11.667 4.51367 11.667H3.67285C2.38086 11.667 1.76562 11.0176 1.76562 9.75977V4.53711C1.76562 3.2793 2.38086 2.62988 3.67285 2.62988H12.3135C13.6055 2.62988 14.2275 3.2793 14.2275 4.53711V9.75977C14.2275 11.0176 13.6055 11.667 12.3135 11.667H8.14355C7.7334 11.667 7.52832 11.7354 7.24121 12.0361L5.07422 14.1758ZM4.51367 5.35059H11.4043C11.6367 5.35059 11.8281 5.15918 11.8281 4.91992C11.8281 4.69434 11.6367 4.50293 11.4043 4.50293H4.51367C4.28125 4.50293 4.09668 4.69434 4.09668 4.91992C4.09668 5.15918 4.28125 5.35059 4.51367 5.35059ZM4.51367 7.53125H11.4043C11.6367 7.53125 11.8281 7.33301 11.8281 7.10059C11.8281 6.86816 11.6367 6.67676 11.4043 6.67676H4.51367C4.28125 6.67676 4.09668 6.86816 4.09668 7.10059C4.09668 7.33301 4.28125 7.53125 4.51367 7.53125ZM4.51367 9.70508H9.00488C9.2373 9.70508 9.42188 9.51367 9.42188 9.28125C9.42188 9.04199 9.2373 8.85742 9.00488 8.85742H4.51367C4.28125 8.85742 4.09668 9.04199 4.09668 9.28125C4.09668 9.51367 4.28125 9.70508 4.51367 9.70508Z"})})}}]);