"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[3812],{95464:(e,t,s)=>{s.d(t,{Z:()=>Be});var n=s(67294),r=s(83355),o=s(480),i=s(86628),a=s(24405),l=s(45238),d=s(85893);const C=(0,l.I)("sidebarTrash",{viewBox:"0 0 14 14",svg:(0,d.jsx)("path",{d:"M13.5000308,3.23952 C13.5000308,4.55848168 11.9230308,12.0493 11.9230308,12.0782 C11.9230308,12.6571 9.73825083,14 7.04165083,14 C4.34504083,14 2.16025083,12.6571 2.16025083,12.0782 C2.16025083,12.0541 0.5,4.55799105 0.5,3.23952 C0.5,1.91780104 3.02713083,0 7.03525083,0 C11.0433308,0 13.5000308,1.9178004 13.5000308,3.23952 Z M7,2 C3.625,2 2.5,3.25 2.5,4 C2.5,4.75 3.625,6 7,6 C10.375,6 11.5,4.75 11.5,4 C11.5,3.25 10.375,2 7,2 Z"})});var c=s(9291),u=s(42858),h=s(82530),p=s(97978),g=s(98742),m=s(24646),f=s(36896),x=s(44604),b=s(80444),M=s(64921),Z=s(31945),j=s(79954),S=s(14694),v=s(15145),T=s(1800),y=s(35840);const w=(0,l.I)("trashSlash",{viewBox:"0 0 16 16",svg:(0,d.jsx)("path",{d:"M12.3359 10.4551L11.293 9.41797L11.5273 4.45508H6.33594L5.1582 3.27148H5.33984V2.54492C5.33984 2.0957 5.47461 1.74609 5.74414 1.49609C6.01758 1.24219 6.39648 1.11523 6.88086 1.11523H9.11328C9.59766 1.11523 9.97461 1.24219 10.2441 1.49609C10.5176 1.74609 10.6543 2.0957 10.6543 2.54492V3.42383H13.2617C13.4062 3.42383 13.5273 3.47266 13.625 3.57031C13.7266 3.66797 13.7773 3.78906 13.7773 3.93359C13.7773 4.07812 13.7285 4.20117 13.6309 4.30273C13.5332 4.4043 13.4102 4.45508 13.2617 4.45508H12.6172L12.3359 10.4551ZM6.42969 3.42383H9.57031V2.60352C9.57031 2.45117 9.52148 2.33008 9.42383 2.24023C9.32617 2.14648 9.19531 2.09961 9.03125 2.09961H6.96289C6.79883 2.09961 6.66797 2.14648 6.57031 2.24023C6.47656 2.33008 6.42969 2.45117 6.42969 2.60352V3.42383ZM5.31055 14.3398C4.85742 14.3398 4.49414 14.2129 4.2207 13.959C3.95117 13.7051 3.80664 13.3516 3.78711 12.8984L3.41211 4.88867L4.53125 6.00781L4.85352 12.7168C4.86133 12.8887 4.91797 13.0293 5.02344 13.1387C5.13281 13.248 5.26758 13.3027 5.42773 13.3027H10.5723C10.7285 13.3027 10.8574 13.252 10.959 13.1504C11.0645 13.0527 11.123 12.9277 11.1348 12.7754L11.1406 12.6172L12.0195 13.502L12.0137 13.6074C11.8965 13.8379 11.7246 14.0176 11.498 14.1465C11.2754 14.2754 11.0078 14.3398 10.6953 14.3398H5.31055ZM8.41602 6.5293L7.70703 5.82031V5.5625C7.78125 5.48438 7.87891 5.44531 8 5.44531C8.125 5.44531 8.22461 5.48242 8.29883 5.55664C8.37695 5.62695 8.41602 5.71875 8.41602 5.83203V6.5293ZM10.2383 8.35156L9.45312 7.57227L9.50586 5.83203C9.50977 5.71484 9.54883 5.62109 9.62305 5.55078C9.69727 5.48047 9.79297 5.44531 9.91016 5.44531C10.0352 5.44531 10.1328 5.48242 10.2031 5.55664C10.2773 5.62695 10.3145 5.71875 10.3145 5.83203L10.2383 8.35156ZM6.27734 12.3535C6.15625 12.3535 6.05859 12.3203 5.98438 12.2539C5.91016 12.1836 5.87109 12.0898 5.86719 11.9727L5.73828 7.21484L6.55859 8.04688L6.67578 11.9668C6.67969 12.084 6.64453 12.1777 6.57031 12.248C6.49609 12.3184 6.39844 12.3535 6.27734 12.3535ZM8 12.3535C7.87891 12.3535 7.7793 12.3203 7.70117 12.2539C7.62695 12.1836 7.58984 12.0898 7.58984 11.9727V9.07812L8.41602 9.89258V11.9727C8.41602 12.0859 8.37695 12.1777 8.29883 12.248C8.22461 12.3184 8.125 12.3535 8 12.3535ZM9.73438 12.3535C9.60547 12.3535 9.50391 12.3184 9.42969 12.248C9.35938 12.1777 9.32617 12.084 9.33008 11.9668L9.35938 10.8477L10.1152 11.6035L10.1035 12.043C10.0801 12.25 9.95703 12.3535 9.73438 12.3535ZM12.9863 13.4434L2.35742 2.81445C2.26758 2.72852 2.22266 2.61914 2.22266 2.48633C2.22266 2.35352 2.26758 2.24414 2.35742 2.1582C2.44727 2.06445 2.55664 2.01953 2.68555 2.02344C2.81836 2.02344 2.92969 2.06836 3.01953 2.1582L13.6426 12.7812C13.7324 12.8711 13.7773 12.9805 13.7773 13.1094C13.7773 13.2383 13.7324 13.3496 13.6426 13.4434C13.5527 13.5332 13.4414 13.5781 13.3086 13.5781C13.1797 13.5781 13.0723 13.5332 12.9863 13.4434Z"})}),_=(0,l.I)("trashSmall",{viewBox:"0 0 16 16",svg:(0,d.jsx)("path",{d:"M5.31055 14.3398C4.85742 14.3398 4.49414 14.2129 4.2207 13.959C3.95117 13.7051 3.80664 13.3516 3.78711 12.8984L3.38867 4.45508H2.74414C2.59961 4.45508 2.47656 4.4043 2.375 4.30273C2.27344 4.20117 2.22266 4.07812 2.22266 3.93359C2.22266 3.79297 2.27344 3.67383 2.375 3.57617C2.47656 3.47461 2.59961 3.42383 2.74414 3.42383H13.2617C13.4062 3.42383 13.5273 3.47266 13.625 3.57031C13.7266 3.66797 13.7773 3.78906 13.7773 3.93359C13.7773 4.07812 13.7266 4.20117 13.625 4.30273C13.5273 4.4043 13.4062 4.45508 13.2617 4.45508H12.6172L12.2188 12.8926C12.1992 13.3457 12.0527 13.6992 11.7793 13.9531C11.5059 14.2109 11.1445 14.3398 10.6953 14.3398H5.31055ZM5.42773 13.3027H10.5723C10.7363 13.3027 10.8711 13.248 10.9766 13.1387C11.082 13.0332 11.1387 12.8926 11.1465 12.7168L11.5273 4.45508H4.45508L4.85352 12.7168C4.86133 12.8887 4.91797 13.0293 5.02344 13.1387C5.12891 13.248 5.26367 13.3027 5.42773 13.3027ZM6.27734 12.3535C6.15625 12.3535 6.05859 12.3203 5.98438 12.2539C5.91016 12.1836 5.87109 12.0898 5.86719 11.9727L5.69141 5.83203C5.6875 5.71875 5.72266 5.62695 5.79688 5.55664C5.87109 5.48242 5.96875 5.44531 6.08984 5.44531C6.21094 5.44531 6.30859 5.48047 6.38281 5.55078C6.45703 5.62109 6.49414 5.71289 6.49414 5.82617L6.67578 11.9668C6.67578 12.084 6.63867 12.1777 6.56445 12.248C6.49414 12.3184 6.39844 12.3535 6.27734 12.3535ZM8 12.3535C7.87891 12.3535 7.7793 12.3184 7.70117 12.248C7.62695 12.1777 7.58984 12.0859 7.58984 11.9727V5.83203C7.58984 5.71875 7.62695 5.62695 7.70117 5.55664C7.7793 5.48242 7.87891 5.44531 8 5.44531C8.125 5.44531 8.22461 5.48242 8.29883 5.55664C8.37695 5.62695 8.41602 5.71875 8.41602 5.83203V11.9727C8.41602 12.0859 8.37695 12.1777 8.29883 12.248C8.22461 12.3184 8.125 12.3535 8 12.3535ZM9.72852 12.3535C9.60352 12.3535 9.50391 12.3184 9.42969 12.248C9.35938 12.1777 9.32617 12.084 9.33008 11.9668L9.50586 5.83203C9.50977 5.71484 9.54883 5.62109 9.62305 5.55078C9.69727 5.48047 9.79297 5.44531 9.91016 5.44531C10.0352 5.44531 10.1328 5.48242 10.2031 5.55664C10.2773 5.62695 10.3125 5.71875 10.3086 5.83203L10.1328 11.9727C10.1289 12.0898 10.0898 12.1836 10.0156 12.2539C9.94141 12.3203 9.8457 12.3535 9.72852 12.3535ZM5.33984 3.81055V2.54492C5.33984 2.0957 5.47461 1.74609 5.74414 1.49609C6.01758 1.24219 6.39648 1.11523 6.88086 1.11523H9.10742C9.5918 1.11523 9.9707 1.24219 10.2441 1.49609C10.5176 1.74609 10.6543 2.0957 10.6543 2.54492V3.81055H9.57031V2.59766C9.57031 2.44922 9.52148 2.33008 9.42383 2.24023C9.32617 2.14648 9.19531 2.09961 9.03125 2.09961H6.95703C6.79688 2.09961 6.66797 2.14648 6.57031 2.24023C6.47266 2.33008 6.42383 2.44922 6.42383 2.59766V3.81055H5.33984Z"})});var L=s(55863);const O=(0,l.I)("wifiExclamationMark",{viewBox:"0 0 16 16",svg:(0,d.jsx)("path",{d:"M7.99414 13.2441C7.81055 13.2441 7.64062 13.1992 7.48438 13.1094C7.33203 13.0195 7.21094 12.8984 7.12109 12.7461C7.03125 12.5977 6.98633 12.4316 6.98633 12.248C6.98633 12.0645 7.03125 11.8984 7.12109 11.75C7.21094 11.5977 7.33203 11.4785 7.48438 11.3926C7.64062 11.3027 7.81055 11.2578 7.99414 11.2578C8.18164 11.2578 8.35156 11.3027 8.50391 11.3926C8.66016 11.4785 8.78125 11.5977 8.86719 11.75C8.95703 11.8984 9.00195 12.0645 9.00195 12.248C9.00195 12.4316 8.95703 12.5977 8.86719 12.7461C8.78125 12.8984 8.66016 13.0195 8.50391 13.1094C8.35156 13.1992 8.18164 13.2441 7.99414 13.2441ZM8 10.2676C7.79688 10.2676 7.63672 10.209 7.51953 10.0918C7.40234 9.9707 7.33984 9.80469 7.33203 9.59375C7.32812 9.20703 7.32422 8.80859 7.32031 8.39844C7.31641 7.98438 7.31055 7.56641 7.30273 7.14453C7.29492 6.71875 7.28711 6.29492 7.2793 5.87305C7.27539 5.45117 7.26953 5.03906 7.26172 4.63672C7.25781 4.23047 7.25391 3.83789 7.25 3.45898C7.25 3.25195 7.32031 3.08008 7.46094 2.94336C7.60547 2.80273 7.7832 2.73242 7.99414 2.73242C8.20898 2.73242 8.38672 2.80273 8.52734 2.94336C8.66797 3.08008 8.73828 3.25195 8.73828 3.45898C8.73438 3.83789 8.73047 4.23047 8.72656 4.63672C8.72266 5.03906 8.71875 5.45117 8.71484 5.87305C8.71094 6.29492 8.70508 6.71875 8.69727 7.14453C8.69336 7.56641 8.6875 7.98438 8.67969 8.39844C8.67578 8.80859 8.67188 9.20703 8.66797 9.59375C8.66016 9.80469 8.59766 9.9707 8.48047 10.0918C8.36328 10.209 8.20312 10.2676 8 10.2676ZM6.37109 3.48828L6.40625 5.36328C5.66797 5.50781 4.96875 5.76172 4.30859 6.125C3.65234 6.48828 3.05469 6.95508 2.51562 7.52539C2.45312 7.5918 2.37891 7.62695 2.29297 7.63086C2.21094 7.63086 2.13672 7.59961 2.07031 7.53711L1.25 6.69922C1.19922 6.64062 1.17188 6.57617 1.16797 6.50586C1.16406 6.43555 1.18555 6.37305 1.23242 6.31836C1.61133 5.84961 2.06641 5.42578 2.59766 5.04688C3.13281 4.66406 3.7207 4.33984 4.36133 4.07422C5.00195 3.80859 5.67188 3.61328 6.37109 3.48828ZM9.61133 3.48828C10.3184 3.60938 10.9922 3.80469 11.6328 4.07422C12.2734 4.33984 12.8574 4.66406 13.3848 5.04688C13.916 5.42969 14.375 5.85352 14.7617 6.31836C14.8086 6.37305 14.8301 6.43555 14.8262 6.50586C14.8262 6.57617 14.7969 6.64062 14.7383 6.69922L13.918 7.51953C13.8555 7.58594 13.7832 7.62109 13.7012 7.625C13.6191 7.625 13.5488 7.5957 13.4902 7.53711C12.9395 6.96289 12.3359 6.49219 11.6797 6.125C11.0234 5.75781 10.3242 5.50391 9.58203 5.36328L9.61133 3.48828ZM9.57031 7.00391C10.1602 7.14453 10.7012 7.36523 11.1934 7.66602C11.6855 7.9668 12.0918 8.31055 12.4121 8.69727C12.459 8.75195 12.4805 8.81445 12.4766 8.88477C12.4727 8.95117 12.4434 9.01172 12.3887 9.06641L11.4746 9.96289C11.4043 10.0293 11.3301 10.0645 11.252 10.0684C11.1738 10.0684 11.1055 10.0352 11.0469 9.96875C10.8477 9.75781 10.6191 9.56641 10.3613 9.39453C10.1074 9.21875 9.83398 9.07422 9.54102 8.96094L9.57031 7.00391ZM6.42969 7.00391L6.45898 8.95508C6.17383 9.06445 5.9043 9.20508 5.65039 9.37695C5.40039 9.54492 5.17773 9.73438 4.98242 9.94531C4.91602 10.0195 4.83984 10.0605 4.75391 10.0684C4.67188 10.0723 4.5957 10.041 4.52539 9.97461L3.60547 9.06641C3.55078 9.01172 3.52148 8.95117 3.51758 8.88477C3.51367 8.81445 3.53516 8.75195 3.58203 8.69727C3.91016 8.30273 4.31836 7.95898 4.80664 7.66602C5.29883 7.36914 5.83984 7.14844 6.42969 7.00391Z"})});var B=s(21202),H=s(75754),N=s(12714),P=s(1357),V=s(39865),k=s(95477),I=s(23586),F=s(12457),E=s(43250),U=s(87279),R=s(18514),q=s(77907),D=s(75822),A=s(74948),K=s(88632),W=s(79797),G=s(72087),Y=s(20755),X=s(73063),$=s(68894),z=s(68785),J=s(78140),Q=s(32163),ee=s(43765),te=s(40721),se=s(11470),ne=s(43145),re=s(72495),oe=s(30506),ie=s(26388),ae=s(83182),le=s(46247),de=s(66957);const Ce=(0,c.defineMessages)({filterByPlaceholder:{id:"sidebarTrash.filterBy.placeholder",defaultMessage:"Search pages in trash..."}});class ce extends r.Z{constructor(){super(...arguments),this.storeTypes={requestStore:G.Z},this.CLASS_COMPONENT_CONVERSION_DO_NOT_TOUCH_renderTrashPages=(e,t)=>(0,d.jsx)(ye,{err:e,result:t,intl:this.props.intl,requestStore:this.stores.requestStore}),this.CLASS_COMPONENT_CONVERSION_DO_NOT_TOUCH_handleSwipeLeft=()=>je(this.environment,this.stores.requestStore),this.CLASS_COMPONENT_CONVERSION_DO_NOT_TOUCH_handleSwipeRight=()=>Se(this.environment,this.stores.requestStore),this.CLASS_COMPONENT_CONVERSION_DO_NOT_TOUCH_handleTabChange=e=>ve(e,this.environment,this.stores.requestStore),this.CLASS_COMPONENT_CONVERSION_DO_NOT_TOUCH_handleScrollOffsetChange=e=>Ze(e,this.stores.requestStore)}UNSAFE_willMount(e){super.UNSAFE_willMount(e),x.Z.setState({...x.Z.state,limit:x.Z.startLimit,excludePages:new Set})}willUnmount(){x.Z.setState({...x.Z.state,filter:""})}renderComponent(){const{mobileNative:e}=this.environment;return null!=e&&e.supportsNativeHomeOnPhone()?(0,d.jsx)(Le,{requestStore:this.stores.requestStore}):(0,d.jsx)(_e,{requestStore:this.stores.requestStore})}}ce.displayName="SidebarTrash";const ue=["all_pages","in_current_page","last_edited_by_me"];function he(){return(0,d.jsx)(re.Z,{topBorder:!0,disableDesktopPadding:!1,children:(0,d.jsx)(ae.Z,{title:(0,d.jsx)(c.FormattedMessage,{defaultMessage:"Learn about deleting and restoring pages",id:"sidebarTrash.learnMore.prompt"}),href:(0,R.UY)("guides.trash"),analyticsFrom:"trash"})})}function pe(){return(0,d.jsx)(le.Z,{href:(0,R.UY)("guides.trash"),analyticsFrom:"trash"})}function ge(e){return{width:14,height:14,flexGrow:0,flexShrink:0,color:e.lightIconColor}}const me=(0,c.injectIntl)(ce);function fe(e){x.Z.setState({...x.Z.state,filter:e.target.value,limit:x.Z.startLimit})}function xe(e){const{mobileNative:t}=e,s=()=>{f.Z.setState({...f.Z.state,open:!1})};null!=t&&t.supportsNativeHomeOnPhone()?P.d(e,s):s()}function be(e){let{requestStore:t}=e;window.__c={n:"SearchInputComponent"};const s=(0,c.useIntl)(),n=(0,a.Fg)(),r=(0,o.O7)(),l=(0,i.VK)((()=>t.state.loading),[t]),C=(0,i.VK)((()=>x.Z.state.filter),[]),{device:u}=r;return(0,d.jsx)($.ZP,{inputLeft:u.isMobile?(0,d.jsx)(F.Z,{show:l,showDelay:500,showHold:200,render:e=>e?(0,d.jsx)(z.Z,{style:ge(n)}):(0,y.R)(ge(n))}):void 0,style:{...u.isAndroid&&{borderBottom:"none"}},showClearButton:!0,placeholder:s.formatMessage(Ce.filterByPlaceholder),focus:!u.isMobile||void 0,value:C,onChange:fe})}function Me(e,t,s){x.Z.setState({...x.Z.state,currentTab:e,limit:x.Z.startLimit}),s.setState({...s.state,result:null}),function(e,t){p.j(e,"toggle_trash_tab",t)}(t,{tab:e})}function Ze(e,t){const{ready:s,loading:n,result:r}=t.state,o=r;e<=x.Z.loadMoreOffset&&o&&s&&!n&&!o.endOfResultsReached&&x.Z.setState({...x.Z.state,limit:x.Z.state.limit+x.Z.limitIncrement})}function je(e,t){const s=ue.indexOf(x.Z.state.currentTab),n=ue[s+1];void 0!==n&&Me(n,e,t)}function Se(e,t){const s=ue.indexOf(x.Z.state.currentTab),n=ue[s-1];void 0!==n&&Me(n,e,t)}function ve(e,t,s){Me(ue[e],t,s)}function Te(e){let{requestStore:t}=e;window.__c={n:"HeaderWithTabsComponent"};const s=(0,o.O7)(),r=(0,n.useCallback)((e=>ve(e,s,t)),[s,t]),{device:a}=s,l=(0,i.VK)((()=>x.Z.state.currentTab),[]),C=ue.indexOf(l);return(0,d.jsxs)(n.Fragment,{children:[(0,d.jsx)(de.Z,{tabs:[(0,d.jsx)(c.FormattedMessage,{defaultMessage:"All pages",id:"sidebarTrash.allPages.tabHeader"},"allPages"),(0,d.jsx)(c.FormattedMessage,{defaultMessage:"In current page",id:"sidebarTrash.inCurrentPage.tabHeader"},"currentPage"),(0,d.jsx)(c.FormattedMessage,{defaultMessage:"Last edited by me",id:"sidebarTrash.lastEditedByMe.tabHeader"},"lastEditedByMe")],selectedIndex:C,onChange:r}),(0,d.jsx)("div",{style:{margin:a.isMobile?0:"10px 0"},children:(0,d.jsx)(be,{requestStore:t})})]})}function ye(e){let{err:t,result:s,intl:r,requestStore:l}=e;window.__c={n:"TrashPagesComponent"};const C=(0,a.Fg)(),u=(0,o.O7)(),h=(0,n.useCallback)((e=>Ze(e,l)),[l]),{device:p}=u,{mainEditorCurrentBlockStore:g}=(0,i.VK)((()=>b.default.state),[]),m=(0,i.VK)((()=>{const e=s?s.results:[];if(!g)return[];return e.map((e=>W.G.createChildStore(g,{table:B.iU,id:e}))).filter((e=>e.isDefined()&&!x.Z.state.excludePages.has(e.id)))}),[g,s]),{filter:M}=(0,i.VK)((()=>x.Z.state),[]),{loading:Z}=(0,i.VK)((()=>l.state),[l]);if(!g)return null;const j=m.map((e=>{const t={key:e.id,action:t=>{let{event:s}=t;if("metaKey"in s&&s.metaKey){const t=(0,T.Z)({baseUrl:k.default.domainBaseUrl,pageId:e.id,pageVisitSource:v.tY.SidebarTrash});N.D({environment:u,url:t})}else H._({environment:u,store:e,pageVisitSource:v.tY.SidebarTrash}),f.Z.setState({...f.Z.state,open:!1});p.isMobile&&A.close()},render:t=>(0,d.jsx)(se.Z,{...t,dontShrinkRight:!0,store:e,right:(0,d.jsxs)("div",{style:{display:"flex",gap:4},children:[(0,d.jsx)(ie.ZP,{placement:ie.ug.Bottom,renderTooltip:()=>(0,d.jsx)(c.FormattedMessage,{defaultMessage:"Restore",id:"sidebarTrash.restorePageButton.tooltip"}),render:t=>(0,d.jsx)(X.Z,{icon:L.s,iconStyle:{width:16,height:16,color:C.mediumIconColor},...t,onClick:()=>function(e,t){const{currentSpaceStore:s}=b.default.state;s&&V.DV({environment:t,block:e,spaceId:e.pointer.spaceId||s.id})}(e,u),ariaLabel:r.formatMessage({defaultMessage:"Restore page",id:"sidebarTrash.restorePageButton.ariaLabel"})})}),(0,d.jsx)(ie.ZP,{placement:ie.ug.Bottom,renderTooltip:()=>(0,d.jsx)(c.FormattedMessage,{defaultMessage:"Permanently delete page",id:"sidebarTrash.permanentlyDeletePageButton.tooltip"}),render:t=>(0,d.jsx)(X.Z,{icon:_,iconStyle:{width:16,height:16,color:C.mediumIconColor},...t,onClick:()=>function(e,t){V.Rn({environment:t,blocks:[e]})}(e,u),ariaLabel:r.formatMessage({defaultMessage:"Permanently delete page",id:"sidebarTrash.permanentlyDeletePageButton.ariaLabel"})})})]})})};return t}));return 0===j.length&&M?(0,d.jsx)(re.Z,{style:{height:"100%",display:"flex",justifyContent:"center",alignItems:"center"},children:p.isMobile?(0,d.jsx)(ee.Z,{title:(0,d.jsx)(c.FormattedMessage,{defaultMessage:"No matches",id:"sidebarTrash.mobileFilterBy.noMatchesTitle"})}):(0,d.jsx)(Y.Z,{icon:w,title:(0,d.jsx)(c.FormattedMessage,{defaultMessage:"No matches",id:"sidebarTrash.filterBy.noMatchesTitle"}),description:(0,d.jsx)(c.FormattedMessage,{defaultMessage:"Try checking for typos",id:"sidebarTrash.filterBy.noMatchesDescription"})})}):0===j.length?(0,d.jsx)(re.Z,{style:{height:"100%",display:"flex",justifyContent:"center",alignItems:"center"},children:p.isMobile?(0,d.jsx)(ee.Z,{title:(0,d.jsx)(c.FormattedMessage,{defaultMessage:"No results",id:"sidebarTrash.mobileFilterBy.noResultsTitle"})}):(0,d.jsx)(Y.Z,{icon:_,title:(0,d.jsx)(c.FormattedMessage,{defaultMessage:"No results",id:"sidebarTrash.filterBy.noResultsTitle"}),description:(0,d.jsx)(c.FormattedMessage,{defaultMessage:"Trashed pages appear here",id:"sidebarTrash.filterBy.noResultsDescription"})})}):(0,d.jsxs)(n.Fragment,{children:[(0,d.jsx)(Q.Z,{type:Q.i.Vertical,initialFocus:void 0,sections:[{key:0,items:j,render:e=>(0,d.jsx)(re.Z,{...e})}]}),(0,d.jsx)(F.Z,{show:Z,showDelay:500,showHold:200,render:e=>{if(e)return(0,d.jsx)("div",{style:{height:44,display:"flex",flex:1,alignItems:"center",justifyContent:"center"},children:(0,d.jsx)(z.Z,{})})}}),(0,d.jsx)(ne.Z,{onChange:h})]})}function we(e){let{requestStore:t}=e;window.__c={n:"PagesComponent"};const s=(0,o.O7)(),r=(0,c.useIntl)(),a=(0,n.useCallback)(((e,s)=>(0,d.jsx)(ye,{err:e,result:s,intl:r,requestStore:t})),[r,t]),l=(0,i.VK)((()=>!K.Z.state.online),[]),{filter:C,limit:u,currentTab:h}=(0,i.VK)((()=>x.Z.state),[]);if(l)return(0,d.jsx)(re.Z,{style:{height:"100%",display:"flex",justifyContent:"center",alignItems:"center"},children:(0,d.jsx)(Y.Z,{icon:O,title:(0,d.jsx)(c.FormattedMessage,{defaultMessage:"You're offline",id:"sidebarTrash.goOnline.title"}),description:(0,d.jsx)(c.FormattedMessage,{defaultMessage:"Please go online to view the Trash",id:"sidebarTrash.goOnline.description"})})});{const e=`${C}:${u}${h}`;return(0,d.jsx)(I.Z,{requestStore:t,request:e,performRequest:e=>async function(e,t){const{currentSpaceStore:s,mainEditorCurrentBlockStore:n,currentUserStore:r}=b.default.state;if(!s||!n||!r)return;const{limit:o,filter:i,currentTab:a}=x.Z.state;let l,d;if("in_current_page"===a)if(n.isCollectionView()){if(!n.isDefined())return;const e=n.getCollectionPointer();if(!e)return;d=e.id}else d=n.id;else"last_edited_by_me"===a&&(l=r.id);const C=await q.deps.searchActions.loader();return await C.searchTrashPages({environment:t,query:i,limit:o,ancestorId:d,spaceId:s.id,editedById:l})}(0,s),render:a,debounce:D.vp})}}function _e(e){let{requestStore:t}=e;window.__c={n:"LayoutComponent"};const s=(0,o.O7)(),r=(0,n.useCallback)((()=>Se(s,t)),[s,t]),i=(0,n.useCallback)((()=>je(s,t)),[s,t]),{device:a}=s;let l;return l=a.isMobile?{menuType:U.og.Modal,title:(0,d.jsx)(c.FormattedMessage,{defaultMessage:"Trash",id:"sidebarTrash.menu.header"}),left:(0,d.jsx)(pe,{}),right:(0,d.jsx)(te.DoneMenuText,{}),onClickRight:()=>xe(s),onCancel:()=>xe(s),header:(0,d.jsx)(Te,{requestStore:t})}:{menuType:U.og.Popup,height:"50vh",width:414,header:(0,d.jsx)(Te,{requestStore:t}),footer:(0,d.jsx)(he,{})},(0,d.jsx)(oe.Z,{onSwipeLeft:i,onSwipeRight:r,render:e=>(0,d.jsx)(J.Z,{...l,...e,className:E.TYv,children:(0,d.jsx)(we,{requestStore:t})})})}function Le(e){let{requestStore:t}=e;window.__c={n:"NativeHomeEnabledLayoutComponent"};const s=(0,o.O7)(),n={menuType:U.og.Modal,title:(0,d.jsx)(c.FormattedMessage,{defaultMessage:"Trash",id:"sidebarTrash.menu.header"}),left:(0,d.jsx)(pe,{}),right:(0,d.jsx)(te.DoneMenuText,{}),onClickRight:()=>xe(s),onCancel:()=>xe(s),header:(0,d.jsx)(be,{requestStore:t})};return(0,d.jsx)(J.Z,{...n,className:E.TYv,children:(0,d.jsx)(we,{requestStore:t})})}class Oe extends r.Z{constructor(){super(...arguments),this.renderOrigin=e=>{const{onClick:t,...s}=(0,g.Z)(e,{onClick:this.props.onClick,onMouseEnter:this.props.onMouseEnter,onMouseLeave:this.props.onMouseLeave});return(0,d.jsx)(j.Z,{store:this.clonedStore,canDropOnto:!0,onSelectableDrop:e=>function(e,t){const{droppedStores:s,duplicate:n}=e;n||h.createAndCommit({userAction:"SidebarTrashButton.handleDrop",environment:t,perform:e=>{u.Cl({environment:t,blocks:s,transaction:e})}})}(e,this.environment),analyticsName:"sidebar_trash",shouldShowDropZone:!0,children:(0,d.jsx)(M.Z,{...s,style:this.props.buttonStyle,onClick:t||(e=>Pe(e,this.environment)),mobileFeedback:this.props.isMobile,children:(0,d.jsx)(S.Z,{left:(0,d.jsx)(Ne,{}),style:{...f.Z.state.open&&{background:this.theme.buttonHoveredBackground}},disableMobileBorder:!0,children:(0,d.jsx)(c.FormattedMessage,{defaultMessage:"Trash",id:"sidebarTrashButton.text"})})})})}}UNSAFE_willMount(e){super.UNSAFE_willMount(e),this.clonedStore=e.store.clone()}renderComponent(){const{device:e,mobileNative:t}=this.environment,s=(null==t?void 0:t.supportsNativeHomeOnPhone())||!1;return(0,d.jsx)(Z.ZP,{popupType:e.isMobile?Z.Z4.SlideUp:Z.Z4.Popup,hidesMobileNativeBottomBar:s,preventSlideUpTransition:s,buttonPopupStore:f.Z,alignmentToOrigin:Z.vR.Start,placementToOrigin:Z.pO.Right,originGap:0,onClick:e=>Pe(e,this.environment),isFullWidthOnMobile:!0,render:()=>(0,d.jsx)(He,{}),preventScaleTransition:!0,renderOrigin:this.renderOrigin})}}Oe.displayName="SidebarTrashButton";const Be=Oe;function He(){window.__c={n:"SidebarTrashComponent"};const{currentSpaceStore:e}=(0,i.VK)((()=>b.default.state),[]);return e?(0,d.jsx)(me,{spaceStore:e}):null}function Ne(){window.__c={n:"IconComponent"};const e=(0,a.Fg)(),t=(0,o.O7)(),{device:s}=t,n=e.mediumIconColor;return s.isMobile?C({fill:n,height:16}):C({fill:n,width:14})}function Pe(e,t){x.Z.setState({...x.Z.state,currentTab:"all_pages"}),function(e){p.j(e,"open_trash",(0,m.UF)({environment:e}))}(t)}},80133:(e,t,s)=>{s.d(t,{Z:()=>F});s(67294);var n=s(83355),r=s(86628),o=s(24405),i=s(45238),a=s(85893);const l=(0,i.I)("mobileBottomBarUpdates",{viewBox:"0 0 26 26",svg:(0,a.jsx)("path",{d:"M4.48145 20.4092H15.2988C15.2129 21.8594 14.2891 22.7832 12.9893 22.7832C11.7002 22.7832 10.7656 21.8594 10.6904 20.4092H9.01465C9.10059 22.4717 10.7227 24.2871 12.9893 24.2871C15.2666 24.2871 16.8887 22.4824 16.9746 20.4092H21.5078C22.5176 20.4092 23.1299 19.8828 23.1299 19.1094C23.1299 18.0352 22.0342 17.0684 21.1104 16.1123C20.4014 15.3711 20.208 13.8457 20.1221 12.6104C20.0469 8.37793 18.9512 5.63867 16.0938 4.60742C15.7285 3.21094 14.5791 2.09375 12.9893 2.09375C11.4102 2.09375 10.25 3.21094 9.89551 4.60742C7.03809 5.63867 5.94238 8.37793 5.86719 12.6104C5.78125 13.8457 5.58789 15.3711 4.87891 16.1123C3.94434 17.0684 2.85938 18.0352 2.85938 19.1094C2.85938 19.8828 3.46094 20.4092 4.48145 20.4092ZM4.94336 18.7871V18.6582C5.13672 18.3359 5.78125 17.7129 6.33984 17.0791C7.11328 16.2197 7.47852 14.8447 7.5752 12.7393C7.66113 8.05566 9.05762 6.55176 10.8945 6.05762C11.1631 5.99316 11.3135 5.85352 11.3242 5.58496C11.3564 4.45703 12.001 3.67285 12.9893 3.67285C13.9883 3.67285 14.6221 4.45703 14.665 5.58496C14.6758 5.85352 14.8154 5.99316 15.084 6.05762C16.9316 6.55176 18.3281 8.05566 18.4141 12.7393C18.5107 14.8447 18.876 16.2197 19.6387 17.0791C20.208 17.7129 20.8418 18.3359 21.0352 18.6582V18.7871H4.94336Z"})});var d=s(59078);const C=(0,i.I)("sidebarUpdates",{viewBox:"0 0 20 20",svg:(0,a.jsx)("path",{d:"M6.87695 10.8601C6.72038 10.8601 6.58708 10.8072 6.47705 10.7014C6.37126 10.5956 6.31836 10.4644 6.31836 10.3079C6.31836 10.1555 6.37126 10.0264 6.47705 9.92065C6.58708 9.81486 6.72038 9.76196 6.87695 9.76196H9.44775V6.24536C9.44775 6.08879 9.50065 5.9576 9.60645 5.85181C9.71224 5.74601 9.84131 5.69312 9.99365 5.69312C10.1502 5.69312 10.2814 5.74601 10.3872 5.85181C10.493 5.9576 10.5459 6.08879 10.5459 6.24536V10.3079C10.5459 10.4644 10.493 10.5956 10.3872 10.7014C10.2814 10.8072 10.1502 10.8601 9.99365 10.8601H6.87695ZM10 16.6174C9.0944 16.6174 8.2417 16.4439 7.44189 16.0969C6.64209 15.7542 5.9375 15.2781 5.32812 14.6687C4.71875 14.0593 4.24056 13.3569 3.89355 12.5613C3.55078 11.7615 3.37939 10.9067 3.37939 9.99683C3.37939 9.09123 3.55078 8.24064 3.89355 7.44507C4.24056 6.64526 4.71663 5.94067 5.32178 5.3313C5.93115 4.72192 6.63574 4.24585 7.43555 3.90308C8.23535 3.55607 9.08805 3.38257 9.99365 3.38257C10.8993 3.38257 11.752 3.55607 12.5518 3.90308C13.3558 4.24585 14.0604 4.72192 14.6655 5.3313C15.2749 5.94067 15.7531 6.64526 16.1001 7.44507C16.4471 8.24064 16.6206 9.09123 16.6206 9.99683C16.6206 10.9067 16.4471 11.7615 16.1001 12.5613C15.7531 13.3569 15.2749 14.0593 14.6655 14.6687C14.0604 15.2781 13.3579 15.7542 12.5581 16.0969C11.7583 16.4439 10.9056 16.6174 10 16.6174ZM10 15.1638C10.7152 15.1638 11.3838 15.0305 12.0059 14.7639C12.6322 14.4973 13.1823 14.1292 13.6562 13.6594C14.1302 13.1855 14.5005 12.6375 14.7671 12.0154C15.0337 11.3891 15.167 10.7162 15.167 9.99683C15.167 9.28166 15.0316 8.61304 14.7607 7.99097C14.4941 7.36466 14.1239 6.81453 13.6499 6.34058C13.1802 5.86662 12.6322 5.49634 12.0059 5.22974C11.3838 4.96313 10.7131 4.82983 9.99365 4.82983C9.27848 4.82983 8.60775 4.96313 7.98145 5.22974C7.35938 5.49634 6.81136 5.86662 6.3374 6.34058C5.86768 6.81453 5.49951 7.36466 5.23291 7.99097C4.97054 8.61304 4.83936 9.28166 4.83936 9.99683C4.83936 10.7162 4.97054 11.3891 5.23291 12.0154C5.49951 12.6375 5.86979 13.1855 6.34375 13.6594C6.81771 14.1292 7.36572 14.4973 7.98779 14.7639C8.6141 15.0305 9.28483 15.1638 10 15.1638Z"})});var c=s(82990),u=s(9291),h=s(19719),p=s(17659),g=s(8055),m=s(98742),f=s(50659),x=s(18514),b=s(51811),M=s(77907),Z=s(48451),j=s(50770),S=s(4023),v=s(5162),T=s(62820),y=s(4761),w=s(64921),_=s(31945),L=s(58261),O=s(26388),B=s(39849),H=s(92955),N=s(14694);const P={display:"flex",alignItems:"center",justifyContent:"center",width:62,flex:"none"},V={display:"flex",alignItems:"center",justifyContent:"center",flex:1},k={display:"flex",alignItems:"center",justifyContent:"center",flexGrow:0,flexShrink:0,height:"100%",minWidth:34,position:"relative"};class I extends n.Z{willUnmount(){U(this.environment)}renderComponent(){const{device:e,mobileNative:t}=this.environment;if(this.props.format===b.EX.RenderAsPage)return(0,a.jsx)("div",{style:{background:this.theme.popoverBackground},children:(0,j.H7)()?(0,a.jsx)(Z.LV,{format:this.props.format,onClose:()=>R(this.environment)}):(0,a.jsx)(M.LazyUpdatesPopup,{format:this.props.format,onClose:()=>R(this.environment)})});const s=(0,a.jsx)(u.FormattedMessage,{defaultMessage:"Updates for all pages in this workspace",id:"updatesButton.tooltip"});return(0,a.jsx)(O.ZP,{renderTooltip:()=>(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{children:s}),(0,a.jsx)(L.Z,{style:{color:this.theme.mediumInvertedTextColor},name:"toggleAllUpdates"})]}),originGap:6,placement:S.u.Right,render:s=>(0,a.jsx)(_.ZP,{popupType:e.isMobile?_.Z4.SlideUp:_.Z4.Popup,alignmentToOrigin:S.v.Start,placementToOrigin:S.u.Right,onClick:()=>{return e=this.environment,y.ZP.endSession(),void p.G7({environment:e,newTab:"mentions",shouldTrack:!0});var e},originGap:0,style:{...!e.isMobile&&{width:500,overflow:"hidden"}},isWideTabletWidth:!0,render:()=>(0,j.H7)()?(0,a.jsx)(Z.LV,{format:this.props.format,onClose:()=>R(this.environment)}):(0,a.jsx)(M.LazyUpdatesPopup,{format:this.props.format,onClose:()=>R(this.environment)}),onClose:()=>{U(this.environment)},isFullWidthOnMobile:!0,preventScaleTransition:!0,preventSlideUpTransition:(null==t?void 0:t.supportsNativeHomeOnPhone())||!1,buttonPopupStore:T.Z,renderOrigin:e=>(0,a.jsx)(E,{format:this.props.format,tooltipEvents:s,buttonPopupEvents:e})})})}}I.displayName="UpdatesButton";const F=I;function E(e){let{tooltipEvents:t,buttonPopupEvents:s,format:n}=e;window.__c={n:"ButtonComponent"};const i=(0,o.Fg)(),h=(0,r.VK)((()=>T.Z.state.open),[]),g=(0,r.VK)((()=>p.aY()),[]),x=(0,r.VK)((()=>(0,j.H7)()),[]),M=(0,r.VK)((()=>function(e){return e===b.EX.Sidebar&&T.Z.state.open}(n)),[n]),Z=B.N.Red;if(n===b.EX.MobileBottomBarPhone)return(0,a.jsx)(w.Z,{style:V,mobileFeedback:!0,...s,children:(0,a.jsxs)("div",{style:{position:"relative"},children:[x?(0,d.W)({height:26,width:26,fill:i.regularTextColor}):l({width:26,fill:i.regularTextColor}),(0,a.jsx)(H.Z,{type:"currentSpace",color:Z,style:{position:"absolute",top:-3,right:g<99?-5:-8}})]})});if(n===b.EX.MobileBottomBarTablet)return(0,a.jsx)(w.Z,{style:P,mobileFeedback:!0,...s,children:(0,a.jsxs)("div",{style:{position:"relative"},children:[l({width:26,fill:i.regularTextColor}),(0,a.jsx)(H.Z,{type:"currentSpace",color:Z,style:{position:"absolute",top:-3,right:g<99?-5:-8}})]})});if(n===b.EX.TopbarMobile)return(0,a.jsxs)(w.Z,{style:{...k,marginLeft:2,marginRight:2},mobileFeedback:!0,...s,children:[x?(0,d.W)({height:26,width:26}):l({width:26}),(0,a.jsx)(H.Z,{type:"currentSpace",color:Z,style:{position:"absolute",top:8,right:0}})]});if(n===b.EX.SidebarMobile)return(0,a.jsxs)(w.Z,{style:k,mobileFeedback:!0,...s,children:[x?(0,d.W)({height:26,width:26}):l({width:26}),(0,a.jsx)(H.Z,{type:"currentSpace",color:Z,style:{position:"absolute",top:8,right:0}})]});if(n===b.EX.Sidebar){const e=(0,a.jsx)(u.FormattedMessage,{defaultMessage:"Updates",id:"updatesButton.allUpdates.sidebarButton"}),n=x?(0,d.W)({fill:M?i.regularIconColor:i.mediumIconColor,width:20}):C({fill:M?i.regularIconColor:i.mediumIconColor,width:20});return(0,a.jsx)(w.Z,{style:{...M&&{fontWeight:c.Z.fontWeight.medium,color:i.regularTextColor},...(0,f.G$)({isMobile:!1})},...(0,m.Z)(t,s),children:(0,a.jsx)(N.Z,{left:(0,a.jsx)("div",{style:{color:M?i.regularTextColor:"inherit"},children:n}),right:(0,a.jsx)(H.Z,{type:"currentSpace",color:Z,style:{marginBottom:2,marginLeft:6}}),style:{background:h?i.buttonHoveredBackground:"none"},children:e})})}return null}function U(e){h.nI(e),p.G7({environment:e,newTab:"mentions",shouldTrack:!1})}function R(e){(0,v.Y)("supportsNativeInbox")&&x.__(e)&&x.NW(e)?g.op(e):(U(e),T.Z.setState({...T.Z.state,open:!1}))}},51811:(e,t,s)=>{s.d(t,{EX:()=>n,HB:()=>l,IS:()=>d,Tj:()=>a,yW:()=>i});let n=function(e){return e[e.Sidebar=0]="Sidebar",e[e.SidebarMobile=1]="SidebarMobile",e[e.MobileBottomBarPhone=2]="MobileBottomBarPhone",e[e.MobileBottomBarTablet=3]="MobileBottomBarTablet",e[e.TopbarMobile=4]="TopbarMobile",e[e.RenderAsPage=5]="RenderAsPage",e}({});const r=new Map,o=new Map;function i(e,t){r.set(C(e),t)}function a(e){return r.get(C(e))}function l(e,t){o.set(c(e),t)}function d(e){return o.get(c(e))??[]}function C(e){return Object.keys(e).sort().map((t=>{const s=e[t];return JSON.stringify(s)})).join("-")}function c(e){return Object.keys(e).sort().map((t=>{const s=e[t];return JSON.stringify(s)})).join("-")}},59078:(e,t,s)=>{s.d(t,{W:()=>o});s(67294);var n=s(45238),r=s(85893);const o=(0,n.I)("sidebarInbox",{viewBox:"0 0 20 20",svg:(0,r.jsx)("path",{d:"M4.61084 16.0537C3.90837 16.0537 3.37305 15.8717 3.00488 15.5078C2.64095 15.1481 2.45898 14.6191 2.45898 13.9209V10.1504C2.45898 9.89225 2.47168 9.67432 2.49707 9.49658C2.52669 9.31462 2.57536 9.15169 2.64307 9.00781C2.71077 8.86393 2.80387 8.71794 2.92236 8.56982L4.94092 6.09424C5.20752 5.76416 5.44238 5.50602 5.64551 5.31982C5.85286 5.12939 6.07715 4.99609 6.31836 4.91992C6.5638 4.83952 6.88118 4.79932 7.27051 4.79932H12.7358C13.1252 4.79932 13.4404 4.83952 13.6816 4.91992C13.9271 4.99609 14.1514 5.12939 14.3545 5.31982C14.5576 5.50602 14.7946 5.76416 15.0654 6.09424L17.0776 8.56982C17.2004 8.71794 17.2956 8.86393 17.3633 9.00781C17.431 9.15169 17.4775 9.31462 17.5029 9.49658C17.5283 9.67432 17.541 9.89225 17.541 10.1504V13.9209C17.541 14.6191 17.359 15.1481 16.9951 15.5078C16.6312 15.8717 16.098 16.0537 15.3955 16.0537H4.61084ZM4.69971 14.6445H15.3066C15.5817 14.6445 15.7912 14.5747 15.9351 14.4351C16.0832 14.2912 16.1572 14.0711 16.1572 13.7749V10.7852H12.4946C12.4142 11.1533 12.2576 11.4813 12.0249 11.769C11.7964 12.0568 11.5086 12.2853 11.1616 12.4546C10.8146 12.6196 10.4274 12.7021 10 12.7021C9.57682 12.7021 9.19173 12.6196 8.84473 12.4546C8.49772 12.2896 8.20785 12.0632 7.9751 11.7754C7.74235 11.4834 7.58789 11.1533 7.51172 10.7852H3.84277V13.7749C3.84277 14.0711 3.91471 14.2912 4.05859 14.4351C4.20671 14.5747 4.42041 14.6445 4.69971 14.6445ZM10 11.4072C10.2751 11.4072 10.512 11.3395 10.7109 11.2041C10.9098 11.0687 11.0643 10.8973 11.1743 10.6899C11.2843 10.4784 11.3394 10.2646 11.3394 10.0488V10.0298C11.3394 9.90706 11.3774 9.79915 11.4536 9.70605C11.5298 9.60872 11.6525 9.56006 11.8218 9.56006H15.8335C15.9351 9.56006 15.9964 9.52409 16.0176 9.45215C16.043 9.38021 16.0303 9.3125 15.9795 9.24902L13.7197 6.43701C13.5885 6.26774 13.4447 6.14502 13.2881 6.06885C13.1315 5.98844 12.9495 5.94824 12.7422 5.94824H7.25781C7.05469 5.94824 6.87484 5.98844 6.71826 6.06885C6.56169 6.14502 6.41569 6.26774 6.28027 6.43701L4.0332 9.24902C3.97819 9.3125 3.96126 9.38021 3.98242 9.45215C4.00781 9.52409 4.07129 9.56006 4.17285 9.56006H8.18457C8.35384 9.56006 8.47656 9.60872 8.55273 9.70605C8.62891 9.79915 8.66699 9.90706 8.66699 10.0298V10.0488C8.66699 10.2646 8.71989 10.4784 8.82568 10.6899C8.93571 10.8973 9.09017 11.0687 9.28906 11.2041C9.48796 11.3395 9.72493 11.4072 10 11.4072Z"})})}}]);