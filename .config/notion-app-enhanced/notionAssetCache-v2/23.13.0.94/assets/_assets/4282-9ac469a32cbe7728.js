"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[4282],{68973:(e,t,s)=>{s.d(t,{TA:()=>M,Zg:()=>b,eT:()=>S,mk:()=>v});s(21703),s(57658),s(67294);var i=s(29477),r=s(45953),a=s(21202),o=s(9291),n=s(54642),d=s(47307),l=s(4708),c=s(57345),u=s(28578),p=s(79797),h=s(54801),m=s(67181),C=s(85893);const f=50;function b(e){m.Z.resetSitesForSpace(e.id)}async function v(e,t){const{spaceStore:s,currentUserId:o,limit:d}=t;if(!s.id)return;const c=(0,l.Hk)(),[u]=await Promise.all([n.getPublishedPagesForUser(e,{spaceId:s.id,limit:d||f,fetchPublishedMetadata:c}),(0,i.Vs)(1500)]);if("failed"===u.type)throw new Error("Failed to fetch published pages.");if(u.data.recordMap){const e=[],t=r.PF.create(u.data.recordMap),i=u.data.publishedEdits;for(const{model:r}of t)if(r&&r.table===a.iU){const t=p.G.createChildStore(s,{table:a.iU,id:r.id});let o;if(c){const e=i[t.id],s=e&&e.authors?e.authors[0]:void 0;o={publishedTime:e.timestamp,publishedOrCreatedBy:s}}else o={publishedTime:g(t),publishedOrCreatedBy:t.getCreatedByPointer()};e.push({store:t,publishedMetadata:o})}let n=e;return o&&(n=h.S(e,o)),m.Z.initializeSiteResultsForSpace(s.id,n),n}}function g(e){const t=e.getPermissionItems().find((e=>"public_permission"===e.type));return"public_permission"===(null==t?void 0:t.type)?t.added_timestamp:void 0}function M(e){c.lG(e),u.ZP.setState({...u.ZP.state,display:u.wV.Publish,tab:u.XF.Publish})}async function S(e){return new Promise(((t,s)=>{d.showDialog({message:(0,C.jsx)("div",{style:{textAlign:"center"},children:(0,C.jsx)(o.FormattedMessage,{id:"sites.confirmUnpublish.title",defaultMessage:"Unpublish this site?"})}),description:(0,C.jsx)("div",{style:{textAlign:"center"},children:(0,C.jsx)(o.FormattedMessage,{id:"sites.confirmUnpublish.caption",defaultMessage:"{pageTitle} will no longer be live on the web.",values:{pageTitle:e}})}),keepFocus:!0,items:[{label:(0,C.jsx)(o.FormattedMessage,{id:"sites.confirmUnpublish.confirm",defaultMessage:"Unpublish"}),color:"red",onAccept:()=>t(!0)}],showCancel:!0})}))}},54801:(e,t,s)=>{s.d(t,{N:()=>o,S:()=>a});var i=s(72141),r=s(46654);function a(e,t){return e.sort(((e,s)=>{const i=e.store.canAdmin();if(i===s.store.canAdmin()){if(t){var r,a;if((null===(r=e.publishedMetadata.publishedOrCreatedBy)||void 0===r?void 0:r.id)===t)return-1;if((null===(a=s.publishedMetadata.publishedOrCreatedBy)||void 0===a?void 0:a.id)===t)return 1}return 0}return i?-1:1}))}function o(e){const{environment:t,store:s}=e;if(!s.pathIsAccessibleAndAlive())return!1;return!!r.YO(s).find((e=>(0,i.$D)(e.permissionItem)&&"none"!==e.permissionItem.role))&&!r.IJ(t,s)}},67181:(e,t,s)=>{s.d(t,{Z:()=>d});var i=s(49085),r=s(72126),a=s(70203),o=s(79797);class n extends i.default{getInitialState(){return{sites:{},sortAscending:!0,sortColumn:void 0}}initializeSiteResultsForSpace(e,t){this.state.sites[e]=t,this.emit()}getSortedSitesForSpace(e,t){const{sortAscending:s,sortColumn:i}=this.state,n=this.state.sites[e];if(n)switch(i){case"page":return r.Xo(n,(e=>a.QaF(e.store.getTitleValue()).toLowerCase()),s?"asc":"desc");case"published-or-created-by":return r.Xo(n,(e=>{const s=e.publishedMetadata.publishedOrCreatedBy,i=s?o.t1.createChildStore(e.store,s):void 0;return null==i?void 0:i.getDisplayName(t).toLowerCase()}),s?"asc":"desc");case"published-date":return r.Xo(n,(e=>e.publishedMetadata.publishedTime),s?"asc":"desc");default:return n}}removeSiteFromSpace(e,t){const s=this.state.sites[e];s&&(this.state.sites[e]=s.filter((e=>e.store.id!==t)),this.emit())}resetSitesForSpace(e){this.state.sites[e]=void 0}}const d=new n},36060:(e,t,s)=>{s.d(t,{lA:()=>d});s(40902),s(92996),s(41432),s(99036),s(80951);var i=s(59753),r=(s(87479),s(97880));s(42613),s(4615),s(71644),s(6287),s(15047),s(70475),s(68955),s(46227),s(89789),s(72126);var a=s(74446);s(21202),s(19889),s(70203),s(21703),s(18844),s(70279),s(91644),s(29369);var o=s(45953);s(58129),s(70921),s(30842),s(39050),s(54368),s(51650),s(88179),s(80926),s(8542),s(10188),s(98963),s(7470),s(77420),s(60014),s(13493),s(75908),s(6359),s(7678),s(60897),s(69549),s(33709),s(44312),s(4986),s(52719),s(58912),s(19639),s(36077),s(97715),s(32161),s(82447),s(9713),s(57398),s(49953),s(14710),s(9508),s(62643),s(57883),s(66726),s(30754),s(6946),s(9844),s(25753),s(84683),s(38429),s(89488),s(65311),s(16427),s(61220),s(96683),s(70017),s(89470),s(49126),s(94578),s(4137),s(80396),s(24836),s(86135),s(78929),s(84323),s(1311),s(83200),s(67627),s(65963),s(14130),s(34406),s(42314),s(16663),s(19221),s(93646),s(63787),s(38952),s(40837),s(65635),s(96740),s(63921),s(75990),s(57829),s(63188),s(56877),s(76413),s(47969),s(47238),s(35623),s(77858),s(37202),s(26195),s(14718),s(14327),s(71495),s(53412),s(65836),s(5505),s(24494),s(66295),s(10354),s(19716),s(76244),s(98897),s(46769),s(66079),s(58161),s(28182),s(35794),s(11045);s(2607);(0,r.AO)((e=>"title"===e||"text"===e||"url"===e||"email"===e||"phone_number"===e||"checkbox"===e||"person"===e||"file"===e||"select"===e||"multi_select"===e||"status"===e||"number"===e||"date"===e||"relation"===e||"button"===e||"auto_increment_id"===e||"verification"===e?{true:e}:{false:e}));s(38297),s(606);const n=o.Ak.create();o.PF.create();Date.now();a.mF.fromRecordMap(n),a.zF.fromRecordMap(n);const d=i.om.fromRecordMap(n);i.s8.fromRecordMap(n)},26139:(e,t,s)=>{s.d(t,{K:()=>a});s(67294);var i=s(45238),r=s(85893);const a=(0,i.I)("externalLink",{viewBox:"0 0 17 16",svg:(0,r.jsx)("path",{d:"M4.94922 13.498C4.31641 13.498 3.83789 13.3359 3.51367 13.0117C3.18945 12.6914 3.02734 12.2188 3.02734 11.5938V4.46289C3.02734 3.83398 3.18945 3.35938 3.51367 3.03906C3.83789 2.71875 4.31641 2.55859 4.94922 2.55859H12.0449C12.6777 2.55859 13.1562 2.71875 13.4805 3.03906C13.8047 3.35938 13.9668 3.83398 13.9668 4.46289V11.5938C13.9668 12.2188 13.8047 12.6914 13.4805 13.0117C13.1562 13.3359 12.6777 13.498 12.0449 13.498H4.94922ZM5.01953 12.3438H11.9746C12.2441 12.3438 12.4512 12.2734 12.5957 12.1328C12.7402 11.9922 12.8125 11.7793 12.8125 11.4941V4.55664C12.8125 4.27539 12.7402 4.06445 12.5957 3.92383C12.4512 3.7832 12.2441 3.71289 11.9746 3.71289H5.01953C4.74609 3.71289 4.53711 3.7832 4.39258 3.92383C4.25195 4.06445 4.18164 4.27539 4.18164 4.55664V11.4941C4.18164 11.7793 4.25195 11.9922 4.39258 12.1328C4.53711 12.2734 4.74609 12.3438 5.01953 12.3438ZM10.334 9.54297C10.1855 9.54297 10.0664 9.49609 9.97656 9.40234C9.89062 9.30859 9.84766 9.17969 9.84766 9.01562V8.08398L9.93555 7.24609L9.15039 8.10156L7.09961 10.1465C6.99023 10.2559 6.85742 10.3105 6.70117 10.3105C6.55273 10.3105 6.42969 10.2637 6.33203 10.1699C6.23828 10.0762 6.19141 9.95117 6.19141 9.79492C6.19141 9.6582 6.24609 9.53516 6.35547 9.42578L8.41211 7.36914L9.2793 6.57227L8.47656 6.66602H7.48633C7.32617 6.66602 7.19727 6.62305 7.09961 6.53711C7.00586 6.45117 6.95898 6.33203 6.95898 6.17969C6.95898 6.03516 7.00586 5.91992 7.09961 5.83398C7.19727 5.74414 7.32422 5.69922 7.48047 5.69922H10.2227C10.4062 5.69922 10.5508 5.74609 10.6562 5.83984C10.7617 5.93359 10.8145 6.08398 10.8145 6.29102V9.00977C10.8145 9.16602 10.7695 9.29492 10.6797 9.39648C10.5938 9.49414 10.4785 9.54297 10.334 9.54297Z"})})}}]);