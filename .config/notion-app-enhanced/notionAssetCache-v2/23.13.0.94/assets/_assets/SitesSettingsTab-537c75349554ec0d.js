"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[9582],{93289:(e,t,i)=>{i.d(t,{Z:()=>r});var s=i(67294),n=i(13991),a=i(77907),o=i(85893);const r=function(e){let{firstDayOfWeek:t,value:i,selectValue:r=!0,onChange:l,disabledDays:d}=e;window.__c={n:"DatePicker"};const c=(0,s.useMemo)((()=>new Date(i)),[i]),[u,g]=(0,s.useState)(c),p=(0,s.useRef)(i);(0,s.useLayoutEffect)((()=>{p.current!==i&&(g(new Date(i)),p.current=i)}),[i]);const m=(0,s.useCallback)(((e,t,i)=>{l(e.getTime())}),[l]);return(0,o.jsx)(a.LazyDayPicker,{locale:n.SP,className:"notion-calendar-picker",numberOfMonths:1,weekStartsOn:t,modifiers:r?{value:c}:{},showOutsideDays:!0,fixedWeeks:!0,onDayClick:m,onMonthSelected:g,disabled:d,month:u})}},27386:(e,t,i)=>{i.d(t,{Um:()=>u,ZP:()=>g,kN:()=>c});i(67294);var s=i(480),n=i(24405),a=i(34859),o=i(91754),r=i(61519),l=i(53336),d=i(85893);function c(e){return e?18:60}function u(){return(0,d.jsx)(r.Z,{size:37})}const g=function(e){let{children:t,controlRow:i,bannerText:r,controlRowPaddingTopBottom:u,removeBoxShadow:g,contentPaddingLeftRight:p,controlRowPaddingLeftRight:m,getPaddingTopBottom:h,disableScroller:f}=e;window.__c={n:"SettingBox"};const x=(0,n.Fg)(),b=(0,s.O7)(),{device:y}=b,v=h?h():y.isMobile?18:36;return f?(0,d.jsxs)("div",{style:{paddingLeft:c(y.isMobile),paddingRight:c(y.isMobile)},children:[(0,d.jsx)("div",{style:{paddingTop:v,paddingBottom:v},children:t}),i&&(0,d.jsx)("div",{style:{paddingTop:u,paddingBottom:u,boxShadow:`0 -1px 0 ${x.regularDividerColor}`},children:i})]}):(0,d.jsxs)("div",{style:{display:"flex",flexDirection:"column",width:"100%",height:"100%",backgroundColor:x.cardContentBackground},children:[r&&(0,d.jsx)(o.Z,{styleKey:o.v.Blue,isMobile:!1,children:r}),(0,d.jsx)(l.Z,{type:a.Z.All,style:{flexGrow:1,WebkitOverflowScrolling:"touch",transform:"translateZ(0)",paddingLeft:p??c(y.isMobile),paddingRight:p??c(y.isMobile),paddingTop:r?15:v,paddingBottom:r?22:v},children:t}),i&&(0,d.jsx)("div",{style:{flexGrow:0,flexShrink:0,paddingLeft:m??c(y.isMobile),paddingRight:m??c(y.isMobile),paddingTop:u,paddingBottom:u,boxShadow:g?void 0:`0 -1px 0 ${x.regularDividerColor}`},children:i})]})}},26907:(e,t,i)=>{i.d(t,{B:()=>a,H:()=>s});const s=e=>{const{target:t,inviteTargetsStore:i}=e;return i.state.inviteTargets.some((e=>"newUser"===t.type?e.type===t.type&&t.value.email===e.value.email:"invalidUser"===t.type?e.type===t.type&&t.value.text===e.value.text:e.type===t.type&&e.value.id===t.value.id))};function n(e){return"invalidUser"!==e.type}const a=e=>{const{inviteTargetsStore:t}=e,{inviteTargets:i}=t.state;return i.filter(n)}},57345:(e,t,i)=>{i.d(t,{Cv:()=>j,a6:()=>C,lG:()=>w,qg:()=>Z,zd:()=>P});i(67294);var s=i(33728),n=i(68626),a=i(91155),o=i(72141),r=i(4615),l=i(9291),d=i(36610),c=i(47307),u=i(76464),g=i(64964),p=i(19306),m=i(26907),h=i(46654),f=i(18245),x=i(88923),b=i(99332),y=i(29677),v=i(66708),S=i(28578),M=i(85893);function w(e){x.default.state.open?b.Z.setState({...b.Z.state,open:!0}):v.Z.setState({...v.Z.state,open:!0}),d.DB(e,{share_menu_session_id:S.ZP.state.sessionId})}function C(e){x.default.state.open?b.Z.setState({...b.Z.state,open:!1}):v.Z.setState({...v.Z.state,open:!1}),d.Rb(e,{share_menu_session_id:S.ZP.state.sessionId}),S.ZP.reset()}function j(e){const{success:t,inviteTargets:i,requestedUserEmails:s}=e;if(0!==i.length){if(!t||0!==(null==s?void 0:s.length))return t&&s.length>0?s.length===i.length?void g.oV({label:(0,M.jsx)(l.FormattedMessage,{id:"shareMenu.inviteSuccess.snackbarMessage.requestedUsersOnly",defaultMessage:"Sent request to invite {users} to this page",values:{users:k(i)}})}):void g.oV({label:(0,M.jsx)(l.FormattedMessage,{id:"shareMenu.inviteSuccess.snackbarMessage.requestedAndInvitedUsers",defaultMessage:"Invited {users} and requested inviting {numberOfRequestedUsers, plural, one {{numberOfRequestedUsers} guest} other {{numberOfRequestedUsers} guests}}",values:{users:k(i.filter((e=>!(0,y.fZ)(e)&&!(0,y.cl)(e)||!s.includes(e.value.email)))),numberOfRequestedUsers:s.length}})}):void g.oV({label:(0,M.jsx)(l.FormattedMessage,{id:"shareMenu.inviteFailure.snackbarMessage",defaultMessage:"Failed to invite {users}",values:{users:k(i)}})});g.oV({label:(0,M.jsx)(l.FormattedMessage,{id:"shareMenu.inviteSuccess.snackbarMessage",defaultMessage:"Successfully invited {users}",values:{users:k(i)}})})}}function k(e){return(0,p.W)(e.map((e=>"group"===e.type?e.value.name??"group":"invalidUser"===e.type?e.value.text:e.value.email)))}async function P(e){const{inviteTargetsStore:t}=e,i=(0,M.jsx)(l.FormattedMessage,{id:"shareMenu.closeInviteDialog.confirmationMessage",defaultMessage:"Your changes have not been saved. Discard changes?"}),s=(0,M.jsx)(l.FormattedMessage,{id:"shareMenu.closeInviteDialog.confirmationButton.label",defaultMessage:"Yes"}),n=(0,M.jsx)(l.FormattedMessage,{id:"shareMenu.closeInviteDialog.cancelButton.label",defaultMessage:"Cancel"});if(t.state.inviteTargets.length>0){return(await c.confirmUserActionV2({message:i,acceptLabel:s,cancelLabel:n})).accept}return!1}async function Z(e){const t=f.default.mark("share_menu.invite_user_lag"),{environment:i,blockStore:l,inviteTargetsStore:d,sudoModeStore:c,onInviteClick:g,onInviteComplete:p,inviteOrigin:x,role:b,emailMessage:y,flowId:v}=e;let S={success:!1,requestedUserEmails:[]};try{S=await async function(e){const{environment:t,blockStore:i,sudoModeStore:n,inviteTargetsStore:a,role:l,inviteOrigin:d,emailMessage:c,onInviteStart:g}=e,p=e.flowId||(0,r.ZP)();if(!(0,o.iC)(l))return{success:!1,requestedUserEmails:[]};const{tokenQuery:f,inviteTargets:x}=a.state;if((0,s.oH)(f.trim())&&0===x.length){const e={type:"newUser",value:{email:f.trim()},source:"email"};m.H({target:e,inviteTargetsStore:a})||a.setState({inviteTargets:[...a.state.inviteTargets,e],tokenQuery:""})}const b=h.mU(i,m.B({inviteTargetsStore:a}));null==g||g();const y=await u.n_({environment:t,store:i,sudoModeStore:n,inviteTargets:b,inviteRole:l,isOnboarding:!1,invite:{inviteFlowId:p,inviteMessage:c,inviteOrigin:d}});return{success:y.success,requestedUserEmails:y.success?Object.keys(y.requestedUsers):[]}}({environment:i,blockStore:l,sudoModeStore:c,inviteTargetsStore:d,role:b,emailMessage:y,inviteOrigin:x,onInviteStart:g,flowId:v})}catch(M){n.log({level:"error",from:"shareMenuActions",type:"handleInviteClick",error:(0,a.Ui)(M)})}finally{null==p||p(S.success,S.requestedUserEmails)}f.default.measure(t,{environment:i})}},68973:(e,t,i)=>{i.d(t,{TA:()=>v,Zg:()=>x,eT:()=>S,mk:()=>b});i(21703),i(57658),i(67294);var s=i(29477),n=i(45953),a=i(21202),o=i(9291),r=i(54642),l=i(47307),d=i(4708),c=i(57345),u=i(28578),g=i(79797),p=i(54801),m=i(67181),h=i(85893);const f=50;function x(e){m.Z.resetSitesForSpace(e.id)}async function b(e,t){const{spaceStore:i,currentUserId:o,limit:l}=t;if(!i.id)return;const c=(0,d.Hk)(),[u]=await Promise.all([r.getPublishedPagesForUser(e,{spaceId:i.id,limit:l||f,fetchPublishedMetadata:c}),(0,s.Vs)(1500)]);if("failed"===u.type)throw new Error("Failed to fetch published pages.");if(u.data.recordMap){const e=[],t=n.PF.create(u.data.recordMap),s=u.data.publishedEdits;for(const{model:n}of t)if(n&&n.table===a.iU){const t=g.G.createChildStore(i,{table:a.iU,id:n.id});let o;if(c){const e=s[t.id],i=e&&e.authors?e.authors[0]:void 0;o={publishedTime:e.timestamp,publishedOrCreatedBy:i}}else o={publishedTime:y(t),publishedOrCreatedBy:t.getCreatedByPointer()};e.push({store:t,publishedMetadata:o})}let r=e;return o&&(r=p.S(e,o)),m.Z.initializeSiteResultsForSpace(i.id,r),r}}function y(e){const t=e.getPermissionItems().find((e=>"public_permission"===e.type));return"public_permission"===(null==t?void 0:t.type)?t.added_timestamp:void 0}function v(e){c.lG(e),u.ZP.setState({...u.ZP.state,display:u.wV.Publish,tab:u.XF.Publish})}async function S(e){return new Promise(((t,i)=>{l.showDialog({message:(0,h.jsx)("div",{style:{textAlign:"center"},children:(0,h.jsx)(o.FormattedMessage,{id:"sites.confirmUnpublish.title",defaultMessage:"Unpublish this site?"})}),description:(0,h.jsx)("div",{style:{textAlign:"center"},children:(0,h.jsx)(o.FormattedMessage,{id:"sites.confirmUnpublish.caption",defaultMessage:"{pageTitle} will no longer be live on the web.",values:{pageTitle:e}})}),keepFocus:!0,items:[{label:(0,h.jsx)(o.FormattedMessage,{id:"sites.confirmUnpublish.confirm",defaultMessage:"Unpublish"}),color:"red",onAccept:()=>t(!0)}],showCancel:!0})}))}},65708:(e,t,i)=>{i.r(t),i.d(t,{default:()=>nt});var s=i(67294),n=i(86628),a=i(24405),o=i(82990),r=i(9291),l=i(61519),d=i(74523),c=i(27386),u=i(23189),g=i(4708),p=i(18514),m=i(480),h=i(25651),f=i(21202),x=i(3096),b=i(42922),y=i(73063),v=i(50506),S=i(26388),M=i(64369),w=i(40235),C=i(81236),j=i(79797),k=i(91694),P=i(88893),Z=i(15145),I=i(45238),B=i(85893);const F=(0,I.I)("home",{viewBox:"0 0 18 16",svg:(0,B.jsx)("path",{d:"M4.3584 15.9004H13.6074C14.6943 15.9004 15.3301 15.2646 15.3301 14.2188V7.93652L16.0752 8.55859C16.2598 8.71582 16.4717 8.83203 16.7041 8.83203C17.1484 8.83203 17.4834 8.55176 17.4834 8.11426C17.4834 7.86133 17.3809 7.64941 17.1826 7.47852L15.3301 5.92676V2.95996C15.3301 2.65234 15.1318 2.4541 14.8174 2.4541H13.751C13.4434 2.4541 13.2314 2.65234 13.2314 2.95996V4.16309L10.0664 1.50391C9.42383 0.957031 8.59668 0.957031 7.94727 1.50391L0.824219 7.48535C0.619141 7.64941 0.516602 7.88184 0.516602 8.10059C0.516602 8.50391 0.817383 8.83203 1.30273 8.83203C1.52832 8.83203 1.74023 8.71582 1.9248 8.55859L2.63574 7.9707V14.2188C2.63574 15.2715 3.27148 15.9004 4.3584 15.9004ZM10.9619 9.95996C10.9619 9.63867 10.75 9.42676 10.4287 9.42676H7.57129C7.25 9.42676 7.03809 9.63867 7.03809 9.95996V14.376H4.80273C4.38574 14.376 4.15332 14.1367 4.15332 13.7197V6.69238L8.67871 2.89844C8.88379 2.7207 9.12305 2.7207 9.33496 2.89844L13.8125 6.6582V13.7197C13.8125 14.1367 13.5801 14.376 13.1631 14.376H10.9619V9.95996Z",fill:"#ADACAA"})});var _=i(95369),T=i(39567),D=i(84076),A=i(31278),U=i(76798),H=i(84210),O=i(98742),L=i(98567),V=i(4023);function R(e){let{store:t,...i}=e;window.__c={n:"WithPagePreviewOnHover"};const n=(0,s.useCallback)((e=>(0,B.jsx)(L.E5,{store:t,events:e})),[t]);return(0,B.jsx)(S.ZP,{noStyle:!0,delayThreshold:400,placement:V.u.Bottom,alignment:V.v.Start,renderTooltip:n,...i})}const K=s.memo(R);var E=i(92083);function N(e){window.__c={n:"SiteRecord"};const{store:t,disableClick:i,isPublicHomePage:o}=e,r=(0,n.VK)((()=>{if(t)return{icon:t.getIcon(),isEmptyPage:t.isEmptyPage(),url:(0,H.Hu)({store:t,pageVisitSource:Z.tY.SiteSettings})}}),[t]),l=(0,s.useCallback)((e=>{e.metaKey||E.Z.setState({...E.Z.state,open:!1})}),[]),d=(0,a.yK)((e=>({container:{display:"flex",alignItems:"center",overflow:"hidden"},emptyPageIcon:{height:18,width:18,fill:e.accentColors.gray[500]},iconContainer:{position:"relative",width:20,height:20,marginRight:4},linkBox:{borderRadius:3,maxWidth:o?"88%":"100%"},linkIcon:{position:"absolute",width:10,height:10,right:0,bottom:0},pageRecordContainer:{display:"flex",alignItems:"center",paddingLeft:6,paddingRight:6,paddingTop:2,paddingBottom:2},pageTitle:{wordBreak:"break-word",borderBottom:"0.05em solid rgba(55,53,47,.25)"}})),[o]);if(!t||!r)return null;const c=(0,B.jsxs)("div",{style:d.pageRecordContainer,children:[(0,B.jsxs)("div",{style:d.iconContainer,children:[r.icon?(0,B.jsx)(A.Z,{icon:r.icon,store:t,disabled:!0,size:16,isEmptyPage:r.isEmptyPage,emojiSize:20}):(0,_.S)(d.emptyPageIcon),(0,T.Y)(d.linkIcon)]}),(0,B.jsx)(U.Z,{store:t,style:d.pageTitle})]});return i?(0,B.jsxs)("div",{style:d.container,children:[c,(0,B.jsx)(W,{isPublicHomePage:o})]}):(0,B.jsxs)("div",{style:d.container,children:[(0,B.jsx)(K,{store:t,render:e=>(0,B.jsx)(D.Z,{href:null==r?void 0:r.url,style:d.linkBox,...(0,O.Z)(e,{onClick:l}),children:c})}),(0,B.jsx)(W,{isPublicHomePage:o})]})}function W(e){window.__c={n:"HomePageIndicator"};const{isPublicHomePage:t}=e,i=(0,a.yK)((()=>({homeIcon:{width:18,height:18,marginLeft:4}})),[]);return t?(0,B.jsx)(S.ZP,{renderTooltip:()=>(0,B.jsx)(r.FormattedMessage,{id:"SitesRecord.homePageTooltip",defaultMessage:"This is your homepage on the web"}),placement:S.ug.Bottom,alignment:S.v2.Center,originGap:6,render:e=>(0,B.jsx)("span",{...e,children:F(i.homeIcon)})}):null}var q=i(13490),$=i(8848),G=i(91315),Y=i(54497),z=i(72126),Q=i(74194),X=i(68785),J=i(33929),ee=i(38755);const te=(0,r.defineMessages)({workspaceDomainInputPlaceholder:{id:"spaceBasicSettingsDomain.domainSection.workspaceDomainInput.placeholder",defaultMessage:"Your domain"}});function ie(e){window.__c={n:"DomainNameInput"};const{spaceStore:t,domainName:i,setDomainName:n,domainAvailabilityStatus:o,setDomainAvailabilityStatus:r}=e,l=(0,m.O7)(),d=(0,s.useCallback)((async e=>{const i=(0,ee.$U)(e.target.value);if(i){const e=await x.oM({environment:l,spaceStore:t,domainName:i});r(e)}n(i)}),[l,t,n,r]),c=(0,s.useMemo)((()=>z.Ds(d,300)),[d]),u=(0,a.yK)((e=>({container:{display:"flex",alignItems:"center",maxHeight:28},inputContainer:{flex:1,background:e.inputBackground,borderRadius:4,boxShadow:"rgb(15 15 15 / 10%) 0px 0px 0px 1px inset",display:"flex"},input:{background:"none",boxShadow:"none",padding:"4px 6px",width:"100%"}})),[]);return(0,B.jsxs)("div",{style:u.container,children:[(0,B.jsx)("div",{style:u.inputContainer,children:(0,B.jsx)(Q.Z,{type:"text",style:u.input,value:i,placeholder:J.default.formatMessage(te.workspaceDomainInputPlaceholder),onChange:c})}),i&&"available"===o&&(0,B.jsx)(ne,{}),"inuse"===o&&(0,B.jsx)(ae,{}),"disallowed"===o&&(0,B.jsx)(oe,{}),"loading"===o&&re()]})}const se={fieldContainer:{display:"flex",flexDirection:"row",alignItems:"center",fontSize:"14px"},fieldIcon:{height:16,width:16,margin:"0 4px 0 8px"}};function ne(){window.__c={n:"DomainAvailableLabel"};const e=(0,a.yK)((e=>({container:{...se.fieldContainer,color:e.invoiceGreen},icon:{...se.fieldIcon,color:e.invoiceGreen}})),[]);return(0,B.jsxs)("div",{style:e.container,children:[(0,G.r)(e.icon),(0,B.jsx)("span",{children:(0,B.jsx)(r.FormattedMessage,{defaultMessage:"Available",id:"spaceBasicSettings.domainSection.workspaceDomainInput.validationMessage.available"})})]})}function ae(){window.__c={n:"DomainInUseLabel"};const e=(0,a.yK)((()=>({container:{...se.fieldContainer,color:$.ZP.red}})),[]);return(0,B.jsxs)("div",{style:e.container,children:[(0,Y.t)(se.fieldIcon),(0,B.jsx)("span",{children:(0,B.jsx)(r.FormattedMessage,{defaultMessage:"Used",id:"spaceBasicSettings.domainSection.workspaceDomainInput.validationMessage.used"})})]})}function oe(){window.__c={n:"DomainDisallowedLabel"};const e=(0,a.yK)((()=>({container:{...se.fieldContainer,color:$.ZP.red}})),[]);return(0,B.jsxs)("div",{style:e.container,children:[(0,Y.t)(se.fieldIcon),(0,B.jsx)("span",{children:(0,B.jsx)(r.FormattedMessage,{defaultMessage:"Not allowed",id:"spaceBasicSettings.domainSection.workspaceDomainInput.validationMessage.notAllowed"})})]})}const re=()=>(0,B.jsx)(X.Z,{style:se.loadingSpinner});var le=i(59054),de=i(35840),ce=i(32163),ue=i(53437),ge=i(11470),pe=i(72495),me=i(28020);function he(e){window.__c={n:"SiteSearchInput"};const{initialFocus:t,setPublicHomePageId:i}=e,[n,o]=(0,s.useState)(""),[r,l]=(0,s.useState)(!1),d=(0,a.yK)((()=>({searchResultsPopup:{width:300}})),[]);return(0,B.jsx)(ue.ZP,{alignmentToOrigin:ue.ZP.Alignment.Start,origin:(0,B.jsx)(fe,{initialFocus:t,query:n,setQuery:o,setShowSearchResults:l}),originGap:3,open:r,popupType:ue.ZP.PopupType.Popup,style:d.searchResultsPopup,render:()=>(0,B.jsx)(xe,{query:n,onSelection:i})})}function fe(e){window.__c={n:"SearchInput"};const{initialFocus:t,query:i,setQuery:o,setShowSearchResults:l}=e,d=(0,m.O7)(),c=(0,r.useIntl)(),u=(0,n.VK)((()=>(0,P.M9)(d)),[d]),g=!Boolean(u),p=(0,a.yK)((e=>({input:{flex:1,background:e.inputBackground,borderRadius:4,boxShadow:"rgb(15 15 15 / 10%) 0px 0px 0px 1px inset",display:"flex",paddingLeft:4},icon:{fill:e.mediumIconColor,width:16,height:16,flexGrow:0,flexShrink:0}})),[]),h=(0,s.useCallback)((e=>{o(e.target.value),l(!0)}),[o,l]),f=(0,s.useCallback)((()=>{l(!0)}),[l]),x=(0,s.useCallback)((e=>{"Escape"===e.key&&l(!1)}),[l]);return(0,B.jsx)(Q.Z,{type:"text",style:p.input,focusInitial:t,value:i,disabled:!g,left:(0,de.R)(p.icon),placeholder:c.formatMessage({defaultMessage:"Select a page shared to web",id:"spaceBasicSettings.PublicHomePageSection.input.placeholder"}),onChange:h,onFocus:f,onKeyDown:x})}function xe(e){window.__c={n:"SearchResults"};const{query:t,onSelection:i}=e,s=(0,m.O7)(),o=(0,n.VK)((()=>(0,me.RM)()),[]),[{value:l,status:d}]=(0,le.r5)((()=>x.a2(t,s)),[t,s]),c=(0,a.yK)((()=>({loadingSpinner:{textAlign:"center",visibility:"visible",display:"inline",marginLeft:8}})),[]);if(!(t||l&&0!==l.length))return null;return(0,B.jsx)(ce.Z,{type:ce.i.Vertical,sections:[{key:"public-pages-search-results",render:e=>(0,B.jsx)(pe.Z,{...e}),items:"idle"===d||"pending"===d?[{key:"results-loading-spinner",render:()=>(0,B.jsx)(X.Z,{style:c.loadingSpinner}),action:()=>{}}]:o&&l&&0!==l.length?l.map((e=>{const t=j.G.createChildStore(o,{table:f.iU,id:e.id});return{key:`${e.id}-page`,render:e=>(0,B.jsx)(ge.Z,{store:t,...e}),action:()=>{i(e.id)}}})):[{key:"empty-results",render:()=>(0,B.jsx)(M.Z,{isSmall:!0,style:{marginLeft:8},children:(0,B.jsx)(r.FormattedMessage,{id:"spaceBasicSettings.PublicHomePageSection.dropdownLabel.noResults",defaultMessage:"No results"})}),action:()=>{}}]}],initialFocus:void 0})}function be(e){window.__c={n:"SiteRecordWithInput"};const{spaceStore:t,publicHomePageId:i,setPublicHomePageId:n}=e,[o,r]=(0,s.useState)(!i),l=(0,s.useCallback)((()=>{r(!0)}),[r]),d=(0,s.useCallback)((e=>{n(e),r(!1)}),[n,r]),c=i?j.G.createChildStore(t,{table:f.iU,id:i}):void 0,u=(0,a.yK)((e=>({publicHomePageRecordContainer:{background:e.inputBackground,borderRadius:4,boxShadow:"rgb(15 15 15 / 10%) 0px 0px 0px 1px inset",paddingLeft:4,maxHeight:28,fontSize:14}})),[]);return c&&!o?(0,B.jsx)("div",{style:u.publicHomePageRecordContainer,onClick:l,children:(0,B.jsx)(N,{store:c,disableClick:!0})}):(0,B.jsx)(he,{initialFocus:o,setPublicHomePageId:d})}function ye(e){window.__c={n:"UpdateDomainModal"};const{spaceStore:t,messages:i,existingDomainName:l,existingPublicHomePageId:d,onSubmitDomainSettings:c}=e,u=(0,m.O7)(),[g,p]=(0,s.useState)(l),[h,f]=(0,s.useState)(""),[x,y]=(0,s.useState)(d),v=(0,n.VK)((()=>(0,P.M9)(u)),[u]),S=l!==g&&"available"===h||x!==d,w=(0,a.yK)((()=>({container:{position:"relative",padding:"22px 26px",width:480},title:{fontSize:18,fontWeight:o.Z.fontWeight.semibold},subTitle:{marginTop:3,marginBottom:26},publicHomePageTitleContainer:{display:"flex",alignItems:"center"},upsellButton:{marginTop:16,marginBottom:4,marginLeft:4},submitButtonContainer:{display:"flex",flexDirection:"row-reverse",width:"100%",paddingTop:16},submitButton:{flex:1}})),[]),C=(0,s.useCallback)((()=>{c({environment:u,spaceStore:t,domain:g,shouldUpdateDomain:g!==l,publicHomePageId:x,shouldUpdatePublicHomePageId:x!==d})}),[u,t,g,l,x,d,c]);return(0,B.jsxs)("div",{style:w.container,children:[(0,B.jsx)("div",{style:w.title,children:(0,B.jsx)(r.FormattedMessage,{...i.title})}),(0,B.jsx)(M.Z,{isMultiline:!0,isSmall:!0,isSecondaryColor:!0,style:w.subTitle,children:(0,B.jsx)(r.FormattedMessage,{...i.subTitle})}),(0,B.jsx)(q.Z,{hasMarginTop:!0,children:(0,B.jsx)(r.FormattedMessage,{id:"sites.domains.domainName.title",defaultMessage:"Name"})}),(0,B.jsx)(ie,{spaceStore:t,domainName:g,setDomainName:p,domainAvailabilityStatus:h,setDomainAvailabilityStatus:f}),(0,B.jsxs)("div",{style:w.publicHomePageTitleContainer,children:[(0,B.jsx)(q.Z,{hasMarginTop:!0,children:(0,B.jsx)(r.FormattedMessage,{id:"sites.domains.domainPublicHomePage.title",defaultMessage:"Public Home Page"})}),v&&(0,B.jsx)(k.Z,{subscriptionTier:v,analyticsName:"public_domain_home_page",desktopStyle:w.upsellButton})]}),(0,B.jsx)(be,{spaceStore:t,publicHomePageId:x,setPublicHomePageId:y}),(0,B.jsx)("div",{style:w.submitButtonContainer,children:(0,B.jsx)(b.Z,{onClick:C,isLarge:!0,disabled:!S,style:w.submitButton,children:(0,B.jsx)(r.FormattedMessage,{...i.submitButtonText})})})]})}const ve=(0,r.defineMessages)({title:{id:"sites.addDomain.title",defaultMessage:"Add a new domain"},subTitle:{id:"sites.addDomain.subtitle",defaultMessage:"Add a new domain to publish your sites to. Learn more."},submitButtonText:{id:"sites.addDomain.add",defaultMessage:"Add domain"}}),Se=(0,r.defineMessages)({title:{id:"sites.updateDomain.title",defaultMessage:"Update domain"},subTitle:{id:"sites.updateDomain.subtitle",defaultMessage:"Update an existing domain"},submitButtonText:{id:"sites.updateDomain.update",defaultMessage:"Update domain"}}),Me=[{key:"name",header:(0,B.jsx)(r.FormattedMessage,{id:"sites.domains.domainColumnHeader",defaultMessage:"Domain"}),style:{width:"40%"}},{key:"home-page",header:(0,B.jsx)(r.FormattedMessage,{id:"sites.domains.homePageColumnHeader",defaultMessage:"Home page"}),style:{width:"55%"}},{key:"update",header:(0,B.jsx)(B.Fragment,{}),style:{width:"5%"}}];function we(e){window.__c={n:"DomainsSection"};const{spaceStore:t}=e,i=(0,m.O7)(),[o,l]=(0,s.useState)(!1),[d,c]=(0,s.useState)(),g=(0,n.VK)((()=>t.canAdmin()),[t]),p=(0,n.VK)((()=>(0,P.M9)(i)),[i]),h=(0,n.VK)((()=>{var e;return null===(e=C.Z.getPublicSpaceData(i,t.getSpaceId()))||void 0===e?void 0:e.domain}),[i,t]),y=(0,n.VK)((()=>{var e;return null===(e=C.Z.getPublicSpaceData(i,t.getSpaceId()))||void 0===e?void 0:e.domainIsAutogenerated}),[i,t]),S=(0,n.VK)((()=>{var e;return null===(e=C.Z.getPublicSpaceData(i,t.getSpaceId()))||void 0===e?void 0:e.publicHomePage}),[i,t]),Z=(0,a.yK)((()=>({headerContainer:{display:"flex",justifyContent:"space-between",alignItems:"center"},header:{display:"flex",flexDirection:"column",flex:1},upsellButton:{width:"fit-content"},tableBox:{tableLayout:"fixed"}})),[]),I=([{name:h,isAutogenerated:y,publicHomePageId:S}]||0).map((e=>{const i=e.publicHomePageId?j.G.createChildStore(t,{table:f.iU,id:e.publicHomePageId}):void 0;return{key:e.name||"default-domain",columns:[e.name,p?(0,B.jsx)(k.Z,{subscriptionTier:p,analyticsName:"public_domain_home_page",desktopStyle:Z.upsellButton},`${e.name}-upsell`):(0,B.jsx)(N,{store:i},`${e.name}-home-page`),(0,B.jsx)(Ce,{disabled:!g,onClick:()=>{c(e)}},`${e.name}-update`)]}})),F=(0,s.useCallback)((()=>{c(void 0)}),[c]);return(0,B.jsxs)(B.Fragment,{children:[(0,B.jsxs)(u.Z,{style:Z.headerContainer,children:[(0,B.jsxs)("div",{style:Z.header,children:[(0,B.jsx)(r.FormattedMessage,{id:"sites.domains.title",defaultMessage:"Domains"}),(0,B.jsx)(M.Z,{isSmall:!0,children:(0,B.jsx)(r.FormattedMessage,{id:"sites.domains.caption",defaultMessage:"Pages shared to web will be under one of the domains below."})})]}),(0,B.jsx)(b.Z,{onClick:()=>{l(!0)},isLarge:!0,disabled:!0,children:(0,B.jsx)(r.FormattedMessage,{id:"sites.domains.new",defaultMessage:"Add domain"})})]}),(0,B.jsx)(w.Z,{columns:Me,rows:I,tableStyle:Z.tableBox}),(0,B.jsx)(v.Z,{open:o,onDismiss:()=>{l(!1)},showCloseIcon:!0,render:()=>(0,B.jsx)(ye,{spaceStore:t,messages:ve,onSubmitDomainSettings:()=>{}})}),(0,B.jsx)(v.Z,{open:Boolean(d),onDismiss:F,showCloseIcon:!0,render:()=>d?(0,B.jsx)(ye,{spaceStore:t,messages:Se,existingDomainName:d.name,existingPublicHomePageId:d.publicHomePageId,onSubmitDomainSettings:e=>{x.J_({...e,onSubmit:F})}}):null})]})}function Ce(e){window.__c={n:"UpdateDomainButton"};const{disabled:t,onClick:i}=e,s=(0,a.yK)((()=>({updateButtonIcon:{width:18,height:18}})),[]),n=t?(0,B.jsx)(r.FormattedMessage,{id:"sites.domains.noEditAccess",defaultMessage:"Only admins can update the domain."}):(0,B.jsx)(r.FormattedMessage,{id:"sites.domains.update",defaultMessage:"Update domain"});return(0,B.jsx)(S.ZP,{renderTooltip:()=>n,placement:S.ug.Bottom,render:e=>(0,B.jsx)(y.Z,{...e,iconStyle:s.updateButtonIcon,ariaLabel:"Update domain",icon:h.R,disabled:t,onClick:i})})}i(57658);var je=i(30120),ke=i(7057),Pe=i(7189),Ze=i(40462),Ie=i(27714),Be=i(18442),Fe=i(85354),_e=i(14549),Te=i(893),De=i(12714),Ae=i(64921),Ue=i(36596),He=i(29302),Oe=i(95477),Le=i(32326),Ve=i(259),Re=i(68973),Ke=i(67181),Ee=i(79395),Ne=i(90335);function We(e){window.__c={n:"UpdateSiteSettingsModal"};const{spaceStore:t,blockId:i,onDismiss:s,onUnpublish:o}=e,r=j.G.createChildStore(t,{table:f.iU,id:i}),l=(0,n.VK)((()=>Ne.mk({spaceStore:t,store:r}).mostPermissivePublicItem),[t,r]),d=(0,a.yK)((()=>({container:{position:"relative",paddingLeft:2,paddingRight:2,paddingBottom:6,paddingTop:16,width:480}})),[]);return"none"===l.permissionItem.role?(s(),null):(0,B.jsx)("div",{style:d.container,children:(0,B.jsx)(Ee.Z,{store:r,mostPermissivePublicItem:l,permissionItemArgs:{location:"published_site_settings"},shouldAskForConfirmationOnPublish:!0,onUnpublish:o})})}const qe=5e3;function $e(){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const t=arguments.length>0&&void 0!==arguments[0]&&arguments[0]?"3px 5px":0;return[{key:"page",header:(0,B.jsx)(r.FormattedMessage,{id:"sites.header.pageColumnHeader",defaultMessage:"Page"}),style:{width:"24%",padding:t}},{key:"domain",header:(0,B.jsx)(r.FormattedMessage,{id:"sites.header.domainColumnHeader",defaultMessage:"Domain"}),style:{width:"28%"}},{key:"published-or-created-by",header:e?(0,B.jsx)(r.FormattedMessage,{id:"sites.home.publishedByColumnHeader",defaultMessage:"Published by"}):(0,B.jsx)(r.FormattedMessage,{id:"sites.home.createdByColumnHeader",defaultMessage:"Created by"}),style:{width:"20%",padding:t}},{key:"published-date",header:(0,B.jsx)(r.FormattedMessage,{id:"sites.home.publishedDateColumnHeader",defaultMessage:"Published date"}),style:{width:"16%",padding:t}}]}function Ge(e){return[...$e(!1,e),{key:"view",header:(0,B.jsx)(B.Fragment,{}),style:{width:"4%"}},{key:"copy",header:(0,B.jsx)(B.Fragment,{}),style:{width:"4%"}},{key:"configure",header:(0,B.jsx)(B.Fragment,{}),style:{width:"4%"}}]}function Ye(e){return[...$e(!0,e),{key:"configure",header:(0,B.jsx)(B.Fragment,{}),style:{width:"12%"}}]}function ze(e){let{column:t,onSortableColumnClick:i,header:s}=e;window.__c={n:"HeaderCell"};const r=(0,a.yK)((e=>({wrapper:{display:"flex"},text:{fontSize:o.Z.fontSize.UISmall.desktop,fontWeight:o.Z.fontWeight.regular,color:e.mediumTextColor},sortButton:{display:"flex",alignItems:"center",padding:"3px 5px",overflow:"hidden",maxWidth:"100%",borderRadius:4},sortIcon:{fill:e.mediumTextColor,width:12,height:12,marginLeft:4}})),[]),{sortColumn:l,sortAscending:d}=(0,n.VK)((()=>{const{sortColumn:e,sortAscending:t}=Ke.Z.state;return{sortColumn:e,sortAscending:t}}),[]),c=["page","published-or-created-by","published-date"].includes(t),u=()=>{if(t===l)return(0,Pe.K)({...r.sortIcon,...!d&&{transform:"rotate(180deg)"}})};return s&&c?(0,B.jsx)("div",{style:r.wrapper,children:(0,B.jsxs)(Ae.Z,{style:r.sortButton,onClick:()=>i(t),children:[s,u()]})}):s?(0,B.jsx)("div",{style:r.wrapper,children:s}):(0,B.jsx)(B.Fragment,{children:s})}function Qe(e){window.__c={n:"SitesSection"};const{spaceStore:t}=e,i=(0,m.O7)(),o=i.currentUser.id,l=(0,r.useIntl)(),[d,c]=(0,s.useState)(void 0),p=(0,n.VK)((()=>t.getPublicHomePage()),[t]);(0,s.useEffect)((()=>(Re.mk(i,{spaceStore:t,currentUserId:o,limit:qe}),()=>{Re.Zg(t)})),[i,t,o,p]);const h=(0,n.VK)((()=>(0,g.Hk)()),[]),f=(0,a.yK)((()=>({headerContainer:{display:"flex",justifyContent:"space-between",alignItems:"center"},header:{display:"flex",flexDirection:"column",flex:1},caption:{width:"80%",marginBottom:6},captionCTA:{marginBottom:6,padding:0,paddingLeft:0,paddingRight:0,backgroundColor:void 0,boxShadow:void 0,textAlign:"left",alignItems:"flex-start"},tableBox:{tableLayout:"fixed"},cell:{paddingRight:12,height:44},shimmerBox:{height:12,gap:16,display:"flex",borderRadius:6}})),[]),x=(0,n.VK)((()=>t.canAdmin()),[t]),b=(0,n.VK)((()=>{const e=Ke.Z.getSortedSitesForSpace(t.id,l);if(!e)return;const s=[];for(const n of e){const{store:e,publishedMetadata:a}=n,o=e.id,r=e.canAdmin(),d=a.publishedTime?(0,ke.ZW)(je.ou.fromMillis(a.publishedTime),"medium"):"",u=a.publishedOrCreatedBy,g=u?j.t1.createChildStore(e,u):void 0,m=null==g?void 0:g.getDisplayName(l),h=g instanceof j.U6?(0,B.jsx)(He.Z,{userStore:g,avatarSize:20,style:{width:"fit-content",maxWidth:"98%"}},`${o}-published-or-created-by`):(0,B.jsx)(Je,{text:m},`${o}-published-or-created-by`);s.push({key:o,columns:[(0,B.jsx)(N,{store:e,isPublicHomePage:o===p},o),(0,B.jsx)(Xe,{spaceStore:t},`${o}-domain`),h,(0,B.jsx)(Je,{text:d},`${o}-published-on`),(0,B.jsx)(et,{store:e},`${o}-view-site`),(0,B.jsx)(tt,{store:e},`${o}-copy-site-link`),(0,B.jsx)(it,{disabled:!r,onClick:()=>{c(o),_e.gV(i,{action:"configure_site"})}},`${o}-configure-site`)]})}return[...s.filter((e=>e.key===p)),...s.filter((e=>e.key!==p))]}),[t,p,l,i]),y=(0,s.useCallback)((()=>{c(void 0)}),[c]),S=(0,s.useMemo)((()=>Array.from({length:9}).map(((e,t)=>({columns:Array.from({length:5}).map(((e,t)=>(0,B.jsx)(Ue.Z,{style:f.shimmerBox},t))),key:`shimmerRow-${t}`})))),[f.shimmerBox]),C=!b,k=b&&0===b.length,P=(0,s.useCallback)((e=>{const{sortColumn:t,sortAscending:i}=Ke.Z.state,s=e!==t||!i;Ke.Z.setState({...Ke.Z.state,sortAscending:s,sortColumn:e})}),[]);return(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(u.Z,{style:f.headerContainer,children:(0,B.jsxs)("div",{style:f.header,children:[(0,B.jsx)(r.FormattedMessage,{id:"sites.home.title",defaultMessage:"Published sites"}),x?(0,B.jsx)(Ve.V,{style:f.captionCTA,title:(0,B.jsx)(r.FormattedMessage,{id:"sites.learnAboutDomains.setDomainAndHomePage",defaultMessage:"You can set up a public domain and a home page in your <settings>workspace settings</settings>.",values:{settings:e=>(0,B.jsx)(Le.x,{children:e})}})}):(0,B.jsx)(M.Z,{isSmall:!0,style:f.caption,children:(0,B.jsx)(r.FormattedMessage,{id:"sites.home.caption",defaultMessage:"See all pages you can access that are published to the web."})})]})}),C?(0,B.jsx)(w.Z,{columns:Ye(h),rows:S,tableStyle:f.tableBox,cellStyle:f.cell}):(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(w.Z,{columns:Ge(h).map((e=>({key:e.key,header:(0,B.jsx)(ze,{column:e.key,onSortableColumnClick:P,header:e.header}),style:e.style}))),rows:b,tableStyle:f.tableBox,cellStyle:f.cell}),k&&(0,B.jsx)(st,{})]}),(0,B.jsx)(v.Z,{open:Boolean(d),onDismiss:y,showCloseIcon:!0,render:()=>d?(0,B.jsx)(We,{spaceStore:t,blockId:d,onDismiss:y,onUnpublish:()=>{Ke.Z.removeSiteFromSpace(t.id,d)}}):null})]})}function Xe(e){window.__c={n:"DomainTag"};const{spaceStore:t}=e,i=(0,n.VK)((()=>`${t.getPublicContentDomain()}.${Oe.default.publicDomainName}`),[t]),s=(0,a.yK)((e=>({tag:{width:"fit-content",maxWidth:"98%",paddingLeft:6,paddingRight:6,borderRadius:3,background:e.buttonHoveredBackground,...o.Z.textOverflowStyle}})),[]);return(0,B.jsx)("div",{style:s.tag,children:i})}function Je(e){window.__c={n:"PublishedMetadataText"};const{text:t}=e,i=(0,a.yK)((()=>({text:{width:"fit-content",maxWidth:"98%",...o.Z.textOverflowStyle}})),[]);return t?(0,B.jsx)("div",{style:i.text,children:t}):null}function et(e){window.__c={n:"ViewSiteButton"};const{store:t}=e,i=(0,m.O7)(),n=(0,a.yK)((e=>({viewSiteButtonIcon:{width:18,height:18,fill:e.accentColors.gray[500]}})),[]),o=(0,s.useCallback)((()=>{const e=(0,H.Hu)({store:t,preferPublicLink:!0,getSpaceDomain:()=>{var e;return null===(e=C.Z.getPublicSpaceData(i,t.getSpaceId()))||void 0===e?void 0:e.domain},pageVisitSource:Z.tY.SiteSettings});De.D({environment:i,url:e}),_e.gV(i,{action:"view_site"})}),[t,i]);return(0,B.jsx)(S.ZP,{renderTooltip:()=>(0,B.jsx)(r.FormattedMessage,{id:"sites.viewSite.tooltip",defaultMessage:"View site"}),placement:S.ug.Bottom,render:e=>(0,B.jsx)(y.Z,{...e,ariaLabel:"View site",icon:Ze.o,iconStyle:n.viewSiteButtonIcon,onClick:o})})}function tt(e){window.__c={n:"CopySiteLinkButton"};const{store:t}=e,i=(0,m.O7)(),n=(0,a.yK)((e=>({copySiteLinkButtonIcon:{width:16,height:16,fill:e.accentColors.gray[500]}})),[]),o=(0,s.useCallback)((()=>{const e=(0,H.Hu)({store:t,preferPublicLink:!0,getSpaceDomain:()=>{var e;return null===(e=C.Z.getPublicSpaceData(i,t.getSpaceId()))||void 0===e?void 0:e.domain},pageVisitSource:Z.tY.SiteSettings});Te.RD({environment:i,stringValue:e,copiedMessage:Te.tq.copiedLinkToClipboard}),_e.gV(i,{action:"copy_site_link"})}),[t,i]);return(0,B.jsx)(S.ZP,{renderTooltip:()=>(0,B.jsx)(r.FormattedMessage,{id:"sites.copySiteLink.tooltip",defaultMessage:"Copy link to site"}),placement:S.ug.Bottom,render:e=>(0,B.jsx)(y.Z,{...e,ariaLabel:"Copy link to site",icon:Ie.N,iconStyle:n.copySiteLinkButtonIcon,onClick:o})})}function it(e){window.__c={n:"ConfigureSiteButton"};const{disabled:t,onClick:i}=e,s=(0,a.yK)((e=>({configureButtonIcon:{width:16,height:16,fill:e.accentColors.gray[500]}})),[]),n=t?(0,B.jsx)(r.FormattedMessage,{id:"sites.configureButton.noEditAccessTooltip",defaultMessage:"You do not have access to update the settings for this published site."}):(0,B.jsx)(r.FormattedMessage,{id:"sites.configureButton.tooltip",defaultMessage:"Configure site settings"});return(0,B.jsx)(S.ZP,{renderTooltip:()=>n,placement:S.ug.Bottom,render:e=>(0,B.jsx)(y.Z,{...e,ariaLabel:"Configure site settings",icon:Be.H,iconStyle:s.configureButtonIcon,disabled:t,onClick:i})})}function st(){window.__c={n:"NoSitesMessage"};const e=(0,a.yK)((e=>({container:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",paddingTop:170,paddingBottom:170,borderBottom:1,borderBottomStyle:"solid",borderBottomColor:e.regularDividerColor},message:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center"},emptyIcon:{height:32,width:32,color:e.mediumIconColor,marginRight:6},learnMoreButton:{fontWeight:o.Z.fontWeight.regular}})),[]);return(0,B.jsxs)("div",{style:e.container,children:[(0,Fe.u)(e.emptyIcon),(0,B.jsx)(M.Z,{children:(0,B.jsx)(r.FormattedMessage,{id:"sites.results.empty",defaultMessage:"You have no published sites in this workspace"})}),(0,B.jsx)("div",{style:e.message}),(0,B.jsx)(d.Z,{buttonStyle:e.learnMoreButton,title:(0,B.jsx)(r.FormattedMessage,{id:"sites.caption.learnMore",defaultMessage:"Learn more about publishing"}),href:(0,p.UY)("guides.autogeneratedDomains"),analyticsFrom:"sites_settings"})]})}function nt(e){window.__c={n:"SitesSettingsTab"};const{spaceStore:t}=e,i=(0,n.VK)((()=>(0,g.$d)()),[]),s=(0,a.yK)((()=>({headerContainer:{display:"flex"},titleContainer:{flex:1},learnMoreButton:{fontWeight:o.Z.fontWeight.regular}})),[]);return(0,B.jsxs)(c.ZP,{children:[(0,B.jsx)(u.Z,{large:!0,divider:"full",children:(0,B.jsxs)("div",{style:s.headerContainer,children:[(0,B.jsx)("div",{style:s.titleContainer,children:(0,B.jsx)(r.FormattedMessage,{id:"sites.heading.title",defaultMessage:"Sites"})}),(0,B.jsx)(d.Z,{buttonStyle:s.learnMoreButton,title:(0,B.jsx)(r.FormattedMessage,{id:"sites.heading.learnMore",defaultMessage:"Learn more"}),href:(0,p.UY)("guides.autogeneratedDomains"),analyticsFrom:"sites_settings"})]})}),i&&(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(we,{spaceStore:t}),(0,B.jsx)(l.Z,{size:36,isHidden:!0})]}),(0,B.jsx)(Qe,{spaceStore:t})]})}},54801:(e,t,i)=>{i.d(t,{N:()=>o,S:()=>a});var s=i(72141),n=i(46654);function a(e,t){return e.sort(((e,i)=>{const s=e.store.canAdmin();if(s===i.store.canAdmin()){if(t){var n,a;if((null===(n=e.publishedMetadata.publishedOrCreatedBy)||void 0===n?void 0:n.id)===t)return-1;if((null===(a=i.publishedMetadata.publishedOrCreatedBy)||void 0===a?void 0:a.id)===t)return 1}return 0}return s?-1:1}))}function o(e){const{environment:t,store:i}=e;if(!i.pathIsAccessibleAndAlive())return!1;return!!n.YO(i).find((e=>(0,s.$D)(e.permissionItem)&&"none"!==e.permissionItem.role))&&!n.IJ(t,i)}},67181:(e,t,i)=>{i.d(t,{Z:()=>l});var s=i(49085),n=i(72126),a=i(70203),o=i(79797);class r extends s.default{getInitialState(){return{sites:{},sortAscending:!0,sortColumn:void 0}}initializeSiteResultsForSpace(e,t){this.state.sites[e]=t,this.emit()}getSortedSitesForSpace(e,t){const{sortAscending:i,sortColumn:s}=this.state,r=this.state.sites[e];if(r)switch(s){case"page":return n.Xo(r,(e=>a.QaF(e.store.getTitleValue()).toLowerCase()),i?"asc":"desc");case"published-or-created-by":return n.Xo(r,(e=>{const i=e.publishedMetadata.publishedOrCreatedBy,s=i?o.t1.createChildStore(e.store,i):void 0;return null==s?void 0:s.getDisplayName(t).toLowerCase()}),i?"asc":"desc");case"published-date":return n.Xo(r,(e=>e.publishedMetadata.publishedTime),i?"asc":"desc");default:return r}}removeSiteFromSpace(e,t){const i=this.state.sites[e];i&&(this.state.sites[e]=i.filter((e=>e.store.id!==t)),this.emit())}resetSitesForSpace(e){this.state.sites[e]=void 0}}const l=new r},56638:(e,t,i)=>{i.d(t,{Z:()=>a});var s=i(49085);class n extends s.default{getInitialState(){return{open:!1}}}const a=new n},87199:(e,t,i)=>{i.d(t,{k:()=>s});const s=(0,i(9291).defineMessages)({paymentMethodUnverified:{id:"subscriptions.paymentMethodUnverified",defaultMessage:"Your payment is being processed. Please try again when your payment has completed."},otherPaymentMethod:{id:"subscriptions.otherPaymentMethod",defaultMessage:"Other"}})},44041:(e,t,i)=>{i.d(t,{y:()=>v});i(67294);var s=i(47425),n=i(9291),a=i(86572),o=i(47307),r=i(33929),l=i(52533),d=i(80444),c=i(92083),u=i(39343),g=i(87199),p=i(70060),m=i(88893),h=i(35057),f=i(88280),x=i(34583),b=i(64891),y=i(85893);const v=async function(e,t){var i;a.sA(e,{from:t.from,for_subscription_tier:t.for,addOnFeature:t.addOnFeature});if((0,h.QM)()&&["block_limit_sidebar","block_limit_settings","block_limit_banner"].includes(t.from)&&!t.addOnFeature&&(0,p.XA)(e))return void c.Z.setState({open:!0,openedFrom:"upsell",currentTab:"plans",defaultSubtab:void 0,highlightedSetting:void 0});if(!t.addOnFeature&&(0,s.QM)(t.for))return;const v=(0,l.S$)({environment:e})&&"personal"===t.for;if(e.device.isMobileNative){if("ai"===t.addOnFeature){const t=(0,l.Y2)({environment:e})?(0,y.jsx)(n.FormattedMessage,{id:"upsellActions.noIAPForAIWithExternalPurchaseOption",defaultMessage:"This workspace has used all of its free AI responses. Visit on desktop to purchase Notion AI and go unlimited."}):(0,y.jsx)(n.FormattedMessage,{id:"upsellActions.noIAPForAIWithoutExternalPurchaseOption",defaultMessage:"This workspace has used all of its free AI responses. Unfortunately, additional AI responses cannot be purchased on this platform."});return void o.showErrorMessage(t)}if(!v)return}const S=d.default.state.currentSpaceStore;if(!S)return;if(!S.canAdmin())return;await x.bi(e);const M=f.subscriptionDataStoreInstance.state;if(!M)return;if("unsubscribed_admin"!==M.type&&"subscribed_admin"!==M.type)return void(t.dontOpenPlansOnCancel||c.Z.setState({open:!0,openedFrom:"upsell",currentTab:"plans",defaultSubtab:void 0,highlightedSetting:void 0}));if(m.ri(M))return void o.showErrorMessage(r.default.formatMessage(g.k.paymentMethodUnverified));if(m.Q6(M)){const e=(0,y.jsx)(n.FormattedMessage,{id:"upsellActions.referToSalesRep",defaultMessage:"This workspace is part of a managed account. Please contact your account representative to discuss any changes to your subscription."});return void o.showErrorMessage(e)}if(v)return void(e.mobileNative&&S.id&&e.mobileNative.openUpgradeModal(S.id));if("revenueCat"===(null===(i=M.customerData)||void 0===i?void 0:i.activeSubscriptionPlatform)){const e=(0,y.jsx)(n.FormattedMessage,{id:"upsellActions.switchPlanFromInAppPurchase",defaultMessage:"You're currently subscribed through an in-app purchase with Apple. To switch plans, cancel your subscription with Apple first."});return void o.showErrorMessage(e)}const w=m.XX(M);if(t.addOnFeature&&(0,u.Fk)(w)){const e=(0,y.jsx)(n.FormattedMessage,{id:"upsellActions.noAddOnPurchaseDuringFreeTrial",defaultMessage:"Unfortunately, additional {addOn, select, ai {AI responses} other {features}} cannot be purchased while a workspace is on a free trial.",values:{addOn:t.addOnFeature}});o.showErrorMessage(e)}else{if(w&&m.MM(M))return t.addOnFeature?void b.af({environment:e,from:t.from,view:"add_ons",addOnFeature:t.addOnFeature,billingInterval:w.interval,pageSection:t.pageSection}):void b.af({environment:e,from:t.from,view:"plans",temporarySubscriptionTier:t.for,billingInterval:w.interval,pageSection:t.pageSection});{const i=(0,p.px)(e,t.for)?"ai_fifty_percent":void 0;x.I0(e,{subscriptionTier:t.for,from:t.from,addOnFeature:t.addOnFeature,coupon:i,isTrial:t.isTrial})}}}},91694:(e,t,i)=>{i.d(t,{Z:()=>x});i(67294);var s=i(480),n=i(86628),a=i(24405),o=i(8848),r=i(47425),l=i(97880),d=i(82990),c=i(9291),u=i(74136),g=i(26388),p=i(44041),m=i(70060),h=i(32856),f=i(85893);const x=function(e){let{subscriptionTier:t,mobileStyle:i,desktopStyle:x,analyticsName:b,onClick:y}=e;window.__c={n:"UpsellButton"};const v=(0,a.Fg)(),S=(0,s.O7)(),{device:M}=S,w=M.isIOS&&M.isNative,C=(0,n.VK)((()=>function(e,t){if(!(0,m.R$)())return{};switch(e){case"plus":case"business":case"enterprise":return{color:t.blueColor,background:"light"===t.mode?o.ZP.diffBackground:"rgba(35, 131, 226, 0.2)",fontWeight:d.Z.fontWeight.medium};default:return{}}}(t,v)),[t,v]);if(w)return null;let j;return"personal"===t?j=(0,f.jsx)(c.FormattedMessage,{defaultMessage:"Personal Pro",id:"upgradeButton.personal.text"}):(0,r.eR)(t)?j=(0,f.jsx)(h.D,{experimentId:"upsell_colors",groups:{control:(0,f.jsx)(c.FormattedMessage,{defaultMessage:"Plus",id:"upgradeButton.plus.text"}),on:(0,f.jsx)(c.FormattedMessage,{defaultMessage:"Plus ↗",id:"upgradeButton.plus.textWithArrow"})}}):(0,r.NG)(t)?j=(0,f.jsx)(h.D,{experimentId:"upsell_colors",groups:{control:(0,f.jsx)(c.FormattedMessage,{defaultMessage:"Business",id:"upgradeButton.business.text"}),on:(0,f.jsx)(c.FormattedMessage,{defaultMessage:"Business ↗",id:"upgradeButton.business.textWithArrow"})}}):(0,r.wP)(t)?j=(0,f.jsx)(h.D,{experimentId:"upsell_colors",groups:{control:(0,f.jsx)(c.FormattedMessage,{defaultMessage:"Enterprise",id:"upgradeButton.enterprise.text"}),on:(0,f.jsx)(c.FormattedMessage,{defaultMessage:"Enterprise ↗",id:"upgradeButton.enterprise.textWithArrow"})}}):(0,l.t1)(t),M.isMobile?(0,f.jsx)(u.Z,{mobileStyle:i,children:j}):(0,f.jsx)(g.ZP,{delayThreshold:120,placement:g.ug.Bottom,renderTooltip:()=>(0,f.jsxs)("div",{style:{maxWidth:500},children:[(0,f.jsx)(c.FormattedMessage,{defaultMessage:"Upgrade to use this feature.",id:"upgradeButton.upgrade.tooltip"}),(0,f.jsx)("br",{}),(0,f.jsx)(c.FormattedMessage,{defaultMessage:"Click to learn more.",id:"upgradeButton.learnMore.tooltip"})]}),originGap:6,render:e=>(0,f.jsx)(u.Z,{desktopStyle:x,innerStyle:C,onClick:e=>function(e,t,i,s,n){p.y(s,{from:t,for:i}),n&&n(e)}(e,b,t,S,y),...e,children:j})})}},54669:(e,t,i)=>{i.d(t,{Z:()=>d});i(67294);var s=i(480),n=i(26388),a=i(98742),o=i(44041),r=i(91694),l=i(85893);const d=function(e){window.__c={n:"UpsellGate"};const t=(0,s.O7)(),{render:i,requireUpgradeToTier:d,analyticsName:c,renderUpgradeTooltip:u,onUpgradeClick:g,alwaysAllowClick:p,tooltipPlacement:m,upgradeButtonDesktopStyle:h,upgradeButtonMobileStyle:f}=e;let x,{onClick:b,renderTooltip:y}=e;return d&&(x=(0,l.jsx)(r.Z,{subscriptionTier:d,analyticsName:c,desktopStyle:{display:"inline-block",pointerEvents:"none",...h},mobileStyle:{display:"inline-block",pointerEvents:"none",...f}}),p||(b=e=>{o.y(t,{from:c,for:d}),g&&g(e)},y=u)),(0,l.jsx)(n.ZP,{renderTooltip:y||(()=>null),render:e=>i((0,a.Z)(e,{onClick:b}),x),disableTooltip:!y,placement:m})}},39343:(e,t,i)=>{i.d(t,{Fk:()=>r,U6:()=>d,nx:()=>l});var s=i(30120),n=i(13991),a=i(7057),o=i(95477);function r(e){return!(null==e||!e.trialEnd)&&e.trialEnd>=s.ou.now().toSeconds()}function l(e){const t=function(e){if(!r(e))return;const t=1e3*(null==e?void 0:e.trialEnd);return null!=e&&e.periodEnd&&e.periodEnd>=s.ou.now().toSeconds()&&e.periodEnd<t?e.periodEnd:t}(e);return t?(0,a.Yx)(t,"long",n.SP):void 0}function d(e){return e?o.default.trials[e.id].duration:o.default.trials.default.duration}},7189:(e,t,i)=>{i.d(t,{K:()=>a});i(67294);var s=i(45238),n=i(85893);const a=(0,s.I)("arrowDownSmall",{viewBox:"0 0 12 12",svg:(0,n.jsx)("path",{d:"M5.99756 0.850098C5.53564 0.850098 5.21875 1.17236 5.21875 1.65576V7.61768L5.27246 8.7832L4.19287 7.53711L2.98438 6.33398C2.84473 6.18896 2.66211 6.09229 2.42578 6.09229C2.00684 6.09229 1.68994 6.40381 1.68994 6.84424C1.68994 7.04834 1.77051 7.23633 1.93164 7.40283L5.42285 10.8994C5.56787 11.0498 5.78809 11.1357 5.99756 11.1357C6.2124 11.1357 6.42725 11.0498 6.57227 10.8994L10.0688 7.40283C10.23 7.23633 10.3105 7.04834 10.3105 6.84424C10.3105 6.40381 9.99365 6.09229 9.57471 6.09229C9.34375 6.09229 9.16113 6.18896 9.01611 6.33398L7.80762 7.53711L6.72803 8.7832L6.77637 7.61768V1.65576C6.77637 1.17236 6.46484 0.850098 5.99756 0.850098Z"})})},91315:(e,t,i)=>{i.d(t,{r:()=>a});i(67294);var s=i(45238),n=i(85893);const a=(0,s.I)("circleCheckFilled",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M8 16c4.377 0 8-3.631 8-8 0-4.376-3.631-8-8.008-8C3.624 0 0 3.624 0 8c0 4.369 3.631 8 8 8zm-.886-4.165c-.267 0-.487-.11-.69-.384l-1.97-2.416a.852.852 0 01-.187-.51c0-.352.274-.643.627-.643.228 0 .4.07.596.33l1.592 2.055 3.35-5.38c.148-.236.352-.362.556-.362.345 0 .667.236.667.604 0 .173-.102.353-.196.518l-3.686 5.804c-.165.259-.393.384-.66.384z"})})},40462:(e,t,i)=>{i.d(t,{o:()=>a});i(67294);var s=i(45238),n=i(85893);const a=(0,s.I)("globe2",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M8 15.126C11.8623 15.126 15.0615 11.9336 15.0615 8.06445C15.0615 4.20215 11.8623 1.00293 7.99316 1.00293C4.13086 1.00293 0.938477 4.20215 0.938477 8.06445C0.938477 11.9336 4.1377 15.126 8 15.126ZM3.88477 3.76465C4.56836 3.11523 5.39551 2.61621 6.31836 2.34277C5.83301 2.82812 5.42285 3.51172 5.11523 4.3457C4.63672 4.19531 4.22656 3.99707 3.88477 3.76465ZM9.68848 2.34961C10.6045 2.62305 11.4316 3.11523 12.1084 3.76465C11.7734 4.00391 11.3633 4.19531 10.8848 4.35254C10.5771 3.51172 10.167 2.82812 9.68848 2.34961ZM8.47852 2.56836C9.0459 2.8418 9.56543 3.58008 9.93457 4.58496C9.4834 4.66699 8.99805 4.71484 8.47852 4.73535V2.56836ZM6.06543 4.58496C6.44141 3.58008 6.9541 2.8418 7.52148 2.56836V4.73535C7.00195 4.71484 6.5166 4.66699 6.06543 4.58496ZM2.05273 7.58594C2.14844 6.42383 2.58594 5.35059 3.25586 4.46875C3.67285 4.77637 4.21289 5.04297 4.8418 5.24121C4.66406 5.95215 4.54785 6.74512 4.51367 7.58594H2.05273ZM11.4863 7.58594C11.4521 6.74512 11.3359 5.95215 11.1582 5.24121C11.7871 5.04297 12.3271 4.7832 12.7373 4.46875C13.4141 5.35059 13.8516 6.42383 13.9473 7.58594H11.4863ZM5.49121 7.58594C5.52539 6.84082 5.62793 6.12988 5.78516 5.4873C6.33203 5.59668 6.91309 5.66504 7.52148 5.69238V7.58594H5.49121ZM8.47852 7.58594V5.69238C9.08691 5.66504 9.66797 5.59668 10.2148 5.4873C10.3721 6.12988 10.4746 6.84082 10.5088 7.58594H8.47852ZM2.05273 8.54297H4.51367C4.54785 9.39746 4.66406 10.1973 4.8418 10.915C4.21973 11.1133 3.68652 11.373 3.27637 11.6807C2.59277 10.792 2.14844 9.71191 2.05273 8.54297ZM5.49121 8.54297H7.52148V10.4707C6.91992 10.498 6.33203 10.5664 5.79199 10.6689C5.62793 10.0195 5.51855 9.29492 5.49121 8.54297ZM8.47852 10.4707V8.54297H10.5088C10.4814 9.29492 10.3721 10.0195 10.208 10.6689C9.66797 10.5664 9.08691 10.498 8.47852 10.4707ZM11.1582 10.915C11.3428 10.1973 11.4521 9.39746 11.4863 8.54297H13.9473C13.8516 9.71191 13.4072 10.792 12.7236 11.6807C12.3135 11.373 11.7803 11.1133 11.1582 10.915ZM8.47852 11.4277C8.99121 11.4482 9.47656 11.4961 9.9209 11.5781C9.55176 12.5625 9.03906 13.2939 8.47852 13.5605V11.4277ZM6.0791 11.5781C6.52344 11.4961 7.00879 11.4482 7.52148 11.4277V13.5605C6.96094 13.2939 6.44824 12.5625 6.0791 11.5781ZM3.90527 12.3848C4.24023 12.1523 4.65039 11.9609 5.12207 11.8105C5.42969 12.6309 5.83301 13.3008 6.30469 13.7793C5.40234 13.5059 4.58203 13.0205 3.90527 12.3848ZM10.8779 11.8105C11.3496 11.9609 11.7598 12.1523 12.0947 12.3848C11.418 13.0205 10.5977 13.5059 9.69531 13.7793C10.167 13.3008 10.5703 12.6309 10.8779 11.8105Z"})})},13530:(e,t,i)=>{i.d(t,{s:()=>a});i(67294);var s=i(45238),n=i(85893);const a=(0,s.I)("historyForward",{viewBox:"0 0 14 14",svg:(0,n.jsx)("polygon",{points:"11.14107 6.25324 5.94392 1.0561 7 0 13.471958 6.47196 14 7 13.471958 7.52804 7 14 5.94392 12.94392 11.14107 7.74676 0 7.74676 1.77635684e-15 6.25324"})})}}]);